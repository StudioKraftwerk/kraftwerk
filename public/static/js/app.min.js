/*
 RequireJS 2.1.17 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/

/*! @source http://purl.eligrey.com/github/Xccessors/blob/master/xccessors-standard.js*/

// MIT license

/*
 Copyright (c) 2010, Linden Research, Inc.
 Copyright (c) 2014, Joshua Bell

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$
 */

/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

/*!
 * VERSION: 1.18.2
 * DATE: 2015-12-22
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2016, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/

/*!
 * VERSION: 1.18.0
 * DATE: 2015-09-05
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/

/*!
 * VERSION: 0.9.9
 * DATE: 2015-04-28
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * ThrowPropsPlugin is a Club GreenSock membership benefit; You must have a valid membership to use
 * this code without violating the terms of use. Visit http://greensock.com/club/ to sign up or get more details.
 * This work is subject to the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */

/*!
 * VERSION: 0.14.1
 * DATE: 2015-09-05
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * Requires TweenLite and CSSPlugin version 1.17.0 or later (TweenLite contains both TweenLite and CSSPlugin). ThrowPropsPlugin is required for momentum-based continuation of movement after the mouse/touch is released (ThrowPropsPlugin is a membership benefit of Club GreenSock - http://greensock.com/club/).
 *
 * @license Copyright (c) 2008-2015, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */

/**
 * @license
 * lodash 3.10.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash -p -o ./lodash.min.js`
 */

/*! jQuery v2.1.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-deprecated,-event-alias,-wrap | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

//     (c) 2015 Superhero Cheesecake, Rian Verhagen
//     Superhero.js depends on Backbone http://backbone.js

// CUSTOM
// ResizeManager.js 0.0.4
// (c) 2015 Superhero Cheesecake

// threejs.org/license

/**
 * @author alteredq / http://alteredqualia.com/
 *
 * Film grain & scanlines shader
 *
 * - ported from HLSL to WebGL / GLSL
 * http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html
 *
 * Screen Space Static Postprocessor
 *
 * Produces an analogue noise overlay similar to a film grain / TV static
 *
 * Original implementation and noise algorithm
 * Pat 'Hawthorne' Shearon
 *
 * Optimized scanlines + noise version with intensity scaling
 * Georg 'Leviathan' Steinrohder
 *
 * This version is provided under a Creative Commons Attribution 3.0 License
 * http://creativecommons.org/licenses/by/3.0/
 */

/*!
* @license PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

var requirejs,require,define;(function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var r in e)if(t(e,r)&&n(e[r],r))break}function U(e,n,r,i){return n&&B(n,function(n,s){if(r||!t(e,s))i&&"object"==typeof n&&n&&!H(n)&&!G(n)&&!(n instanceof RegExp)?(e[s]||(e[s]={}),U(e[s],n,r,i)):e[s]=n}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var r,i,s,o,u,a,f,l,t=t&&t.split("/"),c=A.map,h=c&&c["*"];if(e){e=e.split("/"),i=e.length-1,A.nodeIdCompat&&Q.test(e[i])&&(e[i]=e[i].replace(Q,"")),"."===e[0].charAt(0)&&t&&(i=t.slice(0,t.length-1),e=i.concat(e)),i=e;for(s=0;s<i.length;s++)(o=i[s],"."===o)?(i.splice(s,1),s-=1):".."===o&&0!==s&&(1!==s||".."!==i[2])&&".."!==i[s-1]&&0<s&&(i.splice(s-1,2),s-=2);e=e.join("/")}if(n&&c&&(t||h)){i=e.split("/"),s=i.length;e:for(;0<s;s-=1){u=i.slice(0,s).join("/");if(t)for(o=t.length;0<o;o-=1)if(n=m(c,t.slice(0,o).join("/")))if(n=m(n,u)){r=n,a=s;break e}!f&&h&&m(h,u)&&(f=m(h,u),l=s)}!r&&f&&(r=f,a=l),r&&(i.splice(0,a,r),e=i.join("/"))}return(r=m(A.pkgs,e))?r:e}function r(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=m(A.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,u,a=null,f=t?t.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(q+=1)),e=s(e),a=e[0],e=e[1],a&&(a=n(a,f,i),u=m(j,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),e=s(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(W+=1):"",{prefix:a,name:h,parentMap:t,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(O,t);return n||(n=O[t]=new x.Module(e)),n}function f(e,n,r){var i=e.id,s=m(O,i);t(j,i)&&(!s||s.defineEmitComplete)?"defined"===n&&r(j[i]):(s=a(e),s.error&&"error"===n)?r(s.error):s.on(n,r)}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(v(n,function(t){if(t=m(O,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&g.onError(e)}function c(){R.length&&(ha.apply(P,[P.length,0].concat(R)),R=[])}function h(e){delete O[e],delete _[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,v(e.depMaps,function(r,i){var s=r.id,o=m(O,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,j[s]),e.check()):p(o,t,n))}),n[r]=!0)}function d(){var e,t,n=(e=1e3*A.waitSeconds)&&x.startTime+e<(new Date).getTime(),s=[],o=[],u=!1,a=!0;if(!E){E=!0,B(_,function(e){var f=e.map,l=f.id;if(e.enabled&&(f.isDefine||o.push(e),!e.error))if(!e.inited&&n)i(l)?u=t=!0:(s.push(l),r(l));else if(!e.inited&&e.fetched&&f.isDefine&&(u=!0,!f.prefix))return a=!1});if(n&&s.length)return e=C("timeout","Load timeout for modules: "+s,null,s),e.contextName=x.contextName,l(e);a&&v(o,function(e){p(e,{},{})}),(!n||t)&&u&&(z||ea)&&!L&&(L=setTimeout(function(){L=0,d()},50)),E=!1}}function y(e){t(j,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(c();P.length;){e=P.shift();if(null===e[0])return l(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));y(e)}}var E,S,x,k,L,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},_={},D={},P=[],j={},F={},I={},q=1,W=1;return k={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=m(D,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(i)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(j[n]=r,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,r=e.id,i=o(e.prefix);this.depMaps.push(i),f(i,"defined",u(this,function(i){var s,c;c=m(I,this.map.id);var p=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(i.normalize&&(p=i.normalize(p,function(e){return n(e,d,!0)})||""),i=o(e.prefix+"!"+p,this.map.parentMap),f(i,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=m(O,i.id))this.depMaps.push(i),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable()}else c?(this.map.url=x.nameToUrl(c),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],B(O,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&h(e.map.id)}),l(e)}),s.fromText=u(this,function(n,i){var u=e.name,f=o(u),c=M;i&&(n=i),c&&(M=!1),a(f),t(A.config,r)&&(A.config[u]=A.config[r]);try{g.exec(n)}catch(h){return l(C("fromtexteval","fromText eval for "+r+" failed: "+h,h,[r]))}c&&(M=!0),this.depMaps.push(f),x.completeLoad(u),v([u],s)}),i.load(e.name,v,s,A))})),x.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){_[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var r,i;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e;if(r=m(k,e.id)){this.depExports[n]=r(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback?f(e,"error",u(this,this.errback)):this.events.error&&f(e,"error",u(this,function(e){this.emit("error",e)}))}r=e.id,i=O[r],!t(k,r)&&i&&!i.enabled&&x.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(O,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:A,contextName:e,registry:O,defined:j,urlFetched:F,defQueue:P,Module:S,makeModuleMap:o,nextTick:g.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(I[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(i,s){function u(n,r,f){var c,h;return s.enableBuildCallback&&r&&G(r)&&(r.__requireJsBuild=!0),"string"==typeof n?G(r)?l(C("requireargs","Invalid require call"),f):i&&t(k,n)?k[n](O[i.id]):g.get?g.get(x,n,i,u):(c=o(n,i,!1,!0),c=c.id,t(j,c)?j[c]:l(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(i?"":". Use require([])")))):(w(),x.nextTick(function(){w(),h=a(o(null,i)),h.skipMap=s.skipMap,h.init(n,r,f,{enabled:!0}),d()}),u)}return s=s||{},U(u,{isBrowser:z,toUrl:function(e){var t,r=e.lastIndexOf("."),s=e.split("/")[0];return-1!==r&&("."!==s&&".."!==s||1<r)&&(t=e.substring(r,e.length),e=e.substring(0,r)),x.nameToUrl(n(e,i&&i.id,!0),t,!0)},defined:function(e){return t(j,o(e,i,!1,!0).id)},specified:function(e){return e=o(e,i,!1,!0).id,t(j,e)||t(O,e)}}),i||(u.undef=function(e){c();var t=o(e,i,!0),n=m(O,e);r(e),delete j[e],delete F[t.url],delete D[e],T(P,function(t,n){t[0]===e&&P.splice(n,1)}),n&&(n.events.defined&&(D[e]=n.events),h(e))}),u},enable:function(e){m(O,e.id)&&a(e).enable()},completeLoad:function(e){var n,r,s=m(A.shim,e)||{},o=s.exports;for(c();P.length;){r=P.shift();if(null===r[0]){r[0]=e;if(n)break;n=!0}else r[0]===e&&(n=!0);y(r)}r=m(O,e);if(!n&&!t(j,e)&&r&&!r.inited){if(A.enforceDefine&&(!o||!da(o)))return i(e)?void 0:l(C("nodefine","No define call for "+e,null,[e]));y([e,s.deps||[],s.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,s;(r=m(A.pkgs,e))&&(e=r);if(r=m(I,e))return x.nameToUrl(r,t,n);if(g.jsExtRegExp.test(e))r=e+(t||"");else{r=A.paths,e=e.split("/");for(i=e.length;0<i;i-=1)if(s=e.slice(0,i).join("/"),s=m(r,s)){H(s)&&(s=s[0]),e.splice(0,i,s);break}r=e.join("/"),r+=t||(/^data\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+r}return A.urlArgs?r+((-1===r.indexOf("?")?"?":"&")+A.urlArgs):r},load:function(e,t){g.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))N=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!i(t.id))return l(C("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z="undefined"!=typeof window&&"undefined"!=typeof navigator&&!!window.document,ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,r){var i,s="_";return!H(e)&&"string"!=typeof e&&(i=e,H(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=g.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.17",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=g.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,J=r,D?y.insertBefore(r,D):y.appendChild(r),J=null,r;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){y||(y=e.parentNode);if(I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((r=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),r=N),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}})(this),define("vendor/require.min.js",function(){}),"document"in self&&!("classList"in document.createElement("_"))&&function(e){"use strict";if(!("Element"in e))return;var t="classList",n="prototype",r=e.Element[n],i=Object,s=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(t in this&&this[t]===e)return t;return-1},u=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(t==="")throw new u("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new u("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},f=function(e){var t=s.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],r=0,i=n.length;for(;r<i;r++)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=f[n]=[],c=function(){return new f(this)};u[n]=Error[n],l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",a(this,e)!==-1},l.add=function(){var e=arguments,t=0,n=e.length,r,i=!1;do r=e[t]+"",a(this,r)===-1&&(this.push(r),i=!0);while(++t<n);i&&this._updateClassName()},l.remove=function(){var e=arguments,t=0,n=e.length,r,i=!1;do{r=e[t]+"";var s=a(this,r);s!==-1&&(this.splice(s,1),i=!0)}while(++t<n);i&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),r=n?t!==!0&&"remove":t!==!1&&"add";return r&&this[r](e),!n},l.toString=function(){return this.join(" ")};if(i.defineProperty){var h={get:c,enumerable:!0,configurable:!0};try{i.defineProperty(r,t,h)}catch(p){p.number===-2146823252&&(h.enumerable=!1,i.defineProperty(r,t,h))}}else i[n].__defineGetter__&&r.__defineGetter__(t,c)}(self),define("vendor/polyfills/classlist.min",function(){}),Function.prototype.bind||(Function.prototype.bind=function(e){"use strict";if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),function(){"use strict";var e=Object.prototype,t=e.__defineGetter__,n=e.__defineSetter__,r=e.__lookupGetter__,i=e.__lookupSetter__,s=e.hasOwnProperty;t&&n&&r&&i&&(Object.defineProperty||(Object.defineProperty=function(e,o,u){if(arguments.length<3)throw new TypeError("Arguments not optional");o+="";if(s.call(u,"value")){!r.call(e,o)&&!i.call(e,o)&&(e[o]=u.value);if(s.call(u,"get")||s.call(u,"set"))throw new TypeError("Cannot specify an accessor and a value")}if(!(u.writable&&u.enumerable&&u.configurable))throw new TypeError("This implementation of Object.defineProperty does not support false for configurable, enumerable, or writable.");return u.get&&t.call(e,o,u.get),u.set&&n.call(e,o,u.set),e}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(e,t){if(arguments.length<2)throw new TypeError("Arguments not optional.");t+="";var n={configurable:!0,enumerable:!0,writable:!0},o=r.call(e,t),u=i.call(e,t);return s.call(e,t)?!o&&!u?(n.value=e[t],n):(delete n.writable,n.get=n.set=undefined,o&&(n.get=o),u&&(n.set=u),n):n}),Object.defineProperties||(Object.defineProperties=function(e,t){var n;for(n in t)s.call(t,n)&&Object.defineProperty(e,n,t[n])}))}();if(!document.documentElement.dataset&&(!Object.getOwnPropertyDescriptor(Element.prototype,"dataset")||!Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var propDescriptor={enumerable:!0,get:function(){"use strict";var e,t=this,n,r,i,s,o,u=this.attributes,a=u.length,f=function(e){return e.charAt(1).toUpperCase()},l=function(){return this},c=function(e,t){return typeof t!="undefined"?this.setAttribute(e,t):this.removeAttribute(e)};try{(({})).__defineGetter__("test",function(){}),n={}}catch(h){n=document.createElement("div")}for(e=0;e<a;e++){o=u[e];if(o&&o.name&&/^data-\w[\w\-]*$/.test(o.name)){r=o.value,i=o.name,s=i.substr(5).replace(/-./g,f);try{Object.defineProperty(n,s,{enumerable:this.enumerable,get:l.bind(r||""),set:c.bind(t,i)})}catch(p){n[s]=r}}}return n}};try{Object.defineProperty(Element.prototype,"dataset",propDescriptor)}catch(e){propDescriptor.enumerable=!1,Object.defineProperty(Element.prototype,"dataset",propDescriptor)}}define("vendor/polyfills/html5-dataset",function(){}),function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),define("vendor/polyfills/requestanimationframe",function(){}),function(e){"use strict";function r(e){switch(typeof e){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return e===null?"null":"object"}}function i(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function s(e){return typeof e=="function"}function o(e){if(e===null||e===t)throw TypeError();return Object(e)}function u(e){return e>>0}function a(e){return e>>>0}function g(e){function t(t){Object.defineProperty(e,t,{get:function(){return e._getter(t)},set:function(n){e._setter(t,n)},enumerable:!0,configurable:!1})}if(e.length>n)throw RangeError("Array too large for polyfill");var r;for(r=0;r<e.length;r+=1)t(r)}function y(e,t){var n=32-t;return e<<n>>n}function b(e,t){var n=32-t;return e<<n>>>n}function w(e){return[e&255]}function E(e){return y(e[0],8)}function S(e){return[e&255]}function x(e){return b(e[0],8)}function T(e){return e=m(Number(e)),[e<0?0:e>255?255:e&255]}function N(e){return[e>>8&255,e&255]}function C(e){return y(e[0]<<8|e[1],16)}function k(e){return[e>>8&255,e&255]}function L(e){return b(e[0]<<8|e[1],16)}function A(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]}function O(e){return y(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function M(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]}function _(e){return b(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function D(e,t,n){function y(e){var t=c(e),n=e-t;return n<.5?t:n>.5?t+1:t%2?t+1:t}var r=(1<<t-1)-1,i,s,o,u,a,p,m,g;e!==e?(s=(1<<t)-1,o=v(2,n-1),i=0):e===Infinity||e===-Infinity?(s=(1<<t)-1,o=0,i=e<0?1:0):e===0?(s=0,o=0,i=1/e===-Infinity?1:0):(i=e<0,e=l(e),e>=v(2,1-r)?(s=d(c(h(e)/f),1023),o=y(e/v(2,s)*v(2,n)),o/v(2,n)>=2&&(s+=1,o=1),s>r?(s=(1<<t)-1,o=0):(s+=r,o-=v(2,n))):(s=0,o=y(e/v(2,1-r-n)))),p=[];for(a=n;a;a-=1)p.push(o%2?1:0),o=c(o/2);for(a=t;a;a-=1)p.push(s%2?1:0),s=c(s/2);p.push(i?1:0),p.reverse(),m=p.join(""),g=[];while(m.length)g.push(parseInt(m.substring(0,8),2)),m=m.substring(8);return g}function P(e,t,n){var r=[],i,s,o,u,a,f,l,c;for(i=e.length;i;i-=1){o=e[i-1];for(s=8;s;s-=1)r.push(o%2?1:0),o>>=1}return r.reverse(),u=r.join(""),a=(1<<t-1)-1,f=parseInt(u.substring(0,1),2)?-1:1,l=parseInt(u.substring(1,1+t),2),c=parseInt(u.substring(1+t),2),l===(1<<t)-1?c!==0?NaN:f*Infinity:l>0?f*v(2,l-a)*(1+c/v(2,n)):c!==0?f*v(2,-(a-1))*(c/v(2,n)):f<0?0:0}function H(e){return P(e,11,52)}function B(e){return D(e,11,52)}function j(e){return P(e,8,23)}function F(e){return D(e,8,23)}var t=void 0,n=1e5,f=Math.LN2,l=Math.abs,c=Math.floor,h=Math.log,p=Math.max,d=Math.min,v=Math.pow,m=Math.round;(function(){var e=Object.defineProperty,t=!function(){try{return Object.defineProperty({},"x",{})}catch(e){return!1}}();if(!e||t)Object.defineProperty=function(t,n,r){if(e)try{return e(t,n,r)}catch(i){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in r&&Object.prototype.__defineGetter__.call(t,n,r.get),Object.prototype.__defineSetter__&&"set"in r&&Object.prototype.__defineSetter__.call(t,n,r.set),"value"in r&&(t[n]=r.value),t}})(),function(){function n(e){e=u(e);if(e<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"_bytes",{value:Array(e)});for(var t=0;t<e;t+=1)this._bytes[t]=0}function f(){if(!arguments.length||typeof arguments[0]!="object")return function(e){e=u(e);if(e<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:e}),Object.defineProperty(this,"byteLength",{value:e*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new n(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&r(arguments[0])==="object"&&arguments[0]instanceof f)return function(e){if(this.constructor!==e.constructor)throw TypeError();var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new n(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var r=0;r<this.length;r+=1)this._setter(r,e._getter(r))}.apply(this,arguments);if(!(arguments.length>=1&&r(arguments[0])==="object")||arguments[0]instanceof f||arguments[0]instanceof n||i(arguments[0])==="ArrayBuffer"){if(arguments.length>=1&&r(arguments[0])==="object"&&(arguments[0]instanceof n||i(arguments[0])==="ArrayBuffer"))return function(e,n,r){n=a(n);if(n>e.byteLength)throw RangeError("byteOffset out of range");if(n%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(r===t){var i=e.byteLength-n;if(i%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");r=i/this.BYTES_PER_ELEMENT}else r=a(r),i=r*this.BYTES_PER_ELEMENT;if(n+i>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:i}),Object.defineProperty(this,"byteOffset",{value:n}),Object.defineProperty(this,"length",{value:r})}.apply(this,arguments);throw TypeError()}return function(e){var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new n(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var r=0;r<this.length;r+=1){var i=e[r];this._setter(r,Number(i))}}.apply(this,arguments)}function v(e,t,n){var r=function(){Object.defineProperty(this,"constructor",{value:r}),f.apply(this,arguments),g(this)};"__proto__"in r?r.__proto__=f:(r.from=f.from,r.of=f.of),r.BYTES_PER_ELEMENT=e;var i=function(){};return i.prototype=h,r.prototype=new i,Object.defineProperty(r.prototype,"BYTES_PER_ELEMENT",{value:e}),Object.defineProperty(r.prototype,"_pack",{value:t}),Object.defineProperty(r.prototype,"_unpack",{value:n}),r}e.ArrayBuffer=e.ArrayBuffer||n,Object.defineProperty(f,"from",{value:function(e){return new this(e)}}),Object.defineProperty(f,"of",{value:function(){return new this(arguments)}});var h={};f.prototype=h,Object.defineProperty(f.prototype,"_getter",{value:function(e){if(arguments.length<1)throw SyntaxError("Not enough arguments");e=a(e);if(e>=this.length)return t;var n=[],r,i;for(r=0,i=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,i+=1)n.push(this.buffer._bytes[i]);return this._unpack(n)}}),Object.defineProperty(f.prototype,"get",{value:f.prototype._getter}),Object.defineProperty(f.prototype,"_setter",{value:function(e,t){if(arguments.length<2)throw SyntaxError("Not enough arguments");e=a(e);if(e>=this.length)return;var n=this._pack(t),r,i;for(r=0,i=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,i+=1)this.buffer._bytes[i]=n[r]}}),Object.defineProperty(f.prototype,"constructor",{value:f}),Object.defineProperty(f.prototype,"copyWithin",{value:function(e,n){var r=arguments[2],i=o(this),s=i.length,f=a(s);f=p(f,0);var l=u(e),c;l<0?c=p(f+l,0):c=d(l,f);var h=u(n),v;h<0?v=p(f+h,0):v=d(h,f);var m;r===t?m=f:m=u(r);var g;m<0?g=p(f+m,0):g=d(m,f);var y=d(g-v,f-c),b;v<c&&c<v+y?(b=-1,v=v+y-1,c=c+y-1):b=1;while(y>0)i._setter(c,i._getter(v)),v+=b,c+=b,y-=1;return i}}),Object.defineProperty(f.prototype,"every",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(!s(e))throw TypeError();var i=arguments[1];for(var o=0;o<r;o++)if(!e.call(i,n._getter(o),o,n))return!1;return!0}}),Object.defineProperty(f.prototype,"fill",{value:function(e){var n=arguments[1],r=arguments[2],i=o(this),s=i.length,f=a(s);f=p(f,0);var l=u(n),c;l<0?c=p(f+l,0):c=d(l,f);var h;r===t?h=f:h=u(r);var v;h<0?v=p(f+h,0):v=d(h,f);while(c<v)i._setter(c,e),c+=1;return i}}),Object.defineProperty(f.prototype,"filter",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(!s(e))throw TypeError();var i=[],o=arguments[1];for(var u=0;u<r;u++){var f=n._getter(u);e.call(o,f,u,n)&&i.push(f)}return new this.constructor(i)}}),Object.defineProperty(f.prototype,"find",{value:function(e){var n=o(this),r=n.length,i=a(r);if(!s(e))throw TypeError();var u=arguments.length>1?arguments[1]:t,f=0;while(f<i){var l=n._getter(f),c=e.call(u,l,f,n);if(Boolean(c))return l;++f}return t}}),Object.defineProperty(f.prototype,"findIndex",{value:function(e){var n=o(this),r=n.length,i=a(r);if(!s(e))throw TypeError();var u=arguments.length>1?arguments[1]:t,f=0;while(f<i){var l=n._getter(f),c=e.call(u,l,f,n);if(Boolean(c))return f;++f}return-1}}),Object.defineProperty(f.prototype,"forEach",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(!s(e))throw TypeError();var i=arguments[1];for(var o=0;o<r;o++)e.call(i,n._getter(o),o,n)}}),Object.defineProperty(f.prototype,"indexOf",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(r===0)return-1;var i=0;arguments.length>0&&(i=Number(arguments[1]),i!==i?i=0:i!==0&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*c(l(i))));if(i>=r)return-1;var s=i>=0?i:p(r-l(i),0);for(;s<r;s++)if(n._getter(s)===e)return s;return-1}}),Object.defineProperty(f.prototype,"join",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length),i=Array(r);for(var s=0;s<r;++s)i[s]=n._getter(s);return i.join(e===t?",":e)}}),Object.defineProperty(f.prototype,"lastIndexOf",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(r===0)return-1;var i=r;arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:i!==0&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*c(l(i))));var s=i>=0?d(i,r-1):r-l(i);for(;s>=0;s--)if(n._getter(s)===e)return s;return-1}}),Object.defineProperty(f.prototype,"map",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(!s(e))throw TypeError();var i=[];i.length=r;var o=arguments[1];for(var u=0;u<r;u++)i[u]=e.call(o,n._getter(u),u,n);return new this.constructor(i)}}),Object.defineProperty(f.prototype,"reduce",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(!s(e))throw TypeError();if(r===0&&arguments.length===1)throw TypeError();var i=0,o;arguments.length>=2?o=arguments[1]:o=n._getter(i++);while(i<r)o=e.call(t,o,n._getter(i),i,n),i++;return o}}),Object.defineProperty(f.prototype,"reduceRight",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(!s(e))throw TypeError();if(r===0&&arguments.length===1)throw TypeError();var i=r-1,o;arguments.length>=2?o=arguments[1]:o=n._getter(i--);while(i>=0)o=e.call(t,o,n._getter(i),i,n),i--;return o}}),Object.defineProperty(f.prototype,"reverse",{value:function(){if(this===t||this===null)throw TypeError();var e=Object(this),n=a(e.length),r=c(n/2);for(var i=0,s=n-1;i<r;++i,--s){var o=e._getter(i);e._setter(i,e._getter(s)),e._setter(s,o)}return e}}),Object.defineProperty(f.prototype,"set",{value:function(e,t){if(arguments.length<1)throw SyntaxError("Not enough arguments");var n,r,i,s,o,u,f,l,c,h;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){n=arguments[0],i=a(arguments[1]);if(i+n.length>this.length)throw RangeError("Offset plus length of array is out of range");l=this.byteOffset+i*this.BYTES_PER_ELEMENT,c=n.length*this.BYTES_PER_ELEMENT;if(n.buffer===this.buffer){h=[];for(o=0,u=n.byteOffset;o<c;o+=1,u+=1)h[o]=n.buffer._bytes[u];for(o=0,f=l;o<c;o+=1,f+=1)this.buffer._bytes[f]=h[o]}else for(o=0,u=n.byteOffset,f=l;o<c;o+=1,u+=1,f+=1)this.buffer._bytes[f]=n.buffer._bytes[u]}else{if(typeof arguments[0]!="object"||typeof arguments[0].length=="undefined")throw TypeError("Unexpected argument type(s)");r=arguments[0],s=a(r.length),i=a(arguments[1]);if(i+s>this.length)throw RangeError("Offset plus length of array is out of range");for(o=0;o<s;o+=1)u=r[o],this._setter(i+o,Number(u))}}}),Object.defineProperty(f.prototype,"slice",{value:function(e,n){var r=o(this),i=r.length,s=a(i),f=u(e),l=f<0?p(s+f,0):d(f,s),c=n===t?s:u(n),h=c<0?p(s+c,0):d(c,s),v=h-l,m=r.constructor,g=new m(v),y=0;while(l<h){var b=r._getter(l);g._setter(y,b),++l,++y}return g}}),Object.defineProperty(f.prototype,"some",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length);if(!s(e))throw TypeError();var i=arguments[1];for(var o=0;o<r;o++)if(e.call(i,n._getter(o),o,n))return!0;return!1}}),Object.defineProperty(f.prototype,"sort",{value:function(e){if(this===t||this===null)throw TypeError();var n=Object(this),r=a(n.length),i=Array(r);for(var s=0;s<r;++s)i[s]=n._getter(s);e?i.sort(e):i.sort();for(s=0;s<r;++s)n._setter(s,i[s]);return n}}),Object.defineProperty(f.prototype,"subarray",{value:function(e,t){function n(e,t,n){return e<t?t:e>n?n:e}e=u(e),t=u(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length),t=n(t,0,this.length);var r=t-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)}});var m=v(1,w,E),y=v(1,S,x),b=v(1,T,x),D=v(2,N,C),P=v(2,k,L),I=v(4,A,O),q=v(4,M,_),R=v(4,F,j),U=v(8,B,H);e.Int8Array=e.Int8Array||m,e.Uint8Array=e.Uint8Array||y,e.Uint8ClampedArray=e.Uint8ClampedArray||b,e.Int16Array=e.Int16Array||D,e.Uint16Array=e.Uint16Array||P,e.Int32Array=e.Int32Array||I,e.Uint32Array=e.Uint32Array||q,e.Float32Array=e.Float32Array||R,e.Float64Array=e.Float64Array||U}(),function(){function n(e,t){return s(e.get)?e.get(t):e[t]}function o(e,n,r){if(!(e instanceof ArrayBuffer||i(e)==="ArrayBuffer"))throw TypeError();n=a(n);if(n>e.byteLength)throw RangeError("byteOffset out of range");r===t?r=e.byteLength-n:r=a(r);if(n+r>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:r}),Object.defineProperty(this,"byteOffset",{value:n})}function u(e){return function(i,s){i=a(i);if(i+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");i+=this.byteOffset;var o=new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT),u=[];for(var f=0;f<e.BYTES_PER_ELEMENT;f+=1)u.push(n(o,f));return Boolean(s)===Boolean(r)&&u.reverse(),n(new e((new Uint8Array(u)).buffer),0)}}function f(e){return function(i,s,o){i=a(i);if(i+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var u=new e([s]),f=new Uint8Array(u.buffer),l=[],c,h;for(c=0;c<e.BYTES_PER_ELEMENT;c+=1)l.push(n(f,c));Boolean(o)===Boolean(r)&&l.reverse(),h=new Uint8Array(this.buffer,i,e.BYTES_PER_ELEMENT),h.set(l)}}var r=function(){var e=new Uint16Array([4660]),t=new Uint8Array(e.buffer);return n(t,0)===18}();Object.defineProperty(o.prototype,"getUint8",{value:u(Uint8Array)}),Object.defineProperty(o.prototype,"getInt8",{value:u(Int8Array)}),Object.defineProperty(o.prototype,"getUint16",{value:u(Uint16Array)}),Object.defineProperty(o.prototype,"getInt16",{value:u(Int16Array)}),Object.defineProperty(o.prototype,"getUint32",{value:u(Uint32Array)}),Object.defineProperty(o.prototype,"getInt32",{value:u(Int32Array)}),Object.defineProperty(o.prototype,"getFloat32",{value:u(Float32Array)}),Object.defineProperty(o.prototype,"getFloat64",{value:u(Float64Array)}),Object.defineProperty(o.prototype,"setUint8",{value:f(Uint8Array)}),Object.defineProperty(o.prototype,"setInt8",{value:f(Int8Array)}),Object.defineProperty(o.prototype,"setUint16",{value:f(Uint16Array)}),Object.defineProperty(o.prototype,"setInt16",{value:f(Int16Array)}),Object.defineProperty(o.prototype,"setUint32",{value:f(Uint32Array)}),Object.defineProperty(o.prototype,"setInt32",{value:f(Int32Array)}),Object.defineProperty(o.prototype,"setFloat32",{value:f(Float32Array)}),Object.defineProperty(o.prototype,"setFloat64",{value:f(Float64Array)}),e.DataView=e.DataView||o}()}(this),define("vendor/polyfills/typedarray",function(){}),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var n=e.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(r){n[(t+="_")+"constructor"]=r.constructor;for(var i in r)n.hasOwnProperty(i)&&"function"==typeof r[i]&&(n[t+i]=r[i])}return e},this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1},this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},t.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,n){if("string"==typeof e){var r=this._listeners;if(!(t||r&&r[e]))return!0;e=new createjs.Event(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(i){}if(e.bubbles&&this.parent){for(var s=this,o=[s];s.parent;)o.push(s=s.parent);var u,a=o.length;for(u=a-1;u>=0&&!e.propagationStopped;u--)o[u]._dispatchEvent(e,1+(0==u));for(u=1;a>u&&!e.propagationStopped;u++)o[u]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;try{e.currentTarget=this}catch(s){}try{e.eventPhase=t}catch(s){}e.removed=!1,i=i.slice();for(var o=0;n>o&&!e.immediatePropagationStopped;o++){var u=i[o];u.handleEvent?u.handleEvent(e):u(e),e.removed&&(this.off(e.type,u,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval};try{Object.defineProperties(e,{interval:{get:e.getInterval,set:e.setInterval},framerate:{get:e.getFPS,set:e.setFPS}})}catch(t){0}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=0,e._inited=!1},e.getMeasuredTickTime=function(t){var n=0,r=e._tickTimes;if(!r||r.length<1)return-1;t=Math.min(r.length,t||0|e.getFPS());for(var i=0;t>i;i++)n+=r[i];return n/t},e.getMeasuredFPS=function(t){var n=e._times;return!n||n.length<2?-1:(t=Math.min(n.length-1,t||0|e.getFPS()),1e3/((n[0]-n[t])/t))},e.setPaused=function(t){e.paused=t},e.getPaused=function(){return e.paused},e.getTime=function(t){return e._startTime?e._getTime()-(t?e._pausedTime:0):-1},e.getEventTime=function(t){return e._startTime?(e._lastTime||e._startTime)-(t?e._pausedTime:0):-1},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(n)return e._timerId=n(t==e.RAF?e._handleRAF:e._handleSynch),void (e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e.paused,n=e._getTime(),r=n-e._lastTime;if(e._lastTime=n,e._ticks++,t&&(e._pausedTicks++,e._pausedTime+=r),e.hasEventListener("tick")){var i=new createjs.Event("tick"),s=e.maxDelta;i.delta=s&&r>s?s:r,i.paused=t,i.time=n,i.runTime=n-e._pausedTime,e.dispatchEvent(i)}for(e._tickTimes.unshift(e._getTime()-n);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(n);e._times.length>100;)e._times.pop()};var n=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return(n&&n.call(performance)||(new Date).getTime())-e._startTime},createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s,o,u,a,f,l){this.Event_constructor(e,t,n),this.stageX=r,this.stageY=i,this.rawX=null==a?r:a,this.rawY=null==f?i:f,this.nativeEvent=s,this.pointerID=o,this.primary=!!u,this.relatedTarget=l}var t=createjs.extend(e,createjs.Event);t._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},t._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},t._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(t,{localX:{get:t._get_localX},localY:{get:t._get_localY},isTouch:{get:t._get_isTouch}})}catch(n){}t.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s){this.setValues(e,t,n,r,i,s)}var t=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,t.setValues=function(e,t,n,r,i,s){return this.a=null==e?1:e,this.b=t||0,this.c=n||0,this.d=null==r?1:r,this.tx=i||0,this.ty=s||0,this},t.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return(1!=e||0!=t||0!=n||1!=r)&&(this.a=o*e+a*t,this.b=u*e+f*t,this.c=o*n+a*r,this.d=u*n+f*r),this.tx=o*i+a*s+this.tx,this.ty=u*i+f*s+this.ty,this},t.prepend=function(e,t,n,r,i,s){var o=this.a,u=this.c,a=this.tx;return this.a=e*o+n*this.b,this.b=t*o+r*this.b,this.c=e*u+n*this.d,this.d=t*u+r*this.d,this.tx=e*a+n*this.ty+i,this.ty=t*a+r*this.ty+s,this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.appendTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(h*r,p*r,-p*i,h*i,0,0)):this.append(h*r,p*r,-p*i,h*i,t,n),(f||l)&&(this.tx-=f*this.a+l*this.c,this.ty-=f*this.b+l*this.d),this},t.prependTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return(f||l)&&(this.tx-=f,this.ty-=l),o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(h*r,p*r,-p*i,h*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(h*r,p*r,-p*i,h*i,t,n),this},t.rotate=function(t){t*=e.DEG_TO_RAD;var n=Math.cos(t),r=Math.sin(t),i=this.a,s=this.b;return this.a=i*n+this.c*r,this.b=s*n+this.d*r,this.c=-i*r+this.c*n,this.d=-s*r+this.d*n,this},t.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this},t.translate=function(e,t){return this.tx+=this.a*e+this.c*t,this.ty+=this.b*e+this.d*t,this},t.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},t.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.equals=function(e){return this.tx===e.tx&&this.ty===e.ty&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d},t.transformPoint=function(e,t,n){return n=n||{},n.x=e*this.a+t*this.c+this.tx,n.y=e*this.b+t*this.d+this.ty,n},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a),i=Math.abs(1-n/r);return 1e-5>i?(t.rotation=r/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},t.copy=function(e){return this.setValues(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i){this.setValues(e,t,n,r,i)}var t=e.prototype;t.setValues=function(e,t,n,r,i){return this.visible=null==e?!0:!!e,this.alpha=null==t?1:t,this.shadow=n,this.compositeOperation=r,this.matrix=i||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},t.append=function(e,t,n,r,i){return this.alpha*=t,this.shadow=n||this.shadow,this.compositeOperation=r||this.compositeOperation,this.visible=this.visible&&e,i&&this.matrix.appendMatrix(i),this},t.prepend=function(e,t,n,r,i){return this.alpha*=t,this.shadow=this.shadow||n,this.compositeOperation=this.compositeOperation||r,this.visible=this.visible&&e,i&&this.matrix.prependMatrix(i),this},t.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},t.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.setValues(e,t)}var t=e.prototype;t.setValues=function(e,t){return this.x=e||0,this.y=t||0,this},t.copy=function(e){return this.x=e.x,this.y=e.y,this},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r){this.setValues(e,t,n,r)}var t=e.prototype;t.setValues=function(e,t,n,r){return this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this},t.extend=function(e,t,n,r){return n=n||0,r=r||0,e+n>this.x+this.width&&(this.width=e+n-this.x),t+r>this.y+this.height&&(this.height=t+r-this.y),e<this.x&&(this.width+=this.x-e,this.x=e),t<this.y&&(this.height+=this.y-t,this.y=t),this},t.pad=function(e,t,n,r){return this.x-=t,this.y-=e,this.width+=t+r,this.height+=e+n,this},t.copy=function(e){return this.setValues(e.x,e.y,e.width,e.height)},t.contains=function(e,t,n,r){return n=n||0,r=r||0,e>=this.x&&e+n<=this.x+this.width&&t>=this.y&&t+r<=this.y+this.height},t.union=function(e){return this.clone().extend(e.x,e.y,e.width,e.height)},t.intersection=function(t){var n=t.x,r=t.y,i=n+t.width,s=r+t.height;return this.x>n&&(n=this.x),this.y>r&&(r=this.y),this.x+this.width<i&&(i=this.x+this.width),this.y+this.height<s&&(s=this.y+this.height),n>=i||r>=s?null:new e(n,r,i-n,s-r)},t.intersects=function(e){return e.x<=this.x+this.width&&this.x<=e.x+e.width&&e.y<=this.y+this.height&&this.y<=e.y+e.height},t.isEmpty=function(){return this.width<=0||this.height<=0},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s,o){e.addEventListener&&(this.target=e,this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==r?"down":r,this.play=i,this._isPressed=!1,this._isOver=!1,this._enabled=!1,e.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),e.hitArea=s))}var t=e.prototype;t.setEnabled=function(e){if(e!=this._enabled){var t=this.target;this._enabled=e,e?(t.cursor="pointer",t.addEventListener("rollover",this),t.addEventListener("rollout",this),t.addEventListener("mousedown",this),t.addEventListener("pressup",this),t._reset&&(t.__reset=t._reset,t._reset=this._reset)):(t.cursor=null,t.removeEventListener("rollover",this),t.removeEventListener("rollout",this),t.removeEventListener("mousedown",this),t.removeEventListener("pressup",this),t.__reset&&(t._reset=t.__reset,delete t.__reset))}},t.getEnabled=function(){return this._enabled};try{Object.defineProperties(t,{enabled:{get:t.getEnabled,set:t.setEnabled}})}catch(n){}t.toString=function(){return"[ButtonHelper]"},t.handleEvent=function(e){var t,n=this.target,r=e.type;"mousedown"==r?(this._isPressed=!0,t=this.downLabel):"pressup"==r?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"rollover"==r?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(t):n.gotoAndStop&&n.gotoAndStop(t)},t._reset=function(){var e=this.paused;this.__reset(),this.paused=e},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r){this.color=e||"black",this.offsetX=t||0,this.offsetY=n||0,this.blur=r||0}var t=e.prototype;e.identity=new e("transparent",0,0,0),t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(e)}var t=createjs.extend(e,createjs.EventDispatcher);t.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(t,{animations:{get:t.getAnimations}})}catch(n){}t.getNumFrames=function(e){if(null==e)return this._frames?this._frames.length:this._numFrames||0;var t=this._data[e];return null==t?0:t.frames.length},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){var t;return this._frames&&(t=this._frames[e])?t:null},t.getFrameBounds=function(e,t){var n=this.getFrame(e);return n?(t||new createjs.Rectangle).setValues(-n.regX,-n.regY,n.rect.width,n.rect.height):null},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){throw"SpriteSheet cannot be cloned."},t._parseData=function(e){var t,n,r,i;if(null!=e){if(this.framerate=e.framerate||0,e.images&&(n=e.images.length)>0)for(i=this._images=[],t=0;n>t;t++){var s=e.images[t];if("string"==typeof s){var o=s;s=document.createElement("img"),s.src=o}i.push(s),s.getContext||s.naturalWidth||(this._loadCount++,this.complete=!1,function(e,t){s.onload=function(){e._handleImageLoad(t)}}(this,o),function(e,t){s.onerror=function(){e._handleImageError(t)}}(this,o))}if(null!=e.frames)if(Array.isArray(e.frames))for(this._frames=[],i=e.frames,t=0,n=i.length;n>t;t++){var u=i[t];this._frames.push({image:this._images[u[4]?u[4]:0],rect:new createjs.Rectangle(u[0],u[1],u[2],u[3]),regX:u[5]||0,regY:u[6]||0})}else r=e.frames,this._frameWidth=r.width,this._frameHeight=r.height,this._regX=r.regX||0,this._regY=r.regY||0,this._spacing=r.spacing||0,this._margin=r.margin||0,this._numFrames=r.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(r=e.animations)){this._data={};var a;for(a in r){var f={name:a},l=r[a];if("number"==typeof l)i=f.frames=[l];else if(Array.isArray(l))if(1==l.length)f.frames=[l[0]];else for(f.speed=l[3],f.next=l[2],i=f.frames=[],t=l[0];t<=l[1];t++)i.push(t);else{f.speed=l.speed,f.next=l.next;var c=l.frames;i=f.frames="number"==typeof c?[c]:c.slice(0)}(f.next===!0||void 0===f.next)&&(f.next=a),(f.next===!1||i.length<2&&f.next==a)&&(f.next=null),f.speed||(f.speed=1),this._animations.push(a),this._data[a]=f}}}},t._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},t._handleImageError=function(e){var t=new createjs.Event("error");t.src=e,this.dispatchEvent(t),0==--this._loadCount&&this.dispatchEvent("complete")},t._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var e=this._numFrames||1e5,t=0,n=this._frameWidth,r=this._frameHeight,i=this._spacing,s=this._margin;e:for(var o=0,u=this._images;o<u.length;o++)for(var a=u[o],f=a.width,l=a.height,c=s;l-s-r>=c;){for(var h=s;f-s-n>=h;){if(t>=e)break e;t++,this._frames.push({image:a,rect:new createjs.Rectangle(h,c,n,r),regX:this._regX,regY:this._regY}),h+=n+i}c+=r+i}this._numFrames=t}},createjs.SpriteSheet=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var t=e.prototype,n=e;e.getRGB=function(e,t,n,r){return null!=e&&null==n&&(r=t,n=255&e,t=e>>8&255,e=e>>16&255),null==r?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},e.getHSL=function(e,t,n,r){return null==r?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var r=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");r.getContext&&(e._ctx=r.getContext("2d"),r.width=r.height=1),t.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(t,{instructions:{get:t.getInstructions}})}catch(i){}t.isEmpty=function(){return!this._instructions.length&&!this._activeInstructions.length},t.draw=function(e,t){this._updateInstructions();for(var n=this._instructions,r=this._storeIndex,i=n.length;i>r;r++)n[r].exec(e,t)},t.drawAsPath=function(e){this._updateInstructions();for(var t,n=this._instructions,r=this._storeIndex,i=n.length;i>r;r++)(t=n[r]).path!==!1&&t.exec(e)},t.moveTo=function(e,t){return this.append(new n.MoveTo(e,t),!0)},t.lineTo=function(e,t){return this.append(new n.LineTo(e,t))},t.arcTo=function(e,t,r,i,s){return this.append(new n.ArcTo(e,t,r,i,s))},t.arc=function(e,t,r,i,s,o){return this.append(new n.Arc(e,t,r,i,s,o))},t.quadraticCurveTo=function(e,t,r,i){return this.append(new n.QuadraticCurveTo(e,t,r,i))},t.bezierCurveTo=function(e,t,r,i,s,o){return this.append(new n.BezierCurveTo(e,t,r,i,s,o))},t.rect=function(e,t,r,i){return this.append(new n.Rect(e,t,r,i))},t.closePath=function(){return this._activeInstructions.length?this.append(new n.ClosePath):this},t.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},t.beginFill=function(e){return this._setFill(e?new n.Fill(e):null)},t.beginLinearGradientFill=function(e,t,r,i,s,o){return this._setFill((new n.Fill).linearGradient(e,t,r,i,s,o))},t.beginRadialGradientFill=function(e,t,r,i,s,o,u,a){return this._setFill((new n.Fill).radialGradient(e,t,r,i,s,o,u,a))},t.beginBitmapFill=function(e,t,r){return this._setFill((new n.Fill(null,r)).bitmap(e,t))},t.endFill=function(){return this.beginFill()},t.setStrokeStyle=function(e,t,r,i,s){return this._updateInstructions(!0),this._strokeStyle=this.command=new n.StrokeStyle(e,t,r,i,s),this._stroke&&(this._stroke.ignoreScale=s),this._strokeIgnoreScale=s,this},t.setStrokeDash=function(e,t){return this._updateInstructions(!0),this._strokeDash=this.command=new n.StrokeDash(e,t),this},t.beginStroke=function(e){return this._setStroke(e?new n.Stroke(e):null)},t.beginLinearGradientStroke=function(e,t,r,i,s,o){return this._setStroke((new n.Stroke).linearGradient(e,t,r,i,s,o))},t.beginRadialGradientStroke=function(e,t,r,i,s,o,u,a){return this._setStroke((new n.Stroke).radialGradient(e,t,r,i,s,o,u,a))},t.beginBitmapStroke=function(e,t){return this._setStroke((new n.Stroke).bitmap(e,t))},t.endStroke=function(){return this.beginStroke()},t.curveTo=t.quadraticCurveTo,t.drawRect=t.rect,t.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i)},t.drawRoundRectComplex=function(e,t,r,i,s,o,u,a){return this.append(new n.RoundRect(e,t,r,i,s,o,u,a))},t.drawCircle=function(e,t,r){return this.append(new n.Circle(e,t,r))},t.drawEllipse=function(e,t,r,i){return this.append(new n.Ellipse(e,t,r,i))},t.drawPolyStar=function(e,t,r,i,s,o){return this.append(new n.PolyStar(e,t,r,i,s,o))},t.append=function(e,t){return this._activeInstructions.push(e),this.command=e,t||(this._dirty=!0),this},t.decodePath=function(t){for(var n=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],i=0,s=t.length,o=[],u=0,f=0,l=e.BASE_64;s>i;){var c=t.charAt(i),h=l[c],p=h>>3,d=n[p];if(!d||3&h)throw"bad path data (@"+i+"): "+c;var v=r[p];p||(u=f=0),o.length=0,i++;for(var m=(h>>2&1)+2,g=0;v>g;g++){var y=l[t.charAt(i)],b=y>>5?-1:1;y=(31&y)<<6|l[t.charAt(i+1)],3==m&&(y=y<<6|l[t.charAt(i+2)]),y=b*y/10,g%2?u=y+=u:f=y+=f,o[g]=y,i+=m}d.apply(this,o)}return this},t.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},t.unstore=function(){return this._storeIndex=0,this},t.clone=function(){var t=new e;return t.command=this.command,t._stroke=this._stroke,t._strokeStyle=this._strokeStyle,t._strokeDash=this._strokeDash,t._strokeIgnoreScale=this._strokeIgnoreScale,t._fill=this._fill,t._instructions=this._instructions.slice(),t._commitIndex=this._commitIndex,t._activeInstructions=this._activeInstructions.slice(),t._dirty=this._dirty,t._storeIndex=this._storeIndex,t},t.toString=function(){return"[Graphics]"},t.mt=t.moveTo,t.lt=t.lineTo,t.at=t.arcTo,t.bt=t.bezierCurveTo,t.qt=t.quadraticCurveTo,t.a=t.arc,t.r=t.rect,t.cp=t.closePath,t.c=t.clear,t.f=t.beginFill,t.lf=t.beginLinearGradientFill,t.rf=t.beginRadialGradientFill,t.bf=t.beginBitmapFill,t.ef=t.endFill,t.ss=t.setStrokeStyle,t.sd=t.setStrokeDash,t.s=t.beginStroke,t.ls=t.beginLinearGradientStroke,t.rs=t.beginRadialGradientStroke,t.bs=t.beginBitmapStroke,t.es=t.endStroke,t.dr=t.drawRect,t.rr=t.drawRoundRect,t.rc=t.drawRoundRectComplex,t.dc=t.drawCircle,t.de=t.drawEllipse,t.dp=t.drawPolyStar,t.p=t.decodePath,t._updateInstructions=function(t){var n=this._instructions,r=this._activeInstructions,i=this._commitIndex;if(this._dirty&&r.length){n.length=i,n.push(e.beginCmd);var s=r.length,o=n.length;n.length=o+s;for(var u=0;s>u;u++)n[u+o]=r[u];this._fill&&n.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,n.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,n.push(this._strokeStyle)),n.push(this._stroke)),this._dirty=!1}t&&(r.length=0,this._commitIndex=n.length)},t._setFill=function(e){return this._updateInstructions(!0),this.command=this._fill=e,this},t._setStroke=function(e){return this._updateInstructions(!0),(this.command=this._stroke=e)&&(e.ignoreScale=this._strokeIgnoreScale),this},(n.LineTo=function(e,t){this.x=e,this.y=t}).prototype.exec=function(e){e.lineTo(this.x,this.y)},(n.MoveTo=function(e,t){this.x=e,this.y=t}).prototype.exec=function(e){e.moveTo(this.x,this.y)},(n.ArcTo=function(e,t,n,r,i){this.x1=e,this.y1=t,this.x2=n,this.y2=r,this.radius=i}).prototype.exec=function(e){e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(n.Arc=function(e,t,n,r,i,s){this.x=e,this.y=t,this.radius=n,this.startAngle=r,this.endAngle=i,this.anticlockwise=!!s}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(n.QuadraticCurveTo=function(e,t,n,r){this.cpx=e,this.cpy=t,this.x=n,this.y=r}).prototype.exec=function(e){e.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(n.BezierCurveTo=function(e,t,n,r,i,s){this.cp1x=e,this.cp1y=t,this.cp2x=n,this.cp2y=r,this.x=i,this.y=s}).prototype.exec=function(e){e.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(n.Rect=function(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}).prototype.exec=function(e){e.rect(this.x,this.y,this.w,this.h)},(n.ClosePath=function(){}).prototype.exec=function(e){e.closePath()},(n.BeginPath=function(){}).prototype.exec=function(e){e.beginPath()},t=(n.Fill=function(e,t){this.style=e,this.matrix=t}).prototype,t.exec=function(e){if(this.style){e.fillStyle=this.style;var t=this.matrix;t&&(e.save(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),e.fill(),t&&e.restore()}},t.linearGradient=function(t,n,r,i,s,o){for(var u=this.style=e._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return u.props={colors:t,ratios:n,x0:r,y0:i,x1:s,y1:o,type:"linear"},this},t.radialGradient=function(t,n,r,i,s,o,u,f){for(var l=this.style=e._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return l.props={colors:t,ratios:n,x0:r,y0:i,r0:s,x1:o,y1:u,r1:f,type:"radial"},this},t.bitmap=function(t,n){if(t.naturalWidth||t.getContext||t.readyState>=2){var r=this.style=e._ctx.createPattern(t,n||"");r.props={image:t,repetition:n,type:"bitmap"}}return this},t.path=!1,t=(n.Stroke=function(e,t){this.style=e,this.ignoreScale=t}).prototype,t.exec=function(e){this.style&&(e.strokeStyle=this.style,this.ignoreScale&&(e.save(),e.setTransform(1,0,0,1,0,0)),e.stroke(),this.ignoreScale&&e.restore())},t.linearGradient=n.Fill.prototype.linearGradient,t.radialGradient=n.Fill.prototype.radialGradient,t.bitmap=n.Fill.prototype.bitmap,t.path=!1,t=(n.StrokeStyle=function(e,t,n,r,i){this.width=e,this.caps=t,this.joints=n,this.miterLimit=r,this.ignoreScale=i}).prototype,t.exec=function(t){t.lineWidth=null==this.width?"1":this.width,t.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],t.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],t.miterLimit=null==this.miterLimit?"10":this.miterLimit,t.ignoreScale=null==this.ignoreScale?!1:this.ignoreScale},t.path=!1,(n.StrokeDash=function(e,t){this.segments=e,this.offset=t||0}).prototype.exec=function(e){e.setLineDash&&(e.setLineDash(this.segments||n.StrokeDash.EMPTY_SEGMENTS),e.lineDashOffset=this.offset||0)},n.StrokeDash.EMPTY_SEGMENTS=[],(n.RoundRect=function(e,t,n,r,i,s,o,u){this.x=e,this.y=t,this.w=n,this.h=r,this.radiusTL=i,this.radiusTR=s,this.radiusBR=o,this.radiusBL=u}).prototype.exec=function(e){var t=(f>a?a:f)/2,n=0,r=0,i=0,s=0,o=this.x,u=this.y,a=this.w,f=this.h,l=this.radiusTL,c=this.radiusTR,h=this.radiusBR,p=this.radiusBL;0>l&&(l*=n=-1),l>t&&(l=t),0>c&&(c*=r=-1),c>t&&(c=t),0>h&&(h*=i=-1),h>t&&(h=t),0>p&&(p*=s=-1),p>t&&(p=t),e.moveTo(o+a-c,u),e.arcTo(o+a+c*r,u-c*r,o+a,u+c,c),e.lineTo(o+a,u+f-h),e.arcTo(o+a+h*i,u+f+h*i,o+a-h,u+f,h),e.lineTo(o+p,u+f),e.arcTo(o-p*s,u+f+p*s,o,u+f-p,p),e.lineTo(o,u+l),e.arcTo(o-l*n,u-l*n,o+l,u,l),e.closePath()},(n.Circle=function(e,t,n){this.x=e,this.y=t,this.radius=n}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,0,2*Math.PI)},(n.Ellipse=function(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}).prototype.exec=function(e){var t=this.x,n=this.y,r=this.w,i=this.h,s=.5522848,o=r/2*s,u=i/2*s,a=t+r,f=n+i,l=t+r/2,c=n+i/2;e.moveTo(t,c),e.bezierCurveTo(t,c-u,l-o,n,l,n),e.bezierCurveTo(l+o,n,a,c-u,a,c),e.bezierCurveTo(a,c+u,l+o,f,l,f),e.bezierCurveTo(l-o,f,t,c+u,t,c)},(n.PolyStar=function(e,t,n,r,i,s){this.x=e,this.y=t,this.radius=n,this.sides=r,this.pointSize=i,this.angle=s}).prototype.exec=function(e){var t=this.x,n=this.y,r=this.radius,i=(this.angle||0)/180*Math.PI,s=this.sides,o=1-(this.pointSize||0),u=Math.PI/s;e.moveTo(t+Math.cos(i)*r,n+Math.sin(i)*r);for(var a=0;s>a;a++)i+=u,1!=o&&e.lineTo(t+Math.cos(i)*r*o,n+Math.sin(i)*r*o),i+=u,e.lineTo(t+Math.cos(i)*r,n+Math.sin(i)*r);e.closePath()},e.beginCmd=new n.BeginPath,createjs.Graphics=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var t=createjs.extend(e,createjs.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1;var n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(e._hitTestCanvas=n,e._hitTestContext=n.getContext("2d"),n.width=n.height=1),e._nextCacheID=1,t.getStage=function(){for(var e=this,t=createjs.Stage;e.parent;)e=e.parent;return e instanceof t?e:null};try{Object.defineProperties(t,{stage:{get:t.getStage}})}catch(r){}t.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},t.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r=this._cacheScale;return e.drawImage(n,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,n.width/r,n.height/r),!0},t.updateContext=function(t){var n=this,r=n.mask,i=n._props.matrix;r&&r.graphics&&!r.graphics.isEmpty()&&(r.getMatrix(i),t.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),r.graphics.drawAsPath(t),t.clip(),i.invert(),t.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)),this.getMatrix(i);var s=i.tx,o=i.ty;e._snapToPixelEnabled&&n.snapToPixel&&(s=s+(0>s?-0.5:.5)|0,o=o+(0>o?-0.5:.5)|0),t.transform(i.a,i.b,i.c,i.d,s,o),t.globalAlpha*=n.alpha,n.compositeOperation&&(t.globalCompositeOperation=n.compositeOperation),n.shadow&&this._applyShadow(t,n.shadow)},t.cache=function(e,t,n,r,i){i=i||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=n,this._cacheHeight=r,this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=i,this.updateCache()},t.updateCache=function(t){var n=this.cacheCanvas;if(!n)throw"cache() must be called before updateCache()";var r=this._cacheScale,i=this._cacheOffsetX*r,s=this._cacheOffsetY*r,o=this._cacheWidth,u=this._cacheHeight,f=n.getContext("2d"),l=this._getFilterBounds();i+=this._filterOffsetX=l.x,s+=this._filterOffsetY=l.y,o=Math.ceil(o*r)+l.width,u=Math.ceil(u*r)+l.height,o!=n.width||u!=n.height?(n.width=o,n.height=u):t||f.clearRect(0,0,o+1,u+1),f.save(),f.globalCompositeOperation=t,f.setTransform(r,0,0,r,-i,-s),this.draw(f,!0),this._applyFilters(),f.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.localToGlobal=function(e,t,n){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(e,t,n||new createjs.Point)},t.globalToLocal=function(e,t,n){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(e,t,n||new createjs.Point)},t.localToLocal=function(e,t,n,r){return r=this.localToGlobal(e,t,r),n.globalToLocal(r.x,r.y,r)},t.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==r?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},t.getMatrix=function(e){var t=this,n=e&&e.identity()||new createjs.Matrix2D;return t.transformMatrix?n.copy(t.transformMatrix):n.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY)},t.getConcatenatedMatrix=function(e){for(var t=this,n=this.getMatrix(e);t=t.parent;)n.prependMatrix(t.getMatrix(t._props.matrix));return n},t.getConcatenatedDisplayProps=function(e){e=e?e.identity():new createjs.DisplayProps;var t=this,n=t.getMatrix(e.matrix);do e.prepend(t.visible,t.alpha,t.shadow,t.compositeOperation),t!=this&&n.prependMatrix(t.getMatrix(t._props.matrix));while(t=t.parent);return e},t.hitTest=function(t,n){var r=e._hitTestContext;r.setTransform(1,0,0,1,-t,-n),this.draw(r);var i=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),i},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var e=this.cacheCanvas;if(e){var t=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,e.width/t,e.height/t)}return null},t.getTransformedBounds=function(){return this._getBounds()},t.setBounds=function(e,t,n,r){null==e&&(this._bounds=e),this._bounds=(this._bounds||new createjs.Rectangle).setValues(e,t,n,r)},t.clone=function(){return this._cloneProps(new e)},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t._cloneProps=function(e){return e.alpha=this.alpha,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){var t=this._listeners;t&&t.tick&&(e.target=null,e.propagationStopped=e.immediatePropagationStopped=!1,this.dispatchEvent(e))},t._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},t._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;e>i;i++)this.filters[i].applyFilter(t,0,0,n,r)},t._getFilterBounds=function(){var e,t=this.filters,n=this._rectangle.setValues(0,0,0,0);if(!t||!(e=t.length))return n;for(var r=0;e>r;r++){var i=this.filters[r];i.getBounds&&i.getBounds(n)}return n},t._getBounds=function(e,t){return this._transformBounds(this.getBounds(),e,t)},t._transformBounds=function(e,t,n){if(!e)return e;var r=e.x,i=e.y,s=e.width,o=e.height,u=this._props.matrix;u=n?u.identity():this.getMatrix(u),(r||i)&&u.appendTransform(0,0,1,1,0,0,0,-r,-i),t&&u.prependMatrix(t);var a=s*u.a,f=s*u.b,l=o*u.c,c=o*u.d,h=u.tx,p=u.ty,d=h,v=h,m=p,g=p;return(r=a+h)<d?d=r:r>v&&(v=r),(r=a+l+h)<d?d=r:r>v&&(v=r),(r=l+h)<d?d=r:r>v&&(v=r),(i=f+p)<m?m=i:i>g&&(g=i),(i=f+c+p)<m?m=i:i>g&&(g=i),(i=c+p)<m?m=i:i>g&&(g=i),e.setValues(d,m,v-d,g-m)},t._hasMouseEventListener=function(){for(var t=e._MOUSE_EVENTS,n=0,r=t.length;r>n;n++)if(this.hasEventListener(t[n]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var t=createjs.extend(e,createjs.DisplayObject);t.getNumChildren=function(){return this.children.length};try{Object.defineProperties(t,{numChildren:{get:t.getNumChildren}})}catch(n){}t.initialize=e,t.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(),r=0,i=n.length;i>r;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},t.addChild=function(e){if(null==e)return e;var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e.dispatchEvent("added"),e},t.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(0>r||r>this.children.length)return arguments[n-2];if(n>2){for(var i=0;n-1>i;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e.dispatchEvent("added"),e},t.removeChild=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;t>r;r++)n=n&&this.removeChild(arguments[r]);return n}return this.removeChildAt(createjs.indexOf(this.children,e))},t.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],r=0;t>r;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;t>r;r++)i=i&&this.removeChildAt(n[r]);return i}if(0>e||e>this.children.length-1)return!1;var s=this.children[e];return s&&(s.parent=null),this.children.splice(e,1),s.dispatchEvent("removed"),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)this.removeChildAt(0)},t.getChildAt=function(e){return this.children[e]},t.getChildByName=function(e){for(var t=this.children,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return createjs.indexOf(this.children,e)},t.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},t.swapChildren=function(e,t){for(var n,r,i=this.children,s=0,o=i.length;o>s&&(i[s]==e&&(n=s),i[s]==t&&(r=s),null==n||null==r);s++);s!=o&&(i[n]=t,i[r]=e)},t.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||0>t||t>=r)){for(var i=0;r>i&&n[i]!=e;i++);i!=r&&i!=t&&(n.splice(i,1),n.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},t.getObjectsUnderPoint=function(e,t,n){var r=[],i=this.localToGlobal(e,t);return this._getObjectsUnderPoint(i.x,i.y,r,n>0,1==n),r},t.getObjectUnderPoint=function(e,t,n){var r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,null,n>0,1==n)},t.getBounds=function(){return this._getBounds(null,!0)},t.getTransformedBounds=function(){return this._getBounds()},t.clone=function(t){var n=this._cloneProps(new e);return t&&this._cloneChildren(n),n},t.toString=function(){return"[Container (name="+this.name+")]"},t._tick=function(e){if(this.tickChildren)for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n.tickEnabled&&n._tick&&n._tick(e)}this.DisplayObject__tick(e)},t._cloneChildren=function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,n=0,r=this.children.length;r>n;n++){var i=this.children[n].clone(!0);i.parent=e,t.push(i)}},t._getObjectsUnderPoint=function(t,n,r,i,s,o){if(o=o||0,!o&&!this._testMask(this,t,n))return null;var u,f=createjs.DisplayObject._hitTestContext;s=s||i&&this._hasMouseEventListener();for(var l=this.children,c=l.length,h=c-1;h>=0;h--){var p=l[h],d=p.hitArea;if(p.visible&&(d||p.isVisible())&&(!i||p.mouseEnabled)&&(d||this._testMask(p,t,n)))if(!d&&p instanceof e){var v=p._getObjectsUnderPoint(t,n,r,i,s,o+1);if(!r&&v)return i&&!this.mouseChildren?this:v}else{if(i&&!s&&!p._hasMouseEventListener())continue;var m=p.getConcatenatedDisplayProps(p._props);if(u=m.matrix,d&&(u.appendMatrix(d.getMatrix(d._props.matrix)),m.alpha=d.alpha),f.globalAlpha=m.alpha,f.setTransform(u.a,u.b,u.c,u.d,u.tx-t,u.ty-n),(d||p).draw(f),!this._testHit(f))continue;if(f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,2,2),!r)return i&&!this.mouseChildren?this:p;r.push(p)}}return null},t._testMask=function(e,t,n){var r=e.mask;if(!r||!r.graphics||r.graphics.isEmpty())return!0;var i=this._props.matrix,s=e.parent;i=s?s.getConcatenatedMatrix(i):i.identity(),i=r.getMatrix(r._props.matrix).prependMatrix(i);var o=createjs.DisplayObject._hitTestContext;return o.setTransform(i.a,i.b,i.c,i.d,i.tx-t,i.ty-n),r.graphics.drawAsPath(o),o.fillStyle="#000",o.fill(),this._testHit(o)?(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,2,2),!0):!1},t._getBounds=function(e,t){var n=this.DisplayObject_getBounds();if(n)return this._transformBounds(n,e,t);var r=this._props.matrix;r=t?r.identity():this.getMatrix(r),e&&r.prependMatrix(e);for(var i=this.children.length,s=null,o=0;i>o;o++){var u=this.children[o];u.visible&&(n=u._getBounds(r))&&(s?s.extend(n.x,n.y,n.width,n.height):s=n.clone())}return s},createjs.Container=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof e?document.getElementById(e):e,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var t=createjs.extend(e,createjs.Container);t._get_nextStage=function(){return this._nextStage},t._set_nextStage=function(e){this._nextStage&&(this._nextStage._prevStage=null),e&&(e._prevStage=this),this._nextStage=e};try{Object.defineProperties(t,{nextStage:{get:t._get_nextStage,set:t._set_nextStage}})}catch(n){}t.update=function(e){if(this.canvas&&(this.tickOnUpdate&&this.tick(e),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var t=this.drawRect,n=this.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),this.autoClear&&(t?n.clearRect(t.x,t.y,t.width,t.height):n.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),n.save(),this.drawRect&&(n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.clip()),this.updateContext(n),this.draw(n,!1),n.restore(),this.dispatchEvent("drawend")}},t.tick=function(e){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var t=new createjs.Event("tick");if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);this._tick(t),this.dispatchEvent("tickend")}},t.handleEvent=function(e){"tick"==e.type&&this.update(e)},t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},t.toDataURL=function(e,t){var n,r=this.canvas.getContext("2d"),i=this.canvas.width,s=this.canvas.height;if(e){n=r.getImageData(0,0,i,s);var o=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=e,r.fillRect(0,0,i,s)}var u=this.canvas.toDataURL(t||"image/png");return e&&(r.putImageData(n,0,0),r.globalCompositeOperation=o),u},t.enableMouseOver=function(e){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==e&&this._testMouseOver(!0)),null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.enableDOMEvents=function(e){null==e&&(e=!0);var t,n,r=this._eventListeners;if(!e&&r){for(t in r)n=r[t],n.t.removeEventListener(t,n.f,!1);this._eventListeners=null}else if(e&&!r&&this.canvas){var i=window.addEventListener?window:document,s=this;r=this._eventListeners={},r.mouseup={t:i,f:function(e){s._handleMouseUp(e)}},r.mousemove={t:i,f:function(e){s._handleMouseMove(e)}},r.dblclick={t:this.canvas,f:function(e){s._handleDoubleClick(e)}},r.mousedown={t:this.canvas,f:function(e){s._handleMouseDown(e)}};for(t in r)n=r[t],n.t.addEventListener(t,n.f,!1)}},t.clone=function(){throw"Stage cannot be cloned."},t.toString=function(){return"[Stage (name="+this.name+")]"},t._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e,null):e.currentStyle,o=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth),u=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),a=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),f=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+r+o,right:t.right+r-a,top:t.top+i+u,bottom:t.bottom+i-f}},t._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0}),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,n,r,i){if((!this._prevStage||void 0!==i)&&this.canvas){var s=this._nextStage,o=this._getPointerData(e),u=o.inBounds;this._updatePointerPosition(e,t,n,r),(u||o.inBounds||this.mouseMoveOutside)&&(-1===e&&o.inBounds==!u&&this._dispatchMouseEvent(this,u?"mouseleave":"mouseenter",!1,e,o,t),this._dispatchMouseEvent(this,"stagemousemove",!1,e,o,t),this._dispatchMouseEvent(o.target,"pressmove",!0,e,o,t)),s&&s._handlePointerMove(e,t,n,r,null)}},t._updatePointerPosition=function(e,t,n,r){var i=this._getElementRect(this.canvas);n-=i.left,r-=i.top;var s=this.canvas.width,o=this.canvas.height;n/=(i.right-i.left)/s,r/=(i.bottom-i.top)/o;var u=this._getPointerData(e);(u.inBounds=n>=0&&r>=0&&s-1>=n&&o-1>=r)?(u.x=n,u.y=r):this.mouseMoveOutside&&(u.x=0>n?0:n>s-1?s-1:n,u.y=0>r?0:r>o-1?o-1:r),u.posEvtObj=t,u.rawX=n,u.rawY=r,(e===this._primaryPointerID||-1===e)&&(this.mouseX=u.x,this.mouseY=u.y,this.mouseInBounds=u.inBounds)},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,n,r){var i=this._nextStage,s=this._getPointerData(e);if(!this._prevStage||void 0!==r){var o=null,u=s.target;r||!u&&!i||(o=this._getObjectsUnderPoint(s.x,s.y,null,!0)),s.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,e,s,t,o),s.down=!1),o==u&&this._dispatchMouseEvent(u,"click",!0,e,s,t),this._dispatchMouseEvent(u,"pressup",!0,e,s,t),n?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):s.target=null,i&&i._handlePointerUp(e,t,n,r||o&&this)}},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,e.pageX,e.pageY)},t._handlePointerDown=function(e,t,n,r,i){this.preventSelection&&t.preventDefault(),(null==this._primaryPointerID||-1===e)&&(this._primaryPointerID=e),null!=r&&this._updatePointerPosition(e,t,n,r);var s=null,o=this._nextStage,u=this._getPointerData(e);i||(s=u.target=this._getObjectsUnderPoint(u.x,u.y,null,!0)),u.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,e,u,t,s),u.down=!0),this._dispatchMouseEvent(s,"mousedown",!0,e,u,t),o&&o._handlePointerDown(e,t,n,r,i||s&&this)},t._testMouseOver=function(e,t,n){if(!this._prevStage||void 0!==t){var r=this._nextStage;if(!this._mouseOverIntervalID)return void (r&&r._testMouseOver(e,t,n));var i=this._getPointerData(-1);if(i&&(e||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var s,o,u,a=i.posEvtObj,f=n||a&&a.target==this.canvas,l=null,c=-1,h="";!t&&(e||this.mouseInBounds&&f)&&(l=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var p=this._mouseOverTarget||[],d=p[p.length-1],v=this._mouseOverTarget=[];for(s=l;s;)v.unshift(s),h||(h=s.cursor),s=s.parent;for(this.canvas.style.cursor=h,!t&&n&&(n.canvas.style.cursor=h),o=0,u=v.length;u>o&&v[o]==p[o];o++)c=o;for(d!=l&&this._dispatchMouseEvent(d,"mouseout",!0,-1,i,a,l),o=p.length-1;o>c;o--)this._dispatchMouseEvent(p[o],"rollout",!1,-1,i,a,l);for(o=v.length-1;o>c;o--)this._dispatchMouseEvent(v[o],"rollover",!1,-1,i,a,d);d!=l&&this._dispatchMouseEvent(l,"mouseover",!0,-1,i,a,d),r&&r._testMouseOver(e,t||l&&this,n||f&&this)}}},t._handleDoubleClick=function(e,t){var n=null,r=this._nextStage,i=this._getPointerData(-1);t||(n=this._getObjectsUnderPoint(i.x,i.y,null,!0),this._dispatchMouseEvent(n,"dblclick",!0,-1,i,e)),r&&r._handleDoubleClick(e,t||n&&this)},t._dispatchMouseEvent=function(e,t,n,r,i,s,o){if(e&&(n||e.hasEventListener(t))){var u=new createjs.MouseEvent(t,n,!1,i.x,i.y,s,r,r===this._primaryPointerID||-1===r,i.rawX,i.rawY,o);e.dispatchEvent(u)}},createjs.Stage=createjs.promote(e,"Container")}(),this.createjs=this.createjs||{},function(){function e(e){this.DisplayObject_constructor(),"string"==typeof e?(this.image=document.createElement("img"),this.image.src=e):this.image=e,this.sourceRect=null}var t=createjs.extend(e,createjs.DisplayObject);t.initialize=e,t.isVisible=function(){var e=this.image,t=this.cacheCanvas||e&&(e.naturalWidth||e.getContext||e.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t)||!this.image)return!0;var n=this.image,r=this.sourceRect;if(r){var i=r.x,s=r.y,o=i+r.width,u=s+r.height,a=0,f=0,l=n.width,c=n.height;0>i&&(a-=i,i=0),o>l&&(o=l),0>s&&(f-=s,s=0),u>c&&(u=c),e.drawImage(n,i,s,o-i,u-s,a,f,o-i,u-s)}else e.drawImage(n,0,0);return!0},t.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;var t=this.image,n=this.sourceRect||t,r=t&&(t.naturalWidth||t.getContext||t.readyState>=2);return r?this._rectangle.setValues(0,0,n.width,n.height):null},t.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this._cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=e,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=t&&this.gotoAndPlay(t)}var t=createjs.extend(e,createjs.DisplayObject);t.initialize=e,t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(0|this._currentFrame);if(!n)return!1;var r=n.rect;return r.width&&r.height&&e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._skipAdvance=!0,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(e){var t=this.framerate||this.spriteSheet.framerate,n=t&&null!=e?e/(1e3/t):1;this._normalizeFrame(n)},t.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},t.clone=function(){return this._cloneProps(new e(this.spriteSheet))},t.toString=function(){return"[Sprite (name="+this.name+")]"},t._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.currentAnimationFrame=this.currentAnimationFrame,e.framerate=this.framerate,e._animation=this._animation,e._currentFrame=this._currentFrame,e._skipAdvance=this._skipAdvance,e},t._tick=function(e){this.paused||(this._skipAdvance||this.advance(e&&e.delta),this._skipAdvance=!1),this.DisplayObject__tick(e)},t._normalizeFrame=function(e){e=e||0;var t,n=this._animation,r=this.paused,i=this._currentFrame;if(n){var s=n.speed||1,o=this.currentAnimationFrame;if(t=n.frames.length,o+e*s>=t){var u=n.next;if(this._dispatchAnimationEnd(n,i,r,u,t-1))return;if(u)return this._goto(u,e-(t-o)/s);this.paused=!0,o=n.frames.length-1}else o+=e*s;this.currentAnimationFrame=o,this._currentFrame=n.frames[0|o]}else if(i=this._currentFrame+=e,t=this.spriteSheet.getNumFrames(),i>=t&&t>0&&!this._dispatchAnimationEnd(n,i,r,t-1)&&(this._currentFrame-=t)>=t)return this._normalizeFrame();i=0|this._currentFrame,this.currentFrame!=i&&(this.currentFrame=i,this.dispatchEvent("change"))},t._dispatchAnimationEnd=function(e,t,n,r,i){var s=e?e.name:null;if(this.hasEventListener("animationend")){var o=new createjs.Event("animationend");o.name=s,o.next=r,this.dispatchEvent(o)}var u=this._animation!=e||this._currentFrame!=t;return u||n||!this.paused||(this.currentAnimationFrame=i,u=!0),u},t._goto=function(e,t){if(this.currentAnimationFrame=0,isNaN(e)){var n=this.spriteSheet.getAnimation(e);n&&(this._animation=n,this.currentAnimation=e,this._normalizeFrame(t))}else this.currentAnimation=this._animation=null,this._currentFrame=e,this._normalizeFrame()},createjs.Sprite=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.DisplayObject_constructor(),this.graphics=e?e:new createjs.Graphics}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e,this),!0)},t.clone=function(t){var n=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new e(n))},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.DisplayObject_constructor(),this.text=e,this.font=t,this.color=n,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var t=createjs.extend(e,createjs.DisplayObject),n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(e._workingContext=n.getContext("2d"),n.width=n.height=1),e.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.color||"#000";return this.outline?(e.strokeStyle=n,e.lineWidth=1*this.outline):e.fillStyle=n,this._drawText(this._prepContext(e)),!0},t.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},t.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},t.getMeasuredHeight=function(){return this._drawText(null,{}).height},t.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""===this.text)return null;var n=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,i=r*e.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(i,o,r,n.height)},t.getMetrics=function(){var t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)},t.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},t.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth,e},t._prepContext=function(e){return e.font=this.font||"10px sans-serif",e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e},t._drawText=function(t,n,r){var i=!!t;i||(t=e._workingContext,t.save(),this._prepContext(t));for(var s=this.lineHeight||this.getMeasuredLineHeight(),o=0,u=0,f=String(this.text).split(/(?:\r\n|\r|\n)/),l=0,c=f.length;c>l;l++){var h=f[l],p=null;if(null!=this.lineWidth&&(p=t.measureText(h).width)>this.lineWidth){var d=h.split(/(\s)/);h=d[0],p=t.measureText(h).width;for(var v=1,m=d.length;m>v;v+=2){var g=t.measureText(d[v]+d[v+1]).width;p+g>this.lineWidth?(i&&this._drawTextLine(t,h,u*s),r&&r.push(h),p>o&&(o=p),h=d[v+1],p=t.measureText(h).width,u++):(h+=d[v]+d[v+1],p+=g)}}i&&this._drawTextLine(t,h,u*s),r&&r.push(h),n&&null==p&&(p=t.measureText(h).width),p>o&&(o=p),u++}return n&&(n.width=o,n.height=u*s),i||t.restore(),n},t._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},t._getMeasuredWidth=function(t){var n=e._workingContext;n.save();var r=this._prepContext(n).measureText(t).width;return n.restore(),r},createjs.Text=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.Container_constructor(),this.text=e||"",this.spriteSheet=t,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var t=createjs.extend(e,createjs.Container);e.maxPoolSize=100,e._spritePool=[],t.draw=function(e,t){this.DisplayObject_draw(e,t)||(this._updateText(),this.Container_draw(e,t))},t.getBounds=function(){return this._updateText(),this.Container_getBounds()},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&e)},t.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},t.addChild=t.addChildAt=t.removeChild=t.removeChildAt=t.removeAllChildren=function(){},t._cloneProps=function(e){return this.Container__cloneProps(e),e.lineHeight=this.lineHeight,e.letterSpacing=this.letterSpacing,e.spaceWidth=this.spaceWidth,e},t._getFrameIndex=function(e,t){var n,r=t.getAnimation(e);return r||(e!=(n=e.toUpperCase())||e!=(n=e.toLowerCase())||(n=null),n&&(r=t.getAnimation(n))),r&&r.frames[0]},t._getFrame=function(e,t){var n=this._getFrameIndex(e,t);return null==n?n:t.getFrame(n)},t._getLineHeight=function(e){var t=this._getFrame("1",e)||this._getFrame("T",e)||this._getFrame("L",e)||e.getFrame(0);return t?t.rect.height:1},t._getSpaceWidth=function(e){var t=this._getFrame("1",e)||this._getFrame("l",e)||this._getFrame("e",e)||this._getFrame("a",e)||e.getFrame(0);return t?t.rect.width:1},t._updateText=function(){var t,n=0,r=0,i=this._oldProps,s=!1,o=this.spaceWidth,u=this.lineHeight,f=this.spriteSheet,l=e._spritePool,c=this.children,h=0,p=c.length;for(var d in i)i[d]!=this[d]&&(i[d]=this[d],s=!0);if(s){var v=!!this._getFrame(" ",f);v||o||(o=this._getSpaceWidth(f)),u||(u=this._getLineHeight(f));for(var m=0,g=this.text.length;g>m;m++){var y=this.text.charAt(m);if(" "!=y||v)if("\n"!=y&&"\r"!=y){var b=this._getFrameIndex(y,f);null!=b&&(p>h?t=c[h]:(c.push(t=l.length?l.pop():new createjs.Sprite),t.parent=this,p++),t.spriteSheet=f,t.gotoAndStop(b),t.x=n,t.y=r,h++,n+=t.getBounds().width+this.letterSpacing)}else"\r"==y&&"\n"==this.text.charAt(m+1)&&m++,n=0,r+=u;else n+=o}for(;p>h;)l.push(t=c.pop()),t.parent=null,p--;l.length>e.maxPoolSize&&(l.length=e.maxPoolSize)}},createjs.BitmapText=createjs.promote(e,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function e(t,n,r,i){this.Container_constructor(),!e.inited&&e.init(),this.mode=t||e.INDEPENDENT,this.startPosition=n||0,this.loop=r,this.currentFrame=0,this.timeline=new createjs.Timeline(null,i,{paused:!0,position:n,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function t(){throw"MovieClipPlugin cannot be instantiated."}var n=createjs.extend(e,createjs.Container);e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",e.inited=!1,e.init=function(){e.inited||(t.install(),e.inited=!0)},n.getLabels=function(){return this.timeline.getLabels()},n.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},n.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(n,{labels:{get:n.getLabels},currentLabel:{get:n.getCurrentLabel},totalFrames:{get:n.getDuration},duration:{get:n.getDuration}})}catch(r){}n.initialize=e,n.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},n.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this._updateTimeline(),this.Container_draw(e,t),!0)},n.play=function(){this.paused=!1},n.stop=function(){this.paused=!0},n.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},n.gotoAndStop=function(e){this.paused=!0,this._goto(e)},n.advance=function(t){var n=e.INDEPENDENT;if(this.mode==n){for(var r=this,i=r.framerate;(r=r.parent)&&null==i;)r.mode==n&&(i=r._framerate);this._framerate=i;var s=null!=i&&-1!=i&&null!=t?t/(1e3/i)+this._t:1,o=0|s;for(this._t=s-o;!this.paused&&o--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},n.clone=function(){throw"MovieClip cannot be cloned."},n.toString=function(){return"[MovieClip (name="+this.name+")]"},n._tick=function(e){this.advance(e&&e.delta),this.Container__tick(e)},n._goto=function(e){var t=this.timeline.resolve(e);null!=t&&(-1==this._prevPos&&(this._prevPos=0/0),this._prevPosition=t,this._t=0,this._updateTimeline())},n._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},n._updateTimeline=function(){var t=this.timeline,n=this.mode!=e.INDEPENDENT;t.loop=null==this.loop?!0:this.loop;var r=n?this.startPosition+(this.mode==e.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,i=n||!this.actionsEnabled?createjs.Tween.NONE:null;if(this.currentFrame=t._calcPosition(r),t.setPosition(r,i),this._prevPosition=t._prevPosition,this._prevPos!=t._prevPos){this.currentFrame=this._prevPos=t._prevPos;for(var s in this._managed)this._managed[s]=1;for(var o=t._tweens,u=0,f=o.length;f>u;u++){var l=o[u],c=l._target;if(c!=this&&!l.passive){var h=l._stepPosition;c instanceof createjs.DisplayObject?this._addManagedChild(c,h):this._setState(c.state,h)}}var p=this.children;for(u=p.length-1;u>=0;u--){var d=p[u].id;1==this._managed[d]&&(this.removeChildAt(u),delete this._managed[d])}}},n._setState=function(e,t){if(e)for(var n=e.length-1;n>=0;n--){var r=e[n],i=r.t,s=r.p;for(var o in s)i[o]=s[o];this._addManagedChild(i,t)}},n._addManagedChild=function(t,n){t._off||(this.addChildAt(t,0),t instanceof e&&(t._synchOffset=n,t.mode==e.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)},n._getBounds=function(e,t){var n=this.DisplayObject_getBounds();return n||(this._updateTimeline(),this.frameBounds&&(n=this._rectangle.copy(this.frameBounds[this.currentFrame]))),n?this._transformBounds(n,e,t):this.Container__getBounds(e,t)},createjs.MovieClip=createjs.promote(e,"Container"),t.priority=100,t.install=function(){createjs.Tween.installPlugin(t,["startPosition"])},t.init=function(e,t,n){return n},t.step=function(){},t.tween=function(t,n,r,i,s,o){return t.target instanceof e?1==o?s[n]:i[n]:r}}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"SpriteSheetUtils cannot be instantiated"}var t=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(e._workingCanvas=t,e._workingContext=t.getContext("2d"),t.width=t.height=1),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var o=document.createElement("img");return o.src=s.toDataURL("image/png"),o},e.mergeAlpha=function(e,t,n){n||(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),n.width=Math.max(t.width,e.width),n.height=Math.max(t.height,e.height);var r=n.getContext("2d");return r.save(),r.drawImage(e,0,0),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),r.restore(),n},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,f=s.length/n,l=0;f>l;l++){var c=s[l];c.__tmp=l,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,o.width+1,o.height+1),o.width=c.width,o.height=c.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?c.width:0,i?c.height:0),u.drawImage(c,0,0);var h=document.createElement("img");h.src=o.toDataURL("image/png"),h.width=c.width,h.height=c.height,s.push(h)}var p=t._frames,d=p.length/n;for(l=0;d>l;l++){c=p[l];var v=c.rect.clone();h=s[c.image.__tmp+f*n];var m={image:h,rect:v,regX:c.regX,regY:c.regY};r&&(v.x=h.width-v.x-v.width,m.regX=v.width-c.regX),i&&(v.y=h.height-v.y-v.height,m.regY=v.height-c.regY),p.push(m)}var g="_"+(r?"h":"")+(i?"v":""),y=t._animations,b=t._data,w=y.length/n;for(l=0;w>l;l++){var E=y[l];c=b[E];var S={name:E+g,speed:c.speed,next:c.next,frames:[]};c.next&&(S.next+=g),p=c.frames;for(var x=0,T=p.length;T>x;x++)S.frames.push(p[x]+d*n);b[S.name]=S,y.push(S.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=e||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var t=createjs.extend(e,createjs.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.addFrame=function(t,n,r,i,s){if(this._data)throw e.ERR_RUNNING;var o=n||t.bounds||t.nominalBounds;return!o&&t.getBounds&&(o=t.getBounds()),o?(r=r||1,this._frames.push({source:t,sourceRect:o,scale:r,funct:i,data:s,index:this._frames.length,height:o.height*r})-1):null},t.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,speed:i}},t.addMovieClip=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;var u=t.frameBounds,f=n||t.bounds||t.nominalBounds;if(!f&&t.getBounds&&(f=t.getBounds()),f||u){var l,c,h=this._frames.length,p=t.timeline.duration;for(l=0;p>l;l++){var d=u&&u[l]?u[l]:f;this.addFrame(t,d,r,this._setupMovieClipFrame,{i:l,f:i,d:s})}var v=t.timeline._labels,m=[];for(var g in v)m.push({index:v[g],label:g});if(m.length)for(m.sort(function(e,t){return e.index-t.index}),l=0,c=m.length;c>l;l++){for(var y=m[l].label,b=h+m[l].index,w=h+(l==c-1?p:m[l+1].index),E=[],S=b;w>S;S++)E.push(S);(!o||(y=o(y,t,b,w)))&&this.addAnimation(y,E,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,framerate:this.framerate,animations:this._animations};var r=this._frames.slice();if(r.sort(function(e,t){return e.height<=t.height?-1:1}),r[r.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var i=0,s=0,o=0;r.length;){var u=this._fillRow(r,i,o,n,t);if(u.w>s&&(s=u.w),i+=u.h,!u.h||!r.length){var f=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");f.width=this._getSize(s,this.maxWidth),f.height=this._getSize(i,this.maxHeight),this._data.images[o]=f,u.h||(s=i=0,o++)}}},t._setupMovieClipFrame=function(e,t){var n=e.actionsEnabled;e.actionsEnabled=!1,e.gotoAndStop(t.i),e.actionsEnabled=n,t.f&&t.f(e,t.d,t.i)},t._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},t._fillRow=function(t,n,r,i,s){var o=this.maxWidth,u=this.maxHeight;n+=s;for(var f=u-n,l=s,c=0,h=t.length-1;h>=0;h--){var p=t[h],d=this._scale*p.scale,v=p.sourceRect,m=p.source,g=Math.floor(d*v.x-s),y=Math.floor(d*v.y-s),b=Math.ceil(d*v.height+2*s),w=Math.ceil(d*v.width+2*s);if(w>o)throw e.ERR_DIMENSIONS;b>f||l+w>o||(p.img=r,p.rect=new createjs.Rectangle(l,n,w,b),c=c||b,t.splice(h,1),i[p.index]=[l,n,w,b,r,Math.round(-g+d*m.regX-s),Math.round(-y+d*m.regY-s)],l+=w)}return{w:l,h:c}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},t._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),t=(new Date).getTime()+e,n=!1;t>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var r=this;this._timerID=setTimeout(function(){r._run()},50-e)}var i=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new createjs.Event("progress");s.progress=i,this.dispatchEvent(s)}},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img],s=i.getContext("2d");return e.funct&&e.funct(e.source,e.data),s.save(),s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip(),s.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),s.scale(t,t),e.source.draw(s),s.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.DisplayObject_constructor(),"string"==typeof e&&(e=document.getElementById(e)),this.mouseEnabled=!1;var t=e.style;t.position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%",this.htmlElement=e,this._oldProps=null}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){return null!=this.htmlElement},t.draw=function(){return!0},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElement cannot be cloned."},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t._tick=function(e){var t=this.getStage();t&&t.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(e)},t._handleDrawEnd=function(){var e=this.htmlElement;if(e){var t=e.style,n=this.getConcatenatedDisplayProps(this._props),r=n.matrix,i=n.visible?"visible":"hidden";if(i!=t.visibility&&(t.visibility=i),n.visible){var s=this._oldProps,o=s&&s.matrix,u=1e4;if(!o||!o.equals(r)){var a="matrix("+(r.a*u|0)/u+","+(r.b*u|0)/u+","+(r.c*u|0)/u+","+(r.d*u|0)/u+","+(r.tx+.5|0);t.transform=t.WebkitTransform=t.OTransform=t.msTransform=a+","+(r.ty+.5|0)+")",t.MozTransform=a+"px,"+(r.ty+.5|0)+"px)",s||(s=this._oldProps=new createjs.DisplayProps(!0,0/0)),s.matrix.copy(r)}s.alpha!=n.alpha&&(t.opacity=""+(n.alpha*u|0)/u,s.alpha=n.alpha)}}},createjs.DOMElement=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){}var t=e.prototype;t.getBounds=function(e){return e},t.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}return this._applyFilter(a)?(s.putImageData(a,o,u),!0):!1},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},t._applyFilter=function(){return!0},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){(isNaN(e)||0>e)&&(e=0),(isNaN(t)||0>t)&&(t=0),(isNaN(n)||1>n)&&(n=1),this.blurX=0|e,this.blurY=0|t,this.quality=0|n}var t=createjs.extend(e,createjs.Filter);e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],t.getBounds=function(e){var t=0|this.blurX,n=0|this.blurY;if(0>=t&&0>=n)return e;var r=Math.pow(this.quality,.2);return(e||new createjs.Rectangle).pad(t*r+1,n*r+1,t*r+1,n*r+1)},t.clone=function(){return new e(this.blurX,this.blurY,this.quality)},t.toString=function(){return"[BlurFilter]"},t._applyFilter=function(t){var n=this.blurX>>1;if(isNaN(n)||0>n)return!1;var r=this.blurY>>1;if(isNaN(r)||0>r)return!1;if(0==n&&0==r)return!1;var i=this.quality;(isNaN(i)||1>i)&&(i=1),i|=0,i>3&&(i=3),1>i&&(i=1);var s=t.data,o=0,u=0,f=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=n+n+1|0,x=r+r+1|0,T=0|t.width,N=0|t.height,C=T-1|0,k=N-1|0,L=n+1|0,A=r+1|0,O={r:0,b:0,g:0,a:0},M=O;for(f=1;S>f;f++)M=M.n={r:0,b:0,g:0,a:0};M.n=O;var _={r:0,b:0,g:0,a:0},D=_;for(f=1;x>f;f++)D=D.n={r:0,b:0,g:0,a:0};D.n=_;for(var P=null,H=0|e.MUL_TABLE[n],B=0|e.SHG_TABLE[n],j=0|e.MUL_TABLE[r],F=0|e.SHG_TABLE[r];i-->0;){p=h=0;var I=H,q=B;for(u=N;--u>-1;){for(d=L*(y=s[0|h]),v=L*(b=s[h+1|0]),m=L*(w=s[h+2|0]),g=L*(E=s[h+3|0]),M=O,f=L;--f>-1;)M.r=y,M.g=b,M.b=w,M.a=E,M=M.n;for(f=1;L>f;f++)l=h+((f>C?C:f)<<2)|0,d+=M.r=s[l],v+=M.g=s[l+1],m+=M.b=s[l+2],g+=M.a=s[l+3],M=M.n;for(P=O,o=0;T>o;o++)s[h++]=d*I>>>q,s[h++]=v*I>>>q,s[h++]=m*I>>>q,s[h++]=g*I>>>q,l=p+((l=o+n+1)<C?l:C)<<2,d-=P.r-(P.r=s[l]),v-=P.g-(P.g=s[l+1]),m-=P.b-(P.b=s[l+2]),g-=P.a-(P.a=s[l+3]),P=P.n;p+=T}for(I=j,q=F,o=0;T>o;o++){for(h=o<<2|0,d=A*(y=s[h])|0,v=A*(b=s[h+1|0])|0,m=A*(w=s[h+2|0])|0,g=A*(E=s[h+3|0])|0,D=_,f=0;A>f;f++)D.r=y,D.g=b,D.b=w,D.a=E,D=D.n;for(c=T,f=1;r>=f;f++)h=c+o<<2,d+=D.r=s[h],v+=D.g=s[h+1],m+=D.b=s[h+2],g+=D.a=s[h+3],D=D.n,k>f&&(c+=T);if(h=o,P=_,i>0)for(u=0;N>u;u++)l=h<<2,s[l+3]=E=g*I>>>q,E>0?(s[l]=d*I>>>q,s[l+1]=v*I>>>q,s[l+2]=m*I>>>q):s[l]=s[l+1]=s[l+2]=0,l=o+((l=u+A)<k?l:k)*T<<2,d-=P.r-(P.r=s[l]),v-=P.g-(P.g=s[l+1]),m-=P.b-(P.b=s[l+2]),g-=P.a-(P.a=s[l+3]),P=P.n,h+=T;else for(u=0;N>u;u++)l=h<<2,s[l+3]=E=g*I>>>q,E>0?(E=255/E,s[l]=(d*I>>>q)*E,s[l+1]=(v*I>>>q)*E,s[l+2]=(m*I>>>q)*E):s[l]=s[l+1]=s[l+2]=0,l=o+((l=u+A)<k?l:k)*T<<2,d-=P.r-(P.r=s[l]),v-=P.g-(P.g=s[l+1]),m-=P.b-(P.b=s[l+2]),g-=P.a-(P.a=s[l+3]),P=P.n,h+=T}}return!0},createjs.BlurFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.alphaMap=e,this._alphaMap=null,this._mapData=null}var t=createjs.extend(e,createjs.Filter);t.clone=function(){var t=new e(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},t.toString=function(){return"[AlphaMapFilter]"},t._applyFilter=function(e){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var t=e.data,n=this._mapData,r=0,i=t.length;i>r;r+=4)t[r+3]=n[r]||0;return!0},t._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var e,t=this._alphaMap=this.alphaMap,n=t;t instanceof HTMLCanvasElement?e=n.getContext("2d"):(n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),n.width=t.width,n.height=t.height,e=n.getContext("2d"),e.drawImage(t,0,0));try{var r=e.getImageData(0,0,t.width,t.height)}catch(i){return!1}return this._mapData=r.data,!0},createjs.AlphaMapFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.mask=e}var t=createjs.extend(e,createjs.Filter);t.applyFilter=function(e,t,n,r,i,s,o,u){return this.mask?(s=s||e,null==o&&(o=t),null==u&&(u=n),s.save(),e!=s?!1:(s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,u),s.restore(),!0)):!0},t.clone=function(){return new e(this.mask)},t.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r,i,s,o,u){this.redMultiplier=null!=e?e:1,this.greenMultiplier=null!=t?t:1,this.blueMultiplier=null!=n?n:1,this.alphaMultiplier=null!=r?r:1,this.redOffset=i||0,this.greenOffset=s||0,this.blueOffset=o||0,this.alphaOffset=u||0}var t=createjs.extend(e,createjs.Filter);t.toString=function(){return"[ColorFilter]"},t.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},t._applyFilter=function(e){for(var t=e.data,n=t.length,r=0;n>r;r+=4)t[r]=t[r]*this.redMultiplier+this.redOffset,t[r+1]=t[r+1]*this.greenMultiplier+this.greenOffset,t[r+2]=t[r+2]*this.blueMultiplier+this.blueOffset,t[r+3]=t[r+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n,r){this.setColor(e,t,n,r)}var t=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e.LENGTH=e.IDENTITY_MATRIX.length,t.setColor=function(e,t,n,r){return this.reset().adjustColor(e,t,n,r)},t.reset=function(){return this.copy(e.IDENTITY_MATRIX)},t.adjustColor=function(e,t,n,r){return this.adjustHue(r),this.adjustContrast(t),this.adjustBrightness(e),this.adjustSaturation(n)},t.adjustBrightness=function(e){return 0==e||isNaN(e)?this:(e=this._cleanValue(e,255),this._multiplyMatrix([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1]),this)},t.adjustContrast=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var n;return 0>t?n=127+t/100*127:(n=t%1,n=0==n?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-n)+e.DELTA_INDEX[(t<<0)+1]*n,n=127*n+127),this._multiplyMatrix([n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),this},t.adjustSaturation=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var t=1+(e>0?3*e/100:e/100),n=.3086,r=.6094,i=.082;return this._multiplyMatrix([n*(1-t)+t,r*(1-t),i*(1-t),0,0,n*(1-t),r*(1-t)+t,i*(1-t),0,0,n*(1-t),r*(1-t),i*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.adjustHue=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,180)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=.213,i=.715,s=.072;return this._multiplyMatrix([r+t*(1-r)+n*-r,i+t*-i+n*-i,s+t*-s+n*(1-s),0,0,r+t*-r+.143*n,i+t*(1-i)+.14*n,s+t*-s+n*-0.283,0,0,r+t*-r+n*-(1-r),i+t*-i+n*i,s+t*(1-s)+n*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.concat=function(t){return t=this._fixMatrix(t),t.length!=e.LENGTH?this:(this._multiplyMatrix(t),this)},t.clone=function(){return(new e).copy(this)},t.toArray=function(){for(var t=[],n=0,r=e.LENGTH;r>n;n++)t[n]=this[n];return t},t.copy=function(t){for(var n=e.LENGTH,r=0;n>r;r++)this[r]=t[r];return this},t.toString=function(){return"[ColorMatrix]"},t._multiplyMatrix=function(e){var t,n,r,i=[];for(t=0;5>t;t++){for(n=0;5>n;n++)i[n]=this[n+5*t];for(n=0;5>n;n++){var s=0;for(r=0;5>r;r++)s+=e[n+5*r]*i[r];this[n+5*t]=s}}},t._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},t._fixMatrix=function(t){return t instanceof e&&(t=t.toArray()),t.length<e.LENGTH?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,e.LENGTH)):t.length>e.LENGTH&&(t=t.slice(0,e.LENGTH)),t},createjs.ColorMatrix=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.matrix=e}var t=createjs.extend(e,createjs.Filter);t.toString=function(){return"[ColorMatrixFilter]"},t.clone=function(){return new e(this.matrix)},t._applyFilter=function(e){for(var t,n,r,i,s=e.data,o=s.length,u=this.matrix,a=u[0],f=u[1],l=u[2],c=u[3],h=u[4],p=u[5],d=u[6],v=u[7],m=u[8],g=u[9],y=u[10],b=u[11],w=u[12],E=u[13],S=u[14],x=u[15],T=u[16],N=u[17],C=u[18],k=u[19],L=0;o>L;L+=4)t=s[L],n=s[L+1],r=s[L+2],i=s[L+3],s[L]=t*a+n*f+r*l+i*c+h,s[L+1]=t*p+n*d+r*v+i*m+g,s[L+2]=t*y+n*b+r*w+i*E+S,s[L+3]=t*x+n*T+r*N+i*C+k;return!0},createjs.ColorMatrixFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},e.enable=function(t,n,r){return t&&t.canvas&&e.isSupported()?t.__touch?!0:(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_enable(t),!0):!1},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_disable(t),delete t.__touch)},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;if(t){var n=e.__touch.f;t.removeEventListener("touchstart",n,!1),t.removeEventListener("touchmove",n,!1),t.removeEventListener("touchend",n,!1),t.removeEventListener("touchcancel",n,!1)}},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;s>i;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&("touchstart"==r?this._handleStart(e,u,t,o.pageX,o.pageY):"touchmove"==r?this._handleMove(e,u,t,o.pageX,o.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};void 0===window.navigator.pointerEnabled?(n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none")):(n.addEventListener("pointerdown",r,!1),window.addEventListener("pointermove",r,!1),window.addEventListener("pointerup",r,!1),window.addEventListener("pointercancel",r,!1),t.__touch.preventDefault&&(n.style.touchAction="none")),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),e.canvas&&e.canvas.removeEventListener("pointerdown",t,!1))},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==n||"pointerdown"==n){if(t.srcElement!=e.canvas)return;i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY)}else i[r]&&("MSPointerMove"==n||"pointermove"==n?this._handleMove(e,r,t,t.pageX,t.pageY):("MSPointerUp"==n||"MSPointerCancel"==n||"pointerup"==n||"pointercancel"==n)&&(delete i[r],this._handleEnd(e,r,t)))}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},createjs.Touch=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.EaselJS=createjs.EaselJS||{};e.version="0.8.2",e.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),define("easeljs",function(){}),define("easeldestroy",["easeljs"],function(e){createjs.Stage.prototype.close=function(){while(this.children.length)this.children[0].parent=null,this.children[0].removeAllEventListeners(),this.children[0].cacheCanvas=null,this.children[0].graphics&&(this.children[0].graphics._ctx=null),this.children.shift();this.removeAllEventListeners(),this.enableDOMEvents(!1),this.canvas=null,createjs.SpriteSheetUtils._workingCanvas=null}});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},i=function(e,t,n){var r,i,s=e.cycle;for(r in s)i=s[r],e[r]="function"==typeof i?i.call(t[n],n):i[n%i.length];delete e.cycle},s=function(e,t,r){n.call(this,e,t,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},o=1e-10,u=n._internals,a=u.isSelector,f=u.isArray,l=s.prototype=n.to({},.1,{}),c=[];s.version="1.18.2",l.constructor=s,l.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=n.killTweensOf,s.getTweensOf=n.getTweensOf,s.lagSmoothing=n.lagSmoothing,s.ticker=n.ticker,s.render=n.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},l.updateTo=function(e,t){var r,i=this.ratio,s=this.vars.immediateRender||e.immediateRender;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in e)this.vars[r]=e[r];if(this._initted||s)if(t)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||s)for(var u,a=1/(1-i),f=this._firstPT;f;)u=f.s+f.c,f.c*=a,f.s=u-f.c,f=f._next;return this},l.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,i,s,a,f,l,c,h,p=this._dirty?this.totalDuration():this._totalDuration,d=this._time,v=this._totalTime,m=this._cycle,y=this._duration,b=this._rawPrevTime;if(e>=p-1e-7?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=y,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,i="onComplete",n=n||this._timeline.autoRemoveChildren),0===y&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(0>b||0>=e&&e>=-1e-7||b===o&&"isPause"!==this.data)&&b!==e&&(n=!0,b>o&&(i="onReverseComplete")),this._rawPrevTime=h=!t||e||b===e?e:o)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==v||0===y&&b>0)&&(i="onReverseComplete",r=this._reversed),0>e&&(this._active=!1,0===y&&(this._initted||!this.vars.lazy||n)&&(b>=0&&(n=!0),this._rawPrevTime=h=!t||e||b===e?e:o)),this._initted||(n=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(a=y+this._repeatDelay,this._cycle=this._totalTime/a>>0,0!==this._cycle&&this._cycle===this._totalTime/a&&this._cycle--,this._time=this._totalTime-this._cycle*a,this._yoyo&&0!==(1&this._cycle)&&(this._time=y-this._time),this._time>y?this._time=y:this._time<0&&(this._time=0)),this._easeType?(f=this._time/y,l=this._easeType,c=this._easePower,(1===l||3===l&&f>=.5)&&(f=1-f),3===l&&(f*=2),1===c?f*=f:2===c?f*=f*f:3===c?f*=f*f*f:4===c&&(f*=f*f*f*f),1===l?this.ratio=1-f:2===l?this.ratio=f:this._time/y<.5?this.ratio=f/2:this.ratio=1-f/2):this.ratio=this._ease.getRatio(this._time/y)),d===this._time&&!n&&m===this._cycle)return void (v!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=d,this._totalTime=v,this._rawPrevTime=b,this._cycle=m,u.lazyTweens.push(this),void (this._lazy=[e,t]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/y):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==d&&e>=0&&(this._active=!0),0===v&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,n):i||(i="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===y)&&(t||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._totalTime!==v||r)&&this._callback("onUpdate")),this._cycle!==m&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),i&&(!this._gc||n)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this._callback(i),0===y&&this._rawPrevTime===o&&h!==o&&(this._rawPrevTime=0))},s.to=function(e,t,n){return new s(e,t,n)},s.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new s(e,t,n)},s.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new s(e,t,r)},s.staggerTo=s.allTo=function(e,t,o,u,l,h,p){u=u||0;var d,v,m,g,y=0,b=[],w=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),l.apply(p||o.callbackScope||this,h||c)},E=o.cycle,S=o.startAt&&o.startAt.cycle;for(f(e)||("string"==typeof e&&(e=n.selector(e)||e),a(e)&&(e=r(e))),e=e||[],0>u&&(e=r(e),e.reverse(),u*=-1),d=e.length-1,m=0;d>=m;m++){v={};for(g in o)v[g]=o[g];if(E&&i(v,e,m),S){S=v.startAt={};for(g in o.startAt)S[g]=o.startAt[g];i(v.startAt,e,m)}v.delay=y+(v.delay||0),m===d&&l&&(v.onComplete=w),b[m]=new s(e[m],t,v),y+=u}return b},s.staggerFrom=s.allFrom=function(e,t,n,r,i,o,u){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,s.staggerTo(e,t,n,r,i,o,u)},s.staggerFromTo=s.allFromTo=function(e,t,n,r,i,o,u,a){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,s.staggerTo(e,t,r,i,o,u,a)},s.delayedCall=function(e,t,n,r,i){return new s(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,useFrames:i,overwrite:0})},s.set=function(e,t){return new s(e,0,t)},s.isTweening=function(e){return n.getTweensOf(e,!0).length>0};var h=function(e,t){for(var r=[],i=0,s=e._first;s;)s instanceof n?r[i++]=s:(t&&(r[i++]=s),r=r.concat(h(s,t)),i=r.length),s=s._next;return r},p=s.getAllTweens=function(t){return h(e._rootTimeline,t).concat(h(e._rootFramesTimeline,t))};s.killAll=function(e,n,r,i){null==n&&(n=!0),null==r&&(r=!0);var s,o,u,a=p(0!=i),f=a.length,l=n&&r&&i;for(u=0;f>u;u++)o=a[u],(l||o instanceof t||(s=o.target===o.vars.onComplete)&&r||n&&!s)&&(e?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},s.killChildTweensOf=function(e,t){if(null!=e){var i,o,l,c,h,p=u.tweenLookup;if("string"==typeof e&&(e=n.selector(e)||e),a(e)&&(e=r(e)),f(e))for(c=e.length;--c>-1;)s.killChildTweensOf(e[c],t);else{i=[];for(l in p)for(o=p[l].target.parentNode;o;)o===e&&(i=i.concat(p[l].tweens)),o=o.parentNode;for(h=i.length,c=0;h>c;c++)t&&i[c].totalTime(i[c].totalDuration()),i[c]._enabled(!1,!1)}}};var d=function(e,n,r,i){n=n!==!1,r=r!==!1,i=i!==!1;for(var s,o,u=p(i),a=n&&r&&i,f=u.length;--f>-1;)o=u[f],(a||o instanceof t||(s=o.target===o.vars.onComplete)&&r||n&&!s)&&o.paused(e)};return s.pauseAll=function(e,t,n){d(!0,e,t,n)},s.resumeAll=function(e,t,n){d(!1,e,t,n)},s.globalTimeScale=function(t){var r=e._rootTimeline,i=n.ticker.time;return arguments.length?(t=t||o,r._startTime=i-(i-r._startTime)*r._timeScale/t,r=e._rootFramesTimeline,i=n.ticker.frame,r._startTime=i-(i-r._startTime)*r._timeScale/t,r._timeScale=e._rootTimeline._timeScale=t,t):r._timeScale},l.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},s},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n,r,i=this.vars;for(r in i)n=i[r],a(n)&&-1!==n.join("").indexOf("{self}")&&(i[r]=this._swapSelfInParams(n));a(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)},i=1e-10,s=n._internals,o=r._internals={},u=s.isSelector,a=s.isArray,f=s.lazyTweens,l=s.lazyRender,c=_gsScope._gsDefine.globals,h=function(e){var t,n={};for(t in e)n[t]=e[t];return n},p=function(e,t,n){var r,i,s=e.cycle;for(r in s)i=s[r],e[r]="function"==typeof i?i.call(t[n],n):i[n%i.length];delete e.cycle},d=o.pauseCallback=function(){},v=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},m=r.prototype=new t;return r.version="1.18.2",m.constructor=r,m.kill()._gc=m._forcingPlayhead=m._hasPause=!1,m.to=function(e,t,r,i){var s=r.repeat&&c.TweenMax||n;return t?this.add(new s(e,t,r),i):this.set(e,r,i)},m.from=function(e,t,r,i){return this.add((r.repeat&&c.TweenMax||n).from(e,t,r),i)},m.fromTo=function(e,t,r,i,s){var o=i.repeat&&c.TweenMax||n;return t?this.add(o.fromTo(e,t,r,i),s):this.set(e,i,s)},m.staggerTo=function(e,t,i,s,o,a,f,l){var c,d,m=new r({onComplete:a,onCompleteParams:f,callbackScope:l,smoothChildTiming:this.smoothChildTiming}),g=i.cycle;for("string"==typeof e&&(e=n.selector(e)||e),e=e||[],u(e)&&(e=v(e)),s=s||0,0>s&&(e=v(e),e.reverse(),s*=-1),d=0;d<e.length;d++)c=h(i),c.startAt&&(c.startAt=h(c.startAt),c.startAt.cycle&&p(c.startAt,e,d)),g&&p(c,e,d),m.to(e[d],t,c,d*s);return this.add(m,o)},m.staggerFrom=function(e,t,n,r,i,s,o,u){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(e,t,n,r,i,s,o,u)},m.staggerFromTo=function(e,t,n,r,i,s,o,u,a){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,this.staggerTo(e,t,r,i,s,o,u,a)},m.call=function(e,t,r,i){return this.add(n.delayedCall(0,e,t,r),i)},m.set=function(e,t,r){return r=this._parseTimeOrLabel(r,0,!0),null==t.immediateRender&&(t.immediateRender=r===this._time&&!this._paused),this.add(new n(e,0,t),r)},r.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var i,s,o=new r(e),u=o._timeline;for(null==t&&(t=!0),u._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=u._time,i=u._first;i;)s=i._next,t&&i instanceof n&&i.target===i.vars.onComplete||o.add(i,i._startTime-i._delay),i=s;return u.add(o,0),o},m.add=function(i,s,o,u){var f,l,c,h,p,d;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,i)),!(i instanceof e)){if(i instanceof Array||i&&i.push&&a(i)){for(o=o||"normal",u=u||0,f=s,l=i.length,c=0;l>c;c++)a(h=i[c])&&(h=new r({tweens:h})),this.add(h,f),"string"!=typeof h&&"function"!=typeof h&&("sequence"===o?f=h._startTime+h.totalDuration()/h._timeScale:"start"===o&&(h._startTime-=h.delay())),f+=u;return this._uncache(!0)}if("string"==typeof i)return this.addLabel(i,s);if("function"!=typeof i)throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string.";i=n.delayedCall(0,i)}if(t.prototype.add.call(this,i,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,d=p.rawTime()>i._startTime;p._timeline;)d&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},m.remove=function(t){if(t instanceof e){this._remove(t,!1);var n=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:n._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&a(t)){for(var r=t.length;--r>-1;)this.remove(t[r]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},m._remove=function(e,n){t.prototype._remove.call(this,e,n);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},m.insert=m.insertMultiple=function(e,t,n,r){return this.add(e,t||0,n,r)},m.appendMultiple=function(e,t,n,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,r)},m.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},m.addPause=function(e,t,r,i){var s=n.delayedCall(0,d,r,i||this);return s.vars.onComplete=s.vars.onReverseComplete=t,s.data="isPause",this._hasPause=!0,this.add(s,e)},m.removeLabel=function(e){return delete this._labels[e],this},m.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},m._parseTimeOrLabel=function(t,n,r,i){var s;if(i instanceof e&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&a(i)))for(s=i.length;--s>-1;)i[s]instanceof e&&i[s].timeline===this&&this.remove(i[s]);if("string"==typeof n)return this._parseTimeOrLabel(n,r&&"number"==typeof t&&null==this._labels[n]?t-this.duration():0,r);if(n=n||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(s=t.indexOf("="),-1===s)return null==this._labels[t]?r?this._labels[t]=this.duration()+n:n:this._labels[t]+n;n=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,r):this.duration()}return Number(t)+n},m.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(e,t){return this.play(e,t)},m.gotoAndStop=function(e,t){return this.pause(e,t)},m.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r,s,o,u,a,c,h,p=this._dirty?this.totalDuration():this._totalDuration,d=this._time,v=this._startTime,m=this._timeScale,g=this._paused;if(e>=p-1e-7)this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(s=!0,u="onComplete",a=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===i)&&this._rawPrevTime!==e&&this._first&&(a=!0,this._rawPrevTime>i&&(u="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,e=p+1e-4;else if(1e-7>e)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==i&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(u="onReverseComplete",s=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(a=s=!0,u="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(a=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,0===e&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;e=0,this._initted||(a=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=d)for(r=this._first;r&&r._startTime<=e&&!c;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(c=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!c;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(c=r),r=r._prev;c&&(this._time=e=c._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==d&&this._first||n||a||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&e>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._time&&(t||this._callback("onStart")),h=this._time,h>=d)for(r=this._first;r&&(o=r._next,h===this._time&&(!this._paused||g));)(r._active||r._startTime<=h&&!r._paused&&!r._gc)&&(c===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=o;else for(r=this._last;r&&(o=r._prev,h===this._time&&(!this._paused||g));){if(r._active||r._startTime<=d&&!r._paused&&!r._gc){if(c===r){for(c=r._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(e-c._startTime)*c._timeScale:(e-c._startTime)*c._timeScale,t,n),c=c._prev;c=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)}r=o}this._onUpdate&&(t||(f.length&&l(),this._callback("onUpdate"))),u&&(this._gc||(v===this._startTime||m!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(s&&(f.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[u]&&this._callback(u)))}},m._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof r&&e._hasPausedChild())return!0;e=e._next}return!1},m.getChildren=function(e,t,r,i){i=i||-9999999999;for(var s=[],o=this._first,u=0;o;)o._startTime<i||(o instanceof n?t!==!1&&(s[u++]=o):(r!==!1&&(s[u++]=o),e!==!1&&(s=s.concat(o.getChildren(!0,t,r)),u=s.length))),o=o._next;return s},m.getTweensOf=function(e,t){var r,i,s=this._gc,o=[],u=0;for(s&&this._enabled(!0,!0),r=n.getTweensOf(e),i=r.length;--i>-1;)(r[i].timeline===this||t&&this._contains(r[i]))&&(o[u++]=r[i]);return s&&this._enabled(!1,!0),o},m.recent=function(){return this._recent},m._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},m.shiftChildren=function(e,t,n){n=n||0;for(var r,i=this._first,s=this._labels;i;)i._startTime>=n&&(i._startTime+=e),i=i._next;if(t)for(r in s)s[r]>=n&&(s[r]+=e);return this._uncache(!0)},m._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=n.length,i=!1;--r>-1;)n[r]._kill(e,t)&&(i=!0);return i},m.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;for(this._time=this._totalTime=0;--n>-1;)t[n]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},m._enabled=function(e,n){if(e===this._gc)for(var r=this._first;r;)r._enabled(e,!0),r=r._next;return t.prototype._enabled.call(this,e,n)},m.totalTime=function(t,n,r){this._forcingPlayhead=!0;var i=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},m.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,n,r=0,i=this._last,s=999999999999;i;)t=i._prev,i._dirty&&i.totalDuration(),i._startTime>s&&this._sortChildren&&!i._paused?this.add(i,i._startTime-i._delay):s=i._startTime,i._startTime<0&&!i._paused&&(r-=i._startTime,this._timeline.smoothChildTiming&&(this._startTime+=i._startTime/this._timeScale),this.shiftChildren(-i._startTime,!1,-9999999999),s=0),n=i._startTime+i._totalDuration/i._timeScale,n>r&&(r=n),i=t;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},m.paused=function(t){if(!t)for(var n=this._first,r=this._time;n;)n._startTime===r&&"isPause"===n.data&&(n._rawPrevTime=0),n=n._next;return e.prototype.paused.apply(this,arguments)},m.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},m.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var r=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},i=1e-10,s=t._internals,o=s.lazyTweens,u=s.lazyRender,a=new n(null,null,1,0),f=r.prototype=new e;return f.constructor=r,f.kill()._gc=!1,r.version="1.18.2",f.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},f.addCallback=function(e,n,r,i){return this.add(t.delayedCall(0,e,r,i),n)},f.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var n=this.getTweensOf(e,!1),r=n.length,i=this._parseTimeOrLabel(t);--r>-1;)n[r]._startTime===i&&n[r]._enabled(!1,!1);return this},f.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},f.tweenTo=function(e,n){n=n||{};var r,i,s,o={ease:a,useFrames:this.usesFrames(),immediateRender:!1};for(i in n)o[i]=n[i];return o.time=this._parseTimeOrLabel(e),r=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new t(this,r,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&r===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),n.onStart&&s._callback("onStart")},s},f.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},n.immediateRender=n.immediateRender!==!1;var r=this.tweenTo(t,n);return r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)},f.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r,s,a,f,l,c,p,d,v=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,y=this._time,b=this._totalTime,w=this._startTime,E=this._timeScale,S=this._rawPrevTime,x=this._paused,T=this._cycle;if(e>=v-1e-7)this._locked||(this._totalTime=v,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,f="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||0>S||S===i)&&S!==e&&this._first&&(l=!0,S>i&&(f="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,this._yoyo&&0!==(1&this._cycle)?this._time=e=0:(this._time=m,e=m+1e-4);else if(1e-7>e)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==y||0===m&&S!==i&&(S>0||0>e&&S>=0)&&!this._locked)&&(f="onReverseComplete",s=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=s=!0,f="onReverseComplete"):S>=0&&this._first&&(l=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=m||!t||e||this._rawPrevTime===e?e:i,0===e&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;e=0,this._initted||(l=!0)}else if(0===m&&0>S&&(l=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(c=m+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,e=m+1e-4):this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t){if(e=this._time,e>=y)for(r=this._first;r&&r._startTime<=e&&!p;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(p=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!p;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(p=r),r=r._prev;p&&(this._time=e=p._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==T&&!this._locked){var N=this._yoyo&&0!==(1&T),C=N===(this._yoyo&&0!==(1&this._cycle)),k=this._totalTime,L=this._cycle,A=this._rawPrevTime,O=this._time;if(this._totalTime=T*m,this._cycle<T?N=!N:this._totalTime+=m,this._time=y,this._rawPrevTime=0===m?S-1e-4:S,this._cycle=T,this._locked=!0,y=N?0:m,this.render(y,t,0===m),t||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),y!==this._time)return;if(C&&(y=N?m+1e-4:-0.0001,this.render(y,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=O,this._totalTime=k,this._cycle=L,this._rawPrevTime=A}if(!(this._time!==y&&this._first||n||l||p))return void (b!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==b&&e>0&&(this._active=!0),0===b&&this.vars.onStart&&0!==this._totalTime&&(t||this._callback("onStart")),d=this._time,d>=y)for(r=this._first;r&&(a=r._next,d===this._time&&(!this._paused||x));)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(p===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=a;else for(r=this._last;r&&(a=r._prev,d===this._time&&(!this._paused||x));){if(r._active||r._startTime<=y&&!r._paused&&!r._gc){if(p===r){for(p=r._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(e-p._startTime)*p._timeScale:(e-p._startTime)*p._timeScale,t,n),p=p._prev;p=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)}r=a}this._onUpdate&&(t||(o.length&&u(),this._callback("onUpdate"))),f&&(this._locked||this._gc||(w===this._startTime||E!==this._timeScale)&&(0===this._time||v>=this.totalDuration())&&(s&&(o.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[f]&&this._callback(f)))},f.getActive=function(e,t,n){null==e&&(e=!0),null==t&&(t=!0),null==n&&(n=!1);var r,i,s=[],o=this.getChildren(e,t,n),u=0,a=o.length;for(r=0;a>r;r++)i=o[r],i.isActive()&&(s[u++]=i);return s},f.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,n=this.getLabelsArray(),r=n.length;for(t=0;r>t;t++)if(n[t].time>e)return n[t].name;return null},f.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),n=t.length;--n>-1;)if(t[n].time<e)return t[n].name;return null},f.getLabelsArray=function(){var e,t=[],n=0;for(e in this._labels)t[n++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},f.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},f.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},f.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},f.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},f.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},f.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},f.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},f.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var e=180/Math.PI,t=[],n=[],r=[],i={},s=_gsScope._gsDefine.globals,o=function(e,t,n,r){this.a=e,this.b=t,this.c=n,this.d=r,this.da=r-e,this.ca=n-e,this.ba=t-e},u=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",a=function(e,t,n,r){var i={a:e},s={},o={},u={c:r},a=(e+t)/2,f=(t+n)/2,l=(n+r)/2,c=(a+f)/2,h=(f+l)/2,p=(h-c)/8;return i.b=a+(e-a)/4,s.b=c+p,i.c=s.a=(i.b+s.b)/2,s.c=o.a=(c+h)/2,o.b=h-p,u.b=l+(r-l)/4,o.c=u.a=(o.b+u.b)/2,[i,s,o,u]},f=function(e,i,s,o,u){var f,l,c,h,p,d,v,m,g,y,w,E,S,x=e.length-1,T=0,N=e[0].a;for(f=0;x>f;f++)p=e[T],l=p.a,c=p.d,h=e[T+1].d,u?(w=t[f],E=n[f],S=(E+w)*i*.25/(o?.5:r[f]||.5),d=c-(c-l)*(o?.5*i:0!==w?S/w:0),v=c+(h-c)*(o?.5*i:0!==E?S/E:0),m=c-(d+((v-d)*(3*w/(w+E)+.5)/4||0))):(d=c-(c-l)*i*.5,v=c+(h-c)*i*.5,m=c-(d+v)/2),d+=m,v+=m,p.c=g=d,0!==f?p.b=N:p.b=N=p.a+.6*(p.c-p.a),p.da=c-l,p.ca=g-l,p.ba=N-l,s?(y=a(l,N,g,c),e.splice(T,1,y[0],y[1],y[2],y[3]),T+=4):T++,N=v;p=e[T],p.b=N,p.c=N+.4*(p.d-N),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=N-p.a,s&&(y=a(p.a,N,p.c,p.d),e.splice(T,1,y[0],y[1],y[2],y[3]))},l=function(e,r,i,s){var u,a,f,l,c,h,p=[];if(s)for(e=[s].concat(e),a=e.length;--a>-1;)"string"==typeof (h=e[a][r])&&"="===h.charAt(1)&&(e[a][r]=s[r]+Number(h.charAt(0)+h.substr(2)));if(u=e.length-2,0>u)return p[0]=new o(e[0][r],0,0,e[-1>u?0:1][r]),p;for(a=0;u>a;a++)f=e[a][r],l=e[a+1][r],p[a]=new o(f,0,0,l),i&&(c=e[a+2][r],t[a]=(t[a]||0)+(l-f)*(l-f),n[a]=(n[a]||0)+(c-l)*(c-l));return p[a]=new o(e[a][r],0,0,e[a+1][r]),p},c=function(e,s,o,a,c,h){var p,d,v,m,g,y,w,E,S={},x=[],T=h||e[0];c="string"==typeof c?","+c+",":u,null==s&&(s=1);for(d in e[0])x.push(d);if(e.length>1){for(E=e[e.length-1],w=!0,p=x.length;--p>-1;)if(d=x[p],Math.abs(T[d]-E[d])>.05){w=!1;break}w&&(e=e.concat(),h&&e.unshift(h),e.push(e[1]),h=e[e.length-3])}for(t.length=n.length=r.length=0,p=x.length;--p>-1;)d=x[p],i[d]=-1!==c.indexOf(","+d+","),S[d]=l(e,d,i[d],h);for(p=t.length;--p>-1;)t[p]=Math.sqrt(t[p]),n[p]=Math.sqrt(n[p]);if(!a){for(p=x.length;--p>-1;)if(i[d])for(v=S[x[p]],y=v.length-1,m=0;y>m;m++)g=v[m+1].da/n[m]+v[m].da/t[m],r[m]=(r[m]||0)+g*g;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=x.length,m=o?4:1;--p>-1;)d=x[p],v=S[d],f(v,s,o,a,i[d]),w&&(v.splice(0,m),v.splice(v.length-m,m));return S},h=function(e,t,n){t=t||"soft";var r,i,s,u,a,f,l,c,h,p,d,v={},m="cubic"===t?3:2,y="soft"===t,b=[];if(y&&n&&(e=[n].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(h in e[0])b.push(h);for(f=b.length;--f>-1;){for(h=b[f],v[h]=a=[],p=0,c=e.length,l=0;c>l;l++)r=null==n?e[l][h]:"string"==typeof (d=e[l][h])&&"="===d.charAt(1)?n[h]+Number(d.charAt(0)+d.substr(2)):Number(d),y&&l>1&&c-1>l&&(a[p++]=(r+a[p-2])/2),a[p++]=r;for(c=p-m+1,p=0,l=0;c>l;l+=m)r=a[l],i=a[l+1],s=a[l+2],u=2===m?0:a[l+3],a[p++]=d=3===m?new o(r,i,s,u):new o(r,(2*i+r)/3,(2*i+s)/3,s);a.length=p}return v},p=function(e,t,n){for(var r,i,s,o,u,a,f,l,c,h,p,d=1/n,v=e.length;--v>-1;)for(h=e[v],s=h.a,o=h.d-s,u=h.c-s,a=h.b-s,r=i=0,l=1;n>=l;l++)f=d*l,c=1-f,r=i-(i=(f*f*o+3*c*(f*u+c*a))*f),p=v*n+l-1,t[p]=(t[p]||0)+r*r},d=function(e,t){t=t>>0||6;var n,r,i,s,o=[],u=[],a=0,f=0,l=t-1,c=[],h=[];for(n in e)p(e[n],o,t);for(i=o.length,r=0;i>r;r++)a+=Math.sqrt(o[r]),s=r%t,h[s]=a,s===l&&(f+=a,s=r/t>>0,c[s]=h,u[s]=f,a=0,h=[]);return{length:f,lengths:u,segments:c}},v=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var r,i,s,o,u,a=t.values||[],f={},l=a[0],p=t.autoRotate||n.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(r in l)this._props.push(r);for(s=this._props.length;--s>-1;)r=this._props[s],this._overwriteProps.push(r),i=this._func[r]="function"==typeof e[r],f[r]=i?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),u||f[r]!==a[0][r]&&(u=f);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?c(a,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,u):h(a,t.type,f),this._segCount=this._beziers[r].length,this._timeRes){var v=d(this._beziers,this._timeRes);this._length=v.length,this._lengths=v.lengths,this._segments=v.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),s=p.length;--s>-1;){for(o=0;3>o;o++)r=p[s][o],this._func[r]="function"==typeof e[r]?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]:!1;r=p[s][2],this._initialRotations[s]=this._func[r]?this._func[r].call(this._target):this._target[r]}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(t){var n,r,i,s,o,u,a,f,l,c,h=this._segCount,p=this._func,d=this._target,v=t!==this._startRatio;if(this._timeRes){if(l=this._lengths,c=this._curSeg,t*=this._length,i=this._li,t>this._l2&&h-1>i){for(f=h-1;f>i&&(this._l2=l[++i])<=t;);this._l1=l[i-1],this._li=i,this._curSeg=c=this._segments[i],this._s2=c[this._s1=this._si=0]}else if(t<this._l1&&i>0){for(;i>0&&(this._l1=l[--i])>=t;);0===i&&t<this._l1?this._l1=0:i++,this._l2=l[i],this._li=i,this._curSeg=c=this._segments[i],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(n=i,t-=this._l1,i=this._si,t>this._s2&&i<c.length-1){for(f=c.length-1;f>i&&(this._s2=c[++i])<=t;);this._s1=c[i-1],this._si=i}else if(t<this._s1&&i>0){for(;i>0&&(this._s1=c[--i])>=t;);0===i&&t<this._s1?this._s1=0:i++,this._s2=c[i],this._si=i}u=(i+(t-this._s1)/(this._s2-this._s1))*this._prec}else n=0>t?0:t>=1?h-1:h*t>>0,u=(t-n*(1/h))*h;for(r=1-u,i=this._props.length;--i>-1;)s=this._props[i],o=this._beziers[s][n],a=(u*u*o.da+3*r*(u*o.ca+r*o.ba))*u+o.a,this._round[s]&&(a=Math.round(a)),p[s]?d[s](a):d[s]=a;if(this._autoRotate){var m,g,y,b,w,E,S,x=this._autoRotate;for(i=x.length;--i>-1;)s=x[i][2],E=x[i][3]||0,S=x[i][4]===!0?1:e,o=this._beziers[x[i][0]],m=this._beziers[x[i][1]],o&&m&&(o=o[n],m=m[n],g=o.a+(o.b-o.a)*u,b=o.b+(o.c-o.b)*u,g+=(b-g)*u,b+=(o.c+(o.d-o.c)*u-b)*u,y=m.a+(m.b-m.a)*u,w=m.b+(m.c-m.b)*u,y+=(w-y)*u,w+=(m.c+(m.d-m.c)*u-w)*u,a=v?Math.atan2(w-y,b-g)*S+E:this._initialRotations[i],p[s]?d[s](a):d[s]=a)}}}),m=v.prototype;v.bezierThrough=c,v.cubicToQuadratic=a,v._autoCSS=!0,v.quadraticToCubic=function(e,t,n){return new o(e,(2*t+e)/3,(2*t+n)/3,n)},v._cssRegister=function(){var e=s.CSSPlugin;if(e){var t=e._internals,n=t._parseToProxy,r=t._setPluginRatio,i=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,s,o,u,a){t instanceof Array&&(t={values:t}),a=new v;var f,l,c,h=t.values,p=h.length-1,d=[],m={};if(0>p)return u;for(f=0;p>=f;f++)c=n(e,h[f],o,u,a,p!==f),d[f]=c.end;for(l in t)m[l]=t[l];return m.values=d,u=new i(e,"bezier",0,0,c.pt,2),u.data=c,u.plugin=a,u.setRatio=r,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(f=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=c.end.left?[["left","top","rotation",f,!1]]:null!=c.end.x?[["x","y","rotation",f,!1]]:!1),m.autoRotate&&(o._transform||o._enableTransforms(!1),c.autoRotate=o._target._gsTransform),a._onInitTween(c.proxy,m,o._tween),u}})}},m._roundProps=function(e,t){for(var n=this._overwriteProps,r=n.length;--r>-1;)(e[n[r]]||e.bezier||e.bezierThrough)&&(this._round[n[r]]=t)},m._kill=function(e){var t,n,r=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],n=r.length;--n>-1;)r[n]===t&&r.splice(n,1);return this._super._kill.call(this,e)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var n,r,i,s,o=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},u=_gsScope._gsDefine.globals,a={},f=o.prototype=new e("css");f.constructor=o,o.version="1.18.2",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",o.defaultSmoothOrigin=!0,f="px",o.suffixMap={top:f,right:f,bottom:f,left:f,width:f,height:f,fontSize:f,padding:f,margin:f,perspective:f,lineHeight:""};var l,c,h,p,d,v,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,y=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,b=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,E=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,x=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,N=/([A-Z])/g,C=/-([a-z])/gi,k=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,L=function(e,t){return t.toUpperCase()},A=/(?:Left|Right|Width)/i,O=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,M=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,_=/,(?=[^\)]*(?:\(|$))/gi,D=Math.PI/180,P=180/Math.PI,H={},B=document,j=function(e){return B.createElementNS?B.createElementNS("http://www.w3.org/1999/xhtml",e):B.createElement(e)},F=j("div"),I=j("img"),q=o._internals={_specialProps:a},R=navigator.userAgent,U=function(){var e=R.indexOf("Android"),t=j("a");return h=-1!==R.indexOf("Safari")&&-1===R.indexOf("Chrome")&&(-1===e||Number(R.substr(e+8,1))>3),d=h&&Number(R.substr(R.indexOf("Version/")+8,1))<6,p=-1!==R.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(R)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(R))&&(v=parseFloat(RegExp.$1)),t?(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity)):!1}(),z=function(e){return E.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(e){window.console&&0},X="",V="",$=function(e,t){t=t||F;var n,r,i=t.style;if(void 0!==i[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),n=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===i[n[r]+e];);return r>=0?(V=3===r?"ms":n[r],X="-"+V.toLowerCase()+"-",V+e):null},J=B.defaultView?B.defaultView.getComputedStyle:function(){},K=o.getStyle=function(e,t,n,r,i){var s;return U||"opacity"!==t?(!r&&e.style[t]?s=e.style[t]:(n=n||J(e))?s=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(N,"-$1").toLowerCase()):e.currentStyle&&(s=e.currentStyle[t]),null==i||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:i):z(e)},Q=q.convertToPixels=function(e,n,r,i,s){if("px"===i||!i)return r;if("auto"===i||!r)return 0;var u,a,f,l=A.test(n),c=e,h=F.style,p=0>r;if(p&&(r=-r),"%"===i&&-1!==n.indexOf("border"))u=r/100*(l?e.clientWidth:e.clientHeight);else{if(h.cssText="border:0 solid red;position:"+K(e,"position")+";line-height:0;","%"!==i&&c.appendChild&&"v"!==i.charAt(0)&&"rem"!==i)h[l?"borderLeftWidth":"borderTopWidth"]=r+i;else{if(c=e.parentNode||B.body,a=c._gsCache,f=t.ticker.frame,a&&l&&a.time===f)return a.width*r/100;h[l?"width":"height"]=r+i}c.appendChild(F),u=parseFloat(F[l?"offsetWidth":"offsetHeight"]),c.removeChild(F),l&&"%"===i&&o.cacheWidths!==!1&&(a=c._gsCache=c._gsCache||{},a.time=f,a.width=u/r*100),0!==u||s||(u=Q(e,n,r,i,!0))}return p?-u:u},G=q.calculateOffset=function(e,t,n){if("absolute"!==K(e,"position",n))return 0;var r="left"===t?"Left":"Top",i=K(e,"margin"+r,n);return e["offset"+r]-(Q(e,t,parseFloat(i),i.replace(w,""))||0)},Y=function(e,t){var n,r,i,s={};if(t=t||J(e,null))if(n=t.length)for(;--n>-1;)i=t[n],(-1===i.indexOf("-transform")||Nt===i)&&(s[i.replace(C,L)]=t.getPropertyValue(i));else for(n in t)(-1===n.indexOf("Transform")||Tt===n)&&(s[n]=t[n]);else if(t=e.currentStyle||e.style)for(n in t)"string"==typeof n&&void 0===s[n]&&(s[n.replace(C,L)]=t[n]);return U||(s.opacity=z(e)),r=jt(e,t,!1),s.rotation=r.rotation,s.skewX=r.skewX,s.scaleX=r.scaleX,s.scaleY=r.scaleY,s.x=r.x,s.y=r.y,kt&&(s.z=r.z,s.rotationX=r.rotationX,s.rotationY=r.rotationY,s.scaleZ=r.scaleZ),s.filters&&delete s.filters,s},Z=function(e,t,n,r,i){var s,o,u,a={},f=e.style;for(o in n)"cssText"!==o&&"length"!==o&&isNaN(o)&&(t[o]!==(s=n[o])||i&&i[o])&&-1===o.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(a[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof t[o]||""===t[o].replace(b,"")?s:0:G(e,o),void 0!==f[o]&&(u=new dt(f,o,f[o],u)));if(r)for(o in r)"className"!==o&&(a[o]=r[o]);return{difs:a,firstMPT:u}},et={width:["Left","Right"],height:["Top","Bottom"]},tt=["marginLeft","marginRight","marginTop","marginBottom"],nt=function(e,t,n){var r=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),i=et[t],s=i.length;for(n=n||J(e,null);--s>-1;)r-=parseFloat(K(e,"padding"+i[s],n,!0))||0,r-=parseFloat(K(e,"border"+i[s]+"Width",n,!0))||0;return r},rt=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(null==e||""===e)&&(e="0 0");var n=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":n[0],i=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":n[1];return null==i?i="center"===r?"50%":"0":"center"===i&&(i="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+i+(n.length>2?" "+n[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==i.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===i.charAt(1),t.ox=parseFloat(r.replace(b,"")),t.oy=parseFloat(i.replace(b,"")),t.v=e),t||e},it=function(e,t){return"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},st=function(e,t){return null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)},ot=function(e,t,n,r){var i,s,o,u,a,f=1e-6;return null==e?u=t:"number"==typeof e?u=e:(i=360,s=e.split("_"),a="="===e.charAt(1),o=(a?parseInt(e.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===e.indexOf("rad")?1:P)-(a?0:t),s.length&&(r&&(r[n]=t+o),-1!==e.indexOf("short")&&(o%=i,o!==o%(i/2)&&(o=0>o?o+i:o-i)),-1!==e.indexOf("_cw")&&0>o?o=(o+9999999999*i)%i-(o/i|0)*i:-1!==e.indexOf("ccw")&&o>0&&(o=(o-9999999999*i)%i-(o/i|0)*i)),u=t+o),f>u&&u>-f&&(u=0),u},ut={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},at=function(e,t,n){return e=0>e?e+1:e>1?e-1:e,255*(1>6*e?t+(n-t)*e*6:.5>e?n:2>3*e?t+(n-t)*(2/3-e)*6:t)+.5|0},ft=o.parseColor=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;if(e)if("number"==typeof e)n=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),ut[e])n=ut[e];else if("#"===e.charAt(0))4===e.length&&(r=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+r+r+i+i+s+s),e=parseInt(e.substr(1),16),n=[e>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(n=h=e.match(m),t){if(-1!==e.indexOf("="))return e.match(g)}else o=Number(n[0])%360/360,u=Number(n[1])/100,a=Number(n[2])/100,i=.5>=a?a*(u+1):a+u-a*u,r=2*a-i,n.length>3&&(n[3]=Number(e[3])),n[0]=at(o+1/3,r,i),n[1]=at(o,r,i),n[2]=at(o-1/3,r,i);else n=e.match(m)||ut.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=ut.black;return t&&!h&&(r=n[0]/255,i=n[1]/255,s=n[2]/255,f=Math.max(r,i,s),l=Math.min(r,i,s),a=(f+l)/2,f===l?o=u=0:(c=f-l,u=a>.5?c/(2-f-l):c/(f+l),o=f===r?(i-s)/c+(s>i?6:0):f===i?(s-r)/c+2:(r-i)/c+4,o*=60),n[0]=o+.5|0,n[1]=100*u+.5|0,n[2]=100*a+.5|0),n},lt=function(e,t){var n,r,i,s=e.match(ct)||[],o=0,u=s.length?"":e;for(n=0;n<s.length;n++)r=s[n],i=e.substr(o,e.indexOf(r,o)-o),o+=i.length+r.length,r=ft(r,t),3===r.length&&r.push(1),u+=i+(t?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return u},ct="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(f in ut)ct+="|"+f+"\\b";ct=new RegExp(ct+")","gi"),o.colorStringFilter=function(e){var t,n=e[0]+e[1];ct.lastIndex=0,ct.test(n)&&(t=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),e[0]=lt(e[0],t),e[1]=lt(e[1],t))},t.defaultStringFilter||(t.defaultStringFilter=o.colorStringFilter);var ht=function(e,t,n,r){if(null==e)return function(e){return e};var i,s=t?(e.match(ct)||[""])[0]:"",o=e.split(s).join("").match(y)||[],u=e.substr(0,e.indexOf(o[0])),a=")"===e.charAt(e.length-1)?")":"",f=-1!==e.indexOf(" ")?" ":",",l=o.length,c=l>0?o[0].replace(m,""):"";return l?i=t?function(e){var t,h,p,d;if("number"==typeof e)e+=c;else if(r&&_.test(e)){for(d=e.replace(_,"|").split("|"),p=0;p<d.length;p++)d[p]=i(d[p]);return d.join(",")}if(t=(e.match(ct)||[s])[0],h=e.split(t).join("").match(y)||[],p=h.length,l>p--)for(;++p<l;)h[p]=n?h[(p-1)/2|0]:o[p];return u+h.join(f)+f+t+a+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,s,h;if("number"==typeof e)e+=c;else if(r&&_.test(e)){for(s=e.replace(_,"|").split("|"),h=0;h<s.length;h++)s[h]=i(s[h]);return s.join(",")}if(t=e.match(y)||[],h=t.length,l>h--)for(;++h<l;)t[h]=n?t[(h-1)/2|0]:o[h];return u+t.join(f)+a}:function(e){return e}},pt=function(e){return e=e.split(","),function(t,n,r,i,s,o,u){var a,f=(n+"").split(" ");for(u={},a=0;4>a;a++)u[e[a]]=f[a]=f[a]||f[(a-1)/2>>0];return i.parse(t,u,s,o)}},dt=(q._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,n,r,i,s,o=this.data,u=o.proxy,a=o.firstMPT,f=1e-6;a;)t=u[a.v],a.r?t=Math.round(t):f>t&&t>-f&&(t=0),a.t[a.p]=t,a=a._next;if(o.autoRotate&&(o.autoRotate.rotation=u.rotation),1===e||0===e)for(a=o.firstMPT,s=1===e?"e":"b";a;){if(n=a.t,n.type){if(1===n.type){for(i=n.xs0+n.s+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n[s]=i}}else n[s]=n.s+n.xs0;a=a._next}},function(e,t,n,r,i){this.t=e,this.p=t,this.v=n,this.r=i,r&&(r._prev=this,this._next=r)}),vt=(q._parseToProxy=function(e,t,n,r,i,s){var o,u,a,f,l,c=r,h={},p={},d=n._transform,v=H;for(n._transform=null,H=t,r=l=n.parse(e,t,r,i),H=v,s&&(n._transform=d,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(r.type<=1&&(u=r.p,p[u]=r.s+r.c,h[u]=r.s,s||(f=new dt(r,"s",u,f,r.r),r.c=0),1===r.type))for(o=r.l;--o>0;)a="xn"+o,u=r.p+"_"+a,p[u]=r.data[a],h[u]=r[a],s||(f=new dt(r,a,u,f,r.rxp[a]));r=r._next}return{proxy:h,end:p,firstMPT:f,pt:l}},q.CSSPropTween=function(e,t,r,i,o,u,a,f,l,c,h){this.t=e,this.p=t,this.s=r,this.c=i,this.n=a||t,e instanceof vt||s.push(this.n),this.r=f,this.type=u||0,l&&(this.pr=l,n=!0),this.b=void 0===c?r:c,this.e=void 0===h?r+i:h,o&&(this._next=o,o._prev=this)}),mt=function(e,t,n,r,i,s){var o=new vt(e,t,n,r-n,i,-1,s);return o.b=n,o.e=o.xs0=r,o},gt=o.parseComplex=function(e,t,n,r,i,s,o,u,a,f){n=n||s||"",o=new vt(e,t,0,0,o,f?2:1,null,!1,u,n,r),r+="";var c,h,p,d,v,y,b,w,E,S,x,T,N,C=n.split(", ").join(",").split(" "),k=r.split(", ").join(",").split(" "),L=C.length,A=l!==!1;for((-1!==r.indexOf(",")||-1!==n.indexOf(","))&&(C=C.join(" ").replace(_,", ").split(" "),k=k.join(" ").replace(_,", ").split(" "),L=C.length),L!==k.length&&(C=(s||"").split(" "),L=C.length),o.plugin=a,o.setRatio=f,ct.lastIndex=0,c=0;L>c;c++)if(d=C[c],v=k[c],w=parseFloat(d),w||0===w)o.appendXtra("",w,it(v,w),v.replace(g,""),A&&-1!==v.indexOf("px"),!0);else if(i&&ct.test(d))T=","===v.charAt(v.length-1)?"),":")",N=-1!==v.indexOf("hsl")&&U,d=ft(d,N),v=ft(v,N),E=d.length+v.length>6,E&&!U&&0===v[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(k[c]).join("transparent")):(U||(E=!1),N?o.appendXtra(E?"hsla(":"hsl(",d[0],it(v[0],d[0]),",",!1,!0).appendXtra("",d[1],it(v[1],d[1]),"%,",!1).appendXtra("",d[2],it(v[2],d[2]),E?"%,":"%"+T,!1):o.appendXtra(E?"rgba(":"rgb(",d[0],v[0]-d[0],",",!0,!0).appendXtra("",d[1],v[1]-d[1],",",!0).appendXtra("",d[2],v[2]-d[2],E?",":T,!0),E&&(d=d.length<4?1:d[3],o.appendXtra("",d,(v.length<4?1:v[3])-d,T,!1))),ct.lastIndex=0;else if(y=d.match(m)){if(b=v.match(g),!b||b.length!==y.length)return o;for(p=0,h=0;h<y.length;h++)x=y[h],S=d.indexOf(x,p),o.appendXtra(d.substr(p,S-p),Number(x),it(b[h],x),"",A&&"px"===d.substr(S+x.length,2),0===h),p=S+x.length;o["xs"+o.l]+=d.substr(p)}else o["xs"+o.l]+=o.l?" "+v:v;if(-1!==r.indexOf("=")&&o.data){for(T=o.xs0+o.data.s,c=1;c<o.l;c++)T+=o["xs"+c]+o.data["xn"+c];o.e=T+o["xs"+c]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},yt=9;for(f=vt.prototype,f.l=f.pr=0;--yt>0;)f["xn"+yt]=0,f["xs"+yt]="";f.xs0="",f._next=f._prev=f.xfirst=f.data=f.plugin=f.setRatio=f.rxp=null,f.appendXtra=function(e,t,n,r,i,s){var o=this,u=o.l;return o["xs"+u]+=s&&u?" "+e:e||"",n||0===u||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=r||"",u>0?(o.data["xn"+u]=t+n,o.rxp["xn"+u]=i,o["xn"+u]=t,o.plugin||(o.xfirst=new vt(o,"xn"+u,t,n,o.xfirst||o,0,o.n,i,o.pr),o.xfirst.xs0=0),o):(o.data={s:t+n},o.rxp={},o.s=t,o.c=n,o.r=i,o)):(o["xs"+u]+=t+(r||""),o)};var bt=function(e,t){t=t||{},this.p=t.prefix?$(e)||e:e,a[e]=a[this.p]=this,this.format=t.formatter||ht(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},wt=q._registerComplexSpecialProp=function(e,t,n){"object"!=typeof t&&(t={parser:n});var r,i,s=e.split(","),o=t.defaultValue;for(n=n||[o],r=0;r<s.length;r++)t.prefix=0===r&&t.prefix,t.defaultValue=n[r]||o,i=new bt(s[r],t)},Et=function(e){if(!a[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";wt(e,{parser:function(e,n,r,i,s,o,f){var l=u.com.greensock.plugins[t];return l?(l._cssRegister(),a[r].parse(e,n,r,i,s,o,f)):(W("Error: "+t+" js file not loaded."),s)}})}};f=bt.prototype,f.parseComplex=function(e,t,n,r,i,s){var o,u,a,f,l,c,h=this.keyword;if(this.multi&&(_.test(n)||_.test(t)?(u=t.replace(_,"|").split("|"),a=n.replace(_,"|").split("|")):h&&(u=[t],a=[n])),a){for(f=a.length>u.length?a.length:u.length,o=0;f>o;o++)t=u[o]=u[o]||this.dflt,n=a[o]=a[o]||this.dflt,h&&(l=t.indexOf(h),c=n.indexOf(h),l!==c&&(-1===c?u[o]=u[o].split(h).join(""):-1===l&&(u[o]+=" "+h)));t=u.join(", "),n=a.join(", ")}return gt(e,this.p,t,n,this.clrs,this.dflt,r,this.pr,i,s)},f.parse=function(e,t,n,r,s,o,u){return this.parseComplex(e.style,this.format(K(e,this.p,i,!1,this.dflt)),this.format(t),s,o)},o.registerSpecialProp=function(e,t,n){wt(e,{parser:function(e,r,i,s,o,u,a){var f=new vt(e,i,0,0,o,2,i,!1,n);return f.plugin=u,f.setRatio=t(e,r,s._tween,i),f},priority:n})},o.useSVGTransformAttr=h||p;var St,xt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Tt=$("transform"),Nt=X+"transform",Ct=$("transformOrigin"),kt=null!==$("perspective"),Lt=q.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=o.defaultForce3D!==!1&&kt?o.defaultForce3D||"auto":!1},At=window.SVGElement,Ot=function(e,t,n){var r,i=B.createElementNS("http://www.w3.org/2000/svg",e),s=/([a-z])([A-Z])/g;for(r in n)i.setAttributeNS(null,r.replace(s,"$1-$2").toLowerCase(),n[r]);return t.appendChild(i),i},Mt=B.documentElement,_t=function(){var e,t,n,r=v||/Android/i.test(R)&&!window.chrome;return B.createElementNS&&!r&&(e=Ot("svg",Mt),t=Ot("rect",e,{width:100,height:50,x:100}),n=t.getBoundingClientRect().width,t.style[Ct]="50% 50%",t.style[Tt]="scaleX(0.5)",r=n===t.getBoundingClientRect().width&&(!p||!kt),Mt.removeChild(e)),r}(),Dt=function(e,t,n,r,i){var s,u,a,f,l,c,h,p,d,v,m,g,y,b,w=e._gsTransform,E=Bt(e,!0);w&&(y=w.xOrigin,b=w.yOrigin),(!r||(s=r.split(" ")).length<2)&&(h=e.getBBox(),t=rt(t).split(" "),s=[(-1!==t[0].indexOf("%")?parseFloat(t[0])/100*h.width:parseFloat(t[0]))+h.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*h.height:parseFloat(t[1]))+h.y]),n.xOrigin=f=parseFloat(s[0]),n.yOrigin=l=parseFloat(s[1]),r&&E!==Ht&&(c=E[0],h=E[1],p=E[2],d=E[3],v=E[4],m=E[5],g=c*d-h*p,u=f*(d/g)+l*(-p/g)+(p*m-d*v)/g,a=f*(-h/g)+l*(c/g)-(c*m-h*v)/g,f=n.xOrigin=s[0]=u,l=n.yOrigin=s[1]=a),w&&(i||i!==!1&&o.defaultSmoothOrigin!==!1?(u=f-y,a=l-b,w.xOffset+=u*E[0]+a*E[2]-u,w.yOffset+=u*E[1]+a*E[3]-a):w.xOffset=w.yOffset=0),e.setAttribute("data-svg-origin",s.join(" "))},Pt=function(e){return!!(At&&"function"==typeof e.getBBox&&e.getCTM&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM))},Ht=[1,0,0,1,0,0],Bt=function(e,t){var n,r,i,s,o,u=e._gsTransform||new Lt,a=1e5;if(Tt?r=K(e,Nt,null,!0):e.currentStyle&&(r=e.currentStyle.filter.match(O),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),u.x||0,u.y||0].join(","):""),n=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,(u.svg||e.getBBox&&Pt(e))&&(n&&-1!==(e.style[Tt]+"").indexOf("matrix")&&(r=e.style[Tt],n=0),i=e.getAttribute("transform"),n&&i&&(-1!==i.indexOf("matrix")?(r=i,n=0):-1!==i.indexOf("translate")&&(r="matrix(1,0,0,1,"+i.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",n=0))),n)return Ht;for(i=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],yt=i.length;--yt>-1;)s=Number(i[yt]),i[yt]=(o=s-(s|=0))?(o*a+(0>o?-0.5:.5)|0)/a+s:s;return t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i},jt=q.getTransform=function(e,n,r,s){if(e._gsTransform&&r&&!s)return e._gsTransform;var u,a,f,l,c,h,p=r?e._gsTransform||new Lt:new Lt,d=p.scaleX<0,v=2e-5,m=1e5,g=kt?parseFloat(K(e,Ct,n,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,y=parseFloat(o.defaultTransformPerspective)||0;if(p.svg=!!e.getBBox&&!!Pt(e),p.svg&&(Dt(e,K(e,Ct,i,!1,"50% 50%")+"",p,e.getAttribute("data-svg-origin")),St=o.useSVGTransformAttr||_t),u=Bt(e),u!==Ht){if(16===u.length){var b,w,E,S,x,T=u[0],N=u[1],C=u[2],k=u[3],L=u[4],A=u[5],O=u[6],M=u[7],_=u[8],D=u[9],H=u[10],B=u[12],j=u[13],F=u[14],I=u[11],q=Math.atan2(O,H);p.zOrigin&&(F=-p.zOrigin,B=_*F-u[12],j=D*F-u[13],F=H*F+p.zOrigin-u[14]),p.rotationX=q*P,q&&(S=Math.cos(-q),x=Math.sin(-q),b=L*S+_*x,w=A*S+D*x,E=O*S+H*x,_=L*-x+_*S,D=A*-x+D*S,H=O*-x+H*S,I=M*-x+I*S,L=b,A=w,O=E),q=Math.atan2(-C,H),p.rotationY=q*P,q&&(S=Math.cos(-q),x=Math.sin(-q),b=T*S-_*x,w=N*S-D*x,E=C*S-H*x,D=N*x+D*S,H=C*x+H*S,I=k*x+I*S,T=b,N=w,C=E),q=Math.atan2(N,T),p.rotation=q*P,q&&(S=Math.cos(-q),x=Math.sin(-q),T=T*S+L*x,w=N*S+A*x,A=N*-x+A*S,O=C*-x+O*S,N=w),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),p.scaleX=(Math.sqrt(T*T+N*N)*m+.5|0)/m,p.scaleY=(Math.sqrt(A*A+D*D)*m+.5|0)/m,p.scaleZ=(Math.sqrt(O*O+H*H)*m+.5|0)/m,p.skewX=0,p.perspective=I?1/(0>I?-I:I):0,p.x=B,p.y=j,p.z=F,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*T-p.yOrigin*L),p.y-=p.yOrigin-(p.yOrigin*N-p.xOrigin*A))}else if((!kt||s||!u.length||p.x!==u[4]||p.y!==u[5]||!p.rotationX&&!p.rotationY)&&(void 0===p.x||"none"!==K(e,"display",n))){var R=u.length>=6,U=R?u[0]:1,z=u[1]||0,W=u[2]||0,X=R?u[3]:1;p.x=u[4]||0,p.y=u[5]||0,f=Math.sqrt(U*U+z*z),l=Math.sqrt(X*X+W*W),c=U||z?Math.atan2(z,U)*P:p.rotation||0,h=W||X?Math.atan2(W,X)*P+c:p.skewX||0,Math.abs(h)>90&&Math.abs(h)<270&&(d?(f*=-1,h+=0>=c?180:-180,c+=0>=c?180:-180):(l*=-1,h+=0>=h?180:-180)),p.scaleX=f,p.scaleY=l,p.rotation=c,p.skewX=h,kt&&(p.rotationX=p.rotationY=p.z=0,p.perspective=y,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*U+p.yOrigin*W),p.y-=p.yOrigin-(p.xOrigin*z+p.yOrigin*X))}p.zOrigin=g;for(a in p)p[a]<v&&p[a]>-v&&(p[a]=0)}return r&&(e._gsTransform=p,p.svg&&(St&&e.style[Tt]?t.delayedCall(.001,function(){Rt(e.style,Tt)}):!St&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),p},Ft=function(e){var t,n,r=this.data,i=-r.rotation*D,s=i+r.skewX*D,o=1e5,u=(Math.cos(i)*r.scaleX*o|0)/o,a=(Math.sin(i)*r.scaleX*o|0)/o,f=(Math.sin(s)*-r.scaleY*o|0)/o,l=(Math.cos(s)*r.scaleY*o|0)/o,c=this.t.style,h=this.t.currentStyle;if(h){n=a,a=-f,f=-n,t=h.filter,c.filter="";var p,d,m=this.t.offsetWidth,g=this.t.offsetHeight,y="absolute"!==h.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+u+", M12="+a+", M21="+f+", M22="+l,S=r.x+m*r.xPercent/100,x=r.y+g*r.yPercent/100;if(null!=r.ox&&(p=(r.oxp?m*r.ox*.01:r.ox)-m/2,d=(r.oyp?g*r.oy*.01:r.oy)-g/2,S+=p-(p*u+d*a),x+=d-(p*f+d*l)),y?(p=m/2,d=g/2,b+=", Dx="+(p-(p*u+d*a)+S)+", Dy="+(d-(p*f+d*l)+x)+")"):b+=", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?c.filter=t.replace(M,b):c.filter=b+" "+t,(0===e||1===e)&&1===u&&0===a&&0===f&&1===l&&(y&&-1===b.indexOf("Dx=0, Dy=0")||E.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&c.removeAttribute("filter")),!y){var T,N,C,k=8>v?1:-1;for(p=r.ieOffsetX||0,d=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((0>u?-u:u)*m+(0>a?-a:a)*g))/2+S),r.ieOffsetY=Math.round((g-((0>l?-l:l)*g+(0>f?-f:f)*m))/2+x),yt=0;4>yt;yt++)N=tt[yt],T=h[N],n=-1!==T.indexOf("px")?parseFloat(T):Q(this.t,N,parseFloat(T),T.replace(w,""))||0,C=n!==r[N]?2>yt?-r.ieOffsetX:-r.ieOffsetY:2>yt?p-r.ieOffsetX:d-r.ieOffsetY,c[N]=(r[N]=Math.round(n-C*(0===yt||2===yt?1:k)))+"px"}}},It=q.set3DTransformRatio=q.setTransformRatio=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,d,v,m,g,y,b,w,E,S,x,T,N=this.data,C=this.t.style,k=N.rotation,L=N.rotationX,A=N.rotationY,O=N.scaleX,M=N.scaleY,_=N.scaleZ,P=N.x,H=N.y,B=N.z,j=N.svg,F=N.perspective,I=N.force3D;if(((1===e||0===e)&&"auto"===I&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!I)&&!B&&!F&&!A&&!L&&1===_||St&&j||!kt)return void (k||N.skewX||j?(k*=D,x=N.skewX*D,T=1e5,t=Math.cos(k)*O,i=Math.sin(k)*O,n=Math.sin(k-x)*-M,s=Math.cos(k-x)*M,x&&"simple"===N.skewType&&(y=Math.tan(x),y=Math.sqrt(1+y*y),n*=y,s*=y,N.skewY&&(t*=y,i*=y)),j&&(P+=N.xOrigin-(N.xOrigin*t+N.yOrigin*n)+N.xOffset,H+=N.yOrigin-(N.xOrigin*i+N.yOrigin*s)+N.yOffset,St&&(N.xPercent||N.yPercent)&&(v=this.t.getBBox(),P+=.01*N.xPercent*v.width,H+=.01*N.yPercent*v.height),v=1e-6,v>P&&P>-v&&(P=0),v>H&&H>-v&&(H=0)),w=(t*T|0)/T+","+(i*T|0)/T+","+(n*T|0)/T+","+(s*T|0)/T+","+P+","+H+")",j&&St?this.t.setAttribute("transform","matrix("+w):C[Tt]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) matrix(":"matrix(")+w):C[Tt]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) matrix(":"matrix(")+O+",0,0,"+M+","+P+","+H+")");if(p&&(v=1e-4,v>O&&O>-v&&(O=_=2e-5),v>M&&M>-v&&(M=_=2e-5),!F||N.z||N.rotationX||N.rotationY||(F=0)),k||N.skewX)k*=D,m=t=Math.cos(k),g=i=Math.sin(k),N.skewX&&(k-=N.skewX*D,m=Math.cos(k),g=Math.sin(k),"simple"===N.skewType&&(y=Math.tan(N.skewX*D),y=Math.sqrt(1+y*y),m*=y,g*=y,N.skewY&&(t*=y,i*=y))),n=-g,s=m;else{if(!(A||L||1!==_||F||j))return void (C[Tt]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) translate3d(":"translate3d(")+P+"px,"+H+"px,"+B+"px)"+(1!==O||1!==M?" scale("+O+","+M+")":""));t=s=1,n=i=0}f=1,r=o=u=a=l=c=0,h=F?-1/F:0,d=N.zOrigin,v=1e-6,E=",",S="0",k=A*D,k&&(m=Math.cos(k),g=Math.sin(k),u=-g,l=h*-g,r=t*g,o=i*g,f=m,h*=m,t*=m,i*=m),k=L*D,k&&(m=Math.cos(k),g=Math.sin(k),y=n*m+r*g,b=s*m+o*g,a=f*g,c=h*g,r=n*-g+r*m,o=s*-g+o*m,f*=m,h*=m,n=y,s=b),1!==_&&(r*=_,o*=_,f*=_,h*=_),1!==M&&(n*=M,s*=M,a*=M,c*=M),1!==O&&(t*=O,i*=O,u*=O,l*=O),(d||j)&&(d&&(P+=r*-d,H+=o*-d,B+=f*-d+d),j&&(P+=N.xOrigin-(N.xOrigin*t+N.yOrigin*n)+N.xOffset,H+=N.yOrigin-(N.xOrigin*i+N.yOrigin*s)+N.yOffset),v>P&&P>-v&&(P=S),v>H&&H>-v&&(H=S),v>B&&B>-v&&(B=0)),w=N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) matrix3d(":"matrix3d(",w+=(v>t&&t>-v?S:t)+E+(v>i&&i>-v?S:i)+E+(v>u&&u>-v?S:u),w+=E+(v>l&&l>-v?S:l)+E+(v>n&&n>-v?S:n)+E+(v>s&&s>-v?S:s),L||A||1!==_?(w+=E+(v>a&&a>-v?S:a)+E+(v>c&&c>-v?S:c)+E+(v>r&&r>-v?S:r),w+=E+(v>o&&o>-v?S:o)+E+(v>f&&f>-v?S:f)+E+(v>h&&h>-v?S:h)+E):w+=",0,0,0,0,1,0,",w+=P+E+H+E+B+E+(F?1+ -B/F:1)+")",C[Tt]=w};f=Lt.prototype,f.x=f.y=f.z=f.skewX=f.skewY=f.rotation=f.rotationX=f.rotationY=f.zOrigin=f.xPercent=f.yPercent=f.xOffset=f.yOffset=0,f.scaleX=f.scaleY=f.scaleZ=1,wt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,n,r,s,u,a){if(r._lastParsedTransform===a)return s;r._lastParsedTransform=a;var f,l,c,h,p,d,v,m,g,y,b=e._gsTransform,w=e.style,E=1e-6,S=xt.length,x=a,T={},N="transformOrigin";if(a.display?(h=K(e,"display"),w.display="block",f=jt(e,i,!0,a.parseTransform),w.display=h):f=jt(e,i,!0,a.parseTransform),r._transform=f,"string"==typeof x.transform&&Tt)h=F.style,h[Tt]=x.transform,h.display="block",h.position="absolute",B.body.appendChild(F),l=jt(F,null,!1),B.body.removeChild(F),l.perspective||(l.perspective=f.perspective),null!=x.xPercent&&(l.xPercent=st(x.xPercent,f.xPercent)),null!=x.yPercent&&(l.yPercent=st(x.yPercent,f.yPercent));else if("object"==typeof x){if(l={scaleX:st(null!=x.scaleX?x.scaleX:x.scale,f.scaleX),scaleY:st(null!=x.scaleY?x.scaleY:x.scale,f.scaleY),scaleZ:st(x.scaleZ,f.scaleZ),x:st(x.x,f.x),y:st(x.y,f.y),z:st(x.z,f.z),xPercent:st(x.xPercent,f.xPercent),yPercent:st(x.yPercent,f.yPercent),perspective:st(x.transformPerspective,f.perspective)},m=x.directionalRotation,null!=m)if("object"==typeof m)for(h in m)x[h]=m[h];else x.rotation=m;"string"==typeof x.x&&-1!==x.x.indexOf("%")&&(l.x=0,l.xPercent=st(x.x,f.xPercent)),"string"==typeof x.y&&-1!==x.y.indexOf("%")&&(l.y=0,l.yPercent=st(x.y,f.yPercent)),l.rotation=ot("rotation"in x?x.rotation:"shortRotation"in x?x.shortRotation+"_short":"rotationZ"in x?x.rotationZ:f.rotation,f.rotation,"rotation",T),kt&&(l.rotationX=ot("rotationX"in x?x.rotationX:"shortRotationX"in x?x.shortRotationX+"_short":f.rotationX||0,f.rotationX,"rotationX",T),l.rotationY=ot("rotationY"in x?x.rotationY:"shortRotationY"in x?x.shortRotationY+"_short":f.rotationY||0,f.rotationY,"rotationY",T)),l.skewX=null==x.skewX?f.skewX:ot(x.skewX,f.skewX),l.skewY=null==x.skewY?f.skewY:ot(x.skewY,f.skewY),(c=l.skewY-f.skewY)&&(l.skewX+=c,l.rotation+=c)}for(kt&&null!=x.force3D&&(f.force3D=x.force3D,v=!0),f.skewType=x.skewType||f.skewType||o.defaultSkewType,d=f.force3D||f.z||f.rotationX||f.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,d||null==x.scale||(l.scaleZ=1);--S>-1;)n=xt[S],p=l[n]-f[n],(p>E||-E>p||null!=x[n]||null!=H[n])&&(v=!0,s=new vt(f,n,f[n],p,s),n in T&&(s.e=T[n]),s.xs0=0,s.plugin=u,r._overwriteProps.push(s.n));return p=x.transformOrigin,f.svg&&(p||x.svgOrigin)&&(g=f.xOffset,y=f.yOffset,Dt(e,rt(p),l,x.svgOrigin,x.smoothOrigin),s=mt(f,"xOrigin",(b?f:l).xOrigin,l.xOrigin,s,N),s=mt(f,"yOrigin",(b?f:l).yOrigin,l.yOrigin,s,N),(g!==f.xOffset||y!==f.yOffset)&&(s=mt(f,"xOffset",b?g:f.xOffset,f.xOffset,s,N),s=mt(f,"yOffset",b?y:f.yOffset,f.yOffset,s,N)),p=St?null:"0px 0px"),(p||kt&&d&&f.zOrigin)&&(Tt?(v=!0,n=Ct,p=(p||K(e,n,i,!1,"50% 50%"))+"",s=new vt(w,n,0,0,s,-1,N),s.b=w[n],s.plugin=u,kt?(h=f.zOrigin,p=p.split(" "),f.zOrigin=(p.length>2&&(0===h||"0px"!==p[2])?parseFloat(p[2]):h)||0,s.xs0=s.e=p[0]+" "+(p[1]||"50%")+" 0px",s=new vt(f,"zOrigin",0,0,s,-1,s.n),s.b=h,s.xs0=s.e=f.zOrigin):s.xs0=s.e=p):rt(p+"",f)),v&&(r._transformType=f.svg&&St||!d&&3!==this._transformType?2:3),s},prefix:!0}),wt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),wt("borderRadius",{defaultValue:"0px",parser:function(e,t,n,s,o,u){t=this.format(t);var a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],N=e.style;for(m=parseFloat(e.offsetWidth),g=parseFloat(e.offsetHeight),a=t.split(" "),f=0;f<T.length;f++)this.p.indexOf("border")&&(T[f]=$(T[f])),h=c=K(e,T[f],i,!1,"0px"),-1!==h.indexOf(" ")&&(c=h.split(" "),h=c[0],c=c[1]),p=l=a[f],d=parseFloat(h),b=h.substr((d+"").length),w="="===p.charAt(1),w?(v=parseInt(p.charAt(0)+"1",10),p=p.substr(2),v*=parseFloat(p),y=p.substr((v+"").length-(0>v?1:0))||""):(v=parseFloat(p),y=p.substr((v+"").length)),""===y&&(y=r[n]||b),y!==b&&(E=Q(e,"borderLeft",d,b),S=Q(e,"borderTop",d,b),"%"===y?(h=E/m*100+"%",c=S/g*100+"%"):"em"===y?(x=Q(e,"borderLeft",1,"em"),h=E/x+"em",c=S/x+"em"):(h=E+"px",c=S+"px"),w&&(p=parseFloat(h)+v+y,l=parseFloat(c)+v+y)),o=gt(N,T[f],h+" "+c,p+" "+l,!1,"0px",o);return o},prefix:!0,formatter:ht("0px 0px 0px 0px",!1,!0)}),wt("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,n,r,s,o){var u,a,f,l,c,h,p="background-position",d=i||J(e,null),m=this.format((d?v?d.getPropertyValue(p+"-x")+" "+d.getPropertyValue(p+"-y"):d.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==m.indexOf("%")!=(-1!==g.indexOf("%"))&&(h=K(e,"backgroundImage").replace(k,""),h&&"none"!==h)){for(u=m.split(" "),a=g.split(" "),I.setAttribute("src",h),f=2;--f>-1;)m=u[f],l=-1!==m.indexOf("%"),l!==(-1!==a[f].indexOf("%"))&&(c=0===f?e.offsetWidth-I.width:e.offsetHeight-I.height,u[f]=l?parseFloat(m)/100*c+"px":parseFloat(m)/c*100+"%");m=u.join(" ")}return this.parseComplex(e.style,m,g,s,o)},formatter:rt}),wt("backgroundSize",{defaultValue:"0 0",formatter:rt}),wt("perspective",{defaultValue:"0px",prefix:!0}),wt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),wt("transformStyle",{prefix:!0}),wt("backfaceVisibility",{prefix:!0}),wt("userSelect",{prefix:!0}),wt("margin",{parser:pt("marginTop,marginRight,marginBottom,marginLeft")}),wt("padding",{parser:pt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),wt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,n,r,s,o){var u,a,f;return 9>v?(a=e.currentStyle,f=8>v?" ":",",u="rect("+a.clipTop+f+a.clipRight+f+a.clipBottom+f+a.clipLeft+")",t=this.format(t).split(",").join(f)):(u=this.format(K(e,this.p,i,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,u,t,s,o)}}),wt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),wt("autoRound,strictUnits",{parser:function(e,t,n,r,i){return i}}),wt("border",{defaultValue:"0px solid #000",parser:function(e,t,n,r,s,o){return this.parseComplex(e.style,this.format(K(e,"borderTopWidth",i,!1,"0px")+" "+K(e,"borderTopStyle",i,!1,"solid")+" "+K(e,"borderTopColor",i,!1,"#000")),this.format(t),s,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ct)||["#000"])[0]}}),wt("borderWidth",{parser:pt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),wt("float,cssFloat,styleFloat",{parser:function(e,t,n,r,i,s){var o=e.style,u="cssFloat"in o?"cssFloat":"styleFloat";return new vt(o,u,0,0,i,-1,n,!1,0,o[u],t)}});var qt=function(e){var t,n=this.t,r=n.filter||K(this.data,"filter")||"",i=this.s+this.c*e|0;100===i&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(n.removeAttribute("filter"),t=!K(this.data,"filter")):(n.filter=r.replace(x,""),t=!0)),t||(this.xn1&&(n.filter=r=r||"alpha(opacity="+i+")"),-1===r.indexOf("pacity")?0===i&&this.xn1||(n.filter=r+" alpha(opacity="+i+")"):n.filter=r.replace(E,"opacity="+i))};wt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,n,r,s,o){var u=parseFloat(K(e,"opacity",i,!1,"1")),a=e.style,f="autoAlpha"===n;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+u),f&&1===u&&"hidden"===K(e,"visibility",i)&&0!==t&&(u=0),U?s=new vt(a,"opacity",u,t-u,s):(s=new vt(a,"opacity",100*u,100*(t-u),s),s.xn1=f?1:0,a.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=e,s.plugin=o,s.setRatio=qt),f&&(s=new vt(a,"visibility",0,0,s,-1,null,!1,0,0!==u?"inherit":"hidden",0===t?"hidden":"inherit"),s.xs0="inherit",r._overwriteProps.push(s.n),r._overwriteProps.push(n)),s}});var Rt=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(N,"-$1").toLowerCase())):e.removeAttribute(t))},Ut=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,n=this.t.style;t;)t.v?n[t.p]=t.v:Rt(n,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};wt("className",{parser:function(e,t,r,s,o,u,a){var f,l,c,h,p,d=e.getAttribute("class")||"",v=e.style.cssText;if(o=s._classNamePT=new vt(e,r,0,0,o,2),o.setRatio=Ut,o.pr=-11,n=!0,o.b=d,l=Y(e,i),c=e._gsClassPT){for(h={},p=c.data;p;)h[p.p]=1,p=p._next;c.setRatio(1)}return e._gsClassPT=o,o.e="="!==t.charAt(1)?t:d.replace(new RegExp("\\s*\\b"+t.substr(2)+"\\b"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",o.e),f=Z(e,l,Y(e),a,h),e.setAttribute("class",d),o.data=f.firstMPT,e.style.cssText=v,o=o.xfirst=s.parse(e,f.difs,o,u)}});var zt=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,n,r,i,s,o=this.t.style,u=a.transform.parse;if("all"===this.e)o.cssText="",i=!0;else for(t=this.e.split(" ").join("").split(","),r=t.length;--r>-1;)n=t[r],a[n]&&(a[n].parse===u?i=!0:n="transformOrigin"===n?Ct:a[n].p),Rt(o,n);i&&(Rt(o,Tt),s=this.t._gsTransform,s&&(s.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(wt("clearProps",{parser:function(e,t,r,i,s){return s=new vt(e,r,0,0,s,2),s.setRatio=zt,s.e=t,s.pr=-10,s.data=i._tween,n=!0,s}}),f="bezier,throwProps,physicsProps,physics2D".split(","),yt=f.length;yt--;)Et(f[yt]);f=o.prototype,f._firstPT=f._lastParsedTransform=f._transform=null,f._onInitTween=function(e,t,u){if(!e.nodeType)return!1;this._target=e,this._tween=u,this._vars=t,l=t.autoRound,n=!1,r=t.suffixMap||o.suffixMap,i=J(e,""),s=this._overwriteProps;var f,p,v,m,g,y,b,w,E,x=e.style;if(c&&""===x.zIndex&&(f=K(e,"zIndex",i),("auto"===f||""===f)&&this._addLazySet(x,"zIndex",0)),"string"==typeof t&&(m=x.cssText,f=Y(e,i),x.cssText=m+";"+t,f=Z(e,f,Y(e)).difs,!U&&S.test(t)&&(f.opacity=parseFloat(RegExp.$1)),t=f,x.cssText=m),t.className?this._firstPT=p=a.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=p=this.parse(e,t,null),this._transformType){for(E=3===this._transformType,Tt?h&&(c=!0,""===x.zIndex&&(b=K(e,"zIndex",i),("auto"===b||""===b)&&this._addLazySet(x,"zIndex",0)),d&&this._addLazySet(x,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(E?"visible":"hidden"))):x.zoom=1,v=p;v&&v._next;)v=v._next;w=new vt(e,"transform",0,0,null,2),this._linkCSSP(w,null,v),w.setRatio=Tt?It:Ft,w.data=this._transform||jt(e,i,!0),w.tween=u,w.pr=-1,s.pop()}if(n){for(;p;){for(y=p._next,v=m;v&&v.pr>p.pr;)v=v._next;(p._prev=v?v._prev:g)?p._prev._next=p:m=p,(p._next=v)?v._prev=p:g=p,p=y}this._firstPT=m}return!0},f.parse=function(e,t,n,s){var o,u,f,c,h,p,d,v,m,g,y=e.style;for(o in t)p=t[o],u=a[o],u?n=u.parse(e,p,o,this,n,s,t):(h=K(e,o,i)+"",m="string"==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||m&&T.test(p)?(m||(p=ft(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),n=gt(y,o,h,p,!0,"transparent",n,0,s)):!m||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(f=parseFloat(h),d=f||0===f?h.substr((f+"").length):"",(""===h||"auto"===h)&&("width"===o||"height"===o?(f=nt(e,o,i),d="px"):"left"===o||"top"===o?(f=G(e,o,i),d="px"):(f="opacity"!==o?0:1,d="")),g=m&&"="===p.charAt(1),g?(c=parseInt(p.charAt(0)+"1",10),p=p.substr(2),c*=parseFloat(p),v=p.replace(w,"")):(c=parseFloat(p),v=m?p.replace(w,""):""),""===v&&(v=o in r?r[o]:d),p=c||0===c?(g?c+f:c)+v:t[o],d!==v&&""!==v&&(c||0===c)&&f&&(f=Q(e,o,f,d),"%"===v?(f/=Q(e,o,100,"%")/100,t.strictUnits!==!0&&(h=f+"%")):"em"===v||"rem"===v||"vw"===v||"vh"===v?f/=Q(e,o,1,v):"px"!==v&&(c=Q(e,o,c,v),v="px"),g&&(c||0===c)&&(p=c+f+v)),g&&(c+=f),!f&&0!==f||!c&&0!==c?void 0!==y[o]&&(p||p+""!="NaN"&&null!=p)?(n=new vt(y,o,c||f||0,0,n,-1,o,!1,0,h,p),n.xs0="none"!==p||"display"!==o&&-1===o.indexOf("Style")?p:h):W("invalid "+o+" tween value: "+t[o]):(n=new vt(y,o,f,c-f,n,0,o,l!==!1&&("px"===v||"zIndex"===o),0,h,p),n.xs0=v)):n=gt(y,o,h,p,!0,null,n,0,s)),s&&n&&!n.plugin&&(n.plugin=s);return n},f.setRatio=function(e){var t,n,r,i=this._firstPT,s=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-0.000001)for(;i;){if(t=i.c*e+i.s,i.r?t=Math.round(t):s>t&&t>-s&&(t=0),i.type)if(1===i.type)if(r=i.l,2===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2;else if(3===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3;else if(4===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4;else if(5===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4+i.xn4+i.xs5;else{for(n=i.xs0+t+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.t[i.p]=n}else-1===i.type?i.t[i.p]=i.xs0:i.setRatio&&i.setRatio(e);else i.t[i.p]=t+i.xs0;i=i._next}else for(;i;)2!==i.type?i.t[i.p]=i.b:i.setRatio(e),i=i._next;else for(;i;){if(2!==i.type)if(i.r&&-1!==i.type)if(t=Math.round(i.s+i.c),i.type){if(1===i.type){for(r=i.l,n=i.xs0+t+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.t[i.p]=n}}else i.t[i.p]=t+i.xs0;else i.t[i.p]=i.e;else i.setRatio(e);i=i._next}},f._enableTransforms=function(e){this._transform=this._transform||jt(this._target,i,!0),this._transformType=this._transform.svg&&St||!e&&3!==this._transformType?2:3};var Wt=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};f._addLazySet=function(e,t,n){var r=this._firstPT=new vt(e,t,0,0,this._firstPT,2);r.e=n,r.setRatio=Wt,r.data=this},f._linkCSSP=function(e,t,n,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,r=!0),n?n._next=e:r||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=n),e},f._kill=function(t){var n,r,i,s=t;if(t.autoAlpha||t.alpha){s={};for(r in t)s[r]=t[r];s.opacity=1,s.autoAlpha&&(s.visibility=1)}return t.className&&(n=this._classNamePT)&&(i=n.xfirst,i&&i._prev?this._linkCSSP(i._prev,n._next,i._prev._prev):i===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,i._prev),this._classNamePT=null),e.prototype._kill.call(this,s)};var Xt=function(e,t,n){var r,i,s,o;if(e.slice)for(i=e.length;--i>-1;)Xt(e[i],t,n);else for(r=e.childNodes,i=r.length;--i>-1;)s=r[i],o=s.type,s.style&&(t.push(Y(s)),n&&n.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||Xt(s,t,n)};return o.cascadeTo=function(e,n,r){var i,s,o,u,a=t.to(e,n,r),f=[a],l=[],c=[],h=[],p=t._internals.reservedProps;for(e=a._targets||a.target,Xt(e,l,h),a.render(n,!0,!0),Xt(e,c),a.render(0,!0,!0),a._enabled(!0),i=h.length;--i>-1;)if(s=Z(h[i],l[i],c[i]),s.firstMPT){s=s.difs;for(o in r)p[o]&&(s[o]=r[o]);u={};for(o in s)u[o]=l[i][o];f.push(t.fromTo(h[i],n,u,s))}return f},e.activate([o]),o},!0),function(){var e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.5",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),t=function(e){for(;e;)e.f||e.blob||(e.r=1),e=e._next},n=e.prototype;n._onInitAllProps=function(){for(var e,n,r,i=this._tween,s=i.vars.roundProps.join?i.vars.roundProps:i.vars.roundProps.split(","),o=s.length,u={},a=i._propLookup.roundProps;--o>-1;)u[s[o]]=1;for(o=s.length;--o>-1;)for(e=s[o],n=i._firstPT;n;)r=n._next,n.pg?n.t._roundProps(u,!0):n.n===e&&(2===n.f&&n.t?t(n.t._firstPT):(this._add(n.t,e,n.s,n.c),r&&(r._prev=n._prev),n._prev?n._prev._next=r:i._firstPT===n&&(i._firstPT=r),n._next=n._prev=null,i._propLookup[e]=a)),n=r;return!1},n._add=function(e,t,n,r){this._addTween(e,t,n,n+r,t,!0),this._overwriteProps.push(t)}}(),function(){_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.5.0",init:function(e,t,n){var r;if("function"!=typeof e.setAttribute)return!1;for(r in t)this._addTween(e,"setAttribute",e.getAttribute(r)+"",t[r]+"",r,!1,r),this._overwriteProps.push(r);return!0}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t,n){"object"!=typeof t&&(t={rotation:t}),this.finals={};var r,i,s,o,u,a,f=t.useRadians===!0?2*Math.PI:360,l=1e-6;for(r in t)"useRadians"!==r&&(a=(t[r]+"").split("_"),i=a[0],s=parseFloat("function"!=typeof e[r]?e[r]:e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]()),o=this.finals[r]="string"==typeof i&&"="===i.charAt(1)?s+parseInt(i.charAt(0)+"1",10)*Number(i.substr(2)):Number(i)||0,u=o-s,a.length&&(i=a.join("_"),-1!==i.indexOf("short")&&(u%=f,u!==u%(f/2)&&(u=0>u?u+f:u-f)),-1!==i.indexOf("_cw")&&0>u?u=(u+9999999999*f)%f-(u/f|0)*f:-1!==i.indexOf("ccw")&&u>0&&(u=(u-9999999999*f)%f-(u/f|0)*f)),(u>l||-l>u)&&(this._addTween(e,r,s,s+u,r),this._overwriteProps.push(r)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,n,r,i=_gsScope.GreenSockGlobals||_gsScope,s=i.com.greensock,o=2*Math.PI,u=Math.PI/2,a=s._class,f=function(t,n){var r=a("easing."+t,function(){},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,r},l=e.register||function(){},c=function(e,t,n,r,i){var s=a("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new r},!0);return l(s,e),s},h=function(e,t,n){this.t=e,this.v=t,n&&(this.next=n,n.prev=this,this.c=n.v-t,this.gap=n.t-e)},p=function(t,n){var r=a("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,i.config=function(e){return new r(e)},r},d=c("Back",p("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),p("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),p("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),v=a("easing.SlowMo",function(e,t,n){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=n===!0},!0),m=v.prototype=new e;return m.constructor=v,m.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},v.ease=new v(.7,.7),m.config=v.config=function(e,t,n){return new v(e,t,n)},t=a("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),m=t.prototype=new e,m.constructor=t,m.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},m.config=t.config=function(e){return new t(e)},n=a("easing.RoughEase",function(t){t=t||{};for(var n,r,i,s,o,u,a=t.taper||"none",f=[],l=0,c=0|(t.points||20),p=c,d=t.randomize!==!1,v=t.clamp===!0,m=t.template instanceof e?t.template:null,g="number"==typeof t.strength?.4*t.strength:.4;--p>-1;)n=d?Math.random():1/c*p,r=m?m.getRatio(n):n,"none"===a?i=g:"out"===a?(s=1-n,i=s*s*g):"in"===a?i=n*n*g:.5>n?(s=2*n,i=s*s*.5*g):(s=2*(1-n),i=s*s*.5*g),d?r+=Math.random()*i-.5*i:p%2?r+=.5*i:r-=.5*i,v&&(r>1?r=1:0>r&&(r=0)),f[l++]={x:n,y:r};for(f.sort(function(e,t){return e.x-t.x}),u=new h(1,1,null),p=c;--p>-1;)o=f[p],u=new h(o.x,o.y,u);this._prev=new h(0,0,0!==u.t?u:u.next)},!0),m=n.prototype=new e,m.constructor=n,m.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},m.config=function(e){return new n(e)},n.ease=new n,c("Bounce",f("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),f("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),f("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),c("Circ",f("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),f("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),f("CircInOut",function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),r=function(t,n,r){var i=a("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||r)/(1>e?e:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),s=i.prototype=new e;return s.constructor=i,s.getRatio=n,s.config=function(e,t){return new i(e,t)},i},c("Elastic",r("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),r("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),r("ElasticInOut",function(e){return(e*=2)<1?-0.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),c("Expo",f("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),f("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),f("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),c("Sine",f("SineOut",function(e){return Math.sin(e*u)}),f("SineIn",function(e){return-Math.cos(e*u)+1}),f("SineInOut",function(e){return-0.5*(Math.cos(Math.PI*e)-1)})),a("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),l(i.SlowMo,"SlowMo","ease,"),l(n,"RoughEase","ease,"),l(t,"SteppedEase","ease,"),d},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var n=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!n.TweenLite){var r,i,s,o,u,a=function(e){var t,r=e.split("."),i=n;for(t=0;t<r.length;t++)i[r[t]]=i=i[r[t]]||{};return i},f=a("com.greensock"),l=1e-10,c=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},h=function(){},p=function(){var e=Object.prototype.toString,t=e.call([]);return function(n){return null!=n&&(n instanceof Array||"object"==typeof n&&!!n.push&&e.call(n)===t)}}(),d={},v=function(r,i,s,o){this.sc=d[r]?d[r].sc:[],d[r]=this,this.gsClass=null,this.func=s;var u=[];this.check=function(f){for(var l,c,h,p,m,g=i.length,y=g;--g>-1;)(l=d[i[g]]||new v(i[g],[])).gsClass?(u[g]=l.gsClass,y--):f&&l.sc.push(this);if(0===y&&s)for(c=("com.greensock."+r).split("."),h=c.pop(),p=a(c.join("."))[h]=this.gsClass=s.apply(s,u),o&&(n[h]=p,m="undefined"!=typeof module&&module.exports,!m&&"function"==typeof define&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return p}):r===t&&m&&(module.exports=p)),g=0;g<this.sc.length;g++)this.sc[g].check()},this.check(!0)},m=e._gsDefine=function(e,t,n,r){return new v(e,t,n,r)},g=f._class=function(e,t,n){return t=t||function(){},m(e,[],function(){return t},n),t};m.globals=n;var y=[0,0,1,1],b=[],w=g("easing.Ease",function(e,t,n,r){this._func=e,this._type=n||0,this._power=r||0,this._params=t?y.concat(t):y},!0),E=w.map={},S=w.register=function(e,t,n,r){for(var i,s,o,u,a=t.split(","),l=a.length,c=(n||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(s=a[l],i=r?g("easing."+s,null,!0):f.easing[s]||{},o=c.length;--o>-1;)u=c[o],E[s+"."+u]=E[u+s]=i[u]=e.getRatio?e:e[u]||new e};for(s=w.prototype,s._calcEnd=!1,s.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,r=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===n?r*=r:2===n?r*=r*r:3===n?r*=r*r*r:4===n&&(r*=r*r*r*r),1===t?1-r:2===t?r:.5>e?r/2:1-r/2},r=["Linear","Quad","Cubic","Quart","Quint,Strong"],i=r.length;--i>-1;)s=r[i]+",Power"+i,S(new w(null,null,1,i),s,"easeOut",!0),S(new w(null,null,2,i),s,"easeIn"+(0===i?",easeNone":"")),S(new w(null,null,3,i),s,"easeInOut");E.linear=f.easing.Linear.easeIn,E.swing=f.easing.Quad.easeInOut;var x=g("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});s=x.prototype,s.addEventListener=function(e,t,n,r,i){i=i||0;var s,a,f=this._listeners[e],l=0;for(null==f&&(this._listeners[e]=f=[]),a=f.length;--a>-1;)s=f[a],s.c===t&&s.s===n?f.splice(a,1):0===l&&s.pr<i&&(l=a+1);f.splice(l,0,{c:t,s:n,up:r,pr:i}),this!==o||u||o.wake()},s.removeEventListener=function(e,t){var n,r=this._listeners[e];if(r)for(n=r.length;--n>-1;)if(r[n].c===t)return void r.splice(n,1)},s.dispatchEvent=function(e){var t,n,r,i=this._listeners[e];if(i)for(t=i.length,n=this._eventTarget;--t>-1;)r=i[t],r&&(r.up?r.c.call(r.s||n,{type:e,target:n}):r.c.call(r.s||n))};var T=e.requestAnimationFrame,N=e.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},k=C();for(r=["ms","moz","webkit","o"],i=r.length;--i>-1&&!T;)T=e[r[i]+"RequestAnimationFrame"],N=e[r[i]+"CancelAnimationFrame"]||e[r[i]+"CancelRequestAnimationFrame"];g("Ticker",function(e,t){var n,r,i,s,a,f=this,c=C(),p=t!==!1&&T?"auto":!1,d=500,v=33,m="tick",g=function(e){var t,o,u=C()-k;u>d&&(c+=u-v),k+=u,f.time=(k-c)/1e3,t=f.time-a,(!n||t>0||e===!0)&&(f.frame++,a+=t+(t>=s?.004:s-t),o=!0),e!==!0&&(i=r(g)),o&&f.dispatchEvent(m)};x.call(f),f.time=f.frame=0,f.tick=function(){g(!0)},f.lagSmoothing=function(e,t){d=e||1/l,v=Math.min(t,d,0)},f.sleep=function(){null!=i&&(p&&N?N(i):clearTimeout(i),r=h,i=null,f===o&&(u=!1))},f.wake=function(e){null!==i?f.sleep():e?c+=-k+(k=C()):f.frame>10&&(k=C()-d+5),r=0===n?h:p&&T?T:function(e){return setTimeout(e,1e3*(a-f.time)+1|0)},f===o&&(u=!0),g(2)},f.fps=function(e){return arguments.length?(n=e,s=1/(n||60),a=this.time+s,void f.wake()):n},f.useRAF=function(e){return arguments.length?(f.sleep(),p=e,void f.fps(n)):p},f.fps(e),setTimeout(function(){"auto"===p&&f.frame<5&&"hidden"!==document.visibilityState&&f.useRAF(!1)},1500)}),s=f.Ticker.prototype=new f.events.EventDispatcher,s.constructor=f.Ticker;var L=g("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,$){u||o.wake();var n=this.vars.useFrames?V:$;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});o=L.ticker=new f.Ticker,s=L.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var A=function(){u&&C()-k>2e3&&o.wake(),setTimeout(A,2e3)};A(),s.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},s.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},s.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},s.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},s.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},s.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},s.render=function(e,t,n){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},s.isActive=function(){var e,t=this._timeline,n=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=n&&e<n+this.totalDuration()/this._timeScale},s._enabled=function(e,t){return u||o.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(e,t){return this._enabled(!1,!1)},s.kill=function(e,t){return this._kill(e,t),this},s._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},s._swapSelfInParams=function(e){for(var t=e.length,n=e.concat();--t>-1;)"{self}"===e[t]&&(n[t]=this);return n},s._callback=function(e){var t=this.vars;t[e].apply(t[e+"Scope"]||t.callbackScope||this,t[e+"Params"]||b)},s.eventCallback=function(e,t,n,r){if("on"===(e||"").substr(0,2)){var i=this.vars;if(1===arguments.length)return i[e];null==t?delete i[e]:(i[e]=t,i[e+"Params"]=p(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,i[e+"Scope"]=r),"onUpdate"===e&&(this._onUpdate=t)}return this},s.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},s.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},s.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},s.totalTime=function(e,t,n){if(u||o.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!n&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,i=this._timeline;if(e>r&&!n&&(e=r),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?r-e:e)/this._timeScale,i._dirty||this._uncache(!1),i._timeline)for(;i._timeline;)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(P.length&&K(),this.render(e,t,!1),P.length&&K())}return this},s.progress=s.totalProgress=function(e,t){var n=this.duration();return arguments.length?this.totalTime(n*e,t):n?this._time/n:this.ratio},s.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},s.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||l,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,n=t||0===t?t:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},s.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(e){if(!arguments.length)return this._paused;var t,n,r=this._timeline;return e!=this._paused&&r&&(u||e||o.wake(),t=r.rawTime(),n=t-this._pauseTime,!e&&r.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&(t=r.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var O=g("core.SimpleTimeline",function(e){L.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});s=O.prototype=new L,s.constructor=O,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(e,t,n,r){var i,s;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last,this._sortChildren)for(s=e._startTime;i&&i._startTime>s;)i=i._prev;return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._recent=e,this._timeline&&this._uncache(!0),this},s._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(e,t,n){var r,i=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;i;)r=i._next,(i._active||e>=i._startTime&&!i._paused)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=r},s.rawTime=function(){return u||o.wake(),this._totalTime};var M=g("TweenLite",function(t,n,r){if(L.call(this,n,r),this.render=M.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:M.selector(t)||t;var i,s,o,u=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),a=this.vars.overwrite;if(this._overwrite=a=null==a?X[M.defaultOverwrite]:"number"==typeof a?a>>0:X[a],(u||t instanceof Array||t.push&&p(t))&&"number"!=typeof t[0])for(this._targets=o=c(t),this._propLookup=[],this._siblings=[],i=0;i<o.length;i++)s=o[i],s?"string"!=typeof s?s.length&&s!==e&&s[0]&&(s[0]===e||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(i--,1),this._targets=o=o.concat(c(s))):(this._siblings[i]=Q(s,this,!1),1===a&&this._siblings[i].length>1&&Y(s,this,null,1,this._siblings[i])):(s=o[i--]=M.selector(s),"string"==typeof s&&o.splice(i+1,1)):o.splice(i--,1);else this._propLookup={},this._siblings=Q(t,this,!1),1===a&&this._siblings.length>1&&Y(t,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-l,this.render(-this._delay))},!0),_=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},D=function(e,t){var n,r={};for(n in e)W[n]||n in t&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!R[n]||R[n]&&R[n]._autoCSS)||(r[n]=e[n],delete e[n]);e.css=r};s=M.prototype=new L,s.constructor=M,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,M.version="1.18.2",M.defaultEase=s._ease=new w(null,null,1,1),M.defaultOverwrite="auto",M.ticker=o,M.autoSleep=120,M.lagSmoothing=function(e,t){o.lagSmoothing(e,t)},M.selector=e.$||e.jQuery||function(t){var n=e.$||e.jQuery;return n?(M.selector=n,n(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var P=[],H={},B=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,j=function(e){for(var t,n=this._firstPT,r=1e-6;n;)t=n.blob?e?this.join(""):this.start:n.c*e+n.s,n.r?t=Math.round(t):r>t&&t>-r&&(t=0),n.f?n.fp?n.t[n.p](n.fp,t):n.t[n.p](t):n.t[n.p]=t,n=n._next},F=function(e,t,n,r){var i,s,o,u,a,f,l,c=[e,t],h=0,p="",d=0;for(c.start=e,n&&(n(c),e=c[0],t=c[1]),c.length=0,i=e.match(B)||[],s=t.match(B)||[],r&&(r._next=null,r.blob=1,c._firstPT=r),a=s.length,u=0;a>u;u++)l=s[u],f=t.substr(h,t.indexOf(l,h)-h),p+=f||!u?f:",",h+=f.length,d?d=(d+1)%5:"rgba("===f.substr(-5)&&(d=1),l===i[u]||i.length<=u?p+=l:(p&&(c.push(p),p=""),o=parseFloat(i[u]),c.push(o),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:o,c:("="===l.charAt(1)?parseInt(l.charAt(0)+"1",10)*parseFloat(l.substr(2)):parseFloat(l)-o)||0,f:0,r:d&&4>d}),h+=l.length;return p+=t.substr(h),p&&c.push(p),c.setRatio=j,c},I=function(e,t,n,r,i,s,o,u){var a,f,l="get"===n?e[t]:n,c=typeof e[t],h="string"==typeof r&&"="===r.charAt(1),p={t:e,p:t,s:l,f:"function"===c,pg:0,n:i||t,r:s,pr:0,c:h?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-l||0};return"number"!==c&&("function"===c&&"get"===n&&(f=t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),p.s=l=o?e[f](o):e[f]()),"string"==typeof l&&(o||isNaN(l))?(p.fp=o,a=F(l,r,u||M.defaultStringFilter,p),p={t:a,p:"setRatio",s:0,c:1,f:2,pg:0,n:i||t,pr:0}):h||(p.s=parseFloat(l),p.c=parseFloat(r)-p.s||0)),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p):void 0},q=M._internals={isArray:p,isSelector:_,lazyTweens:P,blobDif:F},R=M._plugins={},U=q.tweenLookup={},z=0,W=q.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},V=L._rootFramesTimeline=new O,$=L._rootTimeline=new O,J=30,K=q.lazyRender=function(){var e,t=P.length;for(H={};--t>-1;)e=P[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);P.length=0};$._startTime=o.time,V._startTime=o.frame,$._active=V._active=!0,setTimeout(K,1),L._updateRoot=M.render=function(){var e,t,n;if(P.length&&K(),$.render((o.time-$._startTime)*$._timeScale,!1,!1),V.render((o.frame-V._startTime)*V._timeScale,!1,!1),P.length&&K(),o.frame>=J){J=o.frame+(parseInt(M.autoSleep,10)||120);for(n in U){for(t=U[n].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete U[n]}if(n=$._first,(!n||n._paused)&&M.autoSleep&&!V._first&&1===o._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||o.sleep()}}},o.addEventListener("tick",L._updateRoot);var Q=function(e,t,n){var r,i,s=e._gsTweenID;if(U[s||(e._gsTweenID=s="t"+z++)]||(U[s]={target:e,tweens:[]}),t&&(r=U[s].tweens,r[i=r.length]=t,n))for(;--i>-1;)r[i]===t&&r.splice(i,1);return U[s].tweens},G=function(e,t,n,r){var i,s,o=e.vars.onOverwrite;return o&&(i=o(e,t,n,r)),o=M.onOverwrite,o&&(s=o(e,t,n,r)),i!==!1&&s!==!1},Y=function(e,t,n,r,i){var s,o,u,a;if(1===r||r>=4){for(a=i.length,s=0;a>s;s++)if((u=i[s])!==t)u._gc||u._kill(null,e,t)&&(o=!0);else if(5===r)break;return o}var f,c=t._startTime+l,h=[],p=0,d=0===t._duration;for(s=i.length;--s>-1;)(u=i[s])===t||u._gc||u._paused||(u._timeline!==t._timeline?(f=f||Z(t,0,d),0===Z(u,f,d)&&(h[p++]=u)):u._startTime<=c&&u._startTime+u.totalDuration()/u._timeScale>c&&((d||!u._initted)&&c-u._startTime<=2e-10||(h[p++]=u)));for(s=p;--s>-1;)if(u=h[s],2===r&&u._kill(n,e,t)&&(o=!0),2!==r||!u._firstPT&&u._initted){if(2!==r&&!G(u,t))continue;u._enabled(!1,!1)&&(o=!0)}return o},Z=function(e,t,n){for(var r=e._timeline,i=r._timeScale,s=e._startTime;r._timeline;){if(s+=r._startTime,i*=r._timeScale,r._paused)return-100;r=r._timeline}return s/=i,s>t?s-t:n&&s===t||!e._initted&&2*l>s-t?l:(s+=e.totalDuration()/e._timeScale/i)>t+l?0:s-t-l};s._init=function(){var e,t,n,r,i,s=this.vars,o=this._overwrittenProps,u=this._duration,a=!!s.immediateRender,f=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),i={};for(r in s.startAt)i[r]=s.startAt[r];if(i.overwrite=!1,i.immediateRender=!0,i.lazy=a&&s.lazy!==!1,i.startAt=i.delay=null,this._startAt=M.to(this.target,0,i),a)if(this._time>0)this._startAt=null;else if(0!==u)return}else if(s.runBackwards&&0!==u)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(a=!1),n={};for(r in s)W[r]&&"autoCSS"!==r||(n[r]=s[r]);if(n.overwrite=0,n.data="isFromStart",n.lazy=a&&s.lazy!==!1,n.immediateRender=a,this._startAt=M.to(this.target,0,n),a){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=f=f?f instanceof w?f:"function"==typeof f?new w(f,s.easeParams):E[f]||M.defaultEase:M.defaultEase,s.easeParams instanceof Array&&f.config&&(this._ease=f.config.apply(f,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o);if(t&&M._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(t,n,r,i){var s,o,u,a,f,l;if(null==t)return!1;H[t._gsTweenID]&&K(),this.vars.css||t.style&&t!==e&&t.nodeType&&R.css&&this.vars.autoCSS!==!1&&D(this.vars,t);for(s in this.vars)if(l=this.vars[s],W[s])l&&(l instanceof Array||l.push&&p(l))&&-1!==l.join("").indexOf("{self}")&&(this.vars[s]=l=this._swapSelfInParams(l,this));else if(R[s]&&(a=new R[s])._onInitTween(t,this.vars[s],this)){for(this._firstPT=f={_next:this._firstPT,t:a,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:a._priority},o=a._overwriteProps.length;--o>-1;)n[a._overwriteProps[o]]=this._firstPT;(a._priority||a._onInitAllProps)&&(u=!0),(a._onDisable||a._onEnable)&&(this._notifyPluginsOfEnabled=!0),f._next&&(f._next._prev=f)}else n[s]=I.call(this,t,s,"get",l,s,0,null,this.vars.stringFilter);return i&&this._kill(i,t)?this._initProps(t,n,r,i):this._overwrite>1&&this._firstPT&&r.length>1&&Y(t,this,n,this._overwrite,r)?(this._kill(n,t),this._initProps(t,n,r,i)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(H[t._gsTweenID]=!0),u)},s.render=function(e,t,n){var r,i,s,o,u=this._time,a=this._duration,f=this._rawPrevTime;if(e>=a-1e-7)this._totalTime=this._time=a,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,i="onComplete",n=n||this._timeline.autoRemoveChildren),0===a&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(0>f||0>=e&&e>=-1e-7||f===l&&"isPause"!==this.data)&&f!==e&&(n=!0,f>l&&(i="onReverseComplete")),this._rawPrevTime=o=!t||e||f===e?e:l);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==u||0===a&&f>0)&&(i="onReverseComplete",r=this._reversed),0>e&&(this._active=!1,0===a&&(this._initted||!this.vars.lazy||n)&&(f>=0&&(f!==l||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=o=!t||e||f===e?e:l)),this._initted||(n=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/a,h=this._easeType,p=this._easePower;(1===h||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),1===h?this.ratio=1-c:2===h?this.ratio=c:.5>e/a?this.ratio=c/2:this.ratio=1-c/2}else this.ratio=this._ease.getRatio(e/a);if(this._time!==u||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=u,this._rawPrevTime=f,P.push(this),void (this._lazy=[e,t]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/a):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==u&&e>=0&&(this._active=!0),0===u&&(this._startAt&&(e>=0?this._startAt.render(e,t,n):i||(i="_dummyGS")),this.vars.onStart&&(0!==this._time||0===a)&&(t||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>e&&this._startAt&&e!==-0.0001&&this._startAt.render(e,t,n),t||(this._time!==u||r)&&this._callback("onUpdate")),i&&(!this._gc||n)&&(0>e&&this._startAt&&!this._onUpdate&&e!==-0.0001&&this._startAt.render(e,t,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this._callback(i),0===a&&this._rawPrevTime===l&&o!==l&&(this._rawPrevTime=0))}},s._kill=function(e,t,n){if("all"===e&&(e=null),null!=e||null!=t&&t!==this.target){t="string"!=typeof t?t||this._targets||this.target:M.selector(t)||t;var r,i,s,o,u,a,f,l,c,h=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((p(t)||_(t))&&"number"!=typeof t[0])for(r=t.length;--r>-1;)this._kill(e,t[r],n)&&(a=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(t===this._targets[r]){u=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],i=this._overwrittenProps[r]=e?this._overwrittenProps[r]||{}:"all";break}}else{if(t!==this.target)return!1;u=this._propLookup,i=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(u){if(f=e||u,l=e!==i&&"all"!==i&&e!==u&&("object"!=typeof e||!e._tempKill),n&&(M.onOverwrite||this.vars.onOverwrite)){for(s in f)u[s]&&(c||(c=[]),c.push(s));if((c||!e)&&!G(this,n,t,c))return!1}for(s in f)(o=u[s])&&(h&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,a=!0),o.pg&&o.t._kill(f)&&(a=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete u[s]),l&&(i[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return a}return this._lazy=!1,this._enabled(!1,!1)},s.invalidate=function(){return this._notifyPluginsOfEnabled&&M._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],L.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-l,this.render(-this._delay)),this},s._enabled=function(e,t){if(u||o.wake(),e&&this._gc){var n,r=this._targets;if(r)for(n=r.length;--n>-1;)this._siblings[n]=Q(r[n],this,!0);else this._siblings=Q(this.target,this,!0)}return L.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?M._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},M.to=function(e,t,n){return new M(e,t,n)},M.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new M(e,t,n)},M.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new M(e,t,r)},M.delayedCall=function(e,t,n,r,i){return new M(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:i,overwrite:0})},M.set=function(e,t){return new M(e,0,t)},M.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:M.selector(e)||e;var n,r,i,s;if((p(e)||_(e))&&"number"!=typeof e[0]){for(n=e.length,r=[];--n>-1;)r=r.concat(M.getTweensOf(e[n],t));for(n=r.length;--n>-1;)for(s=r[n],i=n;--i>-1;)s===r[i]&&r.splice(n,1)}else for(r=Q(e).concat(),n=r.length;--n>-1;)(r[n]._gc||t&&!r[n].isActive())&&r.splice(n,1);return r},M.killTweensOf=M.killDelayedCallsTo=function(e,t,n){"object"==typeof t&&(n=t,t=!1);for(var r=M.getTweensOf(e,t),i=r.length;--i>-1;)r[i]._kill(n,e)};var et=g("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=et.prototype},!0);if(s=et.prototype,et.version="1.18.0",et.API=2,s._firstPT=null,s._addTween=I,s.setRatio=j,s._kill=function(e){var t,n=this._overwriteProps,r=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=n.length;--t>-1;)null!=e[n[t]]&&n.splice(t,1);for(;r;)null!=e[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},s._roundProps=function(e,t){for(var n=this._firstPT;n;)(e[this._propName]||null!=n.n&&e[n.n.split(this._propName+"_").join("")])&&(n.r=t),n=n._next},M._onPluginEvent=function(e,t){var n,r,i,s,o,u=t._firstPT;if("_onInitAllProps"===e){for(;u;){for(o=u._next,r=i;r&&r.pr>u.pr;)r=r._next;(u._prev=r?r._prev:s)?u._prev._next=u:i=u,(u._next=r)?r._prev=u:s=u,u=o}u=t._firstPT=i}for(;u;)u.pg&&"function"==typeof u.t[e]&&u.t[e]()&&(n=!0),u=u._next;return n},et.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===et.API&&(R[(new e[t])._propName]=e[t]);return!0},m.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,n=e.propName,r=e.priority||0,i=e.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},o=g("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){et.call(this,n,r),this._overwriteProps=i||[]},e.global===!0),u=o.prototype=new et(n);u.constructor=o,o.API=e.API;for(t in s)"function"==typeof e[t]&&(u[s[t]]=e[t]);return o.version=e.version,et.activate([o]),o},r=e._gsQueue){for(i=0;i<r.length;i++)r[i]();for(s in d)d[s].func||e.console.log("GSAP encountered missing dependency: com.greensock."+s)}u=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),define("tweenmax",function(){});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},i=function(e,t,n){var r,i,s=e.cycle;for(r in s)i=s[r],e[r]="function"==typeof i?i.call(t[n],n):i[n%i.length];delete e.cycle},s=function(e,t,r){n.call(this,e,t,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},o=1e-10,u=n._internals,a=u.isSelector,f=u.isArray,l=s.prototype=n.to({},.1,{}),c=[];s.version="1.18.0",l.constructor=s,l.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=n.killTweensOf,s.getTweensOf=n.getTweensOf,s.lagSmoothing=n.lagSmoothing,s.ticker=n.ticker,s.render=n.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},l.updateTo=function(e,t){var r,i=this.ratio,s=this.vars.immediateRender||e.immediateRender;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in e)this.vars[r]=e[r];if(this._initted||s)if(t)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._time;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._time>0||s){this._initted=!1,this._init();for(var u,a=1/(1-i),f=this._firstPT;f;)u=f.s+f.c,f.c*=a,f.s=u-f.c,f=f._next}return this},l.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,i,s,a,f,l,c,h,p=this._dirty?this.totalDuration():this._totalDuration,d=this._time,v=this._totalTime,m=this._cycle,g=this._duration,y=this._rawPrevTime;if(e>=p?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,i="onComplete",n=n||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>y||y===o)&&y!==e&&(n=!0,y>o&&(i="onReverseComplete")),this._rawPrevTime=h=!t||e||y===e?e:o)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==v||0===g&&y>0)&&(i="onReverseComplete",r=this._reversed),0>e&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||n)&&(y>=0&&(n=!0),this._rawPrevTime=h=!t||e||y===e?e:o)),this._initted||(n=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(a=g+this._repeatDelay,this._cycle=this._totalTime/a>>0,0!==this._cycle&&this._cycle===this._totalTime/a&&this._cycle--,this._time=this._totalTime-this._cycle*a,this._yoyo&&0!==(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:0>this._time&&(this._time=0)),this._easeType?(f=this._time/g,l=this._easeType,c=this._easePower,(1===l||3===l&&f>=.5)&&(f=1-f),3===l&&(f*=2),1===c?f*=f:2===c?f*=f*f:3===c?f*=f*f*f:4===c&&(f*=f*f*f*f),this.ratio=1===l?1-f:2===l?f:.5>this._time/g?f/2:1-f/2):this.ratio=this._ease.getRatio(this._time/g)),d===this._time&&!n&&m===this._cycle)return v!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=d,this._totalTime=v,this._rawPrevTime=y,this._cycle=m,u.lazyTweens.push(this),this._lazy=[e,t],void 0;this._time&&!r?this.ratio=this._ease.getRatio(this._time/g):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==d&&e>=0&&(this._active=!0),0===v&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,n):i||(i="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(t||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._totalTime!==v||r)&&this._callback("onUpdate")),this._cycle!==m&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),i&&(!this._gc||n)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this._callback(i),0===g&&this._rawPrevTime===o&&h!==o&&(this._rawPrevTime=0))},s.to=function(e,t,n){return new s(e,t,n)},s.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new s(e,t,n)},s.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new s(e,t,r)},s.staggerTo=s.allTo=function(e,t,o,u,l,h,p){u=u||0;var d,v,m,g,y=o.delay||0,b=[],w=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),l.apply(p||o.callbackScope||this,h||c)},E=o.cycle,S=o.startAt&&o.startAt.cycle;for(f(e)||("string"==typeof e&&(e=n.selector(e)||e),a(e)&&(e=r(e))),e=e||[],0>u&&(e=r(e),e.reverse(),u*=-1),d=e.length-1,m=0;d>=m;m++){v={};for(g in o)v[g]=o[g];if(E&&i(v,e,m),S){S=v.startAt={};for(g in o.startAt)S[g]=o.startAt[g];i(v.startAt,e,m)}v.delay=y,m===d&&l&&(v.onComplete=w),b[m]=new s(e[m],t,v),y+=u}return b},s.staggerFrom=s.allFrom=function(e,t,n,r,i,o,u){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,s.staggerTo(e,t,n,r,i,o,u)},s.staggerFromTo=s.allFromTo=function(e,t,n,r,i,o,u,a){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,s.staggerTo(e,t,r,i,o,u,a)},s.delayedCall=function(e,t,n,r,i){return new s(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,useFrames:i,overwrite:0})},s.set=function(e,t){return new s(e,0,t)},s.isTweening=function(e){return n.getTweensOf(e,!0).length>0};var h=function(e,t){for(var r=[],i=0,s=e._first;s;)s instanceof n?r[i++]=s:(t&&(r[i++]=s),r=r.concat(h(s,t)),i=r.length),s=s._next;return r},p=s.getAllTweens=function(t){return h(e._rootTimeline,t).concat(h(e._rootFramesTimeline,t))};s.killAll=function(e,n,r,i){null==n&&(n=!0),null==r&&(r=!0);var s,o,u,a=p(0!=i),f=a.length,l=n&&r&&i;for(u=0;f>u;u++)o=a[u],(l||o instanceof t||(s=o.target===o.vars.onComplete)&&r||n&&!s)&&(e?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},s.killChildTweensOf=function(e,t){if(null!=e){var i,o,l,c,h,p=u.tweenLookup;if("string"==typeof e&&(e=n.selector(e)||e),a(e)&&(e=r(e)),f(e))for(c=e.length;--c>-1;)s.killChildTweensOf(e[c],t);else{i=[];for(l in p)for(o=p[l].target.parentNode;o;)o===e&&(i=i.concat(p[l].tweens)),o=o.parentNode;for(h=i.length,c=0;h>c;c++)t&&i[c].totalTime(i[c].totalDuration()),i[c]._enabled(!1,!1)}}};var d=function(e,n,r,i){n=n!==!1,r=r!==!1,i=i!==!1;for(var s,o,u=p(i),a=n&&r&&i,f=u.length;--f>-1;)o=u[f],(a||o instanceof t||(s=o.target===o.vars.onComplete)&&r||n&&!s)&&o.paused(e)};return s.pauseAll=function(e,t,n){d(!0,e,t,n)},s.resumeAll=function(e,t,n){d(!1,e,t,n)},s.globalTimeScale=function(t){var r=e._rootTimeline,i=n.ticker.time;return arguments.length?(t=t||o,r._startTime=i-(i-r._startTime)*r._timeScale/t,r=e._rootFramesTimeline,i=n.ticker.frame,r._startTime=i-(i-r._startTime)*r._timeScale/t,r._timeScale=e._rootTimeline._timeScale=t,t):r._timeScale},l.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},s},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n,r,i=this.vars;for(r in i)n=i[r],a(n)&&-1!==n.join("").indexOf("{self}")&&(i[r]=this._swapSelfInParams(n));a(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)},i=1e-10,s=n._internals,o=r._internals={},u=s.isSelector,a=s.isArray,f=s.lazyTweens,l=s.lazyRender,c=_gsScope._gsDefine.globals,h=function(e){var t,n={};for(t in e)n[t]=e[t];return n},p=function(e,t,n){var r,i,s=e.cycle;for(r in s)i=s[r],e[r]="function"==typeof i?i.call(t[n],n):i[n%i.length];delete e.cycle},d=o.pauseCallback=function(){},v=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},m=r.prototype=new t;return r.version="1.18.0",m.constructor=r,m.kill()._gc=m._forcingPlayhead=m._hasPause=!1,m.to=function(e,t,r,i){var s=r.repeat&&c.TweenMax||n;return t?this.add(new s(e,t,r),i):this.set(e,r,i)},m.from=function(e,t,r,i){return this.add((r.repeat&&c.TweenMax||n).from(e,t,r),i)},m.fromTo=function(e,t,r,i,s){var o=i.repeat&&c.TweenMax||n;return t?this.add(o.fromTo(e,t,r,i),s):this.set(e,i,s)},m.staggerTo=function(e,t,i,s,o,a,f,l){var c,d,m=new r({onComplete:a,onCompleteParams:f,callbackScope:l,smoothChildTiming:this.smoothChildTiming}),g=i.cycle;for("string"==typeof e&&(e=n.selector(e)||e),e=e||[],u(e)&&(e=v(e)),s=s||0,0>s&&(e=v(e),e.reverse(),s*=-1),d=0;e.length>d;d++)c=h(i),c.startAt&&(c.startAt=h(c.startAt),c.startAt.cycle&&p(c.startAt,e,d)),g&&p(c,e,d),m.to(e[d],t,c,d*s);return this.add(m,o)},m.staggerFrom=function(e,t,n,r,i,s,o,u){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(e,t,n,r,i,s,o,u)},m.staggerFromTo=function(e,t,n,r,i,s,o,u,a){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,this.staggerTo(e,t,r,i,s,o,u,a)},m.call=function(e,t,r,i){return this.add(n.delayedCall(0,e,t,r),i)},m.set=function(e,t,r){return r=this._parseTimeOrLabel(r,0,!0),null==t.immediateRender&&(t.immediateRender=r===this._time&&!this._paused),this.add(new n(e,0,t),r)},r.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var i,s,o=new r(e),u=o._timeline;for(null==t&&(t=!0),u._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=u._time,i=u._first;i;)s=i._next,t&&i instanceof n&&i.target===i.vars.onComplete||o.add(i,i._startTime-i._delay),i=s;return u.add(o,0),o},m.add=function(i,s,o,u){var f,l,c,h,p,d;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,i)),!(i instanceof e)){if(i instanceof Array||i&&i.push&&a(i)){for(o=o||"normal",u=u||0,f=s,l=i.length,c=0;l>c;c++)a(h=i[c])&&(h=new r({tweens:h})),this.add(h,f),"string"!=typeof h&&"function"!=typeof h&&("sequence"===o?f=h._startTime+h.totalDuration()/h._timeScale:"start"===o&&(h._startTime-=h.delay())),f+=u;return this._uncache(!0)}if("string"==typeof i)return this.addLabel(i,s);if("function"!=typeof i)throw"Cannot add "+i+" into the timeline; it is not a tween, timeline, function, or string.";i=n.delayedCall(0,i)}if(t.prototype.add.call(this,i,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,d=p.rawTime()>i._startTime;p._timeline;)d&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},m.remove=function(t){if(t instanceof e){this._remove(t,!1);var n=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:n._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&a(t)){for(var r=t.length;--r>-1;)this.remove(t[r]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},m._remove=function(e,n){t.prototype._remove.call(this,e,n);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},m.insert=m.insertMultiple=function(e,t,n,r){return this.add(e,t||0,n,r)},m.appendMultiple=function(e,t,n,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,r)},m.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},m.addPause=function(e,t,r,i){var s=n.delayedCall(0,d,r,i||this);return s.vars.onComplete=s.vars.onReverseComplete=t,s.data="isPause",this._hasPause=!0,this.add(s,e)},m.removeLabel=function(e){return delete this._labels[e],this},m.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},m._parseTimeOrLabel=function(t,n,r,i){var s;if(i instanceof e&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&a(i)))for(s=i.length;--s>-1;)i[s]instanceof e&&i[s].timeline===this&&this.remove(i[s]);if("string"==typeof n)return this._parseTimeOrLabel(n,r&&"number"==typeof t&&null==this._labels[n]?t-this.duration():0,r);if(n=n||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(s=t.indexOf("="),-1===s)return null==this._labels[t]?r?this._labels[t]=this.duration()+n:n:this._labels[t]+n;n=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,r):this.duration()}return Number(t)+n},m.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(e,t){return this.play(e,t)},m.gotoAndStop=function(e,t){return this.pause(e,t)},m.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r,s,o,u,a,c,h=this._dirty?this.totalDuration():this._totalDuration,p=this._time,d=this._startTime,v=this._timeScale,m=this._paused;if(e>=h)this._totalTime=this._time=h,this._reversed||this._hasPausedChild()||(s=!0,u="onComplete",a=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===e||0>this._rawPrevTime||this._rawPrevTime===i)&&this._rawPrevTime!==e&&this._first&&(a=!0,this._rawPrevTime>i&&(u="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,e=h+1e-4;else if(1e-7>e)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==i&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(u="onReverseComplete",s=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(a=s=!0,u="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(a=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,0===e&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;e=0,this._initted||(a=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=p)for(r=this._first;r&&e>=r._startTime&&!c;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(c=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!c;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(c=r),r=r._prev;c&&(this._time=e=c._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==p&&this._first||n||a||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&e>0&&(this._active=!0),0===p&&this.vars.onStart&&0!==this._time&&(t||this._callback("onStart")),this._time>=p)for(r=this._first;r&&(o=r._next,!this._paused||m);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(c===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=o;else for(r=this._last;r&&(o=r._prev,!this._paused||m);){if(r._active||p>=r._startTime&&!r._paused&&!r._gc){if(c===r){for(c=r._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(e-c._startTime)*c._timeScale:(e-c._startTime)*c._timeScale,t,n),c=c._prev;c=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)}r=o}this._onUpdate&&(t||(f.length&&l(),this._callback("onUpdate"))),u&&(this._gc||(d===this._startTime||v!==this._timeScale)&&(0===this._time||h>=this.totalDuration())&&(s&&(f.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[u]&&this._callback(u)))}},m._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof r&&e._hasPausedChild())return!0;e=e._next}return!1},m.getChildren=function(e,t,r,i){i=i||-9999999999;for(var s=[],o=this._first,u=0;o;)i>o._startTime||(o instanceof n?t!==!1&&(s[u++]=o):(r!==!1&&(s[u++]=o),e!==!1&&(s=s.concat(o.getChildren(!0,t,r)),u=s.length))),o=o._next;return s},m.getTweensOf=function(e,t){var r,i,s=this._gc,o=[],u=0;for(s&&this._enabled(!0,!0),r=n.getTweensOf(e),i=r.length;--i>-1;)(r[i].timeline===this||t&&this._contains(r[i]))&&(o[u++]=r[i]);return s&&this._enabled(!1,!0),o},m.recent=function(){return this._recent},m._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},m.shiftChildren=function(e,t,n){n=n||0;for(var r,i=this._first,s=this._labels;i;)i._startTime>=n&&(i._startTime+=e),i=i._next;if(t)for(r in s)s[r]>=n&&(s[r]+=e);return this._uncache(!0)},m._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=n.length,i=!1;--r>-1;)n[r]._kill(e,t)&&(i=!0);return i},m.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;for(this._time=this._totalTime=0;--n>-1;)t[n]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},m._enabled=function(e,n){if(e===this._gc)for(var r=this._first;r;)r._enabled(e,!0),r=r._next;return t.prototype._enabled.call(this,e,n)},m.totalTime=function(){this._forcingPlayhead=!0;var t=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,t},m.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,n,r=0,i=this._last,s=999999999999;i;)t=i._prev,i._dirty&&i.totalDuration(),i._startTime>s&&this._sortChildren&&!i._paused?this.add(i,i._startTime-i._delay):s=i._startTime,0>i._startTime&&!i._paused&&(r-=i._startTime,this._timeline.smoothChildTiming&&(this._startTime+=i._startTime/this._timeScale),this.shiftChildren(-i._startTime,!1,-9999999999),s=0),n=i._startTime+i._totalDuration/i._timeScale,n>r&&(r=n),i=t;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==e&&this.timeScale(this._totalDuration/e),this},m.paused=function(t){if(!t)for(var n=this._first,r=this._time;n;)n._startTime===r&&"isPause"===n.data&&(n._rawPrevTime=0),n=n._next;return e.prototype.paused.apply(this,arguments)},m.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},m.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var r=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},i=1e-10,s=t._internals,o=s.lazyTweens,u=s.lazyRender,a=new n(null,null,1,0),f=r.prototype=new e;return f.constructor=r,f.kill()._gc=!1,r.version="1.18.0",f.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},f.addCallback=function(e,n,r,i){return this.add(t.delayedCall(0,e,r,i),n)},f.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var n=this.getTweensOf(e,!1),r=n.length,i=this._parseTimeOrLabel(t);--r>-1;)n[r]._startTime===i&&n[r]._enabled(!1,!1);return this},f.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},f.tweenTo=function(e,n){n=n||{};var r,i,s,o={ease:a,useFrames:this.usesFrames(),immediateRender:!1};for(i in n)o[i]=n[i];return o.time=this._parseTimeOrLabel(e),r=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new t(this,r,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&r===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),n.onStart&&s._callback("onStart")},s},f.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},n.immediateRender=n.immediateRender!==!1;var r=this.tweenTo(t,n);return r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)},f.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r,s,a,f,l,c,h,p=this._dirty?this.totalDuration():this._totalDuration,d=this._duration,v=this._time,m=this._totalTime,g=this._startTime,y=this._timeScale,b=this._rawPrevTime,w=this._paused,E=this._cycle;if(e>=p)this._locked||(this._totalTime=p,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,f="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===e||0>b||b===i)&&b!==e&&this._first&&(l=!0,b>i&&(f="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,this._yoyo&&0!==(1&this._cycle)?this._time=e=0:(this._time=d,e=d+1e-4);else if(1e-7>e)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==v||0===d&&b!==i&&(b>0||0>e&&b>=0)&&!this._locked)&&(f="onReverseComplete",s=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=s=!0,f="onReverseComplete"):b>=0&&this._first&&(l=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=d||!t||e||this._rawPrevTime===e?e:i,0===e&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;e=0,this._initted||(l=!0)}else if(0===d&&0>b&&(l=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(c=d+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=d-this._time),this._time>d?(this._time=d,e=d+1e-4):0>this._time?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t){if(e=this._time,e>=v)for(r=this._first;r&&e>=r._startTime&&!h;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(h=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!h;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(h=r),r=r._prev;h&&(this._time=e=h._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==E&&!this._locked){var S=this._yoyo&&0!==(1&E),x=S===(this._yoyo&&0!==(1&this._cycle)),T=this._totalTime,N=this._cycle,C=this._rawPrevTime,k=this._time;if(this._totalTime=E*d,E>this._cycle?S=!S:this._totalTime+=d,this._time=v,this._rawPrevTime=0===d?b-1e-4:b,this._cycle=E,this._locked=!0,v=S?0:d,this.render(v,t,0===d),t||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),x&&(v=S?d+1e-4:-0.0001,this.render(v,!0,!1)),this._locked=!1,this._paused&&!w)return;this._time=k,this._totalTime=T,this._cycle=N,this._rawPrevTime=C}if(!(this._time!==v&&this._first||n||l||h))return m!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&e>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(t||this._callback("onStart")),this._time>=v)for(r=this._first;r&&(a=r._next,!this._paused||w);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(h===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=a;else for(r=this._last;r&&(a=r._prev,!this._paused||w);){if(r._active||v>=r._startTime&&!r._paused&&!r._gc){if(h===r){for(h=r._prev;h&&h.endTime()>this._time;)h.render(h._reversed?h.totalDuration()-(e-h._startTime)*h._timeScale:(e-h._startTime)*h._timeScale,t,n),h=h._prev;h=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)}r=a}this._onUpdate&&(t||(o.length&&u(),this._callback("onUpdate"))),f&&(this._locked||this._gc||(g===this._startTime||y!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(s&&(o.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[f]&&this._callback(f)))},f.getActive=function(e,t,n){null==e&&(e=!0),null==t&&(t=!0),null==n&&(n=!1);var r,i,s=[],o=this.getChildren(e,t,n),u=0,a=o.length;for(r=0;a>r;r++)i=o[r],i.isActive()&&(s[u++]=i);return s},f.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,n=this.getLabelsArray(),r=n.length;for(t=0;r>t;t++)if(n[t].time>e)return n[t].name;return null},f.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),n=t.length;--n>-1;)if(e>t[n].time)return t[n].name;return null},f.getLabelsArray=function(){var e,t=[],n=0;for(e in this._labels)t[n++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},f.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},f.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},f.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},f.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},f.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},f.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},f.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},f.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var e=180/Math.PI,t=[],n=[],r=[],i={},s=_gsScope._gsDefine.globals,o=function(e,t,n,r){this.a=e,this.b=t,this.c=n,this.d=r,this.da=r-e,this.ca=n-e,this.ba=t-e},u=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",a=function(e,t,n,r){var i={a:e},s={},o={},u={c:r},a=(e+t)/2,f=(t+n)/2,l=(n+r)/2,c=(a+f)/2,h=(f+l)/2,p=(h-c)/8;return i.b=a+(e-a)/4,s.b=c+p,i.c=s.a=(i.b+s.b)/2,s.c=o.a=(c+h)/2,o.b=h-p,u.b=l+(r-l)/4,o.c=u.a=(o.b+u.b)/2,[i,s,o,u]},f=function(e,i,s,o,u){var f,l,c,h,p,d,v,m,g,y,b,w,E,S=e.length-1,x=0,T=e[0].a;for(f=0;S>f;f++)p=e[x],l=p.a,c=p.d,h=e[x+1].d,u?(b=t[f],w=n[f],E=.25*(w+b)*i/(o?.5:r[f]||.5),d=c-(c-l)*(o?.5*i:0!==b?E/b:0),v=c+(h-c)*(o?.5*i:0!==w?E/w:0),m=c-(d+((v-d)*(3*b/(b+w)+.5)/4||0))):(d=c-.5*(c-l)*i,v=c+.5*(h-c)*i,m=c-(d+v)/2),d+=m,v+=m,p.c=g=d,p.b=0!==f?T:T=p.a+.6*(p.c-p.a),p.da=c-l,p.ca=g-l,p.ba=T-l,s?(y=a(l,T,g,c),e.splice(x,1,y[0],y[1],y[2],y[3]),x+=4):x++,T=v;p=e[x],p.b=T,p.c=T+.4*(p.d-T),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=T-p.a,s&&(y=a(p.a,T,p.c,p.d),e.splice(x,1,y[0],y[1],y[2],y[3]))},l=function(e,r,i,s){var u,a,f,l,c,h,p=[];if(s)for(e=[s].concat(e),a=e.length;--a>-1;)"string"==typeof (h=e[a][r])&&"="===h.charAt(1)&&(e[a][r]=s[r]+Number(h.charAt(0)+h.substr(2)));if(u=e.length-2,0>u)return p[0]=new o(e[0][r],0,0,e[-1>u?0:1][r]),p;for(a=0;u>a;a++)f=e[a][r],l=e[a+1][r],p[a]=new o(f,0,0,l),i&&(c=e[a+2][r],t[a]=(t[a]||0)+(l-f)*(l-f),n[a]=(n[a]||0)+(c-l)*(c-l));return p[a]=new o(e[a][r],0,0,e[a+1][r]),p},c=function(e,s,o,a,c,h){var p,d,v,m,g,y,b,w,E={},S=[],x=h||e[0];c="string"==typeof c?","+c+",":u,null==s&&(s=1);for(d in e[0])S.push(d);if(e.length>1){for(w=e[e.length-1],b=!0,p=S.length;--p>-1;)if(d=S[p],Math.abs(x[d]-w[d])>.05){b=!1;break}b&&(e=e.concat(),h&&e.unshift(h),e.push(e[1]),h=e[e.length-3])}for(t.length=n.length=r.length=0,p=S.length;--p>-1;)d=S[p],i[d]=-1!==c.indexOf(","+d+","),E[d]=l(e,d,i[d],h);for(p=t.length;--p>-1;)t[p]=Math.sqrt(t[p]),n[p]=Math.sqrt(n[p]);if(!a){for(p=S.length;--p>-1;)if(i[d])for(v=E[S[p]],y=v.length-1,m=0;y>m;m++)g=v[m+1].da/n[m]+v[m].da/t[m],r[m]=(r[m]||0)+g*g;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=S.length,m=o?4:1;--p>-1;)d=S[p],v=E[d],f(v,s,o,a,i[d]),b&&(v.splice(0,m),v.splice(v.length-m,m));return E},h=function(e,t,n){t=t||"soft";var r,i,s,u,a,f,l,c,h,p,d,v={},m="cubic"===t?3:2,g="soft"===t,y=[];if(g&&n&&(e=[n].concat(e)),null==e||m+1>e.length)throw"invalid Bezier data";for(h in e[0])y.push(h);for(f=y.length;--f>-1;){for(h=y[f],v[h]=a=[],p=0,c=e.length,l=0;c>l;l++)r=null==n?e[l][h]:"string"==typeof (d=e[l][h])&&"="===d.charAt(1)?n[h]+Number(d.charAt(0)+d.substr(2)):Number(d),g&&l>1&&c-1>l&&(a[p++]=(r+a[p-2])/2),a[p++]=r;for(c=p-m+1,p=0,l=0;c>l;l+=m)r=a[l],i=a[l+1],s=a[l+2],u=2===m?0:a[l+3],a[p++]=d=3===m?new o(r,i,s,u):new o(r,(2*i+r)/3,(2*i+s)/3,s);a.length=p}return v},p=function(e,t,n){for(var r,i,s,o,u,a,f,l,c,h,p,d=1/n,v=e.length;--v>-1;)for(h=e[v],s=h.a,o=h.d-s,u=h.c-s,a=h.b-s,r=i=0,l=1;n>=l;l++)f=d*l,c=1-f,r=i-(i=(f*f*o+3*c*(f*u+c*a))*f),p=v*n+l-1,t[p]=(t[p]||0)+r*r},d=function(e,t){t=t>>0||6;var n,r,i,s,o=[],u=[],a=0,f=0,l=t-1,c=[],h=[];for(n in e)p(e[n],o,t);for(i=o.length,r=0;i>r;r++)a+=Math.sqrt(o[r]),s=r%t,h[s]=a,s===l&&(f+=a,s=r/t>>0,c[s]=h,u[s]=f,a=0,h=[]);return{length:f,lengths:u,segments:c}},v=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var r,i,s,o,u,a=t.values||[],f={},l=a[0],p=t.autoRotate||n.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(r in l)this._props.push(r);for(s=this._props.length;--s>-1;)r=this._props[s],this._overwriteProps.push(r),i=this._func[r]="function"==typeof e[r],f[r]=i?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),u||f[r]!==a[0][r]&&(u=f);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?c(a,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,u):h(a,t.type,f),this._segCount=this._beziers[r].length,this._timeRes){var v=d(this._beziers,this._timeRes);this._length=v.length,this._lengths=v.lengths,this._segments=v.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),s=p.length;--s>-1;){for(o=0;3>o;o++)r=p[s][o],this._func[r]="function"==typeof e[r]?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]:!1;r=p[s][2],this._initialRotations[s]=this._func[r]?this._func[r].call(this._target):this._target[r]}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(t){var n,r,i,s,o,u,a,f,l,c,h=this._segCount,p=this._func,d=this._target,v=t!==this._startRatio;if(this._timeRes){if(l=this._lengths,c=this._curSeg,t*=this._length,i=this._li,t>this._l2&&h-1>i){for(f=h-1;f>i&&t>=(this._l2=l[++i]););this._l1=l[i-1],this._li=i,this._curSeg=c=this._segments[i],this._s2=c[this._s1=this._si=0]}else if(this._l1>t&&i>0){for(;i>0&&(this._l1=l[--i])>=t;);0===i&&this._l1>t?this._l1=0:i++,this._l2=l[i],this._li=i,this._curSeg=c=this._segments[i],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(n=i,t-=this._l1,i=this._si,t>this._s2&&c.length-1>i){for(f=c.length-1;f>i&&t>=(this._s2=c[++i]););this._s1=c[i-1],this._si=i}else if(this._s1>t&&i>0){for(;i>0&&(this._s1=c[--i])>=t;);0===i&&this._s1>t?this._s1=0:i++,this._s2=c[i],this._si=i}u=(i+(t-this._s1)/(this._s2-this._s1))*this._prec}else n=0>t?0:t>=1?h-1:h*t>>0,u=(t-n*(1/h))*h;for(r=1-u,i=this._props.length;--i>-1;)s=this._props[i],o=this._beziers[s][n],a=(u*u*o.da+3*r*(u*o.ca+r*o.ba))*u+o.a,this._round[s]&&(a=Math.round(a)),p[s]?d[s](a):d[s]=a;if(this._autoRotate){var m,g,y,b,w,E,S,x=this._autoRotate;for(i=x.length;--i>-1;)s=x[i][2],E=x[i][3]||0,S=x[i][4]===!0?1:e,o=this._beziers[x[i][0]],m=this._beziers[x[i][1]],o&&m&&(o=o[n],m=m[n],g=o.a+(o.b-o.a)*u,b=o.b+(o.c-o.b)*u,g+=(b-g)*u,b+=(o.c+(o.d-o.c)*u-b)*u,y=m.a+(m.b-m.a)*u,w=m.b+(m.c-m.b)*u,y+=(w-y)*u,w+=(m.c+(m.d-m.c)*u-w)*u,a=v?Math.atan2(w-y,b-g)*S+E:this._initialRotations[i],p[s]?d[s](a):d[s]=a)}}}),m=v.prototype;v.bezierThrough=c,v.cubicToQuadratic=a,v._autoCSS=!0,v.quadraticToCubic=function(e,t,n){return new o(e,(2*t+e)/3,(2*t+n)/3,n)},v._cssRegister=function(){var e=s.CSSPlugin;if(e){var t=e._internals,n=t._parseToProxy,r=t._setPluginRatio,i=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,s,o,u,a){t instanceof Array&&(t={values:t}),a=new v;var f,l,c,h=t.values,p=h.length-1,d=[],m={};if(0>p)return u;for(f=0;p>=f;f++)c=n(e,h[f],o,u,a,p!==f),d[f]=c.end;for(l in t)m[l]=t[l];return m.values=d,u=new i(e,"bezier",0,0,c.pt,2),u.data=c,u.plugin=a,u.setRatio=r,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(f=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=c.end.left?[["left","top","rotation",f,!1]]:null!=c.end.x?[["x","y","rotation",f,!1]]:!1),m.autoRotate&&(o._transform||o._enableTransforms(!1),c.autoRotate=o._target._gsTransform),a._onInitTween(c.proxy,m,o._tween),u}})}},m._roundProps=function(e,t){for(var n=this._overwriteProps,r=n.length;--r>-1;)(e[n[r]]||e.bezier||e.bezierThrough)&&(this._round[n[r]]=t)},m._kill=function(e){var t,n,r=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],n=r.length;--n>-1;)r[n]===t&&r.splice(n,1);return this._super._kill.call(this,e)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var n,r,i,s,o=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},u=_gsScope._gsDefine.globals,a={},f=o.prototype=new e("css");f.constructor=o,o.version="1.18.0",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",o.defaultSmoothOrigin=!0,f="px",o.suffixMap={top:f,right:f,bottom:f,left:f,width:f,height:f,fontSize:f,padding:f,margin:f,perspective:f,lineHeight:""};var l,c,h,p,d,v,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,y=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,b=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,E=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,x=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,N=/([A-Z])/g,C=/-([a-z])/gi,k=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,L=function(e,t){return t.toUpperCase()},A=/(?:Left|Right|Width)/i,O=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,M=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,_=/,(?=[^\)]*(?:\(|$))/gi,D=Math.PI/180,P=180/Math.PI,H={},B=document,j=function(e){return B.createElementNS?B.createElementNS("http://www.w3.org/1999/xhtml",e):B.createElement(e)},F=j("div"),I=j("img"),q=o._internals={_specialProps:a},R=navigator.userAgent,U=function(){var e=R.indexOf("Android"),t=j("a");return h=-1!==R.indexOf("Safari")&&-1===R.indexOf("Chrome")&&(-1===e||Number(R.substr(e+8,1))>3),d=h&&6>Number(R.substr(R.indexOf("Version/")+8,1)),p=-1!==R.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(R)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(R))&&(v=parseFloat(RegExp.$1)),t?(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity)):!1}(),z=function(e){return E.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(e){window.console&&0},X="",V="",$=function(e,t){t=t||F;var n,r,i=t.style;if(void 0!==i[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),n=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===i[n[r]+e];);return r>=0?(V=3===r?"ms":n[r],X="-"+V.toLowerCase()+"-",V+e):null},J=B.defaultView?B.defaultView.getComputedStyle:function(){},K=o.getStyle=function(e,t,n,r,i){var s;return U||"opacity"!==t?(!r&&e.style[t]?s=e.style[t]:(n=n||J(e))?s=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(N,"-$1").toLowerCase()):e.currentStyle&&(s=e.currentStyle[t]),null==i||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:i):z(e)},Q=q.convertToPixels=function(e,n,r,i,s){if("px"===i||!i)return r;if("auto"===i||!r)return 0;var u,a,f,l=A.test(n),c=e,h=F.style,p=0>r;if(p&&(r=-r),"%"===i&&-1!==n.indexOf("border"))u=r/100*(l?e.clientWidth:e.clientHeight);else{if(h.cssText="border:0 solid red;position:"+K(e,"position")+";line-height:0;","%"!==i&&c.appendChild&&"v"!==i.charAt(0)&&"rem"!==i)h[l?"borderLeftWidth":"borderTopWidth"]=r+i;else{if(c=e.parentNode||B.body,a=c._gsCache,f=t.ticker.frame,a&&l&&a.time===f)return a.width*r/100;h[l?"width":"height"]=r+i}c.appendChild(F),u=parseFloat(F[l?"offsetWidth":"offsetHeight"]),c.removeChild(F),l&&"%"===i&&o.cacheWidths!==!1&&(a=c._gsCache=c._gsCache||{},a.time=f,a.width=100*(u/r)),0!==u||s||(u=Q(e,n,r,i,!0))}return p?-u:u},G=q.calculateOffset=function(e,t,n){if("absolute"!==K(e,"position",n))return 0;var r="left"===t?"Left":"Top",i=K(e,"margin"+r,n);return e["offset"+r]-(Q(e,t,parseFloat(i),i.replace(w,""))||0)},Y=function(e,t){var n,r,i,s={};if(t=t||J(e,null))if(n=t.length)for(;--n>-1;)i=t[n],(-1===i.indexOf("-transform")||Nt===i)&&(s[i.replace(C,L)]=t.getPropertyValue(i));else for(n in t)(-1===n.indexOf("Transform")||Tt===n)&&(s[n]=t[n]);else if(t=e.currentStyle||e.style)for(n in t)"string"==typeof n&&void 0===s[n]&&(s[n.replace(C,L)]=t[n]);return U||(s.opacity=z(e)),r=jt(e,t,!1),s.rotation=r.rotation,s.skewX=r.skewX,s.scaleX=r.scaleX,s.scaleY=r.scaleY,s.x=r.x,s.y=r.y,kt&&(s.z=r.z,s.rotationX=r.rotationX,s.rotationY=r.rotationY,s.scaleZ=r.scaleZ),s.filters&&delete s.filters,s},Z=function(e,t,n,r,i){var s,o,u,a={},f=e.style;for(o in n)"cssText"!==o&&"length"!==o&&isNaN(o)&&(t[o]!==(s=n[o])||i&&i[o])&&-1===o.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(a[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof t[o]||""===t[o].replace(b,"")?s:0:G(e,o),void 0!==f[o]&&(u=new dt(f,o,f[o],u)));if(r)for(o in r)"className"!==o&&(a[o]=r[o]);return{difs:a,firstMPT:u}},et={width:["Left","Right"],height:["Top","Bottom"]},tt=["marginLeft","marginRight","marginTop","marginBottom"],nt=function(e,t,n){var r=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),i=et[t],s=i.length;for(n=n||J(e,null);--s>-1;)r-=parseFloat(K(e,"padding"+i[s],n,!0))||0,r-=parseFloat(K(e,"border"+i[s]+"Width",n,!0))||0;return r},rt=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(null==e||""===e)&&(e="0 0");var n=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":n[0],i=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":n[1];return null==i?i="center"===r?"50%":"0":"center"===i&&(i="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+i+(n.length>2?" "+n[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==i.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===i.charAt(1),t.ox=parseFloat(r.replace(b,"")),t.oy=parseFloat(i.replace(b,"")),t.v=e),t||e},it=function(e,t){return"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},st=function(e,t){return null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)},ot=function(e,t,n,r){var i,s,o,u,a,f=1e-6;return null==e?u=t:"number"==typeof e?u=e:(i=360,s=e.split("_"),a="="===e.charAt(1),o=(a?parseInt(e.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===e.indexOf("rad")?1:P)-(a?0:t),s.length&&(r&&(r[n]=t+o),-1!==e.indexOf("short")&&(o%=i,o!==o%(i/2)&&(o=0>o?o+i:o-i)),-1!==e.indexOf("_cw")&&0>o?o=(o+9999999999*i)%i-(0|o/i)*i:-1!==e.indexOf("ccw")&&o>0&&(o=(o-9999999999*i)%i-(0|o/i)*i)),u=t+o),f>u&&u>-f&&(u=0),u},ut={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},at=function(e,t,n){return e=0>e?e+1:e>1?e-1:e,0|255*(1>6*e?t+6*(n-t)*e:.5>e?n:2>3*e?t+6*(n-t)*(2/3-e):t)+.5},ft=o.parseColor=function(e,t){var n,r,i,s,o,u,a,f,l,c,h;if(e)if("number"==typeof e)n=[e>>16,255&e>>8,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),ut[e])n=ut[e];else if("#"===e.charAt(0))4===e.length&&(r=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+r+r+i+i+s+s),e=parseInt(e.substr(1),16),n=[e>>16,255&e>>8,255&e];else if("hsl"===e.substr(0,3))if(n=h=e.match(m),t){if(-1!==e.indexOf("="))return e.match(g)}else o=Number(n[0])%360/360,u=Number(n[1])/100,a=Number(n[2])/100,i=.5>=a?a*(u+1):a+u-a*u,r=2*a-i,n.length>3&&(n[3]=Number(e[3])),n[0]=at(o+1/3,r,i),n[1]=at(o,r,i),n[2]=at(o-1/3,r,i);else n=e.match(m)||ut.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=ut.black;return t&&!h&&(r=n[0]/255,i=n[1]/255,s=n[2]/255,f=Math.max(r,i,s),l=Math.min(r,i,s),a=(f+l)/2,f===l?o=u=0:(c=f-l,u=a>.5?c/(2-f-l):c/(f+l),o=f===r?(i-s)/c+(s>i?6:0):f===i?(s-r)/c+2:(r-i)/c+4,o*=60),n[0]=0|o+.5,n[1]=0|100*u+.5,n[2]=0|100*a+.5),n},lt=function(e,t){var n,r,i,s=e.match(ct)||[],o=0,u=s.length?"":e;for(n=0;s.length>n;n++)r=s[n],i=e.substr(o,e.indexOf(r,o)-o),o+=i.length+r.length,r=ft(r,t),3===r.length&&r.push(1),u+=i+(t?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return u},ct="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(f in ut)ct+="|"+f+"\\b";ct=RegExp(ct+")","gi"),o.colorStringFilter=function(e){var t,n=e[0]+e[1];ct.lastIndex=0,ct.test(n)&&(t=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),e[0]=lt(e[0],t),e[1]=lt(e[1],t))},t.defaultStringFilter||(t.defaultStringFilter=o.colorStringFilter);var ht=function(e,t,n,r){if(null==e)return function(e){return e};var i,s=t?(e.match(ct)||[""])[0]:"",o=e.split(s).join("").match(y)||[],u=e.substr(0,e.indexOf(o[0])),a=")"===e.charAt(e.length-1)?")":"",f=-1!==e.indexOf(" ")?" ":",",l=o.length,c=l>0?o[0].replace(m,""):"";return l?i=t?function(e){var t,h,p,d;if("number"==typeof e)e+=c;else if(r&&_.test(e)){for(d=e.replace(_,"|").split("|"),p=0;d.length>p;p++)d[p]=i(d[p]);return d.join(",")}if(t=(e.match(ct)||[s])[0],h=e.split(t).join("").match(y)||[],p=h.length,l>p--)for(;l>++p;)h[p]=n?h[0|(p-1)/2]:o[p];return u+h.join(f)+f+t+a+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,s,h;if("number"==typeof e)e+=c;else if(r&&_.test(e)){for(s=e.replace(_,"|").split("|"),h=0;s.length>h;h++)s[h]=i(s[h]);return s.join(",")}if(t=e.match(y)||[],h=t.length,l>h--)for(;l>++h;)t[h]=n?t[0|(h-1)/2]:o[h];return u+t.join(f)+a}:function(e){return e}},pt=function(e){return e=e.split(","),function(t,n,r,i,s,o,u){var a,f=(n+"").split(" ");for(u={},a=0;4>a;a++)u[e[a]]=f[a]=f[a]||f[(a-1)/2>>0];return i.parse(t,u,s,o)}},dt=(q._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,n,r,i,s=this.data,o=s.proxy,u=s.firstMPT,a=1e-6;u;)t=o[u.v],u.r?t=Math.round(t):a>t&&t>-a&&(t=0),u.t[u.p]=t,u=u._next;if(s.autoRotate&&(s.autoRotate.rotation=o.rotation),1===e)for(u=s.firstMPT;u;){if(n=u.t,n.type){if(1===n.type){for(i=n.xs0+n.s+n.xs1,r=1;n.l>r;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.e=i}}else n.e=n.s+n.xs0;u=u._next}},function(e,t,n,r,i){this.t=e,this.p=t,this.v=n,this.r=i,r&&(r._prev=this,this._next=r)}),vt=(q._parseToProxy=function(e,t,n,r,i,s){var o,u,a,f,l,c=r,h={},p={},d=n._transform,v=H;for(n._transform=null,H=t,r=l=n.parse(e,t,r,i),H=v,s&&(n._transform=d,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(1>=r.type&&(u=r.p,p[u]=r.s+r.c,h[u]=r.s,s||(f=new dt(r,"s",u,f,r.r),r.c=0),1===r.type))for(o=r.l;--o>0;)a="xn"+o,u=r.p+"_"+a,p[u]=r.data[a],h[u]=r[a],s||(f=new dt(r,a,u,f,r.rxp[a]));r=r._next}return{proxy:h,end:p,firstMPT:f,pt:l}},q.CSSPropTween=function(e,t,r,i,o,u,a,f,l,c,h){this.t=e,this.p=t,this.s=r,this.c=i,this.n=a||t,e instanceof vt||s.push(this.n),this.r=f,this.type=u||0,l&&(this.pr=l,n=!0),this.b=void 0===c?r:c,this.e=void 0===h?r+i:h,o&&(this._next=o,o._prev=this)}),mt=function(e,t,n,r,i,s){var o=new vt(e,t,n,r-n,i,-1,s);return o.b=n,o.e=o.xs0=r,o},gt=o.parseComplex=function(e,t,n,r,i,s,o,u,a,f){n=n||s||"",o=new vt(e,t,0,0,o,f?2:1,null,!1,u,n,r),r+="";var c,h,p,d,v,y,b,w,E,S,x,T,N,C=n.split(", ").join(",").split(" "),k=r.split(", ").join(",").split(" "),L=C.length,A=l!==!1;for((-1!==r.indexOf(",")||-1!==n.indexOf(","))&&(C=C.join(" ").replace(_,", ").split(" "),k=k.join(" ").replace(_,", ").split(" "),L=C.length),L!==k.length&&(C=(s||"").split(" "),L=C.length),o.plugin=a,o.setRatio=f,ct.lastIndex=0,c=0;L>c;c++)if(d=C[c],v=k[c],w=parseFloat(d),w||0===w)o.appendXtra("",w,it(v,w),v.replace(g,""),A&&-1!==v.indexOf("px"),!0);else if(i&&ct.test(d))T=","===v.charAt(v.length-1)?"),":")",N=-1!==v.indexOf("hsl")&&U,d=ft(d,N),v=ft(v,N),E=d.length+v.length>6,E&&!U&&0===v[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(k[c]).join("transparent")):(U||(E=!1),N?o.appendXtra(E?"hsla(":"hsl(",d[0],it(v[0],d[0]),",",!1,!0).appendXtra("",d[1],it(v[1],d[1]),"%,",!1).appendXtra("",d[2],it(v[2],d[2]),E?"%,":"%"+T,!1):o.appendXtra(E?"rgba(":"rgb(",d[0],v[0]-d[0],",",!0,!0).appendXtra("",d[1],v[1]-d[1],",",!0).appendXtra("",d[2],v[2]-d[2],E?",":T,!0),E&&(d=4>d.length?1:d[3],o.appendXtra("",d,(4>v.length?1:v[3])-d,T,!1))),ct.lastIndex=0;else if(y=d.match(m)){if(b=v.match(g),!b||b.length!==y.length)return o;for(p=0,h=0;y.length>h;h++)x=y[h],S=d.indexOf(x,p),o.appendXtra(d.substr(p,S-p),Number(x),it(b[h],x),"",A&&"px"===d.substr(S+x.length,2),0===h),p=S+x.length;o["xs"+o.l]+=d.substr(p)}else o["xs"+o.l]+=o.l?" "+d:d;if(-1!==r.indexOf("=")&&o.data){for(T=o.xs0+o.data.s,c=1;o.l>c;c++)T+=o["xs"+c]+o.data["xn"+c];o.e=T+o["xs"+c]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},yt=9;for(f=vt.prototype,f.l=f.pr=0;--yt>0;)f["xn"+yt]=0,f["xs"+yt]="";f.xs0="",f._next=f._prev=f.xfirst=f.data=f.plugin=f.setRatio=f.rxp=null,f.appendXtra=function(e,t,n,r,i,s){var o=this,u=o.l;return o["xs"+u]+=s&&u?" "+e:e||"",n||0===u||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=r||"",u>0?(o.data["xn"+u]=t+n,o.rxp["xn"+u]=i,o["xn"+u]=t,o.plugin||(o.xfirst=new vt(o,"xn"+u,t,n,o.xfirst||o,0,o.n,i,o.pr),o.xfirst.xs0=0),o):(o.data={s:t+n},o.rxp={},o.s=t,o.c=n,o.r=i,o)):(o["xs"+u]+=t+(r||""),o)};var bt=function(e,t){t=t||{},this.p=t.prefix?$(e)||e:e,a[e]=a[this.p]=this,this.format=t.formatter||ht(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},wt=q._registerComplexSpecialProp=function(e,t,n){"object"!=typeof t&&(t={parser:n});var r,i,s=e.split(","),o=t.defaultValue;for(n=n||[o],r=0;s.length>r;r++)t.prefix=0===r&&t.prefix,t.defaultValue=n[r]||o,i=new bt(s[r],t)},Et=function(e){if(!a[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";wt(e,{parser:function(e,n,r,i,s,o,f){var l=u.com.greensock.plugins[t];return l?(l._cssRegister(),a[r].parse(e,n,r,i,s,o,f)):(W("Error: "+t+" js file not loaded."),s)}})}};f=bt.prototype,f.parseComplex=function(e,t,n,r,i,s){var o,u,a,f,l,c,h=this.keyword;if(this.multi&&(_.test(n)||_.test(t)?(u=t.replace(_,"|").split("|"),a=n.replace(_,"|").split("|")):h&&(u=[t],a=[n])),a){for(f=a.length>u.length?a.length:u.length,o=0;f>o;o++)t=u[o]=u[o]||this.dflt,n=a[o]=a[o]||this.dflt,h&&(l=t.indexOf(h),c=n.indexOf(h),l!==c&&(-1===c?u[o]=u[o].split(h).join(""):-1===l&&(u[o]+=" "+h)));t=u.join(", "),n=a.join(", ")}return gt(e,this.p,t,n,this.clrs,this.dflt,r,this.pr,i,s)},f.parse=function(e,t,n,r,s,o){return this.parseComplex(e.style,this.format(K(e,this.p,i,!1,this.dflt)),this.format(t),s,o)},o.registerSpecialProp=function(e,t,n){wt(e,{parser:function(e,r,i,s,o,u){var a=new vt(e,i,0,0,o,2,i,!1,n);return a.plugin=u,a.setRatio=t(e,r,s._tween,i),a},priority:n})},o.useSVGTransformAttr=h||p;var St,xt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Tt=$("transform"),Nt=X+"transform",Ct=$("transformOrigin"),kt=null!==$("perspective"),Lt=q.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=o.defaultForce3D!==!1&&kt?o.defaultForce3D||"auto":!1},At=window.SVGElement,Ot=function(e,t,n){var r,i=B.createElementNS("http://www.w3.org/2000/svg",e),s=/([a-z])([A-Z])/g;for(r in n)i.setAttributeNS(null,r.replace(s,"$1-$2").toLowerCase(),n[r]);return t.appendChild(i),i},Mt=B.documentElement,_t=function(){var e,t,n,r=v||/Android/i.test(R)&&!window.chrome;return B.createElementNS&&!r&&(e=Ot("svg",Mt),t=Ot("rect",e,{width:100,height:50,x:100}),n=t.getBoundingClientRect().width,t.style[Ct]="50% 50%",t.style[Tt]="scaleX(0.5)",r=n===t.getBoundingClientRect().width&&(!p||!kt),Mt.removeChild(e)),r}(),Dt=function(e,t,n,r,i){var s,u,a,f,l,c,h,p,d,v,m,g,y,b,w=e._gsTransform,E=Bt(e,!0);w&&(y=w.xOrigin,b=w.yOrigin),(!r||2>(s=r.split(" ")).length)&&(h=e.getBBox(),t=rt(t).split(" "),s=[(-1!==t[0].indexOf("%")?parseFloat(t[0])/100*h.width:parseFloat(t[0]))+h.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*h.height:parseFloat(t[1]))+h.y]),n.xOrigin=f=parseFloat(s[0]),n.yOrigin=l=parseFloat(s[1]),r&&E!==Ht&&(c=E[0],h=E[1],p=E[2],d=E[3],v=E[4],m=E[5],g=c*d-h*p,u=f*(d/g)+l*(-p/g)+(p*m-d*v)/g,a=f*(-h/g)+l*(c/g)-(c*m-h*v)/g,f=n.xOrigin=s[0]=u,l=n.yOrigin=s[1]=a),w&&(i||i!==!1&&o.defaultSmoothOrigin!==!1?(u=f-y,a=l-b,w.xOffset+=u*E[0]+a*E[2]-u,w.yOffset+=u*E[1]+a*E[3]-a):w.xOffset=w.yOffset=0),e.setAttribute("data-svg-origin",s.join(" "))},Pt=function(e){return!!(At&&"function"==typeof e.getBBox&&e.getCTM&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM))},Ht=[1,0,0,1,0,0],Bt=function(e,t){var n,r,i,s,o,u=e._gsTransform||new Lt,a=1e5;if(Tt?r=K(e,Nt,null,!0):e.currentStyle&&(r=e.currentStyle.filter.match(O),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),u.x||0,u.y||0].join(","):""),n=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,(u.svg||e.getBBox&&Pt(e))&&(n&&-1!==(e.style[Tt]+"").indexOf("matrix")&&(r=e.style[Tt],n=0),i=e.getAttribute("transform"),n&&i&&(-1!==i.indexOf("matrix")?(r=i,n=0):-1!==i.indexOf("translate")&&(r="matrix(1,0,0,1,"+i.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",n=0))),n)return Ht;for(i=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],yt=i.length;--yt>-1;)s=Number(i[yt]),i[yt]=(o=s-(s|=0))?(0|o*a+(0>o?-0.5:.5))/a+s:s;return t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i},jt=q.getTransform=function(e,n,r,s){if(e._gsTransform&&r&&!s)return e._gsTransform;var u,a,f,l,c,h,p=r?e._gsTransform||new Lt:new Lt,d=0>p.scaleX,v=2e-5,m=1e5,g=kt?parseFloat(K(e,Ct,n,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,y=parseFloat(o.defaultTransformPerspective)||0;if(p.svg=!!e.getBBox&&!!Pt(e),p.svg&&(Dt(e,K(e,Ct,i,!1,"50% 50%")+"",p,e.getAttribute("data-svg-origin")),St=o.useSVGTransformAttr||_t),u=Bt(e),u!==Ht){if(16===u.length){var b,w,E,S,x,T=u[0],N=u[1],C=u[2],k=u[3],L=u[4],A=u[5],O=u[6],M=u[7],_=u[8],D=u[9],H=u[10],B=u[12],j=u[13],F=u[14],I=u[11],q=Math.atan2(O,H);p.zOrigin&&(F=-p.zOrigin,B=_*F-u[12],j=D*F-u[13],F=H*F+p.zOrigin-u[14]),p.rotationX=q*P,q&&(S=Math.cos(-q),x=Math.sin(-q),b=L*S+_*x,w=A*S+D*x,E=O*S+H*x,_=L*-x+_*S,D=A*-x+D*S,H=O*-x+H*S,I=M*-x+I*S,L=b,A=w,O=E),q=Math.atan2(_,H),p.rotationY=q*P,q&&(S=Math.cos(-q),x=Math.sin(-q),b=T*S-_*x,w=N*S-D*x,E=C*S-H*x,D=N*x+D*S,H=C*x+H*S,I=k*x+I*S,T=b,N=w,C=E),q=Math.atan2(N,T),p.rotation=q*P,q&&(S=Math.cos(-q),x=Math.sin(-q),T=T*S+L*x,w=N*S+A*x,A=N*-x+A*S,O=C*-x+O*S,N=w),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY+=180),p.scaleX=(0|Math.sqrt(T*T+N*N)*m+.5)/m,p.scaleY=(0|Math.sqrt(A*A+D*D)*m+.5)/m,p.scaleZ=(0|Math.sqrt(O*O+H*H)*m+.5)/m,p.skewX=0,p.perspective=I?1/(0>I?-I:I):0,p.x=B,p.y=j,p.z=F,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*T-p.yOrigin*L),p.y-=p.yOrigin-(p.yOrigin*N-p.xOrigin*A))}else if(!(kt&&!s&&u.length&&p.x===u[4]&&p.y===u[5]&&(p.rotationX||p.rotationY)||void 0!==p.x&&"none"===K(e,"display",n))){var R=u.length>=6,U=R?u[0]:1,z=u[1]||0,W=u[2]||0,X=R?u[3]:1;p.x=u[4]||0,p.y=u[5]||0,f=Math.sqrt(U*U+z*z),l=Math.sqrt(X*X+W*W),c=U||z?Math.atan2(z,U)*P:p.rotation||0,h=W||X?Math.atan2(W,X)*P+c:p.skewX||0,Math.abs(h)>90&&270>Math.abs(h)&&(d?(f*=-1,h+=0>=c?180:-180,c+=0>=c?180:-180):(l*=-1,h+=0>=h?180:-180)),p.scaleX=f,p.scaleY=l,p.rotation=c,p.skewX=h,kt&&(p.rotationX=p.rotationY=p.z=0,p.perspective=y,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*U+p.yOrigin*W),p.y-=p.yOrigin-(p.xOrigin*z+p.yOrigin*X))}p.zOrigin=g;for(a in p)v>p[a]&&p[a]>-v&&(p[a]=0)}return r&&(e._gsTransform=p,p.svg&&(St&&e.style[Tt]?t.delayedCall(.001,function(){Rt(e.style,Tt)}):!St&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),p},Ft=function(e){var t,n,r=this.data,i=-r.rotation*D,s=i+r.skewX*D,o=1e5,u=(0|Math.cos(i)*r.scaleX*o)/o,a=(0|Math.sin(i)*r.scaleX*o)/o,f=(0|Math.sin(s)*-r.scaleY*o)/o,l=(0|Math.cos(s)*r.scaleY*o)/o,c=this.t.style,h=this.t.currentStyle;if(h){n=a,a=-f,f=-n,t=h.filter,c.filter="";var p,d,m=this.t.offsetWidth,g=this.t.offsetHeight,y="absolute"!==h.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+u+", M12="+a+", M21="+f+", M22="+l,S=r.x+m*r.xPercent/100,x=r.y+g*r.yPercent/100;if(null!=r.ox&&(p=(r.oxp?.01*m*r.ox:r.ox)-m/2,d=(r.oyp?.01*g*r.oy:r.oy)-g/2,S+=p-(p*u+d*a),x+=d-(p*f+d*l)),y?(p=m/2,d=g/2,b+=", Dx="+(p-(p*u+d*a)+S)+", Dy="+(d-(p*f+d*l)+x)+")"):b+=", sizingMethod='auto expand')",c.filter=-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?t.replace(M,b):b+" "+t,(0===e||1===e)&&1===u&&0===a&&0===f&&1===l&&(y&&-1===b.indexOf("Dx=0, Dy=0")||E.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&c.removeAttribute("filter")),!y){var T,N,C,k=8>v?1:-1;for(p=r.ieOffsetX||0,d=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((0>u?-u:u)*m+(0>a?-a:a)*g))/2+S),r.ieOffsetY=Math.round((g-((0>l?-l:l)*g+(0>f?-f:f)*m))/2+x),yt=0;4>yt;yt++)N=tt[yt],T=h[N],n=-1!==T.indexOf("px")?parseFloat(T):Q(this.t,N,parseFloat(T),T.replace(w,""))||0,C=n!==r[N]?2>yt?-r.ieOffsetX:-r.ieOffsetY:2>yt?p-r.ieOffsetX:d-r.ieOffsetY,c[N]=(r[N]=Math.round(n-C*(0===yt||2===yt?1:k)))+"px"}}},It=q.set3DTransformRatio=q.setTransformRatio=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,d,v,m,g,y,b,w,E,S,x,T,N=this.data,C=this.t.style,k=N.rotation,L=N.rotationX,A=N.rotationY,O=N.scaleX,M=N.scaleY,_=N.scaleZ,P=N.x,H=N.y,B=N.z,j=N.svg,F=N.perspective,I=N.force3D;if(!((1!==e&&0!==e||"auto"!==I||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&I||B||F||A||L)||!!St&&!!j||!kt)return k||N.skewX||j?(k*=D,x=N.skewX*D,T=1e5,t=Math.cos(k)*O,i=Math.sin(k)*O,n=Math.sin(k-x)*-M,s=Math.cos(k-x)*M,x&&"simple"===N.skewType&&(y=Math.tan(x),y=Math.sqrt(1+y*y),n*=y,s*=y,N.skewY&&(t*=y,i*=y)),j&&(P+=N.xOrigin-(N.xOrigin*t+N.yOrigin*n)+N.xOffset,H+=N.yOrigin-(N.xOrigin*i+N.yOrigin*s)+N.yOffset,St&&(N.xPercent||N.yPercent)&&(v=this.t.getBBox(),P+=.01*N.xPercent*v.width,H+=.01*N.yPercent*v.height),v=1e-6,v>P&&P>-v&&(P=0),v>H&&H>-v&&(H=0)),w=(0|t*T)/T+","+(0|i*T)/T+","+(0|n*T)/T+","+(0|s*T)/T+","+P+","+H+")",j&&St?this.t.setAttribute("transform","matrix("+w):C[Tt]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) matrix(":"matrix(")+w):C[Tt]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) matrix(":"matrix(")+O+",0,0,"+M+","+P+","+H+")",void 0;if(p&&(v=1e-4,v>O&&O>-v&&(O=_=2e-5),v>M&&M>-v&&(M=_=2e-5),!F||N.z||N.rotationX||N.rotationY||(F=0)),k||N.skewX)k*=D,m=t=Math.cos(k),g=i=Math.sin(k),N.skewX&&(k-=N.skewX*D,m=Math.cos(k),g=Math.sin(k),"simple"===N.skewType&&(y=Math.tan(N.skewX*D),y=Math.sqrt(1+y*y),m*=y,g*=y,N.skewY&&(t*=y,i*=y))),n=-g,s=m;else{if(!(A||L||1!==_||F||j))return C[Tt]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) translate3d(":"translate3d(")+P+"px,"+H+"px,"+B+"px)"+(1!==O||1!==M?" scale("+O+","+M+")":""),void 0;t=s=1,n=i=0}f=1,r=o=u=a=l=c=0,h=F?-1/F:0,d=N.zOrigin,v=1e-6,E=",",S="0",k=A*D,k&&(m=Math.cos(k),g=Math.sin(k),u=-g,l=h*-g,r=t*g,o=i*g,f=m,h*=m,t*=m,i*=m),k=L*D,k&&(m=Math.cos(k),g=Math.sin(k),y=n*m+r*g,b=s*m+o*g,a=f*g,c=h*g,r=n*-g+r*m,o=s*-g+o*m,f*=m,h*=m,n=y,s=b),1!==_&&(r*=_,o*=_,f*=_,h*=_),1!==M&&(n*=M,s*=M,a*=M,c*=M),1!==O&&(t*=O,i*=O,u*=O,l*=O),(d||j)&&(d&&(P+=r*-d,H+=o*-d,B+=f*-d+d),j&&(P+=N.xOrigin-(N.xOrigin*t+N.yOrigin*n)+N.xOffset,H+=N.yOrigin-(N.xOrigin*i+N.yOrigin*s)+N.yOffset),v>P&&P>-v&&(P=S),v>H&&H>-v&&(H=S),v>B&&B>-v&&(B=0)),w=N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) matrix3d(":"matrix3d(",w+=(v>t&&t>-v?S:t)+E+(v>i&&i>-v?S:i)+E+(v>u&&u>-v?S:u),w+=E+(v>l&&l>-v?S:l)+E+(v>n&&n>-v?S:n)+E+(v>s&&s>-v?S:s),L||A?(w+=E+(v>a&&a>-v?S:a)+E+(v>c&&c>-v?S:c)+E+(v>r&&r>-v?S:r),w+=E+(v>o&&o>-v?S:o)+E+(v>f&&f>-v?S:f)+E+(v>h&&h>-v?S:h)+E):w+=",0,0,0,0,1,0,",w+=P+E+H+E+B+E+(F?1+ -B/F:1)+")",C[Tt]=w};f=Lt.prototype,f.x=f.y=f.z=f.skewX=f.skewY=f.rotation=f.rotationX=f.rotationY=f.zOrigin=f.xPercent=f.yPercent=f.xOffset=f.yOffset=0,f.scaleX=f.scaleY=f.scaleZ=1,wt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,n,r,s,u,a){if(r._lastParsedTransform===a)return s;r._lastParsedTransform=a;var f,l,c,h,p,d,v,m,g,y,b=e._gsTransform,w=e.style,E=1e-6,S=xt.length,x=a,T={},N="transformOrigin";if(a.display?(h=K(e,"display"),w.display="block",f=jt(e,i,!0,a.parseTransform),w.display=h):f=jt(e,i,!0,a.parseTransform),r._transform=f,"string"==typeof x.transform&&Tt)h=F.style,h[Tt]=x.transform,h.display="block",h.position="absolute",B.body.appendChild(F),l=jt(F,null,!1),B.body.removeChild(F),l.perspective||(l.perspective=f.perspective),null!=x.xPercent&&(l.xPercent=st(x.xPercent,f.xPercent)),null!=x.yPercent&&(l.yPercent=st(x.yPercent,f.yPercent));else if("object"==typeof x){if(l={scaleX:st(null!=x.scaleX?x.scaleX:x.scale,f.scaleX),scaleY:st(null!=x.scaleY?x.scaleY:x.scale,f.scaleY),scaleZ:st(x.scaleZ,f.scaleZ),x:st(x.x,f.x),y:st(x.y,f.y),z:st(x.z,f.z),xPercent:st(x.xPercent,f.xPercent),yPercent:st(x.yPercent,f.yPercent),perspective:st(x.transformPerspective,f.perspective)},m=x.directionalRotation,null!=m)if("object"==typeof m)for(h in m)x[h]=m[h];else x.rotation=m;"string"==typeof x.x&&-1!==x.x.indexOf("%")&&(l.x=0,l.xPercent=st(x.x,f.xPercent)),"string"==typeof x.y&&-1!==x.y.indexOf("%")&&(l.y=0,l.yPercent=st(x.y,f.yPercent)),l.rotation=ot("rotation"in x?x.rotation:"shortRotation"in x?x.shortRotation+"_short":"rotationZ"in x?x.rotationZ:f.rotation,f.rotation,"rotation",T),kt&&(l.rotationX=ot("rotationX"in x?x.rotationX:"shortRotationX"in x?x.shortRotationX+"_short":f.rotationX||0,f.rotationX,"rotationX",T),l.rotationY=ot("rotationY"in x?x.rotationY:"shortRotationY"in x?x.shortRotationY+"_short":f.rotationY||0,f.rotationY,"rotationY",T)),l.skewX=null==x.skewX?f.skewX:ot(x.skewX,f.skewX),l.skewY=null==x.skewY?f.skewY:ot(x.skewY,f.skewY),(c=l.skewY-f.skewY)&&(l.skewX+=c,l.rotation+=c)}for(kt&&null!=x.force3D&&(f.force3D=x.force3D,v=!0),f.skewType=x.skewType||f.skewType||o.defaultSkewType,d=f.force3D||f.z||f.rotationX||f.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,d||null==x.scale||(l.scaleZ=1);--S>-1;)n=xt[S],p=l[n]-f[n],(p>E||-E>p||null!=x[n]||null!=H[n])&&(v=!0,s=new vt(f,n,f[n],p,s),n in T&&(s.e=T[n]),s.xs0=0,s.plugin=u,r._overwriteProps.push(s.n));return p=x.transformOrigin,f.svg&&(p||x.svgOrigin)&&(g=f.xOffset,y=f.yOffset,Dt(e,rt(p),l,x.svgOrigin,x.smoothOrigin),s=mt(f,"xOrigin",(b?f:l).xOrigin,l.xOrigin,s,N),s=mt(f,"yOrigin",(b?f:l).yOrigin,l.yOrigin,s,N),(g!==f.xOffset||y!==f.yOffset)&&(s=mt(f,"xOffset",b?g:f.xOffset,f.xOffset,s,N),s=mt(f,"yOffset",b?y:f.yOffset,f.yOffset,s,N)),p=St?null:"0px 0px"),(p||kt&&d&&f.zOrigin)&&(Tt?(v=!0,n=Ct,p=(p||K(e,n,i,!1,"50% 50%"))+"",s=new vt(w,n,0,0,s,-1,N),s.b=w[n],s.plugin=u,kt?(h=f.zOrigin,p=p.split(" "),f.zOrigin=(p.length>2&&(0===h||"0px"!==p[2])?parseFloat(p[2]):h)||0,s.xs0=s.e=p[0]+" "+(p[1]||"50%")+" 0px",s=new vt(f,"zOrigin",0,0,s,-1,s.n),s.b=h,s.xs0=s.e=f.zOrigin):s.xs0=s.e=p):rt(p+"",f)),v&&(r._transformType=f.svg&&St||!d&&3!==this._transformType?2:3),s},prefix:!0}),wt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),wt("borderRadius",{defaultValue:"0px",parser:function(e,t,n,s,o){t=this.format(t);var u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=e.style;for(v=parseFloat(e.offsetWidth),m=parseFloat(e.offsetHeight),u=t.split(" "),a=0;x.length>a;a++)this.p.indexOf("border")&&(x[a]=$(x[a])),c=l=K(e,x[a],i,!1,"0px"),-1!==c.indexOf(" ")&&(l=c.split(" "),c=l[0],l=l[1]),h=f=u[a],p=parseFloat(c),y=c.substr((p+"").length),b="="===h.charAt(1),b?(d=parseInt(h.charAt(0)+"1",10),h=h.substr(2),d*=parseFloat(h),g=h.substr((d+"").length-(0>d?1:0))||""):(d=parseFloat(h),g=h.substr((d+"").length)),""===g&&(g=r[n]||y),g!==y&&(w=Q(e,"borderLeft",p,y),E=Q(e,"borderTop",p,y),"%"===g?(c=100*(w/v)+"%",l=100*(E/m)+"%"):"em"===g?(S=Q(e,"borderLeft",1,"em"),c=w/S+"em",l=E/S+"em"):(c=w+"px",l=E+"px"),b&&(h=parseFloat(c)+d+g,f=parseFloat(l)+d+g)),o=gt(T,x[a],c+" "+l,h+" "+f,!1,"0px",o);return o},prefix:!0,formatter:ht("0px 0px 0px 0px",!1,!0)}),wt("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,n,r,s,o){var u,a,f,l,c,h,p="background-position",d=i||J(e,null),m=this.format((d?v?d.getPropertyValue(p+"-x")+" "+d.getPropertyValue(p+"-y"):d.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==m.indexOf("%")!=(-1!==g.indexOf("%"))&&(h=K(e,"backgroundImage").replace(k,""),h&&"none"!==h)){for(u=m.split(" "),a=g.split(" "),I.setAttribute("src",h),f=2;--f>-1;)m=u[f],l=-1!==m.indexOf("%"),l!==(-1!==a[f].indexOf("%"))&&(c=0===f?e.offsetWidth-I.width:e.offsetHeight-I.height,u[f]=l?parseFloat(m)/100*c+"px":100*(parseFloat(m)/c)+"%");m=u.join(" ")}return this.parseComplex(e.style,m,g,s,o)},formatter:rt}),wt("backgroundSize",{defaultValue:"0 0",formatter:rt}),wt("perspective",{defaultValue:"0px",prefix:!0}),wt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),wt("transformStyle",{prefix:!0}),wt("backfaceVisibility",{prefix:!0}),wt("userSelect",{prefix:!0}),wt("margin",{parser:pt("marginTop,marginRight,marginBottom,marginLeft")}),wt("padding",{parser:pt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),wt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,n,r,s,o){var u,a,f;return 9>v?(a=e.currentStyle,f=8>v?" ":",",u="rect("+a.clipTop+f+a.clipRight+f+a.clipBottom+f+a.clipLeft+")",t=this.format(t).split(",").join(f)):(u=this.format(K(e,this.p,i,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,u,t,s,o)}}),wt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),wt("autoRound,strictUnits",{parser:function(e,t,n,r,i){return i}}),wt("border",{defaultValue:"0px solid #000",parser:function(e,t,n,r,s,o){return this.parseComplex(e.style,this.format(K(e,"borderTopWidth",i,!1,"0px")+" "+K(e,"borderTopStyle",i,!1,"solid")+" "+K(e,"borderTopColor",i,!1,"#000")),this.format(t),s,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ct)||["#000"])[0]}}),wt("borderWidth",{parser:pt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),wt("float,cssFloat,styleFloat",{parser:function(e,t,n,r,i){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new vt(s,o,0,0,i,-1,n,!1,0,s[o],t)}});var qt=function(e){var t,n=this.t,r=n.filter||K(this.data,"filter")||"",i=0|this.s+this.c*e;100===i&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(n.removeAttribute("filter"),t=!K(this.data,"filter")):(n.filter=r.replace(x,""),t=!0)),t||(this.xn1&&(n.filter=r=r||"alpha(opacity="+i+")"),-1===r.indexOf("pacity")?0===i&&this.xn1||(n.filter=r+" alpha(opacity="+i+")"):n.filter=r.replace(E,"opacity="+i))};wt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,n,r,s,o){var u=parseFloat(K(e,"opacity",i,!1,"1")),a=e.style,f="autoAlpha"===n;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+u),f&&1===u&&"hidden"===K(e,"visibility",i)&&0!==t&&(u=0),U?s=new vt(a,"opacity",u,t-u,s):(s=new vt(a,"opacity",100*u,100*(t-u),s),s.xn1=f?1:0,a.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=e,s.plugin=o,s.setRatio=qt),f&&(s=new vt(a,"visibility",0,0,s,-1,null,!1,0,0!==u?"inherit":"hidden",0===t?"hidden":"inherit"),s.xs0="inherit",r._overwriteProps.push(s.n),r._overwriteProps.push(n)),s}});var Rt=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(N,"-$1").toLowerCase())):e.removeAttribute(t))},Ut=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,n=this.t.style;t;)t.v?n[t.p]=t.v:Rt(n,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};wt("className",{parser:function(e,t,r,s,o,u,a){var f,l,c,h,p,d=e.getAttribute("class")||"",v=e.style.cssText;if(o=s._classNamePT=new vt(e,r,0,0,o,2),o.setRatio=Ut,o.pr=-11,n=!0,o.b=d,l=Y(e,i),c=e._gsClassPT){for(h={},p=c.data;p;)h[p.p]=1,p=p._next;c.setRatio(1)}return e._gsClassPT=o,o.e="="!==t.charAt(1)?t:d.replace(RegExp("\\s*\\b"+t.substr(2)+"\\b"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",o.e),f=Z(e,l,Y(e),a,h),e.setAttribute("class",d),o.data=f.firstMPT,e.style.cssText=v,o=o.xfirst=s.parse(e,f.difs,o,u)}});var zt=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,n,r,i,s,o=this.t.style,u=a.transform.parse;if("all"===this.e)o.cssText="",i=!0;else for(t=this.e.split(" ").join("").split(","),r=t.length;--r>-1;)n=t[r],a[n]&&(a[n].parse===u?i=!0:n="transformOrigin"===n?Ct:a[n].p),Rt(o,n);i&&(Rt(o,Tt),s=this.t._gsTransform,s&&(s.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(wt("clearProps",{parser:function(e,t,r,i,s){return s=new vt(e,r,0,0,s,2),s.setRatio=zt,s.e=t,s.pr=-10,s.data=i._tween,n=!0,s}}),f="bezier,throwProps,physicsProps,physics2D".split(","),yt=f.length;yt--;)Et(f[yt]);f=o.prototype,f._firstPT=f._lastParsedTransform=f._transform=null,f._onInitTween=function(e,t,u){if(!e.nodeType)return!1;this._target=e,this._tween=u,this._vars=t,l=t.autoRound,n=!1,r=t.suffixMap||o.suffixMap,i=J(e,""),s=this._overwriteProps;var f,p,v,m,g,y,b,w,E,x=e.style;if(c&&""===x.zIndex&&(f=K(e,"zIndex",i),("auto"===f||""===f)&&this._addLazySet(x,"zIndex",0)),"string"==typeof t&&(m=x.cssText,f=Y(e,i),x.cssText=m+";"+t,f=Z(e,f,Y(e)).difs,!U&&S.test(t)&&(f.opacity=parseFloat(RegExp.$1)),t=f,x.cssText=m),this._firstPT=p=t.className?a.className.parse(e,t.className,"className",this,null,null,t):this.parse(e,t,null),this._transformType){for(E=3===this._transformType,Tt?h&&(c=!0,""===x.zIndex&&(b=K(e,"zIndex",i),("auto"===b||""===b)&&this._addLazySet(x,"zIndex",0)),d&&this._addLazySet(x,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(E?"visible":"hidden"))):x.zoom=1,v=p;v&&v._next;)v=v._next;w=new vt(e,"transform",0,0,null,2),this._linkCSSP(w,null,v),w.setRatio=Tt?It:Ft,w.data=this._transform||jt(e,i,!0),w.tween=u,w.pr=-1,s.pop()}if(n){for(;p;){for(y=p._next,v=m;v&&v.pr>p.pr;)v=v._next;(p._prev=v?v._prev:g)?p._prev._next=p:m=p,(p._next=v)?v._prev=p:g=p,p=y}this._firstPT=m}return!0},f.parse=function(e,t,n,s){var o,u,f,c,h,p,d,v,m,g,y=e.style;for(o in t)p=t[o],u=a[o],u?n=u.parse(e,p,o,this,n,s,t):(h=K(e,o,i)+"",m="string"==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||m&&T.test(p)?(m||(p=ft(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),n=gt(y,o,h,p,!0,"transparent",n,0,s)):!m||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(f=parseFloat(h),d=f||0===f?h.substr((f+"").length):"",(""===h||"auto"===h)&&("width"===o||"height"===o?(f=nt(e,o,i),d="px"):"left"===o||"top"===o?(f=G(e,o,i),d="px"):(f="opacity"!==o?0:1,d="")),g=m&&"="===p.charAt(1),g?(c=parseInt(p.charAt(0)+"1",10),p=p.substr(2),c*=parseFloat(p),v=p.replace(w,"")):(c=parseFloat(p),v=m?p.replace(w,""):""),""===v&&(v=o in r?r[o]:d),p=c||0===c?(g?c+f:c)+v:t[o],d!==v&&""!==v&&(c||0===c)&&f&&(f=Q(e,o,f,d),"%"===v?(f/=Q(e,o,100,"%")/100,t.strictUnits!==!0&&(h=f+"%")):"em"===v||"rem"===v?f/=Q(e,o,1,v):"px"!==v&&(c=Q(e,o,c,v),v="px"),g&&(c||0===c)&&(p=c+f+v)),g&&(c+=f),!f&&0!==f||!c&&0!==c?void 0!==y[o]&&(p||"NaN"!=p+""&&null!=p)?(n=new vt(y,o,c||f||0,0,n,-1,o,!1,0,h,p),n.xs0="none"!==p||"display"!==o&&-1===o.indexOf("Style")?p:h):W("invalid "+o+" tween value: "+t[o]):(n=new vt(y,o,f,c-f,n,0,o,l!==!1&&("px"===v||"zIndex"===o),0,h,p),n.xs0=v)):n=gt(y,o,h,p,!0,null,n,0,s)),s&&n&&!n.plugin&&(n.plugin=s);return n},f.setRatio=function(e){var t,n,r,i=this._firstPT,s=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-0.000001)for(;i;){if(t=i.c*e+i.s,i.r?t=Math.round(t):s>t&&t>-s&&(t=0),i.type)if(1===i.type)if(r=i.l,2===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2;else if(3===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3;else if(4===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4;else if(5===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4+i.xn4+i.xs5;else{for(n=i.xs0+t+i.xs1,r=1;i.l>r;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.t[i.p]=n}else-1===i.type?i.t[i.p]=i.xs0:i.setRatio&&i.setRatio(e);else i.t[i.p]=t+i.xs0;i=i._next}else for(;i;)2!==i.type?i.t[i.p]=i.b:i.setRatio(e),i=i._next;else for(;i;){if(2!==i.type)if(i.r&&-1!==i.type)if(t=Math.round(i.s+i.c),i.type){if(1===i.type){for(r=i.l,n=i.xs0+t+i.xs1,r=1;i.l>r;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.t[i.p]=n}}else i.t[i.p]=t+i.xs0;else i.t[i.p]=i.e;else i.setRatio(e);i=i._next}},f._enableTransforms=function(e){this._transform=this._transform||jt(this._target,i,!0),this._transformType=this._transform.svg&&St||!e&&3!==this._transformType?2:3};var Wt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};f._addLazySet=function(e,t,n){var r=this._firstPT=new vt(e,t,0,0,this._firstPT,2);r.e=n,r.setRatio=Wt,r.data=this},f._linkCSSP=function(e,t,n,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,r=!0),n?n._next=e:r||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=n),e},f._kill=function(t){var n,r,i,s=t;if(t.autoAlpha||t.alpha){s={};for(r in t)s[r]=t[r];s.opacity=1,s.autoAlpha&&(s.visibility=1)}return t.className&&(n=this._classNamePT)&&(i=n.xfirst,i&&i._prev?this._linkCSSP(i._prev,n._next,i._prev._prev):i===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,i._prev),this._classNamePT=null),e.prototype._kill.call(this,s)};var Xt=function(e,t,n){var r,i,s,o;if(e.slice)for(i=e.length;--i>-1;)Xt(e[i],t,n);else for(r=e.childNodes,i=r.length;--i>-1;)s=r[i],o=s.type,s.style&&(t.push(Y(s)),n&&n.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||Xt(s,t,n)};return o.cascadeTo=function(e,n,r){var i,s,o,u,a=t.to(e,n,r),f=[a],l=[],c=[],h=[],p=t._internals.reservedProps;for(e=a._targets||a.target,Xt(e,l,h),a.render(n,!0,!0),Xt(e,c),a.render(0,!0,!0),a._enabled(!0),i=h.length;--i>-1;)if(s=Z(h[i],l[i],c[i]),s.firstMPT){s=s.difs;for(o in r)p[o]&&(s[o]=r[o]);u={};for(o in s)u[o]=l[i][o];f.push(t.fromTo(h[i],n,u,s))}return f},e.activate([o]),o},!0),function(){var e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.5",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),t=function(e){for(;e;)e.f||e.blob||(e.r=1),e=e._next},n=e.prototype;n._onInitAllProps=function(){for(var e,n,r,i=this._tween,s=i.vars.roundProps.join?i.vars.roundProps:i.vars.roundProps.split(","),o=s.length,u={},a=i._propLookup.roundProps;--o>-1;)u[s[o]]=1;for(o=s.length;--o>-1;)for(e=s[o],n=i._firstPT;n;)r=n._next,n.pg?n.t._roundProps(u,!0):n.n===e&&(2===n.f&&n.t?t(n.t._firstPT):(this._add(n.t,e,n.s,n.c),r&&(r._prev=n._prev),n._prev?n._prev._next=r:i._firstPT===n&&(i._firstPT=r),n._next=n._prev=null,i._propLookup[e]=a)),n=r;return!1},n._add=function(e,t,n,r){this._addTween(e,t,n,n+r,t,!0),this._overwriteProps.push(t)}}(),function(){_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.5.0",init:function(e,t){var n;if("function"!=typeof e.setAttribute)return!1;for(n in t)this._addTween(e,"setAttribute",e.getAttribute(n)+"",t[n]+"",n,!1,n),this._overwriteProps.push(n);return!0}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t){"object"!=typeof t&&(t={rotation:t}),this.finals={};var n,r,i,s,o,u,a=t.useRadians===!0?2*Math.PI:360,f=1e-6;for(n in t)"useRadians"!==n&&(u=(t[n]+"").split("_"),r=u[0],i=parseFloat("function"!=typeof e[n]?e[n]:e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]()),s=this.finals[n]="string"==typeof r&&"="===r.charAt(1)?i+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,o=s-i,u.length&&(r=u.join("_"),-1!==r.indexOf("short")&&(o%=a,o!==o%(a/2)&&(o=0>o?o+a:o-a)),-1!==r.indexOf("_cw")&&0>o?o=(o+9999999999*a)%a-(0|o/a)*a:-1!==r.indexOf("ccw")&&o>0&&(o=(o-9999999999*a)%a-(0|o/a)*a)),(o>f||-f>o)&&(this._addTween(e,n,i,i+o,n),this._overwriteProps.push(n)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,n,r,i=_gsScope.GreenSockGlobals||_gsScope,s=i.com.greensock,o=2*Math.PI,u=Math.PI/2,a=s._class,f=function(t,n){var r=a("easing."+t,function(){},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,r},l=e.register||function(){},c=function(e,t,n,r){var i=a("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new r},!0);return l(i,e),i},h=function(e,t,n){this.t=e,this.v=t,n&&(this.next=n,n.prev=this,this.c=n.v-t,this.gap=n.t-e)},p=function(t,n){var r=a("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,i.config=function(e){return new r(e)},r},d=c("Back",p("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),p("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),p("BackInOut",function(e){return 1>(e*=2)?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),v=a("easing.SlowMo",function(e,t,n){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=n===!0},!0),m=v.prototype=new e;return m.constructor=v,m.getRatio=function(e){var t=e+(.5-e)*this._p;return this._p1>e?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},v.ease=new v(.7,.7),m.config=v.config=function(e,t,n){return new v(e,t,n)},t=a("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),m=t.prototype=new e,m.constructor=t,m.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},m.config=t.config=function(e){return new t(e)},n=a("easing.RoughEase",function(t){t=t||{};for(var n,r,i,s,o,u,a=t.taper||"none",f=[],l=0,c=0|(t.points||20),p=c,d=t.randomize!==!1,v=t.clamp===!0,m=t.template instanceof e?t.template:null,g="number"==typeof t.strength?.4*t.strength:.4;--p>-1;)n=d?Math.random():1/c*p,r=m?m.getRatio(n):n,"none"===a?i=g:"out"===a?(s=1-n,i=s*s*g):"in"===a?i=n*n*g:.5>n?(s=2*n,i=.5*s*s*g):(s=2*(1-n),i=.5*s*s*g),d?r+=Math.random()*i-.5*i:p%2?r+=.5*i:r-=.5*i,v&&(r>1?r=1:0>r&&(r=0)),f[l++]={x:n,y:r};for(f.sort(function(e,t){return e.x-t.x}),u=new h(1,1,null),p=c;--p>-1;)o=f[p],u=new h(o.x,o.y,u);this._prev=new h(0,0,0!==u.t?u:u.next)},!0),m=n.prototype=new e,m.constructor=n,m.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&t.t>=e;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},m.config=function(e){return new n(e)},n.ease=new n,c("Bounce",f("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),f("BounceIn",function(e){return 1/2.75>(e=1-e)?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),f("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),c("Circ",f("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),f("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),f("CircInOut",function(e){return 1>(e*=2)?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),r=function(t,n,r){var i=a("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||r)/(1>e?e:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),s=i.prototype=new e;return s.constructor=i,s.getRatio=n,s.config=function(e,t){return new i(e,t)},i},c("Elastic",r("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),r("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),r("ElasticInOut",function(e){return 1>(e*=2)?-0.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)+1},.45)),c("Expo",f("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),f("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),f("ExpoInOut",function(e){return 1>(e*=2)?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),c("Sine",f("SineOut",function(e){return Math.sin(e*u)}),f("SineIn",function(e){return-Math.cos(e*u)+1}),f("SineInOut",function(e){return-0.5*(Math.cos(Math.PI*e)-1)})),a("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),l(i.SlowMo,"SlowMo","ease,"),l(n,"RoughEase","ease,"),l(t,"SteppedEase","ease,"),d},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var n=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!n.TweenLite){var r,i,s,o,u,a=function(e){var t,r=e.split("."),i=n;for(t=0;r.length>t;t++)i[r[t]]=i=i[r[t]]||{};return i},f=a("com.greensock"),l=1e-10,c=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},h=function(){},p=function(){var e=Object.prototype.toString,t=e.call([]);return function(n){return null!=n&&(n instanceof Array||"object"==typeof n&&!!n.push&&e.call(n)===t)}}(),d={},v=function(r,i,s,o){this.sc=d[r]?d[r].sc:[],d[r]=this,this.gsClass=null,this.func=s;var u=[];this.check=function(f){for(var l,c,h,p,m,g=i.length,y=g;--g>-1;)(l=d[i[g]]||new v(i[g],[])).gsClass?(u[g]=l.gsClass,y--):f&&l.sc.push(this);if(0===y&&s)for(c=("com.greensock."+r).split("."),h=c.pop(),p=a(c.join("."))[h]=this.gsClass=s.apply(s,u),o&&(n[h]=p,m="undefined"!=typeof module&&module.exports,!m&&"function"==typeof define&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return p}):r===t&&m&&(module.exports=p)),g=0;this.sc.length>g;g++)this.sc[g].check()},this.check(!0)},m=e._gsDefine=function(e,t,n,r){return new v(e,t,n,r)},g=f._class=function(e,t,n){return t=t||function(){},m(e,[],function(){return t},n),t};m.globals=n;var y=[0,0,1,1],b=[],w=g("easing.Ease",function(e,t,n,r){this._func=e,this._type=n||0,this._power=r||0,this._params=t?y.concat(t):y},!0),E=w.map={},S=w.register=function(e,t,n,r){for(var i,s,o,u,a=t.split(","),l=a.length,c=(n||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(s=a[l],i=r?g("easing."+s,null,!0):f.easing[s]||{},o=c.length;--o>-1;)u=c[o],E[s+"."+u]=E[u+s]=i[u]=e.getRatio?e:e[u]||new e};for(s=w.prototype,s._calcEnd=!1,s.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,r=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===n?r*=r:2===n?r*=r*r:3===n?r*=r*r*r:4===n&&(r*=r*r*r*r),1===t?1-r:2===t?r:.5>e?r/2:1-r/2},r=["Linear","Quad","Cubic","Quart","Quint,Strong"],i=r.length;--i>-1;)s=r[i]+",Power"+i,S(new w(null,null,1,i),s,"easeOut",!0),S(new w(null,null,2,i),s,"easeIn"+(0===i?",easeNone":"")),S(new w(null,null,3,i),s,"easeInOut");E.linear=f.easing.Linear.easeIn,E.swing=f.easing.Quad.easeInOut;var x=g("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});s=x.prototype,s.addEventListener=function(e,t,n,r,i){i=i||0;var s,a,f=this._listeners[e],l=0;for(null==f&&(this._listeners[e]=f=[]),a=f.length;--a>-1;)s=f[a],s.c===t&&s.s===n?f.splice(a,1):0===l&&i>s.pr&&(l=a+1);f.splice(l,0,{c:t,s:n,up:r,pr:i}),this!==o||u||o.wake()},s.removeEventListener=function(e,t){var n,r=this._listeners[e];if(r)for(n=r.length;--n>-1;)if(r[n].c===t)return r.splice(n,1),void 0},s.dispatchEvent=function(e){var t,n,r,i=this._listeners[e];if(i)for(t=i.length,n=this._eventTarget;--t>-1;)r=i[t],r&&(r.up?r.c.call(r.s||n,{type:e,target:n}):r.c.call(r.s||n))};var T=e.requestAnimationFrame,N=e.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},k=C();for(r=["ms","moz","webkit","o"],i=r.length;--i>-1&&!T;)T=e[r[i]+"RequestAnimationFrame"],N=e[r[i]+"CancelAnimationFrame"]||e[r[i]+"CancelRequestAnimationFrame"];g("Ticker",function(e,t){var n,r,i,s,a,f=this,c=C(),p=t!==!1&&T,d=500,v=33,m="tick",g=function(e){var t,o,u=C()-k;u>d&&(c+=u-v),k+=u,f.time=(k-c)/1e3,t=f.time-a,(!n||t>0||e===!0)&&(f.frame++,a+=t+(t>=s?.004:s-t),o=!0),e!==!0&&(i=r(g)),o&&f.dispatchEvent(m)};x.call(f),f.time=f.frame=0,f.tick=function(){g(!0)},f.lagSmoothing=function(e,t){d=e||1/l,v=Math.min(t,d,0)},f.sleep=function(){null!=i&&(p&&N?N(i):clearTimeout(i),r=h,i=null,f===o&&(u=!1))},f.wake=function(){null!==i?f.sleep():f.frame>10&&(k=C()-d+5),r=0===n?h:p&&T?T:function(e){return setTimeout(e,0|1e3*(a-f.time)+1)},f===o&&(u=!0),g(2)},f.fps=function(e){return arguments.length?(n=e,s=1/(n||60),a=this.time+s,f.wake(),void 0):n},f.useRAF=function(e){return arguments.length?(f.sleep(),p=e,f.fps(n),void 0):p},f.fps(e),setTimeout(function(){p&&5>f.frame&&f.useRAF(!1)},1500)}),s=f.Ticker.prototype=new f.events.EventDispatcher,s.constructor=f.Ticker;var L=g("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,$){u||o.wake();var n=this.vars.useFrames?V:$;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});o=L.ticker=new f.Ticker,s=L.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var A=function(){u&&C()-k>2e3&&o.wake(),setTimeout(A,2e3)};A(),s.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},s.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},s.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},s.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},s.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},s.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},s.isActive=function(){var e,t=this._timeline,n=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=n&&n+this.totalDuration()/this._timeScale>e},s._enabled=function(e,t){return u||o.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(e,t){return this._kill(e,t),this},s._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},s._swapSelfInParams=function(e){for(var t=e.length,n=e.concat();--t>-1;)"{self}"===e[t]&&(n[t]=this);return n},s._callback=function(e){var t=this.vars;t[e].apply(t[e+"Scope"]||t.callbackScope||this,t[e+"Params"]||b)},s.eventCallback=function(e,t,n,r){if("on"===(e||"").substr(0,2)){var i=this.vars;if(1===arguments.length)return i[e];null==t?delete i[e]:(i[e]=t,i[e+"Params"]=p(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,i[e+"Scope"]=r),"onUpdate"===e&&(this._onUpdate=t)}return this},s.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},s.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},s.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},s.totalTime=function(e,t,n){if(u||o.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!n&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,i=this._timeline;if(e>r&&!n&&(e=r),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?r-e:e)/this._timeScale,i._dirty||this._uncache(!1),i._timeline)for(;i._timeline;)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(P.length&&K(),this.render(e,t,!1),P.length&&K())}return this},s.progress=s.totalProgress=function(e,t){var n=this.duration();return arguments.length?this.totalTime(n*e,t):n?this._time/n:this.ratio},s.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},s.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||l,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,n=t||0===t?t:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},s.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(e){if(!arguments.length)return this._paused;var t,n,r=this._timeline;return e!=this._paused&&r&&(u||e||o.wake(),t=r.rawTime(),n=t-this._pauseTime,!e&&r.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&(t=r.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var O=g("core.SimpleTimeline",function(e){L.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});s=O.prototype=new L,s.constructor=O,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(e,t){var n,r;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),n=this._last,this._sortChildren)for(r=e._startTime;n&&n._startTime>r;)n=n._prev;return n?(e._next=n._next,n._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=n,this._recent=e,this._timeline&&this._uncache(!0),this},s._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(e,t,n){var r,i=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;i;)r=i._next,(i._active||e>=i._startTime&&!i._paused)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=r},s.rawTime=function(){return u||o.wake(),this._totalTime};var M=g("TweenLite",function(t,n,r){if(L.call(this,n,r),this.render=M.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:M.selector(t)||t;var i,s,o,u=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),a=this.vars.overwrite;if(this._overwrite=a=null==a?X[M.defaultOverwrite]:"number"==typeof a?a>>0:X[a],(u||t instanceof Array||t.push&&p(t))&&"number"!=typeof t[0])for(this._targets=o=c(t),this._propLookup=[],this._siblings=[],i=0;o.length>i;i++)s=o[i],s?"string"!=typeof s?s.length&&s!==e&&s[0]&&(s[0]===e||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(i--,1),this._targets=o=o.concat(c(s))):(this._siblings[i]=Q(s,this,!1),1===a&&this._siblings[i].length>1&&Y(s,this,null,1,this._siblings[i])):(s=o[i--]=M.selector(s),"string"==typeof s&&o.splice(i+1,1)):o.splice(i--,1);else this._propLookup={},this._siblings=Q(t,this,!1),1===a&&this._siblings.length>1&&Y(t,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-l,this.render(-this._delay))},!0),_=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},D=function(e,t){var n,r={};for(n in e)W[n]||n in t&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!R[n]||R[n]&&R[n]._autoCSS)||(r[n]=e[n],delete e[n]);e.css=r};s=M.prototype=new L,s.constructor=M,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,M.version="1.18.0",M.defaultEase=s._ease=new w(null,null,1,1),M.defaultOverwrite="auto",M.ticker=o,M.autoSleep=120,M.lagSmoothing=function(e,t){o.lagSmoothing(e,t)},M.selector=e.$||e.jQuery||function(t){var n=e.$||e.jQuery;return n?(M.selector=n,n(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var P=[],H={},B=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,j=function(e){for(var t,n=this._firstPT,r=1e-6;n;)t=n.blob?e?this.join(""):this.start:n.c*e+n.s,n.r?t=Math.round(t):r>t&&t>-r&&(t=0),n.f?n.fp?n.t[n.p](n.fp,t):n.t[n.p](t):n.t[n.p]=t,n=n._next},F=function(e,t,n,r){var i,s,o,u,a,f,l,c=[e,t],h=0,p="",d=0;for(c.start=e,n&&(n(c),e=c[0],t=c[1]),c.length=0,i=e.match(B)||[],s=t.match(B)||[],r&&(r._next=null,r.blob=1,c._firstPT=r),a=s.length,u=0;a>u;u++)l=s[u],f=t.substr(h,t.indexOf(l,h)-h),p+=f||!u?f:",",h+=f.length,d?d=(d+1)%5:"rgba("===f.substr(-5)&&(d=1),l===i[u]||u>=i.length?p+=l:(p&&(c.push(p),p=""),o=parseFloat(i[u]),c.push(o),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:o,c:("="===l.charAt(1)?parseInt(l.charAt(0)+"1",10)*parseFloat(l.substr(2)):parseFloat(l)-o)||0,f:0,r:d&&4>d}),h+=l.length;return p+=t.substr(h),p&&c.push(p),c.setRatio=j,c},I=function(e,t,n,r,i,s,o,u){var a,f,l="get"===n?e[t]:n,c=typeof e[t],h="string"==typeof r&&"="===r.charAt(1),p={t:e,p:t,s:l,f:"function"===c,pg:0,n:i||t,r:s,pr:0,c:h?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-l||0};return"number"!==c&&("function"===c&&"get"===n&&(f=t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),p.s=l=o?e[f](o):e[f]()),"string"==typeof l&&(o||isNaN(l))?(p.fp=o,a=F(l,r,u||M.defaultStringFilter,p),p={t:a,p:"setRatio",s:0,c:1,f:2,pg:0,n:i||t,pr:0}):h||(p.c=parseFloat(r)-parseFloat(l)||0)),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p):void 0},q=M._internals={isArray:p,isSelector:_,lazyTweens:P,blobDif:F},R=M._plugins={},U=q.tweenLookup={},z=0,W=q.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},V=L._rootFramesTimeline=new O,$=L._rootTimeline=new O,J=30,K=q.lazyRender=function(){var e,t=P.length;for(H={};--t>-1;)e=P[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);P.length=0};$._startTime=o.time,V._startTime=o.frame,$._active=V._active=!0,setTimeout(K,1),L._updateRoot=M.render=function(){var e,t,n;if(P.length&&K(),$.render((o.time-$._startTime)*$._timeScale,!1,!1),V.render((o.frame-V._startTime)*V._timeScale,!1,!1),P.length&&K(),o.frame>=J){J=o.frame+(parseInt(M.autoSleep,10)||120);for(n in U){for(t=U[n].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete U[n]}if(n=$._first,(!n||n._paused)&&M.autoSleep&&!V._first&&1===o._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||o.sleep()}}},o.addEventListener("tick",L._updateRoot);var Q=function(e,t,n){var r,i,s=e._gsTweenID;if(U[s||(e._gsTweenID=s="t"+z++)]||(U[s]={target:e,tweens:[]}),t&&(r=U[s].tweens,r[i=r.length]=t,n))for(;--i>-1;)r[i]===t&&r.splice(i,1);return U[s].tweens},G=function(e,t,n,r){var i,s,o=e.vars.onOverwrite;return o&&(i=o(e,t,n,r)),o=M.onOverwrite,o&&(s=o(e,t,n,r)),i!==!1&&s!==!1},Y=function(e,t,n,r,i){var s,o,u,a;if(1===r||r>=4){for(a=i.length,s=0;a>s;s++)if((u=i[s])!==t)u._gc||u._kill(null,e,t)&&(o=!0);else if(5===r)break;return o}var f,c=t._startTime+l,h=[],p=0,d=0===t._duration;for(s=i.length;--s>-1;)(u=i[s])===t||u._gc||u._paused||(u._timeline!==t._timeline?(f=f||Z(t,0,d),0===Z(u,f,d)&&(h[p++]=u)):c>=u._startTime&&u._startTime+u.totalDuration()/u._timeScale>c&&((d||!u._initted)&&2e-10>=c-u._startTime||(h[p++]=u)));for(s=p;--s>-1;)if(u=h[s],2===r&&u._kill(n,e,t)&&(o=!0),2!==r||!u._firstPT&&u._initted){if(2!==r&&!G(u,t))continue;u._enabled(!1,!1)&&(o=!0)}return o},Z=function(e,t,n){for(var r=e._timeline,i=r._timeScale,s=e._startTime;r._timeline;){if(s+=r._startTime,i*=r._timeScale,r._paused)return-100;r=r._timeline}return s/=i,s>t?s-t:n&&s===t||!e._initted&&2*l>s-t?l:(s+=e.totalDuration()/e._timeScale/i)>t+l?0:s-t-l};s._init=function(){var e,t,n,r,i,s=this.vars,o=this._overwrittenProps,u=this._duration,a=!!s.immediateRender,f=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),i={};for(r in s.startAt)i[r]=s.startAt[r];if(i.overwrite=!1,i.immediateRender=!0,i.lazy=a&&s.lazy!==!1,i.startAt=i.delay=null,this._startAt=M.to(this.target,0,i),a)if(this._time>0)this._startAt=null;else if(0!==u)return}else if(s.runBackwards&&0!==u)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(a=!1),n={};for(r in s)W[r]&&"autoCSS"!==r||(n[r]=s[r]);if(n.overwrite=0,n.data="isFromStart",n.lazy=a&&s.lazy!==!1,n.immediateRender=a,this._startAt=M.to(this.target,0,n),a){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=f=f?f instanceof w?f:"function"==typeof f?new w(f,s.easeParams):E[f]||M.defaultEase:M.defaultEase,s.easeParams instanceof Array&&f.config&&(this._ease=f.config.apply(f,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o);if(t&&M._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(t,n,r,i){var s,o,u,a,f,l;if(null==t)return!1;H[t._gsTweenID]&&K(),this.vars.css||t.style&&t!==e&&t.nodeType&&R.css&&this.vars.autoCSS!==!1&&D(this.vars,t);for(s in this.vars)if(l=this.vars[s],W[s])l&&(l instanceof Array||l.push&&p(l))&&-1!==l.join("").indexOf("{self}")&&(this.vars[s]=l=this._swapSelfInParams(l,this));else if(R[s]&&(a=new R[s])._onInitTween(t,this.vars[s],this)){for(this._firstPT=f={_next:this._firstPT,t:a,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:a._priority},o=a._overwriteProps.length;--o>-1;)n[a._overwriteProps[o]]=this._firstPT;(a._priority||a._onInitAllProps)&&(u=!0),(a._onDisable||a._onEnable)&&(this._notifyPluginsOfEnabled=!0),f._next&&(f._next._prev=f)}else n[s]=I.call(this,t,s,"get",l,s,0,null,this.vars.stringFilter);return i&&this._kill(i,t)?this._initProps(t,n,r,i):this._overwrite>1&&this._firstPT&&r.length>1&&Y(t,this,n,this._overwrite,r)?(this._kill(n,t),this._initProps(t,n,r,i)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(H[t._gsTweenID]=!0),u)},s.render=function(e,t,n){var r,i,s,o,u=this._time,a=this._duration,f=this._rawPrevTime;if(e>=a)this._totalTime=this._time=a,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,i="onComplete",n=n||this._timeline.autoRemoveChildren),0===a&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>f||f===l&&"isPause"!==this.data)&&f!==e&&(n=!0,f>l&&(i="onReverseComplete")),this._rawPrevTime=o=!t||e||f===e?e:l);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==u||0===a&&f>0)&&(i="onReverseComplete",r=this._reversed),0>e&&(this._active=!1,0===a&&(this._initted||!this.vars.lazy||n)&&(f>=0&&(f!==l||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=o=!t||e||f===e?e:l)),this._initted||(n=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/a,h=this._easeType,p=this._easePower;(1===h||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),this.ratio=1===h?1-c:2===h?c:.5>e/a?c/2:1-c/2}else this.ratio=this._ease.getRatio(e/a);if(this._time!==u||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=u,this._rawPrevTime=f,P.push(this),this._lazy=[e,t],void 0;this._time&&!r?this.ratio=this._ease.getRatio(this._time/a):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==u&&e>=0&&(this._active=!0),0===u&&(this._startAt&&(e>=0?this._startAt.render(e,t,n):i||(i="_dummyGS")),this.vars.onStart&&(0!==this._time||0===a)&&(t||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>e&&this._startAt&&e!==-0.0001&&this._startAt.render(e,t,n),t||(this._time!==u||r)&&this._callback("onUpdate")),i&&(!this._gc||n)&&(0>e&&this._startAt&&!this._onUpdate&&e!==-0.0001&&this._startAt.render(e,t,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this._callback(i),0===a&&this._rawPrevTime===l&&o!==l&&(this._rawPrevTime=0))}},s._kill=function(e,t,n){if("all"===e&&(e=null),null!=e||null!=t&&t!==this.target){t="string"!=typeof t?t||this._targets||this.target:M.selector(t)||t;var r,i,s,o,u,a,f,l,c,h=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((p(t)||_(t))&&"number"!=typeof t[0])for(r=t.length;--r>-1;)this._kill(e,t[r],n)&&(a=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(t===this._targets[r]){u=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],i=this._overwrittenProps[r]=e?this._overwrittenProps[r]||{}:"all";break}}else{if(t!==this.target)return!1;u=this._propLookup,i=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(u){if(f=e||u,l=e!==i&&"all"!==i&&e!==u&&("object"!=typeof e||!e._tempKill),n&&(M.onOverwrite||this.vars.onOverwrite)){for(s in f)u[s]&&(c||(c=[]),c.push(s));if((c||!e)&&!G(this,n,t,c))return!1}for(s in f)(o=u[s])&&(h&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,a=!0),o.pg&&o.t._kill(f)&&(a=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete u[s]),l&&(i[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return a}return this._lazy=!1,this._enabled(!1,!1)},s.invalidate=function(){return this._notifyPluginsOfEnabled&&M._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],L.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-l,this.render(-this._delay)),this},s._enabled=function(e,t){if(u||o.wake(),e&&this._gc){var n,r=this._targets;if(r)for(n=r.length;--n>-1;)this._siblings[n]=Q(r[n],this,!0);else this._siblings=Q(this.target,this,!0)}return L.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?M._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},M.to=function(e,t,n){return new M(e,t,n)},M.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new M(e,t,n)},M.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new M(e,t,r)},M.delayedCall=function(e,t,n,r,i){return new M(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:i,overwrite:0})},M.set=function(e,t){return new M(e,0,t)},M.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:M.selector(e)||e;var n,r,i,s;if((p(e)||_(e))&&"number"!=typeof e[0]){for(n=e.length,r=[];--n>-1;)r=r.concat(M.getTweensOf(e[n],t));for(n=r.length;--n>-1;)for(s=r[n],i=n;--i>-1;)s===r[i]&&r.splice(n,1)}else for(r=Q(e).concat(),n=r.length;--n>-1;)(r[n]._gc||t&&!r[n].isActive())&&r.splice(n,1);return r},M.killTweensOf=M.killDelayedCallsTo=function(e,t,n){"object"==typeof t&&(n=t,t=!1);for(var r=M.getTweensOf(e,t),i=r.length;--i>-1;)r[i]._kill(n,e)};var et=g("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=et.prototype},!0);if(s=et.prototype,et.version="1.18.0",et.API=2,s._firstPT=null,s._addTween=I,s.setRatio=j,s._kill=function(e){var t,n=this._overwriteProps,r=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=n.length;--t>-1;)null!=e[n[t]]&&n.splice(t,1);for(;r;)null!=e[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},s._roundProps=function(e,t){for(var n=this._firstPT;n;)(e[this._propName]||null!=n.n&&e[n.n.split(this._propName+"_").join("")])&&(n.r=t),n=n._next},M._onPluginEvent=function(e,t){var n,r,i,s,o,u=t._firstPT;if("_onInitAllProps"===e){for(;u;){for(o=u._next,r=i;r&&r.pr>u.pr;)r=r._next;(u._prev=r?r._prev:s)?u._prev._next=u:i=u,(u._next=r)?r._prev=u:s=u,u=o}u=t._firstPT=i}for(;u;)u.pg&&"function"==typeof u.t[e]&&u.t[e]()&&(n=!0),u=u._next;return n},et.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===et.API&&(R[(new e[t])._propName]=e[t]);return!0},m.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,n=e.propName,r=e.priority||0,i=e.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},o=g("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){et.call(this,n,r),this._overwriteProps=i||[]},e.global===!0),u=o.prototype=new et(n);u.constructor=o,o.API=e.API;for(t in s)"function"==typeof e[t]&&(u[s[t]]=e[t]);return o.version=e.version,et.activate([o]),o},r=e._gsQueue){for(i=0;r.length>i;i++)r[i]();for(s in d)d[s].func||e.console.log("GSAP encountered missing dependency: com.greensock."+s)}u=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),define("TweenLite",function(){});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("plugins.ThrowPropsPlugin",["plugins.TweenPlugin","TweenLite","easing.Ease","utils.VelocityTracker"],function(e,t,n,r){var i,s,o,u,a=function(){e.call(this,"throwProps"),this._overwriteProps.length=0},f=999999999999999,l=1e-10,c=_gsScope._gsDefine.globals,h=!1,p={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},d=function(e,t,n,r){for(var i,s,o=t.length,u=0,a=f;--o>-1;)i=t[o],s=i-e,0>s&&(s=-s),a>s&&i>=r&&n>=i&&(u=o,a=s);return t[u]},v=function(e,t,n,r){if("auto"===e.end)return e;n=isNaN(n)?f:n,r=isNaN(r)?-f:r;var i="function"==typeof e.end?e.end(t):e.end instanceof Array?d(t,e.end,n,r):Number(e.end);return i>n?i=n:r>i&&(i=r),{max:i,min:i,unitFactor:e.unitFactor}},m=function(e,t,n){for(var r in t)void 0===e[r]&&r!==n&&(e[r]=t[r]);return e},g=a.calculateChange=function(e,r,i,s){null==s&&(s=.05);var o=r instanceof n?r:r?new n(r):t.defaultEase;return i*s*e/o.getRatio(s)},y=a.calculateDuration=function(e,r,i,s,o){o=o||.05;var u=s instanceof n?s:s?new n(s):t.defaultEase;return Math.abs((r-e)*u.getRatio(o)/i/o)},b=a.calculateTweenDuration=function(e,i,s,o,u,f){if("string"==typeof e&&(e=t.selector(e)),!e)return 0;null==s&&(s=10),null==o&&(o=.2),null==u&&(u=1),e.length&&(e=e[0]||e);var c,p,d,b,w,E,S,x,T,N,C=0,k=9999999999,L=i.throwProps||i,A=i.ease instanceof n?i.ease:i.ease?new n(i.ease):t.defaultEase,O=isNaN(L.checkpoint)?.05:Number(L.checkpoint),M=isNaN(L.resistance)?a.defaultResistance:Number(L.resistance);for(c in L)"resistance"!==c&&"checkpoint"!==c&&"preventOvershoot"!==c&&(p=L[c],"object"!=typeof p&&(T=T||r.getByTarget(e),T&&T.isTrackingProp(c)?p="number"==typeof p?{velocity:p}:{velocity:T.getVelocity(c)}:(b=Number(p)||0,d=b*M>0?b/M:b/-M)),"object"==typeof p&&(void 0!==p.velocity&&"number"==typeof p.velocity?b=Number(p.velocity)||0:(T=T||r.getByTarget(e),b=T&&T.isTrackingProp(c)?T.getVelocity(c):0),w=isNaN(p.resistance)?M:Number(p.resistance),d=b*w>0?b/w:b/-w,E="function"==typeof e[c]?e[c.indexOf("set")||"function"!=typeof e["get"+c.substr(3)]?c:"get"+c.substr(3)]():e[c]||0,S=E+g(b,A,d,O),void 0!==p.end&&(p=v(p,S,p.max,p.min),(f||h)&&(L[c]=m(p,L[c],"end"))),void 0!==p.max&&S>Number(p.max)+l?(N=p.unitFactor||a.defaultUnitFactors[c]||1,x=E>p.max&&p.min!==p.max||b*N>-15&&45>b*N?o+.1*(s-o):y(E,p.max,b,A,O),k>x+u&&(k=x+u)):void 0!==p.min&&Number(p.min)-l>S&&(N=p.unitFactor||a.defaultUnitFactors[c]||1,x=p.min>E&&p.min!==p.max||b*N>-45&&15>b*N?o+.1*(s-o):y(E,p.min,b,A,O),k>x+u&&(k=x+u)),x>C&&(C=x)),d>C&&(C=d));return C>k&&(C=k),C>s?s:o>C?o:C},w=a.prototype=new e("throwProps");return w.constructor=a,a.version="0.9.9",a.API=2,a._autoCSS=!0,a.defaultResistance=100,a.defaultUnitFactors={time:1e3,totalTime:1e3},a.track=function(e,t,n){return r.track(e,t,n)},a.untrack=function(e,t){r.untrack(e,t)},a.isTracking=function(e,t){return r.isTracking(e,t)},a.getVelocity=function(e,t){var n=r.getByTarget(e);return n?n.getVelocity(t):0/0},a._cssRegister=function(){var e=c.com.greensock.plugins.CSSPlugin;if(e){var t=e._internals,n=t._parseToProxy,o=t._setPluginRatio,u=t.CSSPropTween;t._registerComplexSpecialProp("throwProps",{parser:function(e,t,f,l,c,h){h=new a;var d,v,m,g,y,b={},w={},E={},S={},x={},T={};s={};for(m in t)"resistance"!==m&&"preventOvershoot"!==m&&(v=t[m],"object"==typeof v?(void 0!==v.velocity&&"number"==typeof v.velocity?b[m]=Number(v.velocity)||0:(y=y||r.getByTarget(e),b[m]=y&&y.isTrackingProp(m)?y.getVelocity(m):0),void 0!==v.end&&(S[m]=v.end),void 0!==v.min&&(w[m]=v.min),void 0!==v.max&&(E[m]=v.max),v.preventOvershoot&&(T[m]=!0),void 0!==v.resistance&&(d=!0,x[m]=v.resistance)):"number"==typeof v?b[m]=v:(y=y||r.getByTarget(e),b[m]=y&&y.isTrackingProp(m)?y.getVelocity(m):v||0),p[m]&&l._enableTransforms(2===p[m]));g=n(e,b,l,c,h),i=g.proxy,b=g.end;for(m in i)s[m]={velocity:b[m],min:w[m],max:E[m],end:S[m],resistance:x[m],preventOvershoot:T[m]};return null!=t.resistance&&(s.resistance=t.resistance),t.preventOvershoot&&(s.preventOvershoot=!0),c=new u(e,"throwProps",0,0,g.pt,2),l._overwriteProps.pop(),c.plugin=h,c.setRatio=o,c.data=g,h._onInitTween(i,s,l._tween),c}})}},a.to=function(e,n,r,a,f){n.throwProps||(n={throwProps:n}),0===f&&(n.throwProps.preventOvershoot=!0),h=!0;var l=new t(e,a||1,n);return l.render(0,!0,!0),l.vars.css?(l.duration(b(i,{throwProps:s,ease:n.ease},r,a,f)),l._delay&&!l.vars.immediateRender?l.invalidate():o._onInitTween(i,u,l),h=!1,l):(l.kill(),l=new t(e,b(e,n,r,a,f),n),h=!1,l)},w._onInitTween=function(e,t,n){this.target=e,this._props=[],o=this,u=t;var i,s,a,f,l,c,p,d,y,b=n._ease,w=isNaN(t.checkpoint)?.05:Number(t.checkpoint),E=n._duration,S=t.preventOvershoot,x=0;for(i in t)if("resistance"!==i&&"checkpoint"!==i&&"preventOvershoot"!==i){if(s=t[i],"number"==typeof s)l=Number(s)||0;else if("object"!=typeof s||isNaN(s.velocity)){if(y=y||r.getByTarget(e),!y||!y.isTrackingProp(i))throw"ERROR: No velocity was defined in the throwProps tween of "+e+" property: "+i;l=y.getVelocity(i)}else l=Number(s.velocity);c=g(l,b,E,w),d=0,f="function"==typeof e[i],a=f?e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]():e[i],"object"==typeof s&&(p=a+c,void 0!==s.end&&(s=v(s,p,s.max,s.min),h&&(t[i]=m(s,t[i],"end"))),void 0!==s.max&&p>Number(s.max)?S||s.preventOvershoot?c=s.max-a:d=s.max-a-c:void 0!==s.min&&Number(s.min)>p&&(S||s.preventOvershoot?c=s.min-a:d=s.min-a-c)),this._overwriteProps[x]=i,this._props[x++]={p:i,s:a,c1:c,c2:d,f:f,r:!1}}return!0},w._kill=function(t){for(var n=this._props.length;--n>-1;)null!=t[this._props[n].p]&&this._props.splice(n,1);return e.prototype._kill.call(this,t)},w._roundProps=function(e,t){for(var n=this._props,r=n.length;--r>-1;)(e[n[r].p]||e.throwProps)&&(n[r].r=t)},w.setRatio=function(e){for(var t,n,r=this._props.length;--r>-1;)t=this._props[r],n=t.s+t.c1*e+t.c2*e*e,t.r&&(n=Math.round(n)),t.f?this.target[t.p](n):this.target[t.p]=n},e.activate([a]),a},!0),_gsScope._gsDefine("utils.VelocityTracker",["TweenLite"],function(e){var t,n,r,i,s=/([A-Z])/g,o={},u={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},a=document.defaultView?document.defaultView.getComputedStyle:function(){},f=function(e,t,n){var r=(e._gsTransform||o)[t];return r||0===r?r:(e.style[t]?r=e.style[t]:(n=n||a(e,null))?r=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(s,"-$1").toLowerCase()):e.currentStyle&&(r=e.currentStyle[t]),parseFloat(r)||0)},l=e.ticker,c=function(e,t,n){this.p=e,this.f=t,this.v1=this.v2=0,this.t1=this.t2=l.time,this.css=!1,this.type="",this._prev=null,n&&(this._next=n,n._prev=this)},h=function(){var e,n,s=t,o=l.time;if(o-r>=.03)for(i=r,r=o;s;){for(n=s._firstVP;n;)e=n.css?f(s.target,n.p):n.f?s.target[n.p]():s.target[n.p],(e!==n.v1||o-n.t1>.15)&&(n.v2=n.v1,n.v1=e,n.t2=n.t1,n.t1=o),n=n._next;s=s._next}},p=function(e){this._lookup={},this.target=e,this.elem=e.style&&e.nodeType?!0:!1,n||(l.addEventListener("tick",h,null,!1,-100),r=i=l.time,n=!0),t&&(this._next=t,t._prev=this),t=this},d=p.getByTarget=function(e){for(var n=t;n;){if(n.target===e)return n;n=n._next}},v=p.prototype;return v.addProp=function(t,n){if(!this._lookup[t]){var r=this.target,i="function"==typeof r[t],s=i?this._altProp(t):t,o=this._firstVP;this._firstVP=this._lookup[t]=this._lookup[s]=o=new c(s!==t&&0===t.indexOf("set")?s:t,i,o),o.css=this.elem&&(void 0!==this.target.style[o.p]||u[o.p]),o.css&&u[o.p]&&!r._gsTransform&&e.set(r,{x:"+=0",overwrite:!1}),o.type=n||o.css&&0===t.indexOf("rotation")?"deg":"",o.v1=o.v2=o.css?f(r,o.p):i?r[o.p]():r[o.p]}},v.removeProp=function(e){var t=this._lookup[e];t&&(t._prev?t._prev._next=t._next:t===this._firstVP&&(this._firstVP=t._next),t._next&&(t._next._prev=t._prev),this._lookup[e]=0,t.f&&(this._lookup[this._altProp(e)]=0))},v.isTrackingProp=function(e){return this._lookup[e]instanceof c},v.getVelocity=function(e){var t,n,r,i=this._lookup[e],s=this.target;if(!i)throw"The velocity of "+e+" is not being tracked.";return t=i.css?f(s,i.p):i.f?s[i.p]():s[i.p],n=t-i.v2,("rad"===i.type||"deg"===i.type)&&(r="rad"===i.type?2*Math.PI:360,n%=r,n!==n%(r/2)&&(n=0>n?n+r:n-r)),n/(l.time-i.t2)},v._altProp=function(e){var t=e.substr(0,3),n=("get"===t?"set":"set"===t?"get":t)+e.substr(3);return"function"==typeof this.target[n]?n:e},p.getByTarget=function(n){var r=t;for("string"==typeof n&&(n=e.selector(n)),n.length&&n!==window&&n[0]&&n[0].style&&!n.nodeType&&(n=n[0]);r;){if(r.target===n)return r;r=r._next}},p.track=function(e,t,n){var r=d(e),i=t.split(","),s=i.length;for(n=(n||"").split(","),r||(r=new p(e));--s>-1;)r.addProp(i[s],n[s]||n[0]);return r},p.untrack=function(e,n){var r=d(e),i=(n||"").split(","),s=i.length;if(r){for(;--s>-1;)r.removeProp(i[s]);r._firstVP&&n||(r._prev?r._prev._next=r._next:r===t&&(t=r._next),r._next&&(r._next._prev=r._prev))}},p.isTracking=function(e,t){var n=d(e);return n?!t&&n._firstVP?!0:n.isTrackingProp(t):!1},p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define("throwpropsplugin",["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),module.exports=t())}("ThrowPropsPlugin");var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("utils.Draggable",["events.EventDispatcher","TweenLite","plugins.CSSPlugin"],function(e,t,n){var r,i,s,o,u,a,f,l,c={css:{}},h={css:{}},p={css:{}},d={css:{}},v=_gsScope._gsDefine.globals,m={},g=document,y=g.documentElement||{},b=function(e){return g.createElementNS?g.createElementNS("http://www.w3.org/1999/xhtml",e):g.createElement(e)},w=b("div"),E=[],S=function(){return!1},x=180/Math.PI,T=999999999999999,N=Date.now||function(){return(new Date).getTime()},C=!g.addEventListener&&!!g.all,k=g.createElement("div"),L=[],A={},O=0,M=/^(?:input|textarea|select)$/i,_=0,D=-1!==navigator.userAgent.toLowerCase().indexOf("android"),P=0,H={},B={},j=function(e){if("string"==typeof e&&(e=t.selector(e)),!e||e.nodeType)return[e];var n,r=[],i=e.length;for(n=0;n!==i;r.push(e[n++]));return r},F=function(){for(var e=L.length;--e>-1;)L[e]()},I=function(e){L.push(e),1===L.length&&t.ticker.addEventListener("tick",F,this,!1,1)},q=function(e){for(var n=L.length;--n>-1;)L[n]===e&&L.splice(n,1);t.to(R,0,{overwrite:"all",delay:15,onComplete:R})},R=function(){L.length||t.ticker.removeEventListener("tick",F)},U=function(e,t){var n;for(n in t)void 0===e[n]&&(e[n]=t[n]);return e},z=function(){return null!=window.pageYOffset?window.pageYOffset:null!=g.scrollTop?g.scrollTop:y.scrollTop||g.body.scrollTop||0},W=function(){return null!=window.pageXOffset?window.pageXOffset:null!=g.scrollLeft?g.scrollLeft:y.scrollLeft||g.body.scrollLeft||0},X=function(e,t){_t(e,"scroll",t),$(e.parentNode)||X(e.parentNode,t)},V=function(e,t){Dt(e,"scroll",t),$(e.parentNode)||V(e.parentNode,t)},$=function(e){return!(e&&e!==y&&e!==g&&e!==g.body&&e!==window&&e.nodeType&&e.parentNode)},J=function(e,t){var n="x"===t?"Width":"Height",r="scroll"+n,i="client"+n,s=g.body;return Math.max(0,$(e)?Math.max(y[r],s[r])-(window["inner"+n]||y[i]||s[i]):e[r]-e[i])},K=function(e){var t=$(e),n=J(e,"x"),r=J(e,"y");t?e=B:K(e.parentNode),e._gsMaxScrollX=n,e._gsMaxScrollY=r,e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0},Q=function(e,t){return e=e||window.event,m.pageX=e.clientX+g.body.scrollLeft+y.scrollLeft,m.pageY=e.clientY+g.body.scrollTop+y.scrollTop,t&&(e.returnValue=!1),m},G=function(e){return e?("string"==typeof e&&(e=t.selector(e)),e.length&&e!==window&&e[0]&&e[0].style&&!e.nodeType&&(e=e[0]),e===window||e.nodeType&&e.style?e:null):e},Y=function(e,t){var n,i,s,o=e.style;if(void 0===o[t]){for(s=["O","Moz","ms","Ms","Webkit"],i=5,n=t.charAt(0).toUpperCase()+t.substr(1);--i>-1&&void 0===o[s[i]+n];);if(0>i)return"";r=3===i?"ms":s[i],t=r+n}return t},Z=function(e,t,n){var r=e.style;r&&(void 0===r[t]&&(t=Y(e,t)),null==n?r.removeProperty?r.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):r.removeAttribute(t):void 0!==r[t]&&(r[t]=n))},et=g.defaultView?g.defaultView.getComputedStyle:S,tt=/(?:Left|Right|Width)/i,nt=/(?:\d|\-|\+|=|#|\.)*/g,rt=function(e,t,n,r,i){if("px"===r||!r)return n;if("auto"===r||!n)return 0;var s,o=tt.test(t),u=e,a=w.style,f=0>n;return f&&(n=-n),"%"===r&&-1!==t.indexOf("border")?s=n/100*(o?e.clientWidth:e.clientHeight):(a.cssText="border:0 solid red;position:"+st(e,"position",!0)+";line-height:0;","%"!==r&&u.appendChild?a[o?"borderLeftWidth":"borderTopWidth"]=n+r:(u=e.parentNode||g.body,a[o?"width":"height"]=n+r),u.appendChild(w),s=parseFloat(w[o?"offsetWidth":"offsetHeight"]),u.removeChild(w),0!==s||i||(s=rt(e,t,n,r,!0))),f?-s:s},it=function(e,t){if("absolute"!==st(e,"position",!0))return 0;var n="left"===t?"Left":"Top",r=st(e,"margin"+n,!0);return e["offset"+n]-(rt(e,t,parseFloat(r),(r+"").replace(nt,""))||0)},st=function(e,t,n){var r,i=(e._gsTransform||{})[t];return i||0===i?i:(e.style[t]?i=e.style[t]:(r=et(e))?(i=r.getPropertyValue(t.replace(/([A-Z])/g,"-$1").toLowerCase()),i=i||r.length?i:r[t]):e.currentStyle&&(i=e.currentStyle[t]),"auto"!==i||"top"!==t&&"left"!==t||(i=it(e,t)),n?i:parseFloat(i)||0)},ot=function(e,t,n){var r=e.vars,i=r[n],s=e._listeners[t];"function"==typeof i&&i.apply(r[n+"Scope"]||r.callbackScope||e,r[n+"Params"]||[e.pointerEvent]),s&&e.dispatchEvent(t)},ut=function(e,t){var n,r,i,s=G(e);return s?kt(s,t):void 0!==e.left?(i=Et(t),{left:e.left-i.x,top:e.top-i.y,width:e.width,height:e.height}):(r=e.min||e.minX||e.minRotation||0,n=e.min||e.minY||0,{left:r,top:n,width:(e.max||e.maxX||e.maxRotation||0)-r,height:(e.max||e.maxY||0)-n})},at=function(){if(!g.createElementNS)return o=0,u=!1,void 0;var e,t,n,r,i=b("div"),s=g.createElementNS("http://www.w3.org/2000/svg","svg"),l=b("div"),c=i.style,h=g.body||y;g.body&&ct&&(c.position=l.style.position="absolute",h.appendChild(l),l.appendChild(i),c.height="10px",r=i.offsetTop,l.style.border="5px solid red",f=r!==i.offsetTop,h.removeChild(l)),c=s.style,s.setAttributeNS(null,"width","400px"),s.setAttributeNS(null,"height","400px"),s.setAttributeNS(null,"viewBox","0 0 400 400"),c.display="block",c.boxSizing="border-box",c.border="0px solid red",c.transform="none",i.style.cssText="width:100px;height:100px;overflow:scroll",h.appendChild(i),i.appendChild(s),n=s.createSVGPoint().matrixTransform(s.getScreenCTM()),t=n.y,i.scrollTop=100,n.x=n.y=0,n=n.matrixTransform(s.getScreenCTM()),a=100.1>t-n.y?0:t-n.y-150,i.removeChild(s),h.removeChild(i),h.appendChild(s),e=s.getScreenCTM(),t=e.e,c.border="50px solid red",e=s.getScreenCTM(),0===t&&0===e.e&&0===e.f&&1===e.a?(o=1,u=!0):(o=t!==e.e?1:0,u=1!==e.a),h.removeChild(s)},ft=""!==Y(w,"perspective"),lt=Y(w,"transformOrigin").replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),ct=Y(w,"transform"),ht=ct.replace(/^ms/g,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase(),pt={},dt={},vt=window.SVGElement,mt=function(e){return!!(vt&&"function"==typeof e.getBBox&&e.getCTM&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM))},gt=(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(navigator.userAgent))&&11>parseFloat(RegExp.$1),yt=[],bt=[],wt=function(e){if(!e.getBoundingClientRect||!e.parentNode||!ct)return{offsetTop:0,offsetLeft:0,scaleX:1,scaleY:1,offsetParent:y};if(Ut.cacheSVGData!==!1&&e._gsCache&&e._gsCache.lastUpdate===t.ticker.frame)return e._gsCache;var n,r,i,s,f,l,c,h,p,d,v,m,b=e,w=St(e);if(w.lastUpdate=t.ticker.frame,e.getBBox&&!w.isSVGRoot){for(b=e.parentNode,n=e.getBBox();b&&"svg"!==(b.nodeName+"").toLowerCase();)b=b.parentNode;return s=wt(b),w.offsetTop=n.y*s.scaleY,w.offsetLeft=n.x*s.scaleX,w.scaleX=s.scaleX,w.scaleY=s.scaleY,w.offsetParent=b||y,w}for(i=w.offsetParent,i===g.body&&(i=y),bt.length=yt.length=0;b&&(f=st(b,ct,!0),"matrix(1, 0, 0, 1, 0, 0)"!==f&&"none"!==f&&"translate3d(0px, 0px, 0px)"!==f&&(bt.push(b),yt.push(b.style[ct]),b.style[ct]="none"),b!==i);)b=b.parentNode;for(r=i.getBoundingClientRect(),f=e.getScreenCTM(),h=e.createSVGPoint(),c=h.matrixTransform(f),h.x=h.y=10,h=h.matrixTransform(f),w.scaleX=(h.x-c.x)/10,w.scaleY=(h.y-c.y)/10,void 0===o&&at(),w.borderBox&&!u&&e.getAttribute("width")&&(s=et(e)||{},p=parseFloat(s.borderLeftWidth)+parseFloat(s.borderRightWidth)||0,d=parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth)||0,v=parseFloat(s.width)||0,m=parseFloat(s.height)||0,w.scaleX*=(v-p)/v,w.scaleY*=(m-d)/m),a?(n=e.getBoundingClientRect(),w.offsetLeft=n.left-r.left,w.offsetTop=n.top-r.top):(w.offsetLeft=c.x-r.left,w.offsetTop=c.y-r.top),w.offsetParent=i,l=bt.length;--l>-1;)bt[l].style[ct]=yt[l];return w},Et=function(e,n){if(n=n||{},!e||e===y||!e.parentNode||e===window)return{x:0,y:0};var r=et(e),i=lt&&r?r.getPropertyValue(lt):"50% 50%",s=i.split(" "),o=-1!==i.indexOf("left")?"0%":-1!==i.indexOf("right")?"100%":s[0],u=-1!==i.indexOf("top")?"0%":-1!==i.indexOf("bottom")?"100%":s[1];return("center"===u||null==u)&&(u="50%"),("center"===o||isNaN(parseFloat(o)))&&(o="50%"),e.getBBox&&mt(e)?(e._gsTransform||(t.set(e,{x:"+=0",overwrite:!1}),void 0===e._gsTransform.xOrigin&&0),i=e.getBBox(),n.x=e._gsTransform.xOrigin-i.x,n.y=e._gsTransform.yOrigin-i.y):(e.getBBox&&!e.offsetWidth&&-1!==(o+u).indexOf("%")&&(e=e.getBBox(),e={offsetWidth:e.width,offsetHeight:e.height}),n.x=-1!==o.indexOf("%")?e.offsetWidth*parseFloat(o)/100:parseFloat(o),n.y=-1!==u.indexOf("%")?e.offsetHeight*parseFloat(u)/100:parseFloat(u)),n},St=function(e){if(Ut.cacheSVGData!==!1&&e._gsCache&&e._gsCache.lastUpdate===t.ticker.frame)return e._gsCache;var n,r=e._gsCache=e._gsCache||{},i=et(e),s=e.getBBox&&mt(e),o="svg"===(e.nodeName+"").toLowerCase();if(r.isSVG=s,r.isSVGRoot=o,r.borderBox="border-box"===i.boxSizing,r.computedStyle=i,o)(r.offsetParent=e.offsetParent)||(n=e.parentNode||y,n.insertBefore(w,e),r.offsetParent=w.offsetParent||y,n.removeChild(w));else if(s){for(n=e.parentNode;n&&"svg"!==(n.nodeName+"").toLowerCase();)n=n.parentNode;r.offsetParent=n}return r},xt=function(e,t,n,r){if(e===window||!e||!e.style||!e.parentNode)return[1,0,0,1,0,0];var i,s,u,a,l,c,h,p,d,v,m,b,w,E,S=e._gsCache||St(e),x=e.parentNode,T=x._gsCache||St(x),N=S.computedStyle,C=S.isSVG?T.offsetParent:x.offsetParent;return i=S.isSVG&&-1!==(e.style[ct]+"").indexOf("matrix")?e.style[ct]:N?N.getPropertyValue(ht):e.currentStyle?e.currentStyle[ct]:"1,0,0,1,0,0",e.getBBox&&-1!==(e.getAttribute("transform")+"").indexOf("matrix")&&(i=e.getAttribute("transform")),i=(i+"").match(/(?:\-|\b)[\d\-\.e]+\b/g)||[1,0,0,1,0,0],i.length>6&&(i=[i[0],i[1],i[4],i[5],i[12],i[13]]),r?i[4]=i[5]=0:S.isSVG&&(l=e._gsTransform)&&(l.xOrigin||l.yOrigin)&&(i[0]=parseFloat(i[0]),i[1]=parseFloat(i[1]),i[2]=parseFloat(i[2]),i[3]=parseFloat(i[3]),i[4]=parseFloat(i[4])-(l.xOrigin-(l.xOrigin*i[0]+l.yOrigin*i[2])),i[5]=parseFloat(i[5])-(l.yOrigin-(l.xOrigin*i[1]+l.yOrigin*i[3]))),t&&(void 0===o&&at(),u=S.isSVG||S.isSVGRoot?wt(e):e,S.isSVG?(a=e.getBBox(),v=T.isSVGRoot?{x:0,y:0}:x.getBBox(),u={offsetLeft:a.x-v.x,offsetTop:a.y-v.y,offsetParent:S.offsetParent}):S.isSVGRoot?(m=parseInt(N.borderTopWidth,10)||0,b=parseInt(N.borderLeftWidth,10)||0,w=(i[0]-o)*b+i[2]*m,E=i[1]*b+(i[3]-o)*m,c=t.x,h=t.y,p=c-(c*i[0]+h*i[2]),d=h-(c*i[1]+h*i[3]),i[4]=parseFloat(i[4])+p,i[5]=parseFloat(i[5])+d,t.x-=p,t.y-=d,c=u.scaleX,h=u.scaleY,t.x*=c,t.y*=h,i[0]*=c,i[1]*=h,i[2]*=c,i[3]*=h,gt||(t.x+=w,t.y+=E)):!f&&e.offsetParent&&(t.x+=parseInt(st(e.offsetParent,"borderLeftWidth"),10)||0,t.y+=parseInt(st(e.offsetParent,"borderTopWidth"),10)||0),s=x===y||x===g.body,i[4]=Number(i[4])+t.x+(u.offsetLeft||0)-n.x-(s?0:x.scrollLeft||0),i[5]=Number(i[5])+t.y+(u.offsetTop||0)-n.y-(s?0:x.scrollTop||0),x&&"fixed"===st(e,"position",N)&&(i[4]+=W(),i[5]+=z()),x&&x!==y&&C===u.offsetParent&&(i[4]-=x.offsetLeft||0,i[5]-=x.offsetTop||0,f||!x.offsetParent||S.isSVG||S.isSVGRoot||(i[4]-=parseInt(st(x.offsetParent,"borderLeftWidth"),10)||0,i[5]-=parseInt(st(x.offsetParent,"borderTopWidth"),10)||0))),i},Tt=function(e,t){if(!e||e===window||!e.parentNode)return[1,0,0,1,0,0];for(var n,r,i,s,o,u,a,f,l=Et(e,pt),c=Et(e.parentNode,dt),h=xt(e,l,c);(e=e.parentNode)&&e.parentNode&&e!==y;)l=c,c=Et(e.parentNode,l===pt?dt:pt),a=xt(e,l,c),n=h[0],r=h[1],i=h[2],s=h[3],o=h[4],u=h[5],h[0]=n*a[0]+r*a[2],h[1]=n*a[1]+r*a[3],h[2]=i*a[0]+s*a[2],h[3]=i*a[1]+s*a[3],h[4]=o*a[0]+u*a[2]+a[4],h[5]=o*a[1]+u*a[3]+a[5];return t&&(n=h[0],r=h[1],i=h[2],s=h[3],o=h[4],u=h[5],f=n*s-r*i,h[0]=s/f,h[1]=-r/f,h[2]=-i/f,h[3]=n/f,h[4]=(i*u-s*o)/f,h[5]=-(n*u-r*o)/f),h},Nt=function(e,t,n,r,i){e=G(e);var s=Tt(e,!1,i),o=t.x,u=t.y;return n&&(Et(e,t),o-=t.x,u-=t.y),r=r===!0?t:r||{},r.x=o*s[0]+u*s[2]+s[4],r.y=o*s[1]+u*s[3]+s[5],r},Ct=function(e,t,n){var r=e.x*t[0]+e.y*t[2]+t[4],i=e.x*t[1]+e.y*t[3]+t[5];return e.x=r*n[0]+i*n[2]+n[4],e.y=r*n[1]+i*n[3]+n[5],e},kt=function(e,t,n){if(!(e=G(e)))return null;t=G(t);var r,i,s,o,u,a,f,l,c,h,p,d,v,m,b,w,E,S,x,T,N,k,L=e.getBBox&&mt(e);if(e===window)o=z(),i=W(),s=i+(y.clientWidth||e.innerWidth||g.body.clientWidth||0),u=o+((e.innerHeight||0)-20<y.clientHeight?y.clientHeight:e.innerHeight||g.body.clientHeight||0);else{if(void 0===t||t===window)return e.getBoundingClientRect();r=Et(e),i=-r.x,o=-r.y,L?(d=e.getBBox(),v=d.width,m=d.height):e.offsetWidth?(v=e.offsetWidth,m=e.offsetHeight):(N=et(e),v=parseFloat(N.width),m=parseFloat(N.height)),s=i+v,u=o+m,"svg"!==e.nodeName.toLowerCase()||C||(b=wt(e),k=b.computedStyle||{},S=(e.getAttribute("viewBox")||"0 0").split(" "),x=parseFloat(S[0]),T=parseFloat(S[1]),w=parseFloat(k.borderLeftWidth)||0,E=parseFloat(k.borderTopWidth)||0,s-=v-(v-w)/b.scaleX-x,u-=m-(m-E)/b.scaleY-T,i-=w/b.scaleX-x,o-=E/b.scaleY-T,N&&(s+=(parseFloat(k.borderRightWidth)+w)/b.scaleX,u+=(E+parseFloat(k.borderBottomWidth))/b.scaleY))}return e===t?{left:i,top:o,width:s-i,height:u-o}:(a=Tt(e),f=Tt(t,!0),l=Ct({x:i,y:o},a,f),c=Ct({x:s,y:o},a,f),h=Ct({x:s,y:u},a,f),p=Ct({x:i,y:u},a,f),i=Math.min(l.x,c.x,h.x,p.x),o=Math.min(l.y,c.y,h.y,p.y),H.x=H.y=0,n&&Et(t,H),{left:i+H.x,top:o+H.y,width:Math.max(l.x,c.x,h.x,p.x)-i,height:Math.max(l.y,c.y,h.y,p.y)-o})},Lt=function(e){return e&&e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0])?!0:!1},At=function(e){var t,n,r,i=[],s=e.length;for(t=0;s>t;t++)if(n=e[t],Lt(n))for(r=n.length,r=0;n.length>r;r++)i.push(n[r]);else n&&0!==n.length&&i.push(n);return i},Ot="ontouchstart"in y&&"orientation"in window,Mt=function(e){for(var t=e.split(","),n=(void 0!==w.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==w.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":e).split(","),r={},i=8;--i>-1;)r[t[i]]=n[i],r[n[i]]=t[i];return r}("touchstart,touchmove,touchend,touchcancel"),_t=function(e,t,n,r){e.addEventListener?e.addEventListener(Mt[t]||t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},Dt=function(e,t,n){e.removeEventListener?e.removeEventListener(Mt[t]||t,n):e.detachEvent&&e.detachEvent("on"+t,n)},Pt=function(e,t){for(var n=e.length;--n>-1;)if(e[n].identifier===t)return!0;return!1},Ht=function(e){i=e.touches&&e.touches.length>_,Dt(e.target,"touchend",Ht)},Bt=function(e){i=e.touches&&e.touches.length>_,_t(e.target,"touchend",Ht)},jt=function(e,t,n,r,i,s){var o,u,a,f={};if(t)if(1!==i&&t instanceof Array){for(f.end=o=[],a=t.length,u=0;a>u;u++)o[u]=t[u]*i;n+=1.1,r-=1.1}else f.end="function"==typeof t?function(n){return t.call(e,n)*i}:t;return(n||0===n)&&(f.max=n),(r||0===r)&&(f.min=r),s&&(f.velocity=0),f},Ft=function(e){var t;return e&&e.getAttribute&&"BODY"!==e.nodeName?"true"===(t=e.getAttribute("data-clickable"))||"false"!==t&&(e.onclick||M.test(e.nodeName+"")||"true"===e.getAttribute("contentEditable"))?!0:Ft(e.parentNode):!1},It=function(e,t){for(var n,r=e.length;--r>-1;)n=e[r],n.ondragstart=n.onselectstart=t?null:S,Z(n,"userSelect",t?"text":"none")},qt=function(){var e,t=g.createElement("div"),n=g.createElement("div"),r=n.style,i=g.body||w;return r.display="inline-block",r.position="relative",t.style.cssText=n.innerHTML="width:90px; height:40px; padding:10px; overflow:auto; visibility: hidden",t.appendChild(n),i.appendChild(t),l=n.offsetHeight+18>t.scrollHeight,r.width="100%",ct||(r.paddingRight="500px",e=t.scrollLeft=t.scrollWidth-t.clientWidth,r.left="-90px",e=e!==t.scrollLeft),i.removeChild(t),e}(),Rt=function(e,n){e=G(e),n=n||{};var r,i,s,o,u,a,f=g.createElement("div"),c=f.style,h=e.firstChild,p=0,d=0,v=e.scrollTop,m=e.scrollLeft,y=e.scrollWidth,b=e.scrollHeight,w=0,E=0,S=0;ft&&n.force3D!==!1?(u="translate3d(",a="px,0px)"):ct&&(u="translate(",a="px)"),this.scrollTop=function(e,t){return arguments.length?(this.top(-e,t),void 0):-this.top()},this.scrollLeft=function(e,t){return arguments.length?(this.left(-e,t),void 0):-this.left()},this.left=function(r,i){if(!arguments.length)return-(e.scrollLeft+d);var s=e.scrollLeft-m,o=d;return(s>2||-2>s)&&!i?(m=e.scrollLeft,t.killTweensOf(this,!0,{left:1,scrollLeft:1}),this.left(-m),n.onKill&&n.onKill(),void 0):(r=-r,0>r?(d=0|r-.5,r=0):r>E?(d=0|r-E,r=E):d=0,(d||o)&&(u?this._suspendTransforms||(c[ct]=u+ -d+"px,"+ -p+a):c.left=-d+"px",qt&&d+w>=0&&(c.paddingRight=d+w+"px")),e.scrollLeft=0|r,m=e.scrollLeft,void 0)},this.top=function(r,i){if(!arguments.length)return-(e.scrollTop+p);var s=e.scrollTop-v,o=p;return(s>2||-2>s)&&!i?(v=e.scrollTop,t.killTweensOf(this,!0,{top:1,scrollTop:1}),this.top(-v),n.onKill&&n.onKill(),void 0):(r=-r,0>r?(p=0|r-.5,r=0):r>S?(p=0|r-S,r=S):p=0,(p||o)&&(u?this._suspendTransforms||(c[ct]=u+ -d+"px,"+ -p+a):c.top=-p+"px"),e.scrollTop=0|r,v=e.scrollTop,void 0)},this.maxScrollTop=function(){return S},this.maxScrollLeft=function(){return E},this.disable=function(){for(h=f.firstChild;h;)o=h.nextSibling,e.appendChild(h),h=o;e===f.parentNode&&e.removeChild(f)},this.enable=function(){if(h=e.firstChild,h!==f){for(;h;)o=h.nextSibling,f.appendChild(h),h=o;e.appendChild(f),this.calibrate()}},this.calibrate=function(t){var n,o,u=e.clientWidth===r;v=e.scrollTop,m=e.scrollLeft,(!u||e.clientHeight!==i||f.offsetHeight!==s||y!==e.scrollWidth||b!==e.scrollHeight||t)&&((p||d)&&(n=this.left(),o=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),(!u||t)&&(c.display="block",c.width="auto",c.paddingRight="0px",w=Math.max(0,e.scrollWidth-e.clientWidth),w&&(w+=st(e,"paddingLeft")+(l?st(e,"paddingRight"):0))),c.display="inline-block",c.position="relative",c.overflow="visible",c.verticalAlign="top",c.width="100%",c.paddingRight=w+"px",l&&(c.paddingBottom=st(e,"paddingBottom",!0)),C&&(c.zoom="1"),r=e.clientWidth,i=e.clientHeight,y=e.scrollWidth,b=e.scrollHeight,E=e.scrollWidth-r,S=e.scrollHeight-i,s=f.offsetHeight,c.display="block",(n||o)&&(this.left(n),this.top(o)))},this.content=f,this.element=e,this._suspendTransforms=!1,this.enable()},Ut=function(r,o){e.call(this,r),r=G(r),s||(s=v.com.greensock.plugins.ThrowPropsPlugin),this.vars=o=o||{},this.target=r,this.x=this.y=this.rotation=0,this.dragResistance=parseFloat(o.dragResistance)||0,this.edgeResistance=isNaN(o.edgeResistance)?1:parseFloat(o.edgeResistance)||0,this.lockAxis=o.lockAxis,this.autoScroll=o.autoScroll||0,this.lockedAxis=null,this.allowEventDefault=!!o.allowEventDefault;var u,a,f,l,m,b,w,S,L,M,H,F,R,z,W,J,Y,et,tt,nt,rt,it,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt=(o.type||(C?"top,left":"x,y")).toLowerCase(),bt=-1!==yt.indexOf("x")||-1!==yt.indexOf("y"),wt=-1!==yt.indexOf("rotation"),Et=wt?"rotation":bt?"x":"left",St=bt?"y":"top",xt=-1!==yt.indexOf("x")||-1!==yt.indexOf("left")||"scroll"===yt,Ct=-1!==yt.indexOf("y")||-1!==yt.indexOf("top")||"scroll"===yt,kt=o.minimumMovement||2,Lt=this,At=j(o.trigger||o.handle||r),Ht={},qt=0,zt=!1,Wt=o.clickableTest||Ft,Xt=function(e){if(Lt.autoScroll&&Lt.isDragging&&(et||zt)){var t,n,i,s,o,u,f,l,c=r,h=15*Lt.autoScroll;for(zt=!1,B.scrollTop=null!=window.pageYOffset?window.pageYOffset:null!=y.scrollTop?y.scrollTop:g.body.scrollTop,B.scrollLeft=null!=window.pageXOffset?window.pageXOffset:null!=y.scrollLeft?y.scrollLeft:g.body.scrollLeft,s=Lt.pointerX-B.scrollLeft,o=Lt.pointerY-B.scrollTop;c&&!n;)n=$(c.parentNode),t=n?B:c.parentNode,i=n?{bottom:Math.max(y.clientHeight,window.innerHeight||0),right:Math.max(y.clientWidth,window.innerWidth||0),left:0,top:0}:t.getBoundingClientRect(),u=f=0,Ct&&(o>i.bottom-40&&(l=t._gsMaxScrollY-t.scrollTop)?(zt=!0,f=Math.min(l,0|h*(1-Math.max(0,i.bottom-o)/40))):i.top+40>o&&t.scrollTop&&(zt=!0,f=-Math.min(t.scrollTop,0|h*(1-Math.max(0,o-i.top)/40))),f&&(t.scrollTop+=f)),xt&&(s>i.right-40&&(l=t._gsMaxScrollX-t.scrollLeft)?(zt=!0,u=Math.min(l,0|h*(1-Math.max(0,i.right-s)/40))):i.left+40>s&&t.scrollLeft&&(zt=!0,u=-Math.min(t.scrollLeft,0|h*(1-Math.max(0,s-i.left)/40))),u&&(t.scrollLeft+=u)),n&&(u||f)&&(window.scrollTo(t.scrollLeft,t.scrollTop),sn(Lt.pointerX+u,Lt.pointerY+f)),c=t}if(et){var p=Lt.x,d=Lt.y,v=1e-6;v>p&&p>-v&&(p=0),v>d&&d>-v&&(d=0),wt?(dt.data.rotation=Lt.rotation=p,dt.setRatio(1)):a?(Ct&&a.top(d),xt&&a.left(p)):bt?(Ct&&(dt.data.y=d),xt&&(dt.data.x=p),dt.setRatio(1)):(Ct&&(r.style.top=d+"px"),xt&&(r.style.left=p+"px")),!S||e||gt||(gt=!0,ot(Lt,"drag","onDrag"),gt=!1)}et=!1},$t=function(e,n){var i,s=Lt.x,o=Lt.y;r._gsTransform||!bt&&!wt||t.set(r,{x:"+=0",overwrite:!1}),bt?(Lt.y=r._gsTransform.y,Lt.x=r._gsTransform.x):wt?Lt.x=Lt.rotation=r._gsTransform.rotation:a?(Lt.y=a.top(),Lt.x=a.left()):(Lt.y=parseInt(r.style.top,10)||0,Lt.x=parseInt(r.style.left,10)||0),!nt&&!rt||n||(nt&&(i=nt(Lt.x),i!==Lt.x&&(Lt.x=i,wt&&(Lt.rotation=i))),rt&&(i=rt(Lt.y),i!==Lt.y&&(Lt.y=i))),(s!==Lt.x||o!==Lt.y)&&Xt(!0),e||ot(Lt,"throwupdate","onThrowUpdate")},Jt=function(){var e,t,n,i;w=!1,a?(a.calibrate(),Lt.minX=M=-a.maxScrollLeft(),Lt.minY=F=-a.maxScrollTop(),Lt.maxX=L=Lt.maxY=H=0,w=!0):o.bounds&&(e=ut(o.bounds,r.parentNode),wt?(Lt.minX=M=e.left,Lt.maxX=L=e.left+e.width,Lt.minY=F=Lt.maxY=H=0):void 0!==o.bounds.maxX||void 0!==o.bounds.maxY?(e=o.bounds,Lt.minX=M=e.minX,Lt.minY=F=e.minY,Lt.maxX=L=e.maxX,Lt.maxY=H=e.maxY):(t=ut(r,r.parentNode),Lt.minX=M=st(r,Et)+e.left-t.left,Lt.minY=F=st(r,St)+e.top-t.top,Lt.maxX=L=M+(e.width-t.width),Lt.maxY=H=F+(e.height-t.height)),M>L&&(Lt.minX=L,Lt.maxX=L=M,M=Lt.minX),F>H&&(Lt.minY=H,Lt.maxY=H=F,F=Lt.minY),wt&&(Lt.minRotation=M,Lt.maxRotation=L),w=!0),o.liveSnap&&(n=o.liveSnap===!0?o.snap||{}:o.liveSnap,i=n instanceof Array||"function"==typeof n,wt?(nt=tn(i?n:n.rotation,M,L,1),rt=null):(xt&&(nt=tn(i?n:n.x||n.left||n.scrollLeft,M,L,a?-1:1)),Ct&&(rt=tn(i?n:n.y||n.top||n.scrollTop,F,H,a?-1:1))))},Kt=function(){Lt.isThrowing=!1,ot(Lt,"throwcomplete","onThrowComplete")},Qt=function(){Lt.isThrowing=!1},Gt=function(e,t){var n,i,u,f;e&&s?(e===!0&&(n=o.snap||{},i=n instanceof Array||"function"==typeof n,e={resistance:(o.throwResistance||o.resistance||1e3)/(wt?10:1)},wt?e.rotation=jt(Lt,i?n:n.rotation,L,M,1,t):(xt&&(e[Et]=jt(Lt,i?n:n.x||n.left||n.scrollLeft,L,M,a?-1:1,t||"x"===Lt.lockedAxis)),Ct&&(e[St]=jt(Lt,i?n:n.y||n.top||n.scrollTop,H,F,a?-1:1,t||"y"===Lt.lockedAxis)))),Lt.isThrowing=!0,f=isNaN(o.overshootTolerance)?1===o.edgeResistance?0:1-Lt.edgeResistance+.2:o.overshootTolerance,Lt.tween=u=s.to(a||r,{throwProps:e,ease:o.ease||v.Power3.easeOut,onComplete:Kt,onOverwrite:Qt,onUpdate:o.fastMode?ot:$t,onUpdateParams:o.fastMode?[Lt,"onthrowupdate","onThrowUpdate"]:E},isNaN(o.maxDuration)?2:o.maxDuration,isNaN(o.minDuration)?0===f?0:.5:o.minDuration,f),o.fastMode||(a&&(a._suspendTransforms=!0),u.render(u.duration(),!0,!0),$t(!0,!0),Lt.endX=Lt.x,Lt.endY=Lt.y,wt&&(Lt.endRotation=Lt.x),u.play(0),$t(!0,!0),a&&(a._suspendTransforms=!1))):w&&Lt.applyBounds()},Yt=function(){ft=Tt(r.parentNode,!0),ft[1]||ft[2]||1!=ft[0]||1!=ft[3]||0!=ft[4]||0!=ft[5]||(ft=null)},Zt=function(){var e=1-Lt.edgeResistance;Yt(),a?(Jt(),b=a.top(),m=a.left()):(en()?($t(!0,!0),Jt()):Lt.applyBounds(),wt?(Y=Nt(r,{x:0,y:0}),$t(!0,!0),m=Lt.x,b=Lt.y=Math.atan2(Y.y-l,f-Y.x)*x):(ht=r.parentNode?r.parentNode.scrollTop||0:0,pt=r.parentNode?r.parentNode.scrollLeft||0:0,b=st(r,St),m=st(r,Et))),w&&e&&(m>L?m=L+(m-L)/e:M>m&&(m=M-(M-m)/e),wt||(b>H?b=H+(b-H)/e:F>b&&(b=F-(F-b)/e)))},en=function(){return Lt.tween&&Lt.tween.isActive()},tn=function(e,t,n,r){return"function"==typeof e?function(i){var s=Lt.isPressed?1-Lt.edgeResistance:1;return e.call(Lt,i>n?n+(i-n)*s:t>i?t+(i-t)*s:i)*r}:e instanceof Array?function(r){for(var i,s,o=e.length,u=0,a=T;--o>-1;)i=e[o],s=i-r,0>s&&(s=-s),a>s&&i>=t&&n>=i&&(u=o,a=s);return e[u]}:isNaN(e)?function(e){return e}:function(){return e*r}},nn=function(e){var n,i;if(u&&!Lt.isPressed&&e&&!("mousedown"===e.type&&30>N()-ct&&Mt[Lt.pointerEvent.type])){if(lt=en(),Lt.pointerEvent=e,Mt[e.type]?(at=-1!==e.type.indexOf("touch")?e.currentTarget||e.target:g,_t(at,"touchend",on),_t(at,"touchmove",rn),_t(at,"touchcancel",on),_t(g,"touchstart",Bt)):(at=null,_t(g,"mousemove",rn)),mt=null,_t(g,"mouseup",on),e&&e.target&&_t(e.target,"mouseup",on),it=Wt.call(Lt,e.target)&&!o.dragClickables)return _t(e.target,"change",on),ot(Lt,"press","onPress"),It(At,!0),void 0;if(vt=!at||xt===Ct||a||Lt.vars.allowNativeTouchScrolling===!1?!1:xt?"y":"x",C?e=Q(e,!0):vt||Lt.allowEventDefault||(e.preventDefault(),e.preventManipulation&&e.preventManipulation()),e.changedTouches?(e=W=e.changedTouches[0],J=e.identifier):e.pointerId?J=e.pointerId:W=J=null,_++,I(Xt),l=Lt.pointerY=e.pageY,f=Lt.pointerX=e.pageX,(vt||Lt.autoScroll)&&K(r.parentNode),!Lt.autoScroll||wt||a||!r.parentNode||r.getBBox||!r.parentNode._gsMaxScrollX||k.parentNode||(k.style.width=r.parentNode.scrollWidth+"px",r.parentNode.appendChild(k)),Zt(),ft&&(n=f*ft[0]+l*ft[2]+ft[4],l=f*ft[1]+l*ft[3]+ft[5],f=n),Lt.tween&&Lt.tween.kill(),Lt.isThrowing=!1,t.killTweensOf(a||r,!0,Ht),a&&t.killTweensOf(r,!0,{scrollTo:1}),Lt.tween=Lt.lockedAxis=null,(o.zIndexBoost||!wt&&!a&&o.zIndexBoost!==!1)&&(r.style.zIndex=Ut.zIndex++),Lt.isPressed=!0,S=!!o.onDrag||!!Lt._listeners.drag,!wt)for(i=At.length;--i>-1;)Z(At[i],"cursor",o.cursor||"move");ot(Lt,"press","onPress")}},rn=function(e){var t,n,r,s,o=e;if(u&&!i&&Lt.isPressed&&e){if(Lt.pointerEvent=e,t=e.changedTouches){if(e=t[0],e!==W&&e.identifier!==J){for(s=t.length;--s>-1&&(e=t[s]).identifier!==J;);if(0>s)return}}else if(e.pointerId&&J&&e.pointerId!==J)return;if(C)e=Q(e,!0);else{if(at&&vt&&!mt&&(n=e.pageX,r=e.pageY,ft&&(s=n*ft[0]+r*ft[2]+ft[4],r=n*ft[1]+r*ft[3]+ft[5],n=s),mt=Math.abs(n-f)>Math.abs(r-l)&&xt?"x":"y",Lt.vars.lockAxisOnTouchScroll!==!1&&(Lt.lockedAxis="x"===mt?"y":"x","function"==typeof Lt.vars.onLockAxis&&Lt.vars.onLockAxis.call(Lt,o)),D&&vt===mt))return on(o),void 0;Lt.allowEventDefault||vt&&(!mt||vt===mt)||o.cancelable===!1||(o.preventDefault(),o.preventManipulation&&o.preventManipulation())}Lt.autoScroll&&(zt=!0),sn(e.pageX,e.pageY)}},sn=function(e,t){var n,r,i,s,o,u,a=1-Lt.dragResistance,c=1-Lt.edgeResistance;Lt.pointerX=e,Lt.pointerY=t,wt?(s=Math.atan2(Y.y-t,e-Y.x)*x,o=Lt.y-s,Lt.y=s,o>180?b-=360:-180>o&&(b+=360),i=m+(b-s)*a):(ft&&(u=e*ft[0]+t*ft[2]+ft[4],t=e*ft[1]+t*ft[3]+ft[5],e=u),r=t-l,n=e-f,kt>r&&r>-kt&&(r=0),kt>n&&n>-kt&&(n=0),(Lt.lockAxis||Lt.lockedAxis)&&(n||r)&&(u=Lt.lockedAxis,u||(Lt.lockedAxis=u=xt&&Math.abs(n)>Math.abs(r)?"y":Ct?"x":null,u&&"function"==typeof Lt.vars.onLockAxis&&Lt.vars.onLockAxis.call(Lt,Lt.pointerEvent)),"y"===u?r=0:"x"===u&&(n=0)),i=m+n*a,s=b+r*a),nt||rt?(nt&&(i=nt(i)),rt&&(s=rt(s))):w&&(i>L?i=L+(i-L)*c:M>i&&(i=M+(i-M)*c),wt||(s>H?s=H+(s-H)*c:F>s&&(s=F+(s-F)*c))),wt||(i=Math.round(i),s=Math.round(s)),(Lt.x!==i||Lt.y!==s&&!wt)&&(wt?Lt.endRotation=Lt.x=Lt.endX=i:(Ct&&(Lt.y=Lt.endY=s),xt&&(Lt.x=Lt.endX=i)),et=!0,Lt.isDragging||(Lt.isDragging=!0,ot(Lt,"dragstart","onDragStart")))},on=function(e,t){if(u&&Lt.isPressed&&(!e||null==J||t||!(e.pointerId&&e.pointerId!==J||e.changedTouches&&!Pt(e.changedTouches,J)))){Lt.isPressed=!1;var n,i,s,a,f=e,l=Lt.isDragging;if(at?(Dt(at,"touchend",on),Dt(at,"touchmove",rn),Dt(at,"touchcancel",on),Dt(g,"touchstart",Bt)):Dt(g,"mousemove",rn),Dt(g,"mouseup",on),e&&e.target&&Dt(e.target,"mouseup",on),et=!1,k.parentNode&&k.parentNode.removeChild(k),it)return e&&Dt(e.target,"change",on),It(At,!1),ot(Lt,"release","onRelease"),ot(Lt,"click","onClick"),it=!1,void 0;if(q(Xt),!wt)for(i=At.length;--i>-1;)Z(At[i],"cursor",o.cursor||"move");if(l&&(qt=P=N(),Lt.isDragging=!1),_--,e){if(C&&(e=Q(e,!1)),n=e.changedTouches,n&&(e=n[0],e!==W&&e.identifier!==J)){for(i=n.length;--i>-1&&(e=n[i]).identifier!==J;);if(0>i)return}Lt.pointerEvent=f,Lt.pointerX=e.pageX,Lt.pointerY=e.pageY}return f&&!l?(lt&&(o.snap||o.bounds)&&Gt(o.throwProps),ot(Lt,"release","onRelease"),D&&"touchmove"===f.type||(ot(Lt,"click","onClick"),a=f.target||f.srcElement||r,a.click?a.click():g.createEvent&&(s=g.createEvent("MouseEvents"),s.initEvent("click",!0,!0),a.dispatchEvent(s)),ct=N())):(Gt(o.throwProps),C||Lt.allowEventDefault||!f||!o.dragClickables&&Wt.call(Lt,f.target)||!l||vt&&(!mt||vt!==mt)||f.cancelable===!1||(f.preventDefault(),f.preventManipulation&&f.preventManipulation()),ot(Lt,"release","onRelease")),l&&ot(Lt,"dragend","onDragEnd"),!0}},un=function(e){if(e&&Lt.isDragging){var t=e.target||e.srcElement||r.parentNode,n=t.scrollLeft-t._gsScrollX,i=t.scrollTop-t._gsScrollY;(n||i)&&(f-=n,l-=i,t._gsScrollX+=n,t._gsScrollY+=i,sn(Lt.pointerX,Lt.pointerY))}},an=function(e){var t=N(),n=40>t-ct,r=40>t-qt;(Lt.isPressed||r||n)&&(e.preventDefault?(e.preventDefault(),(n||r&&Lt.vars.suppressClickOnDrag!==!1)&&e.stopImmediatePropagation()):e.returnValue=!1,e.preventManipulation&&e.preventManipulation())};tt=Ut.get(this.target),tt&&tt.kill(),this.startDrag=function(e){nn(e),Lt.isDragging||(Lt.isDragging=!0,ot(Lt,"dragstart","onDragStart"))},this.drag=rn,this.endDrag=function(e){on(e,!0)},this.timeSinceDrag=function(){return Lt.isDragging?0:(N()-qt)/1e3},this.hitTest=function(e,t){return Ut.hitTest(Lt.target,e,t)},this.getDirection=function(e,t){var n,r,i,o,u,a,f="velocity"===e&&s?e:"object"!=typeof e||wt?"start":"element";return"element"===f&&(u=Vt(Lt.target),a=Vt(e)),n="start"===f?Lt.x-m:"velocity"===f?s.getVelocity(this.target,Et):u.left+u.width/2-(a.left+a.width/2),wt?0>n?"counter-clockwise":"clockwise":(t=t||2,r="start"===f?Lt.y-b:"velocity"===f?s.getVelocity(this.target,St):u.top+u.height/2-(a.top+a.height/2),i=Math.abs(n/r),o=1/t>i?"":0>n?"left":"right",t>i&&(""!==o&&(o+="-"),o+=0>r?"up":"down"),o)},this.applyBounds=function(e){var t,n;return e&&o.bounds!==e?(o.bounds=e,Lt.update(!0)):($t(!0),Jt(),w&&(t=Lt.x,n=Lt.y,w&&(t>L?t=L:M>t&&(t=M),n>H?n=H:F>n&&(n=F)),(Lt.x!==t||Lt.y!==n)&&(Lt.x=Lt.endX=t,wt?Lt.endRotation=t:Lt.y=Lt.endY=n,et=!0,Xt())),Lt)},this.update=function(e,t){var n=Lt.x,r=Lt.y;return Yt(),e?Lt.applyBounds():(et&&t&&Xt(),$t(!0)),Lt.isPressed&&(xt&&Math.abs(n-Lt.x)>.01||Ct&&Math.abs(r-Lt.y)>.01&&!wt)&&Zt(),Lt},this.enable=function(e){var i,f,l;if("soft"!==e){for(f=At.length;--f>-1;)l=At[f],_t(l,"mousedown",nn),_t(l,"touchstart",nn),_t(l,"click",an,!0),wt||Z(l,"cursor",o.cursor||"move"),Z(l,"touchCallout","none"),Z(l,"touchAction",xt===Ct||a?"none":xt?"pan-y":"pan-x");It(At,!1)}return X(Lt.target,un),u=!0,s&&"soft"!==e&&s.track(a||r,bt?"x,y":wt?"rotation":"top,left"),a&&a.enable(),r._gsDragID=i="d"+O++,A[i]=this,a&&(a.element._gsDragID=i),t.set(r,{x:"+=0",overwrite:!1}),dt={t:r,data:C?z:r._gsTransform,tween:{},setRatio:C?function(){t.set(r,R)}:n._internals.setTransformRatio||n._internals.set3DTransformRatio},Lt.update(!0),Lt},this.disable=function(e){var t,n,i=Lt.isDragging;if(!wt)for(t=At.length;--t>-1;)Z(At[t],"cursor",null);if("soft"!==e){for(t=At.length;--t>-1;)n=At[t],Z(n,"touchCallout",null),Z(n,"touchAction",null),Dt(n,"mousedown",nn),Dt(n,"touchstart",nn),Dt(n,"click",an);It(At,!0),at&&(Dt(at,"touchcancel",on),Dt(at,"touchend",on),Dt(at,"touchmove",rn)),Dt(g,"mouseup",on),Dt(g,"mousemove",rn)}return V(r,un),u=!1,s&&"soft"!==e&&s.untrack(a||r,bt?"x,y":wt?"rotation":"top,left"),a&&a.disable(),q(Xt),Lt.isDragging=Lt.isPressed=it=!1,i&&ot(Lt,"dragend","onDragEnd"),Lt},this.enabled=function(e,t){return arguments.length?e?Lt.enable(t):Lt.disable(t):u},this.kill=function(){return Lt.isThrowing=!1,t.killTweensOf(a||r,!0,Ht),Lt.disable(),delete A[r._gsDragID],Lt},-1!==yt.indexOf("scroll")&&(a=this.scrollProxy=new Rt(r,U({onKill:function(){Lt.isPressed&&on(null)}},o)),r.style.overflowY=Ct&&!Ot?"auto":"hidden",r.style.overflowX=xt&&!Ot?"auto":"hidden",r=a.content),o.force3D!==!1&&t.set(r,{force3D:!0}),wt?Ht.rotation=1:(xt&&(Ht[Et]=1),Ct&&(Ht[St]=1)),wt?(R=d,z=R.css,R.overwrite=!1):bt&&(R=xt&&Ct?c:xt?h:p,z=R.css,R.overwrite=!1),this.enable()},zt=Ut.prototype=new e;zt.constructor=Ut,zt.pointerX=zt.pointerY=0,zt.isDragging=zt.isPressed=!1,Ut.version="0.14.1",Ut.zIndex=1e3,_t(g,"touchcancel",function(){}),_t(g,"contextmenu",function(){var e;for(e in A)A[e].isPressed&&A[e].endDrag()}),Ut.create=function(e,n){"string"==typeof e&&(e=t.selector(e));for(var r=e&&0!==e.length?Lt(e)?At(e):[e]:[],i=r.length;--i>-1;)r[i]=new Ut(r[i],n);return r},Ut.get=function(e){return A[(G(e)||{})._gsDragID]},Ut.timeSinceDrag=function(){return(N()-P)/1e3};var Wt={},Xt=function(e){var t=0,n=0,r=e.offsetWidth,i=e.offsetHeight;for(e=G(e);e;)t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{top:t,left:n,width:r,height:i}},Vt=function(e,t){if(e===window)return Wt.left=Wt.top=0,Wt.width=Wt.right=y.clientWidth||e.innerWidth||g.body.clientWidth||0,Wt.height=Wt.bottom=(e.innerHeight||0)-20<y.clientHeight?y.clientHeight:e.innerHeight||g.body.clientHeight||0,Wt;var n=e.pageX!==t?{left:e.pageX-W(),top:e.pageY-z(),right:e.pageX-W()+1,bottom:e.pageY-z()+1}:e.nodeType||e.left===t||e.top===t?C?Xt(e):G(e).getBoundingClientRect():e;return n.right===t&&n.width!==t?(n.right=n.left+n.width,n.bottom=n.top+n.height):n.width===t&&(n={width:n.right-n.left,height:n.bottom-n.top,right:n.right,left:n.left,bottom:n.bottom,top:n.top}),n};return Ut.hitTest=function(e,t,n){if(e===t)return!1;var r,i,s,o=Vt(e),u=Vt(t),a=u.left>o.right||u.right<o.left||u.top>o.bottom||u.bottom<o.top;return a||!n?!a:(s=-1!==(n+"").indexOf("%"),n=parseFloat(n)||0,r={left:Math.max(o.left,u.left),top:Math.max(o.top,u.top)},r.width=Math.min(o.right,u.right)-r.left,r.height=Math.min(o.bottom,u.bottom)-r.top,0>r.width||0>r.height?!1:s?(n*=.01,i=r.width*r.height,i>=o.width*o.height*n||i>=u.width*u.height*n):r.width>n&&r.height>n)},k.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;",Ut},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define("draggable",["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),require("../plugins/CSSPlugin.js"),module.exports=t())}("Draggable"),function(){function e(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function t(e,t,n){if(t!==t)return c(e,n);--n;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function n(e){return typeof e=="function"||!1}function r(e){return null==e?"":e+""}function i(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function s(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function o(e){return e&&e.Object===Object?e:null}function u(e,t){if(e!==t){var n=null===e,r=e===w,i=e===e,s=null===t,o=t===w,u=t===t;if(e>t&&!s||!i||n&&!o&&u||r&&u)return 1;if(t>e&&!n||!u||s&&!r&&i||o&&i)return-1}return 0}function a(e){return Q[e]}function f(e){return G[e]}function l(e){return"\\"+et[e]}function c(e,t,n){var r=e.length;for(t+=n?0:-1;n?t--:++t<r;){var i=e[t];if(i!==i)return t}return-1}function h(e){var t=!1;if(null!=e&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function p(e){return!!e&&typeof e=="object"}function d(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function v(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;)e[n]===t&&(e[n]="__lodash_placeholder__",s[++i]=n);return s}function m(e){for(var t=-1,n=e.length;++t<n&&d(e.charCodeAt(t)););return t}function g(e){for(var t=e.length;t--&&d(e.charCodeAt(t)););return t}function y(e){return Y[e]}function b(o){function d(e){if(p(e)&&!Ss(e)&&!(e instanceof Y)){if(e instanceof G)return e;if(fi.call(e,"__wrapped__"))return er(e)}return new G(e)}function Q(){}function G(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Y(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fi,this.__views__=[]}function Z(){this.__data__={}}function et(e){var t=e?e.length:0;for(this.data={hash:Ai(null),set:new gi};t--;)this.push(e[t])}function tt(e,t){var n=e.data;return(typeof t=="string"||xr(t)?n.set.has(t):n.hash[t])?0:-1}function nt(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function rt(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function it(e,t,n,r){for(var i=-1,s=e.length,o=r,u=o;++i<s;){var a=e[i],f=+t(a);n(f,o)&&(o=f,u=a)}for(i=u===r?-1:i;++i<s;)if(a=e[i],+t(a)===r)return a;return u}function st(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function ot(e,t){for(var n=-1,r=e.length,i=Kr(r);++n<r;)i[n]=t(e[n],n,e);return i}function ft(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function lt(e,t,n,r){var i=-1,s=e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function ct(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ht(e,t,n){var r=e[t];(n===n?n===r:r!==r)&&(n!==w||t in e)||(e[t]=n)}function pt(e,t,n){var r=e[t];(n!==w&&(n===n?n!==r:r===r)||typeof t=="number"&&n===w&&!(t in e))&&(e[t]=n)}function dt(e,t){return e&&hn(t,Hr(t),e)}function vt(e,t){for(var n=-1,r=null==e,i=t.length,s=Kr(i);++n<i;)s[n]=r?w:Dr(e,t[n]);return s}function mt(e,t,n,r,i,s,o){var u;if(n&&(u=i?n(e,r,i,s,o):n(e)),u!==w)return u;if(!xr(e))return e;if(r=Ss(e)){if(u=jn(e),!t)return cn(e,u)}else{var a=hi.call(e),f="[object Function]"==a;if("[object Object]"!=a&&"[object Arguments]"!=a&&(!f||i))return K[a]?In(e,a,t):i?e:{};if(h(e))return i?e:{};if(u=Fn(f?{}:e),!t)return dt(u,e)}for(s||(s=[]),o||(o=[]),i=s.length;i--;)if(s[i]==e)return o[i];return s.push(e),o.push(u),(r?nt:Tt)(e,function(r,i){u[i]=mt(r,t,n,i,e,s,o)}),u}function gt(e,t,n){if(typeof e!="function")throw new ii("Expected a function");return Ci(function(){e.apply(w,n)},t)}function yt(e,n){var r=e?e.length:0,i=[];if(!r)return i;var s=-1,o=_n(),u=o===t,a=u&&n.length>=200&&Ai&&gi?new et(n):null,f=n.length;a&&(o=tt,u=!1,n=a);e:for(;++s<r;)if(a=e[s],u&&a===a){for(var l=f;l--;)if(n[l]===a)continue e;i.push(a)}else 0>o(n,a,0)&&i.push(a);return i}function bt(e,t){var n=!0;return Ui(e,function(e,r,i){return n=!!t(e,r,i)}),n}function wt(e,t){var n=[];return Ui(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Et(e,t,n,r){var i;return n(e,function(e,n,s){return t(e,n,s)?(i=r?n:e,!1):void 0}),i}function St(e,t,n,r){r||(r=[]);for(var i=-1,s=e.length;++i<s;){var o=e[i];xr(o)&&Un(o)&&(n||Ss(o)||wr(o))?t?St(o,t,n,r):ft(r,o):n||(r[r.length]=o)}return r}function xt(e,t){return null==e?e:Wi(e,t,Br)}function Tt(e,t){return e&&Wi(e,t,Hr)}function Nt(e,t){return e&&Xi(e,t,Hr)}function Ct(e,t){return st(t,function(t){return Sr(e[t])})}function kt(e,t){t=Xn(t,e)?[t+""]:Zn(t);for(var n=0,r=t.length;null!=e&&r>n;)e=e[t[n++]];return n&&n==r?e:w}function Lt(e,t){return null!=e&&fi.call(e,t)}function At(e,t){return null!=e&&t in ti(e)}function Ot(e,t,n,r,i,s){if(e===t)return!0;if(null==e||null==t||!xr(e)&&!p(t))return e!==e&&t!==t;e:{var o=Ss(e),u=Ss(t),a="[object Array]",f="[object Array]";o||(a=hi.call(e),"[object Arguments]"==a?a="[object Object]":"[object Object]"!=a&&(o=Ar(e))),u||(f=hi.call(t),"[object Arguments]"==f?f="[object Object]":"[object Object]"!=f&&Ar(t));var l="[object Object]"==a&&!h(e),u="[object Object]"==f&&!h(t),f=a==f;if(!f||o||l){if(!r&&(a=l&&fi.call(e,"__wrapped__"),u=u&&fi.call(t,"__wrapped__"),a||u)){e=Ot(a?e.value():e,u?t.value():t,n,r,i,s);break e}if(f){for(i||(i=[]),s||(s=[]),a=i.length;a--;)if(i[a]==e){e=s[a]==t;break e}i.push(e),s.push(t),e=(o?kn:An)(e,t,Ot,n,r,i,s),i.pop(),s.pop()}else e=!1}else e=Ln(e,t,a)}return e}function Mt(e,t,n,r){var i=n.length,s=i,o=!r;if(null==e)return!s;for(e=ti(e);i--;){var u=n[i];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<s;){var u=n[i],a=u[0],f=e[a],l=u[1];if(o&&u[2]){if(f===w&&!(a in e))return!1}else{var u=[],c=[],a=r?r(f,l,a,e,t,u,c):w;if(a===w?!Ot(l,f,r,!0,u,c):!a)return!1}}return!0}function _t(e){var t=typeof e;return"function"==t?e:null==e?zr:"object"==t?Ss(e)?Bt(e[0],e[1]):Ht(e):Jr(e)}function Dt(e){e=null==e?e:ti(e);var t,n=[];for(t in e)n.push(t);return n}function Pt(e,t){var n=-1,r=Un(e)?Kr(e.length):[];return Ui(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function Ht(e){var t=Pn(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(r!==w||n in ti(e))}}return function(n){return Mt(n,e,t)}}function Bt(e,t){return function(n){var r=Dr(n,e);return r===w&&r===t?Pr(n,e):Ot(t,r,w,!0)}}function jt(e,t,n,r,i){var s=Ss(t)||Ar(t)?w:Br(t);nt(s||t,function(o,u){if(s&&(u=o,o=t[u]),xr(o)){r||(r=[]),i||(i=[]);e:{for(var a=u,f=r,l=i,c=f.length,h=e[a],p=t[a];c--;){var d=f[c];if(d==p||d==h){pt(e,a,l[c]);break e}}c=n?n(h,p,a+"",e,t,f,l):w,(d=c===w)&&(c=p,Ss(p)||Ar(p)?c=Ss(h)?h:xr(h)&&Un(h)?cn(h):[]:Cr(p)||wr(p)?c=wr(h)?_r(h):xr(h)?h:{}:d=Sr(p)),f.push(p),l.push(c),d&&jt(c,p,n,f,l),pt(e,a,c)}}else a=n?n(e[u],o,u+"",e,t,r,i):w,a===w&&(a=o),pt(e,u,a)})}function Ft(e,t){return e=ti(e),lt(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function It(e,t){var n={};return xt(e,function(e,r){t(e)&&(n[r]=e)}),n}function qt(e){return function(t){return null==t?w:t[e]}}function Rt(e){return function(t){return kt(t,e)}}function Ut(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(r==n||i!=s){var s=i;if(zn(i))ki.call(e,i,1);else if(Xn(i,e))delete e[i];else{var i=Zn(i),o=Qn(e,i);null!=o&&delete o[ir(i)]}}}return e}function zt(e,t){return e+Oi(Bi()*(t-e+1))}function Wt(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Xt(e,t,n,r){t=Xn(t,e)?[t+""]:Zn(t);for(var i=-1,s=t.length,o=s-1,u=e;null!=u&&++i<s;){var a=t[i];if(xr(u)){var f=n;if(i!=o){var l=u[a],f=r?r(l,a,u):w;f===w&&(f=null==l?zn(t[i+1])?[]:{}:l)}ht(u,a,f)}u=u[a]}return e}function Vt(e,t,n){var r=-1,i=e.length;for(t=null==t?0:Yn(t),0>t&&(t=-t>i?0:i+t),n=n===w||n>i?i:Yn(n),0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0,n=Kr(i);++r<i;)n[r]=e[r+t];return n}function $t(e,t){var n;return Ui(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Jt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function Kt(e,t,n){var r=Dn(),i=-1;return t=ot(t.length?t:Kr(1),function(e){return r(e)}),e=Pt(e,function(e){return{a:ot(t,function(t){return t(e)}),b:++i,c:e}}),Jt(e,function(e,t){var r;e:{r=-1;for(var i=e.a,s=t.a,o=i.length,a=n.length;++r<o;){var f=u(i[r],s[r]);if(f){if(r>=a){r=f;break e}r=f*("asc"===n[r]?1:-1);break e}}r=e.b-t.b}return r})}function Qt(e,n){var r=e.length;if(!r)return[];for(var i=0,s=_n(),o=s===t,u=e[0],a=n?n(u):u,f=o?a:[a],l=0,c=[u];++i<r;)u=e[i],a=n?n(u):u,o?(f===f?f!==a:a===a)&&(f=a,c[++l]=u):0>s(f,a,0)&&(f[++l]=a,c[l]=u);return c}function Gt(e,t){for(var n=-1,r=e.length,i=0;++n<r;)i+=+t(e[n])||0;return i}function Yt(e,t){for(var n=-1,r=Kr(e);++n<e;)r[n]=t(n);return r}function Zt(e,n){var r=-1,i=_n(),s=e.length,o=i===t,u=o&&s>=200,a=u&&Ai&&gi?new et(void 0):null,f=[];a?(i=tt,o=!1):(u=!1,a=n?[]:f);e:for(;++r<s;){var l=e[r],c=n?n(l):l;if(o&&c===c){for(var h=a.length;h--;)if(a[h]===c)continue e;n&&a.push(c),f.push(l)}else 0>i(a,c,0)&&((n||u)&&a.push(c),f.push(l))}return f}function en(e,t){return ot(t,function(t){return e[t]})}function tn(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?Vt(e,r?0:s,r?s+1:i):Vt(e,r?s+1:0,r?i:s)}function nn(e,t){var n=e;return n instanceof Y&&(n=n.value()),lt(t,function(e,t){return t.func.apply(t.thisArg,ft([e],t.args))},n)}function rn(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&2147483647>=i){for(;i>r;){var s=r+i>>>1,o=e[s];(n?t>=o:t>o)&&null!==o?r=s+1:i=s}return i}return sn(e,t,zr,n)}function sn(e,t,n,r){t=n(t);for(var i=0,s=e?e.length:0,o=t!==t,u=null===t,a=t===w;s>i;){var f=Oi((i+s)/2),l=n(e[f]),c=l!==w,h=l===l;(o?h||r:u?h&&c&&(r||null!=l):a?h&&(r||c):null==l?0:r?t>=l:t>l)?i=f+1:s=f}return Pi(s,4294967294)}function on(e){var t=new vi(e.byteLength);return(new yi(t)).set(new yi(e)),t}function un(e,t,n){for(var r=n.length,i=-1,s=Di(e.length-r,0),o=-1,u=t.length,a=Kr(u+s);++o<u;)a[o]=t[o];for(;++i<r;)a[n[i]]=e[i];for(;s--;)a[o++]=e[i++];return a}function ln(e,t,n){for(var r=-1,i=n.length,s=-1,o=Di(e.length-i,0),u=-1,a=t.length,f=Kr(o+a);++s<o;)f[s]=e[s];for(o=s;++u<a;)f[o+u]=t[u];for(;++r<i;)f[o+n[r]]=e[s++];return f}function cn(e,t){var n=-1,r=e.length;for(t||(t=Kr(r));++n<r;)t[n]=e[n];return t}function hn(e,t,n){return pn(e,t,n)}function pn(e,t,n,r){n||(n={});for(var i=-1,s=t.length;++i<s;){var o=t[i],u=r?r(n[o],e[o],o,n,e):e[o];ht(n,o,u)}return n}function dn(e,t){return function(n,r){var i=t?t():{};if(r=Dn(r),Ss(n))for(var s=-1,o=n.length;++s<o;){var u=n[s];e(i,u,r(u),n)}else Ui(n,function(t,n,s){e(i,t,r(t),s)});return i}}function vn(e){return yr(function(t,n){var r=-1,i=null==t?0:n.length,s=i>1?n[i-1]:w,o=i>2?n[2]:w,s=typeof s=="function"?(i--,s):w;for(o&&Wn(n[0],n[1],o)&&(s=3>i?w:s,i=1),t=ti(t);++r<i;)(o=n[r])&&e(t,o,s);return t})}function mn(e,t){return function(n,r){if(null==n)return n;if(!Un(n))return e(n,r);for(var i=n.length,s=t?i:-1,o=ti(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function gn(e){return function(t,n,r){var i=ti(t);r=r(t);for(var s=r.length,o=e?s:-1;e?o--:++o<s;){var u=r[o];if(!1===n(i[u],u,i))break}return t}}function yn(e,t){function n(){return(this&&this!==ut&&this instanceof n?r:e).apply(t,arguments)}var r=wn(e);return n}function bn(e){return function(t){return lt(Ur(Ir(t)),e,"")}}function wn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ri(e.prototype),t=e.apply(n,t);return xr(t)?t:n}}function En(e){return function(){for(var t,n=arguments.length,r=e?n:-1,i=0,s=Kr(n);e?r--:++r<n;){var o=s[i++]=arguments[r];if(typeof o!="function")throw new ii("Expected a function");!t&&G.prototype.thru&&"wrapper"==Mn(o)&&(t=new G([],!0))}for(r=t?-1:n;++r<n;){var o=s[r],i=Mn(o),u="wrapper"==i?$i(o):w;t=u&&Vn(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?t[Mn(u[0])].apply(t,u[3]):1==o.length&&Vn(o)?t[i]():t.thru(o)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Ss(r)&&r.length>=200)return t.plant(r).value();for(var i=0,e=n?s[i].apply(this,e):r;++i<n;)e=s[i].call(this,e);return e}}}function Sn(e,t,n,r,i,s,o,u,a,f){function l(){for(var b=arguments.length,E=b,S=Kr(b);E--;)S[E]=arguments[E];if(r&&(S=un(S,r,i)),s&&(S=ln(S,s,o)),d||g){var E=l.placeholder,x=v(S,E),b=b-x.length;if(f>b){var T=u?cn(u):w,b=Di(f-b,0),N=d?x:w,x=d?w:x,C=d?S:w,S=d?w:S;return t|=d?32:64,t&=~(d?64:32),m||(t&=-4),S=[e,t,n,C,N,S,x,T,a,b],T=Sn.apply(w,S),Vn(e)&&Ki(T,S),T.placeholder=E,T}}if(E=h?n:this,T=p?E[e]:e,u)for(b=S.length,N=Pi(u.length,b),x=cn(S);N--;)C=u[N],S[N]=zn(C,b)?x[C]:w;return c&&S.length>a&&(S.length=a),this&&this!==ut&&this instanceof l&&(T=y||wn(e)),T.apply(E,S)}var c=128&t,h=1&t,p=2&t,d=8&t,m=4&t,g=16&t,y=p?w:wn(e);return l}function xn(e,t,n){return e=e.length,t=Yn(t),t&&t>e?(t-=e,n=n===w?" ":n+"",qr(n,Li(t/n.length)).slice(0,t)):""}function Tn(e,t,n,r){function i(){for(var t=-1,u=arguments.length,a=-1,f=r.length,l=Kr(f+u);++a<f;)l[a]=r[a];for(;u--;)l[a++]=arguments[++t];return(this&&this!==ut&&this instanceof i?o:e).apply(s?n:this,l)}var s=1&t,o=wn(e);return i}function Nn(e){var t=Zr[e];return function(e,n){return(n=n===w?0:Yn(n))?(n=Ti(10,n),t(e*n)/n):t(e)}}function Cn(e,t,n,r,i,s,o,u){var a=2&t;if(!a&&typeof e!="function")throw new ii("Expected a function");var f=r?r.length:0;if(f||(t&=-97,r=i=w),f-=i?i.length:0,64&t){var l=r,c=i;r=i=w}o=null==o?o:Di(Yn(o),0),u=null==u?u:Yn(u);var h=a?w:$i(e);return n=[e,t,n,r,i,l,c,s,o,u],h&&(r=n[1],t=h[1],u=r|t,i=128==t&&8==r||128==t&&256==r&&h[8]>=n[7].length||384==t&&8==r,(128>u||i)&&(1&t&&(n[2]=h[2],u|=1&r?0:4),(r=h[3])&&(i=n[3],n[3]=i?un(i,r,h[4]):cn(r),n[4]=i?v(n[3],"__lodash_placeholder__"):cn(h[4])),(r=h[5])&&(i=n[5],n[5]=i?ln(i,r,h[6]):cn(r),n[6]=i?v(n[5],"__lodash_placeholder__"):cn(h[6])),(r=h[7])&&(n[7]=cn(r)),128&t&&(n[8]=null==n[8]?h[8]:Pi(n[8],h[8])),null==n[9]&&(n[9]=h[9]),n[0]=h[0],n[1]=u),t=n[1],u=n[9]),n[9]=null==u?a?0:e.length:Di(u-f,0),e=1==t?yn(n[0],n[2]):32!=t&&33!=t||n[4].length?Sn.apply(w,n):Tn.apply(w,n),(h?Vi:Ki)(e,n)}function kn(e,t,n,r,i,s,o){var u=-1,a=e.length,f=t.length;if(!(a==f||i&&f>a))return!1;for(;++u<a;){var l=e[u],f=t[u];if(r)var c=i?r(f,l,u,t,e,s,o):r(l,f,u,e,t,s,o);if(c!==w){if(c)continue;return!1}if(i){if(!ct(t,function(e){return l===e||n(l,e,r,i,s,o)}))return!1}else if(l!==f&&!n(l,f,r,i,s,o))return!1}return!0}function Ln(e,t,n){switch(n){case"[object Boolean]":case"[object Date]":return+e==+t;case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object Number]":return e!=+e?t!=+t:e==+t;case"[object RegExp]":case"[object String]":return e==t+""}return!1}function An(e,t,n,r,i,s,o){var u=Hr(e),a=u.length,f=Hr(t).length;if(a!=f&&!i)return!1;for(f=a;f--;){var l=u[f];if(!(i?l in t:fi.call(t,l)))return!1}for(var c=i;++f<a;){var l=u[f],h=e[l],p=t[l];if(r)var d=i?r(p,h,l,t,e,s,o):r(h,p,l,e,t,s,o);if(d===w?!n(h,p,r,i,s,o):!d)return!1;c||(c="constructor"==l)}return c||(n=e.constructor,r=t.constructor,!(n!=r&&"constructor"in e&&"constructor"in t)||typeof n=="function"&&n instanceof n&&typeof r=="function"&&r instanceof r)?!0:!1}function On(e,t){return e===w?t:e}function Mn(e){for(var t=e.name+"",n=qi[t],r=n?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function _n(e,n,r){var i=d.indexOf||rr,i=i===rr?t:i;return e?i(e,n,r):i}function Dn(){var e=d.iteratee||Wr,e=e===Wr?_t:e;return arguments.length?e(arguments[0],arguments[1]):e}function Pn(e){e=jr(e);for(var t=e.length;t--;){var n,r=e[t];n=e[t][1],n=n===n&&!xr(n),r[2]=n}return e}function Hn(e,t){var n=null==e?w:e[t];return Tr(n)?n:w}function Bn(e,t,n){if(null==e)return!1;var r=n(e,t);return r||Xn(t)||(t=Zn(t),e=Qn(e,t),null!=e&&(t=ir(t),r=n(e,t))),r||$n(e&&e.length)&&zn(t,e.length)&&(Ss(e)||wr(e)||Lr(e))}function jn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&fi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Fn(e){return e=e.constructor,typeof e=="function"&&e instanceof e?new e:{}}function In(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return on(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return t=e.buffer,new r(n?on(t):t,e.byteOffset,e.length);case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":var i=new r(e.source,I.exec(e));i.lastIndex=e.lastIndex}return i}function qn(e){var t=e?e.length:0,t=t&&$n(t)&&(Ss(e)||wr(e)||Lr(e))&&t||0;return Yt(t,ri)}function Rn(e,t,n){return Xn(t,e)||(t=Zn(t),e=Qn(e,t),t=ir(t)),t=null==e?e:e[t],null==t?w:t.apply(e,n)}function Un(e){return null!=e&&(typeof e!="function"||"[object Function]"!=hi.call(e))&&$n(Ji(e))}function zn(e,t){return e=typeof e=="number"||U.test(e)?+e:-1,e>-1&&0==e%1&&(null==t?9007199254740991:t)>e}function Wn(e,t,n){if(!xr(n))return!1;var r=typeof t;return("number"==r?Un(n)&&zn(t,n.length):"string"==r&&t in n)?(t=n[t],e===e?e===t:t!==t):!1}function Xn(e,t){return typeof e=="number"?!0:!Ss(e)&&(_.test(e)||!M.test(e)||null!=t&&e in ti(t))}function Vn(e){var t=Mn(e),n=d[t];return typeof n=="function"&&t in Y.prototype?e===n?!0:(t=$i(n),!!t&&e===t[0]):!1}function $n(e){return typeof e=="number"&&e>-1&&0==e%1&&9007199254740991>=e}function Jn(e){var t=!!e&&e.constructor;return e===(typeof t=="function"&&t.prototype||oi)}function Kn(e,t,n,r,i,s,o){return xr(e)&&(s.push(e),o.push(e),jt(e,t,Kn,s,o)),e===w?t:e}function Qn(e,t){return 1==t.length?e:Dr(e,Vt(t,0,-1))}function Gn(e){return typeof e=="function"?e:zr}function Yn(e){return Oi(e)||0}function Zn(e){if(Ss(e))return e;var t=[];return r(e).replace(D,function(e,n,r,i){t.push(r?i.replace(j,"$1"):n||e)}),t}function er(e){return e instanceof Y?e.clone():new G(e.__wrapped__,e.__chain__,cn(e.__actions__))}function tr(e,t,n){return e&&e.length?(t=n||null==t?1:t,Vt(e,0>t?0:t)):[]}function nr(e,t,n){var r=e?e.length:0;return r?(t=n||null==t?1:Yn(t),t=r-t,Vt(e,0,0>t?0:t)):[]}function rr(e,n,r){var i=e?e.length:0;return i?(r&&(r=Yn(r),r=0>r?Di(i+r,0):r),t(e,n,r||0)):-1}function ir(e){var t=e?e.length:0;return t?e[t-1]:w}function sr(e){if(!e||!e.length)return[];var t=0;return e=st(e,function(e){return xr(e)&&Un(e)?(t=Di(e.length,t),!0):void 0}),Yt(t,function(t){return ot(e,qt(t))})}function or(e,t){if(!e||!e.length)return[];var n=sr(e);return null==t?n:ot(n,function(e){return lt(e,t,w,!0)})}function ur(e){return e=d(e),e.__chain__=!0,e}function ar(e,t){return t(e)}function fr(e,t){return typeof t=="function"&&Ss(e)?nt(e,t):Ui(e,Gn(t))}function lr(e,t){var n;if(typeof t=="function"&&Ss(e)){for(n=e.length;n--&&!1!==t(e[n],n,e););n=e}else n=zi(e,Gn(t));return n}function cr(e,t,n){if(n||null==t)return e=Un(e)?e:Fr(e),r=e.length,r>0?e[zt(0,r-1)]:w;n=-1,e=Mr(e);var r=e.length,i=r-1;for(t=Pi(0>t?0:Yn(t),r);++n<t;){var r=zt(n,i),s=e[r];e[r]=e[n],e[n]=s}return e.length=t,e}function hr(e){return null==e?0:(e=Un(e)?e:Hr(e),e.length)}function pr(e,t){var n;if(typeof t!="function")throw new ii("Expected a function");return e=Yn(e),function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=w),n}}function dr(e,t,n){return t=n?w:t,e=Cn(e,8,w,w,w,w,w,t),e.placeholder=dr.placeholder,e}function vr(e,t,n){return t=n?w:t,e=Cn(e,16,w,w,w,w,w,t),e.placeholder=vr.placeholder,e}function mr(e,t,n){function r(t,n){n&&wi(n),a=h=p=w,t&&(d=ls(),f=e.apply(c,u),h||a||(u=c=w))}function i(){var e=t-(ls()-l);0>=e||e>t?r(p,a):h=Ci(i,e)}function s(){r(g,h)}function o(){if(u=arguments,l=ls(),c=this,p=g&&(h||!v),!1===m)var n=v&&!h;else{a||v||(d=l);var r=m-(l-d),o=0>=r||r>m;o?(a&&(a=wi(a)),d=l,f=e.apply(c,u)):a||(a=Ci(s,r))}return o&&h?h=wi(h):h||t===m||(h=Ci(i,t)),n&&(o=!0,f=e.apply(c,u)),!o||h||a||(u=c=w),f}var u,a,f,l,c,h,p,d=0,v=!1,m=!1,g=!0;if(typeof e!="function")throw new ii("Expected a function");return t=0>t?0:+t||0,xr(n)&&(v=!!n.leading,m="maxWait"in n&&Di(+n.maxWait||0,t),g="trailing"in n?!!n.trailing:g),o.cancel=function(){h&&wi(h),a&&wi(a),d=0,a=h=p=w},o}function gr(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new ii("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;return s.has(i)?s.get(i):(r=e.apply(this,r),n.cache=s.set(i,r),r)};return n.cache=new gr.Cache,n}function yr(e,t){if(typeof e!="function")throw new ii("Expected a function");return t=Di(t===w?e.length-1:Yn(t),0),function(){for(var n=arguments,r=-1,i=Di(n.length-t,0),s=Kr(i);++r<i;)s[r]=n[t+r];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}for(i=Kr(t+1),r=-1;++r<t;)i[r]=n[r];return i[t]=s,e.apply(this,i)}}function br(e,t){return e>t}function wr(e){return p(e)&&Un(e)&&fi.call(e,"callee")&&!Ni.call(e,"callee")}function Er(e){return p(e)&&typeof e.message=="string"&&"[object Error]"==hi.call(e)}function Sr(e){return xr(e)&&"[object Function]"==hi.call(e)}function xr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Tr(e){return null==e?!1:Sr(e)?di.test(ai.call(e)):p(e)&&(h(e)?di:R).test(e)}function Nr(e){return typeof e=="number"||p(e)&&"[object Number]"==hi.call(e)}function Cr(e){return!p(e)||"[object Object]"!=hi.call(e)||h(e)?!1:(e=typeof e.constructor=="function"?Si(e):oi,null===e?!0:(e=e.constructor,typeof e=="function"&&e instanceof e&&ai.call(e)==ci))}function kr(e){return xr(e)&&"[object RegExp]"==hi.call(e)}function Lr(e){return typeof e=="string"||p(e)&&"[object String]"==hi.call(e)}function Ar(e){return p(e)&&$n(e.length)&&!!J[hi.call(e)]}function Or(e,t){return t>e}function Mr(e){return Un(e)?e.length?cn(e):[]:Fr(e)}function _r(e){return hn(e,Br(e))}function Dr(e,t,n){return e=null==e?w:kt(e,t),e===w?n:e}function Pr(e,t){return Bn(e,t,At)}function Hr(e){var t=Jn(e);if(!t&&!Un(e))return _i(ti(e));var n,r=qn(e),i=r.length,s=!!i;for(n in e)!fi.call(e,n)||s&&zn(n,i)||t&&"constructor"==n||r.push(n);return r}function Br(e){for(var t=-1,n=Jn(e),r=Dt(e),i=r.length,s=qn(e),o=s.length,u=!!o;++t<i;){var a=r[t];u&&zn(a,o)||"constructor"==a&&(n||!fi.call(e,a))||s.push(a)}return s}function jr(e){return ot(Hr(e),function(t){return[t,e[t]]})}function Fr(e){return e?en(e,Hr(e)):[]}function Ir(e){return(e=r(e))&&e.replace(z,a).replace(B,"")}function qr(e,t){var n="";if(e=r(e),t=Yn(t),1>t||t==Fi||t==ji||!e)return n;do t%2&&(n+=e),t=Oi(t/2),e+=e;while(t);return n}function Rr(e,t,n){return(e=r(e))?n||t===w?e.slice(m(e),g(e)+1):(t+="",e.slice(i(e,t),s(e,t)+1)):e}function Ur(e,t,n){return e=r(e),t=n?w:n,e.match(t||V)||[]}function zr(e){return e}function Wr(e){return p(e)&&!Ss(e)?Xr(e):_t(e)}function Xr(e){return Ht(mt(e,!0))}function Vr(e,t,n){var r=Hr(t),i=Ct(t,r);null!=n||xr(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ct(t,Hr(t)));var s=xr(n)&&"chain"in n?n.chain:!0,o=Sr(e);return nt(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=cn(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ft([this.value()],arguments))})}),e}function $r(){}function Jr(e){return Xn(e)?qt(e):Rt(e)}o=o?at.defaults(ut.Object(),o,at.pick(ut,$)):ut;var Kr=o.Array,Qr=o.Date,Gr=o.Error,Yr=o.Function,Zr=o.Math,ei=o.Number,ti=o.Object,ni=o.RegExp,ri=o.String,ii=o.TypeError,si=Kr.prototype,oi=ti.prototype,ui=ri.prototype,ai=Yr.prototype.toString,fi=oi.hasOwnProperty,li=0,ci=ai.call(ti),hi=oi.toString,pi=ut._,di=ni("^"+ai.call(fi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vi=o.ArrayBuffer,mi=o.Reflect,gi=Hn(o,"Set"),yi=o.Uint8Array,bi=Hn(o,"WeakMap"),wi=o.clearTimeout,Ei=mi?mi.enumerate:w,Si=ti.getPrototypeOf,xi=o.parseFloat,Ti=Zr.pow,Ni=oi.propertyIsEnumerable,Ci=o.setTimeout,ki=si.splice,Li=Zr.ceil,Ai=Hn(ti,"create"),Oi=Zr.floor,Mi=o.isFinite,_i=ti.keys,Di=Zr.max,Pi=Zr.min,Hi=o.parseInt,Bi=Zr.random,ji=ei.NEGATIVE_INFINITY,Fi=ei.POSITIVE_INFINITY,Ii=bi&&new bi,qi={};d.templateSettings={escape:L,evaluate:A,interpolate:O,variable:"",imports:{_:d}};var Ri=function(){function e(){}return function(t){if(xr(t)){e.prototype=t;var n=new e;e.prototype=w}return n||{}}}(),Ui=mn(Tt),zi=mn(Nt,!0),Wi=gn(),Xi=gn(!0);Ei&&!Ni.call({valueOf:1},"valueOf")&&(Dt=function(e){for(var t=Ei(e),n=[];!(e=t.next()).done;)n.push(e.value);return n});var Vi=Ii?function(e,t){return Ii.set(e,t),e}:zr,$i=Ii?function(e){return Ii.get(e)}:$r,Ji=qt("length"),Ki=function(){var e=0,t=0;return function(n,r){var i=ls(),s=16-(i-t);if(t=i,s>0){if(150<=++e)return n}else e=0;return Vi(n,r)}}(),Qi=yr(function(e,t){return xr(e)&&Un(e)?yt(e,St(t,!1,!0)):[]}),Gi=yr(function(e){for(var n=e.length,r=n,i=Kr(l),s=_n(),o=s===t,u=[];r--;){var a=e[r]=Un(a=e[r])?a:[];i[r]=o&&a.length>=120&&Ai&&gi?new et(r&&a):null}var o=e[0],f=-1,l=o?o.length:0,c=i[0];e:for(;++f<l;)if(a=o[f],0>(c?tt(c,a):s(u,a,0))){for(r=n;--r;){var h=i[r];if(0>(h?tt(h,a):s(e[r],a,0)))continue e}c&&c.push(a),u.push(a)}return u}),Yi=yr(function(e,t){t=ot(St(t),ri);var n=vt(e,t);return Ut(e,t.sort(u)),n}),Zi=yr(function(e){return e=St(e,!1,!0),Zt(e)}),es=yr(function(e,t){return xr(e)&&Un(e)?yt(e,t):[]}),ts=yr(sr),ns=yr(function(e){var t=e.length,t=t>1?e[t-1]:w,t=typeof t=="function"?(e.length--,t):w;return or(e,t)}),rs=yr(function(e){return e=St(e),this.thru(function(t){t=Ss(t)?t:[ti(t)];for(var n=e,r=-1,i=t.length,s=-1,o=n.length,u=Kr(i+o);++r<i;)u[r]=t[r];for(;++s<o;)u[r++]=n[s];return u})}),is=dn(function(e,t,n){fi.call(e,n)?++e[n]:e[n]=1}),ss=dn(function(e,t,n){fi.call(e,n)?e[n].push(t):e[n]=[t]}),os=yr(function(e,t,n){var r=-1,i=typeof t=="function",s=Xn(t),o=Un(e)?Kr(e.length):[];return Ui(e,function(e){var u=i?t:s&&null!=e?e[t]:w;o[++r]=u?u.apply(e,n):Rn(e,t,n)}),o}),us=dn(function(e,t,n){e[n]=t}),as=dn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),fs=yr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Wn(e,t[0],t[1])?t=[]:n>2&&Wn(t[0],t[1],t[2])&&(t.length=1),Kt(e,St(t),[])}),ls=Qr.now,cs=yr(function(e,t,n){var r=1;if(n.length)var i=v(n,cs.placeholder),r=32|r;return Cn(e,r,t,n,i)}),hs=yr(function(e,t){return nt(St(t),function(t){e[t]=Cn(e[t],1,e)}),e}),ps=yr(function(e,t,n){var r=3;if(n.length)var i=v(n,ps.placeholder),r=32|r;return Cn(t,r,e,n,i)}),ds=yr(function(e,t){return gt(e,1,t)}),vs=yr(function(e,t,n){return gt(e,t,n)}),ms=En(),gs=En(!0),ys=yr(function(e,t){if(t=St(t),typeof e!="function"||!rt(t,n))throw new ii("Expected a function");var r=t.length;return yr(function(n){for(var i=Pi(n.length,r);i--;)n[i]=t[i](n[i]);return e.apply(this,n)})}),bs=yr(function(e,t){var n=v(t,bs.placeholder);return Cn(e,32,w,t,n)}),ws=yr(function(e,t){var n=v(t,ws.placeholder);return Cn(e,64,w,t,n)}),Es=yr(function(e,t){return Cn(e,256,w,w,w,St(t))}),Ss=Kr.isArray,xs=vn(function(e,t){hn(t,Hr(t),e)}),Ts=vn(function(e,t,n){pn(t,Hr(t),e,n)}),Ns=yr(function(e,t){return vt(e,St(t))}),Cs=yr(function(e){return e.push(w,On),As.apply(w,e)}),ks=yr(function(e){return e.push(w,Kn),Ms.apply(w,e)}),Ls=vn(function(e,t){hn(t,Br(t),e)}),As=vn(function(e,t,n){pn(t,Br(t),e,n)}),Os=vn(function(e,t){jt(e,t)}),Ms=vn(function(e,t,n){jt(e,t,n)}),_s=yr(function(e,t){return null==e?{}:(t=ot(St(t),ri),Ft(e,yt(Br(e),t)))}),Ds=yr(function(e,t){return null==e?{}:Ft(e,St(t))}),Ps=bn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Hs=bn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Bs=bn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),js=bn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Fs=yr(function(e,t){try{return e.apply(w,t)}catch(n){return Er(n)?n:new Gr(n)}}),Is=yr(function(e,t){return function(n){return Rn(n,e,t)}}),qs=yr(function(e,t){return function(n){return Rn(e,n,t)}}),Rs=Nn("ceil"),Us=Nn("floor"),zs=Nn("round");return d.prototype=Q.prototype,G.prototype=Ri(Q.prototype),G.prototype.constructor=G,Y.prototype=Ri(Q.prototype),Y.prototype.constructor=Y,Z.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},Z.prototype.get=function(e){return"__proto__"==e?w:this.__data__[e]},Z.prototype.has=function(e){return"__proto__"!=e&&fi.call(this.__data__,e)},Z.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},et.prototype.push=function(e){var t=this.data;typeof e=="string"||xr(e)?t.set.add(e):t.hash[e]=!0},gr.Cache=Z,d.after=function(e,t){if(typeof t!="function")throw new ii("Expected a function");return e=Yn(e),function(){return 1>--e?t.apply(this,arguments):void 0}},d.ary=function(e,t,n){return t=n?w:t,t=e&&null==t?e.length:t,Cn(e,128,w,w,w,w,t)},d.assign=xs,d.assignWith=Ts,d.at=Ns,d.before=pr,d.bind=cs,d.bindAll=hs,d.bindKey=ps,d.chain=ur,d.chunk=function(e,t){t=Di(Yn(t),0);var n=e?e.length:0;if(!n||1>t)return[];for(var r=0,i=-1,s=Kr(Li(n/t));n>r;)s[++i]=Vt(e,r,r+=t);return s},d.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var s=e[t];s&&(i[++r]=s)}return i},d.constant=function(e){return function(){return e}},d.countBy=is,d.create=function(e,t){var n=Ri(e);return t?dt(n,t):n},d.curry=dr,d.curryRight=vr,d.debounce=mr,d.defaults=Cs,d.defaultsDeep=ks,d.defer=ds,d.delay=vs,d.difference=Qi,d.drop=tr,d.dropRight=nr,d.dropRightWhile=function(e,t){return e&&e.length?tn(e,Dn(t,3),!0,!0):[]},d.dropWhile=function(e,t){return e&&e.length?tn(e,Dn(t,3),!0):[]},d.extend=Ls,d.extendWith=As,d.fill=function(e,t,n,r){var i=e?e.length:0;if(!i)return[];for(n&&typeof n!="number"&&Wn(e,t,n)&&(n=0,r=i),i=e.length,n=null==n?0:Yn(n),0>n&&(n=-n>i?0:i+n),r=r===w||r>i?i:Yn(r),0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)e[n++]=t;return e},d.filter=function(e,t){return(Ss(e)?st:wt)(e,Dn(t,3))},d.flatten=function(e){return e&&e.length?St(e):[]},d.flattenDeep=function(e){return e&&e.length?St(e,!0):[]},d.flow=ms,d.flowRight=gs,d.functions=function(e){return null==e?[]:Ct(e,Br(e))},d.groupBy=ss,d.initial=function(e){return nr(e,1)},d.intersection=Gi,d.invert=function(e,t,n){return lt(Hr(e),function(r,i){var s=e[i];return t&&!n?fi.call(r,s)?r[s].push(i):r[s]=[i]:r[s]=i,r},{})},d.invoke=os,d.iteratee=Wr,d.keyBy=us,d.keys=Hr,d.keysIn=Br,d.map=function(e,t){return(Ss(e)?ot:Pt)(e,Dn(t,3))},d.mapKeys=function(e,t){var n={};return t=Dn(t,3),Tt(e,function(e,r,i){n[t(e,r,i)]=e}),n},d.mapValues=function(e,t){var n={};return t=Dn(t,3),Tt(e,function(e,r,i){n[r]=t(e,r,i)}),n},d.matches=Xr,d.matchesProperty=function(e,t){return Bt(e,mt(t,!0))},d.memoize=gr,d.merge=Os,d.mergeWith=Ms,d.method=Is,d.methodOf=qs,d.mixin=Vr,d.modArgs=ys,d.negate=function(e){if(typeof e!="function")throw new ii("Expected a function");return function(){return!e.apply(this,arguments)}},d.omit=_s,d.omitBy=function(e,t){return t=Dn(t),It(e,function(e){return!t(e)})},d.once=function(e){return pr(2,e)},d.pairs=jr,d.partial=bs,d.partialRight=ws,d.partition=as,d.pick=Ds,d.pickBy=function(e,t){return null==e?{}:It(e,Dn(t))},d.property=Jr,d.propertyOf=function(e){return function(t){return null==e?w:kt(e,t)}},d.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=_n(),i=e.length;++n<i;)for(var s=0,o=e[n];-1<(s=r(t,o,s));)ki.call(t,s,1);return t},d.pullAt=Yi,d.range=function(e,t,n){return n&&Wn(e,t,n)&&(t=n=w),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0,t=Di(Li((t-e)/(n||1)),0),Yt(t,function(t){return t?e+=n:e})},d.rearg=Es,d.reject=function(e,t){var n=Ss(e)?st:wt;return t=Dn(t,3),n(e,function(e,n,r){return!t(e,n,r)})},d.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=Dn(t,3);++r<s;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Ut(e,i),n},d.rest=function(e){return tr(e,1)},d.restParam=yr,d.set=function(e,t,n){return null==e?e:Xt(e,t,n)},d.setWith=function(e,t,n,r){return r=typeof r=="function"?r:w,null==e?e:Xt(e,t,n,r)},d.shuffle=function(e){return cr(e,Fi)},d.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&typeof n!="number"&&Wn(e,t,n)&&(t=0,n=r),Vt(e,t,n)):[]},d.sortBy=fs,d.sortByOrder=function(e,t,n,r){return null==e?[]:(Ss(t)||(t=null==t?[]:[t]),n=r?w:n,Ss(n)||(n=null==n?[]:[n]),Kt(e,t,n))},d.sortedUniq=function(e){return e&&e.length?Qt(e):[]},d.sortedUniqBy=function(e,t){return e&&e.length?Qt(e,Dn(t)):[]},d.spread=function(e){if(typeof e!="function")throw new ii("Expected a function");return function(t){return e.apply(this,t)}},d.take=function(e,t,n){return e&&e.length?(t=n||null==t?1:t,Vt(e,0,0>t?0:t)):[]},d.takeRight=function(e,t,n){var r=e?e.length:0;return r?(t=n||null==t?1:Yn(t),t=r-t,Vt(e,0>t?0:t)):[]},d.takeRightWhile=function(e,t){return e&&e.length?tn(e,Dn(t,3),!1,!0):[]},d.takeWhile=function(e,t){return e&&e.length?tn(e,Dn(t,3)):[]},d.tap=function(e,t){return t(e),e},d.throttle=function(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new ii("Expected a function");return xr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),mr(e,t,{leading:r,maxWait:+t,trailing:i})},d.thru=ar,d.times=function(e,t){if(e=Yn(e),1>e||e==Fi||e==ji)return[];var n=4294967295,r=Pi(e,4294967295);for(t=Gn(t),e-=4294967295,r=Yt(r,t);++n<e;)t(n);return r},d.toArray=Mr,d.toPlainObject=_r,d.transform=function(e,t,n){var r=Ss(e)||Ar(e);if(t=Dn(t,4),null==n)if(r||xr(e)){var i=e.constructor;n=r?Ss(e)?new i:[]:Ri(Sr(i)?i.prototype:w)}else n={};return(r?nt:Tt)(e,function(e,r,i){return t(n,e,r,i)}),n},d.union=Zi,d.uniq=function(e){return e&&e.length?Zt(e):[]},d.uniqBy=function(e,t){return e&&e.length?Zt(e,Dn(t)):[]},d.unzip=sr,d.unzipWith=or,d.values=Fr,d.valuesIn=function(e){return null==e?en(e,Br(e)):[]},d.without=es,d.wrap=function(e,t){return t=null==t?zr:t,Cn(t,32,w,[e],[])},d.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(xr(n)&&Un(n))var r=r?ft(yt(r,n),yt(n,r)):n}return r?Zt(r):[]},d.zip=ts,d.zipObject=function(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Ss(e[0])||(t=[]);++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i},d.zipWith=ns,d.each=fr,d.eachRight=lr,Vr(d,d),d.add=function(e,t){return(+e||0)+(+t||0)},d.attempt=Fs,d.camelCase=Ps,d.capitalize=function(e){return(e=r(e))&&e.charAt(0).toUpperCase()+e.slice(1)},d.ceil=Rs,d.clone=function(e){return mt(e)},d.cloneDeep=function(e){return mt(e,!0)},d.cloneDeepWith=function(e,t){return mt(e,!0,t)},d.cloneWith=function(e,t){return mt(e,!1,t)},d.deburr=Ir,d.endsWith=function(e,t,n){e=r(e),t+="";var i=e.length;return n=n===w?i:Pi(0>n?0:Yn(n),i),n-=t.length,n>=0&&e.indexOf(t,n)==n},d.eq=function(e,t){return e===t||e!==e&&t!==t},d.escape=function(e){return(e=r(e))&&k.test(e)?e.replace(N,f):e},d.escapeRegExp=function(e){return(e=r(e))&&H.test(e)?e.replace(P,"\\$&"):e},d.every=function(e,t,n){var r=Ss(e)?rt:bt;return n&&Wn(e,t,n)&&(t=w),r(e,Dn(t,3))},d.find=function(t,n){if(n=Dn(n,3),Ss(t)){var r=e(t,n);return r>-1?t[r]:w}return Et(t,n,Ui)},d.findIndex=function(t,n){return t&&t.length?e(t,Dn(n,3)):-1},d.findKey=function(e,t){return Et(e,Dn(t,3),Tt,!0)},d.findLast=function(t,n){if(n=Dn(n,3),Ss(t)){var r=e(t,n,!0);return r>-1?t[r]:w}return Et(t,n,zi)},d.findLastIndex=function(t,n){return t&&t.length?e(t,Dn(n,3),!0):-1},d.findLastKey=function(e,t){return Et(e,Dn(t,3),Nt,!0)},d.first=function(e){return e?e[0]:w},d.floor=Us,d.forEach=fr,d.forEachRight=lr,d.forIn=function(e,t){return null==e?e:Wi(e,Gn(t),Br)},d.forInRight=function(e,t){return null==e?e:Xi(e,Gn(t),Br)},d.forOwn=function(e,t){return e&&Tt(e,Gn(t))},d.forOwnRight=function(e,t){return e&&Nt(e,Gn(t))},d.get=Dr,d.gt=br,d.gte=function(e,t){return e>=t},d.has=function(e,t){return Bn(e,t,Lt)},d.hasIn=Pr,d.identity=zr,d.includes=function(e,t,n,r){e=Un(e)?e:Fr(e);var i=e.length;return r||!n?n=0:(n=Yn(n),n=0>n?Di(i+n,0):n),typeof e=="string"||!Ss(e)&&Lr(e)?i>=n&&-1<e.indexOf(t,n):!!i&&-1<_n(e,t,n)},d.indexOf=rr,d.inRange=function(e,t,n){return t=+t||0,n===w?(n=t,t=0):n=+n||0,e>=Pi(t,n)&&e<Di(t,n)},d.isArguments=wr,d.isArray=Ss,d.isBoolean=function(e){return!0===e||!1===e||p(e)&&"[object Boolean]"==hi.call(e)},d.isDate=function(e){return p(e)&&"[object Date]"==hi.call(e)},d.isElement=function(e){return!!e&&1===e.nodeType&&p(e)&&!Cr(e)},d.isEmpty=function(e){return!p(e)||Sr(e.splice)?!hr(e):!Hr(e).length},d.isEqual=function(e,t){return Ot(e,t)},d.isEqualWith=function(e,t,n){var r=(n=typeof n=="function"?n:w)?n(e,t):w;return r===w?Ot(e,t,n):!!r},d.isError=Er,d.isFinite=function(e){return typeof e=="number"&&Mi(e)},d.isFunction=Sr,d.isMatch=function(e,t){return Mt(e,t,Pn(t))},d.isMatchWith=function(e,t,n){return n=typeof n=="function"?n:w,Mt(e,t,Pn(t),n)},d.isNaN=function(e){return Nr(e)&&e!=+e},d.isNative=Tr,d.isNil=function(e){return null==e},d.isNull=function(e){return null===e},d.isNumber=Nr,d.isObject=xr,d.isPlainObject=Cr,d.isRegExp=kr,d.isString=Lr,d.isTypedArray=Ar,d.isUndefined=function(e){return e===w},d.kebabCase=Hs,d.last=ir,d.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(n!==w&&(i=Yn(n),i=(0>i?Di(r+i,0):Pi(i,r-1))+1),t!==t)return c(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},d.lt=Or,d.lte=function(e,t){return t>=e},d.max=function(e){return e&&e.length?it(e,zr,br,ji):ji},d.maxBy=function(e,t){return e&&e.length?it(e,Dn(t),br,ji):ji},d.min=function(e){return e&&e.length?it(e,zr,Or,Fi):Fi},d.minBy=function(e,t){return e&&e.length?it(e,Dn(t),Or,Fi):Fi},d.noConflict=function(){return ut._=pi,this},d.noop=$r,d.now=ls,d.pad=function(e,t,n){e=r(e),t=Yn(t);var i=e.length;return t&&t>i?(i=(t-i)/2,t=Oi(i),i=Li(i),n=xn("",i,n),n.slice(0,t)+e+n):e},d.padLeft=function(e,t,n){return e=r(e),xn(e,t,n)+e},d.padRight=function(e,t,n){return e=r(e),e+xn(e,t,n)},d.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),e=Rr(e),Hi(e,t||(q.test(e)?16:10))},d.random=function(e,t,n){n&&Wn(e,t,n)&&(t=n=w);var r=null==e,i=null==t;return null==n&&(i&&typeof e=="boolean"?(n=e,e=1):typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=Bi(),Pi(e+n*(t-e+xi("1e-"+((n+"").length-1))),t)):zt(e,t)},d.reduce=function(e,t,n){var r=3>arguments.length;return typeof t=="function"&&Ss(e)?lt(e,t,n,r):Wt(e,Dn(t,4),n,r,Ui)},d.reduceRight=function(e,t,n){var r=3>arguments.length;if(typeof t=="function"&&Ss(e)){var i=n,s=e.length;for(r&&s&&(i=e[--s]);s--;)i=t(i,e[s],s,e);r=i}else r=Wt(e,Dn(t,4),n,r,zi);return r},d.repeat=qr,d.result=function(e,t,n){if(Xn(t,e))r=null==e?w:e[t];else{t=Zn(t);var r=Dr(e,t);e=Qn(e,t)}return r===w&&(r=n),Sr(r)?r.call(e):r},d.round=zs,d.runInContext=b,d.size=hr,d.snakeCase=Bs,d.some=function(e,t,n){var r=Ss(e)?ct:$t;return n&&Wn(e,t,n)&&(t=w),r(e,Dn(t,3))},d.sortedIndex=function(e,t){return rn(e,t)},d.sortedIndexBy=function(e,t,n){return sn(e,t,Dn(n))},d.sortedIndexOf=function(e,t){var n=e?e.length:0;if(n){var r=rn(e,t);if(n>r&&(t===t?t===e[r]:e[r]!==e[r]))return r}return-1},d.sortedLastIndex=function(e,t){return rn(e,t,!0)},d.sortedLastIndexBy=function(e,t,n){return sn(e,t,Dn(n),!0)},d.sortedLastIndexOf=function(e,t){if(e&&e.length){var n=rn(e,t,!0)-1,r=e[n];if(t===t?t===r:r!==r)return n}return-1},d.startCase=js,d.startsWith=function(e,t,n){return e=r(e),n=null==n?0:Pi(0>n?0:Yn(n),e.length),e.lastIndexOf(t,n)==n},d.sum=function(e){return e?Gt(e,zr):0},d.sumBy=function(e,t){return e&&e.length?Gt(e,Dn(t)):0},d.template=function(e,t,n){var i=d.templateSettings;n&&Wn(e,t,n)&&(t=n=w),e=r(e),t=As({},n||t,i,On),n=As({},t.imports,i.imports,On);var s,o,u=Hr(n),a=en(n,u),f=0;n=t.interpolate||W;var c="__p+='";n=ni((t.escape||W).source+"|"+n.source+"|"+(n===O?F:W).source+"|"+(t.evaluate||W).source+"|$","g");var h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,i,u,a){return r||(r=i),c+=e.slice(f,a).replace(X,l),n&&(s=!0,c+="'+__e("+n+")+'"),u&&(o=!0,c+="';"+u+";\n__p+='"),r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),f=a+t.length,t}),c+="';",(t=t.variable)||(c="with(obj){"+c+"}"),c=(o?c.replace(E,""):c).replace(S,"$1").replace(x,"$1;"),c="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",t=Fs(function(){return Yr(u,h+"return "+c).apply(w,a)}),t.source=c,Er(t))throw t;return t},d.trim=Rr,d.trimLeft=function(e,t,n){return(e=r(e))?e.slice(n||t===w?m(e):i(e,t+"")):e},d.trimRight=function(e,t,n){return(e=r(e))?n||t===w?e.slice(0,g(e)+1):e.slice(0,s(e,t+"")+1):e},d.trunc=function(e,t,n){var i=30;if(n="...",xr(t)){var s="separator"in t?t.separator:s,i="length"in t?Yn(t.length):i;n="omission"in t?r(t.omission):n}if(e=r(e),i>=e.length)return e;if(i-=n.length,1>i)return n;if(t=e.slice(0,i),s===w)return t+n;if(kr(s)){if(e.slice(i).search(s)){var o,u=e.slice(0,i);for(s.global||(s=ni(s.source,(I.exec(s)||"")+"g")),s.lastIndex=0;e=s.exec(u);)o=e.index;t=t.slice(0,null==o?i:o)}}else e.indexOf(s,i)!=i&&(s=t.lastIndexOf(s),s>-1&&(t=t.slice(0,s)));return t+n},d.unescape=function(e){return(e=r(e))&&C.test(e)?e.replace(T,y):e},d.uniqueId=function(e){var t=++li;return r(e)+t},d.words=Ur,Vr(d,function(){var e={};return Tt(d,function(t,n){d.prototype[n]||(e[n]=t)}),e}(),{chain:!1}),d.sample=cr,d.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return cr(t,e)}):cr(this.value())},d.VERSION="3.10.1",nt("bind bindKey curry curryRight partial partialRight".split(" "),function(e){d[e].placeholder=d}),nt(["drop","take"],function(e,t){Y.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new Y(this);n=null==n?1:Di(Yn(n),0);var i=this.clone();return r?i.__takeCount__=Pi(i.__takeCount__,n):i.__views__.push({size:n,type:e+(0>i.__dir__?"Right":"")}),i},Y.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),nt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=2!=n;Y.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Dn(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),nt(["first","last"],function(e,t){var n="take"+(t?"Right":"");Y.prototype[e]=function(){return this[n](1).value()[0]}}),nt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Y.prototype[e]=function(){return this.__filtered__?new Y(this):this[n](1)}}),Y.prototype.compact=function(){return this.filter(zr)},Y.prototype.find=function(e){return this.filter(e).first()},Y.prototype.findLast=function(e){return this.reverse().find(e)},Y.prototype.reject=function(e){return e=Dn(e,3),this.filter(function(t){return!e(t)})},Y.prototype.slice=function(e,t){e=null==e?0:Yn(e);var n=this;return n.__filtered__&&(e>0||0>t)?new Y(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==w&&(t=Yn(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},Y.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Y.prototype.toArray=function(){return this.take(Fi)},Tt(Y.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:first|last)$/.test(t),i=r||/^find/.test(t),s=d[r?"take"+("last"==t?"Right":""):t];s&&(d.prototype[t]=function(){var t=r?[1]:arguments,o=this.__wrapped__,u=o instanceof Y,a=t[0],f=u||Ss(o),l=function(e){return e=s.apply(d,ft([e],t)),r&&c?e[0]:e};f&&n&&typeof a=="function"&&1!=a.length&&(u=f=!1);var a={func:ar,args:[l],thisArg:w},c=this.__chain__,h=!!this.__actions__.length,p=i&&!c,u=u&&!h;return!i&&f?(o=u?o:new Y(this),o=e.apply(o,t),o.__actions__.push(a),new G(o,c)):p&&u?e.apply(this,t):(o=this.thru(l),p?r?o.value()[0]:o.value():o)})}),nt("join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?ui:si)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);d.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Tt(Y.prototype,function(e,t){var n=d[t];if(n){var r=n.name+"";(qi[r]||(qi[r]=[])).push({name:t,func:n})}}),qi[Sn(w,2).name]=[{name:"wrapper",func:w}],Y.prototype.clone=function(){var e=new Y(this.__wrapped__);return e.__actions__=cn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=cn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=cn(this.__views__),e},Y.prototype.reverse=function(){if(this.__filtered__){var e=new Y(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Y.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,r=Ss(t),i=0>n,s=r?t.length:0;e=0;for(var o=s,u=this.__views__,a=-1,f=u.length;++a<f;){var l=u[a],c=l.size;switch(l.type){case"drop":e+=c;break;case"dropRight":o-=c;break;case"take":o=Pi(o,e+c);break;case"takeRight":e=Di(e,o-c)}}if(e={start:e,end:o},o=e.start,u=e.end,e=u-o,i=i?u:o-1,o=this.__iteratees__,u=o.length,a=0,f=Pi(e,this.__takeCount__),!r||200>s||s==e&&f==e)return nn(t,this.__actions__);r=[];e:for(;e--&&f>a;){for(i+=n,s=-1,l=t[i];++s<u;){var h=o[s],c=h.type,h=h.iteratee(l);if(2==c)l=h;else if(!h){if(1==c)continue e;break e}}r[a++]=l}return r},d.prototype.chain=function(){return ur(this)},d.prototype.commit=function(){return new G(this.value(),this.__chain__)},d.prototype.concat=rs,d.prototype.plant=function(e){for(var t,n=this;n instanceof Q;){var r=er(n);t?i.__wrapped__=r:t=r;var i=r,n=n.__wrapped__}return i.__wrapped__=e,t},d.prototype.reverse=function(){var e=this.__wrapped__,t=function(e){return e.reverse()};return e instanceof Y?(this.__actions__.length&&(e=new Y(this)),e=e.reverse(),e.__actions__.push({func:ar,args:[t],thisArg:w}),new G(e,this.__chain__)):this.thru(t)},d.prototype.toString=function(){return this.value()+""},d.prototype.run=d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function(){return nn(this.__wrapped__,this.__actions__)},d}var w,E=/\b__p\+='';/g,S=/\b(__p\+=)''\+/g,x=/(__e\(.*?\)|\b__t\))\+'';/g,T=/&(?:amp|lt|gt|quot|#39|#96);/g,N=/[&<>"'`]/g,C=RegExp(T.source),k=RegExp(N.source),L=/<%-([\s\S]+?)%>/g,A=/<%([\s\S]+?)%>/g,O=/<%=([\s\S]+?)%>/g,M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_=/^\w*$/,D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,P=/[\\^$.*+?()[\]{}|]/g,H=RegExp(P.source),B=/[\u0300-\u036f\ufe20-\ufe23]/g,j=/\\(\\)?/g,F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,I=/\w*$/,q=/^0[xX]/,R=/^\[object .+?Constructor\]$/,U=/^\d+$/,z=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,W=/($^)/,X=/['\n\r\u2028\u2029\\]/g,V=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),$="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object Reflect RegExp Set String TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseFloat parseInt setTimeout".split(" "),J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J["[object Arguments]"]=J["[object Array]"]=J["[object ArrayBuffer]"]=J["[object Boolean]"]=J["[object Date]"]=J["[object Error]"]=J["[object Function]"]=J["[object Map]"]=J["[object Number]"]=J["[object Object]"]=J["[object RegExp]"]=J["[object Set]"]=J["[object String]"]=J["[object WeakMap]"]=!1;var K={};K["[object Arguments]"]=K["[object Array]"]=K["[object ArrayBuffer]"]=K["[object Boolean]"]=K["[object Date]"]=K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Number]"]=K["[object Object]"]=K["[object RegExp]"]=K["[object String]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0,K["[object Error]"]=K["[object Function]"]=K["[object Map]"]=K["[object Set]"]=K["[object WeakMap]"]=!1;var Q={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Y={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Z={"function":!0,object:!0},et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tt=Z[typeof exports]&&exports&&!exports.nodeType?exports:null,nt=Z[typeof module]&&module&&!module.nodeType?module:null,rt=o(tt&&nt&&typeof global=="object"&&global),it=o(Z[typeof self]&&self),st=o(Z[typeof window]&&window),ot=nt&&nt.exports===tt?tt:null,Z=o(Z[typeof this]&&this),ut=rt||st!==(Z&&Z.window)&&st||it||Z||Function("return this")(),at=b();(st||it||{})._=at,typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("underscore",[],function(){return at}):tt&&nt?ot?(nt.exports=at)._=at:tt._=at:ut._=at}.call(this),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function A(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(z.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function G(e,t){while((e=e[t])&&1!==e.nodeType);return e}function J(e){var t=I[e]={};return n.each(e.match(H)||[],function(e,n){t[n]=!0}),t}function L(){l.removeEventListener("DOMContentLoaded",L,!1),a.removeEventListener("load",L,!1),n.ready()}function N(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}function S(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(R,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:Q.test(r)?n.parseJSON(r):r}catch(s){}P.set(e,t,r)}else r=void 0;return r}function $(){return!0}function _(){return!1}function ab(){try{return l.activeElement}catch(e){}}function kb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function lb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function mb(e){var t=hb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function nb(e,t){for(var n=0,r=e.length;r>n;n++)O.set(e[n],"globalEval",!t||O.get(t[n],"globalEval"))}function ob(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(O.hasData(e)&&(o=O.access(e),u=O.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}P.hasData(e)&&(a=P.access(e),f=n.extend({},a),P.set(t,f))}}function pb(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function qb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&U.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function Mb(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(H)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function Nb(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===Jb;return u(t.dataTypes[0])||!s["*"]&&u("*")}function Ob(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function Pb(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function Qb(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Wb(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||Sb.test(e)?i(e,n):Wb(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Wb(e+"["+s+"]",t[s],r,i)}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/getStyles,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-dimensions,-offset,-deprecated,-event-alias,-wrap",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=a.document.documentElement,u,v=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector,w=function(e,t){if(e===t)return u=!0,0;var r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return r?1&r?e===l||n.contains(l,e)?-1:t===l||n.contains(l,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1};n.extend({find:function(e,t,r,i){var s,o,u=0;if(r=r||[],t=t||l,!e||"string"!=typeof e)return r;if(1!==(o=t.nodeType)&&9!==o)return[];if(i)while(s=i[u++])n.find.matchesSelector(s,e)&&r.push(s);else n.merge(r,t.querySelectorAll(e));return r},unique:function(e){var t,n=[],r=0,i=0;if(u=!1,e.sort(w),u){while(t=e[r++])t===e[r]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},text:function(e){var t,r="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s)return e.textContent;if(3===s||4===s)return e.nodeValue}else while(t=e[i++])r+=n.text(t);return r},contains:function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!n.contains(r)},isXMLDoc:function(e){return"HTML"!==(e.ownerDocument||e).documentElement.nodeName},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),n.extend(n.find,{matches:function(e,t){return n.find(e,null,null,t)},matchesSelector:function(e,t){return v.call(e,t)},attr:function(e,t){return e.getAttribute(t)}});var x=n.expr.match.needsContext,y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,z=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&x.test(e)?n(e):e||[],!1).length}});var B,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,D=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:C.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||B).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),y.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof B.ready?B.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};D.prototype=n.fn,B=n(l);var E=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],u=x.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(u?u.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(F[e]||n.unique(s),E.test(e)&&s.reverse()),this.pushStack(s)}});var H=/\S+/g,I={};n.Callbacks=function(e){e="string"==typeof e?I[e]||J(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var K;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(K.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return K||(K=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",L,!1),a.addEventListener("load",L,!1))),K.promise(e)},n.ready.promise();var M=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},N.uid=1,N.accepts=n.acceptData,N.prototype={key:function(e){if(!N.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=N.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(H)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var O=new N,P=new N,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,R=/([A-Z])/g;n.extend({hasData:function(e){return P.hasData(e)||O.hasData(e)},data:function(e,t,n){return P.access(e,t,n)},removeData:function(e,t){P.remove(e,t)},_data:function(e,t,n){return O.access(e,t,n)},_removeData:function(e,t){O.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=P.get(o),1===o.nodeType&&!O.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),S(o,i,s[i])));O.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){P.set(this,e)}):M(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=P.get(o,e),void 0!==r)return r;if(r=P.get(o,i),void 0!==r)return r;if(r=S(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=P.get(this,i);P.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&P.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){P.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=O.get(e,t),r&&(!i||n.isArray(r)?i=O.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return O.get(e,r)||O.access(e,r,{empty:n.Callbacks("once memory").add(function(){O.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=O.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var V="undefined";k.focusinBubbles="onfocusin"in a;var W=/^key/,X=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=O.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==V&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(H)||[""],l=t.length;while(l--)a=Z.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=O.hasData(e)&&O.get(e);if(g&&(f=g.events)){t=(t||"").match(H)||[""],l=t.length;while(l--)if(a=Z.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,O.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!Y.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,Y.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(O.get(o,"events")||{})[e.type]&&O.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(O.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=X.test(s)?this.mouseHooks:W.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ab()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ab()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?$:_):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:_,isPropagationStopped:_,isImmediatePropagationStopped:_,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=$,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=$,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=$,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=O.access(n,t);i||n.addEventListener(e,r,!0),O.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=O.access(n,t)-1;i?O.access(n,t,i):(n.removeEventListener(e,r,!0),O.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=_;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=_),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var bb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,cb=/<([\w:]+)/,db=/<|&#?\w+;/,eb=/<(?:script|style|link)/i,fb=/checked\s*(?:[^=]|=\s*.checked.)/i,gb=/^$|\/(?:java|ecma)script/i,hb=/^true\/(.*)/,ib=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,jb={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jb.optgroup=jb.option,jb.tbody=jb.tfoot=jb.colgroup=jb.caption=jb.thead,jb.th=jb.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=pb(a),o=pb(e),i=0,s=o.length;s>i;i++)qb(o[i],u[i]);if(t)if(r)for(o=o||pb(e),u=u||pb(a),i=0,s=o.length;s>i;i++)ob(o[i],u[i]);else ob(e,a);return u=pb(a,"script"),u.length>0&&nb(u,!f&&pb(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(db.test(s)){o=o||c.appendChild(t.createElement("div")),u=(cb.exec(s)||["",""])[1].toLowerCase(),a=jb[u]||jb._default,o.innerHTML=a[1]+s.replace(bb,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=pb(c.appendChild(s),"script"),f&&nb(o),r)){l=0;while(s=o[l++])gb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[O.expando],s&&(t=O.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);O.cache[s]&&delete O.cache[s]}delete P.cache[r[P.expando]]}}}),n.fn.extend({text:function(e){return M(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=kb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=kb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(pb(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&nb(pb(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(pb(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!eb.test(e)&&!jb[(cb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(bb,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(pb(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(pb(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&fb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(pb(i,"script"),lb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,pb(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,mb),l=0;u>l;l++)a=o[l],gb.test(a.type||"")&&!O.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(ib,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}}),n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var rb,sb,tb=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return M(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===V?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?sb:rb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(H);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),sb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=tb[t]||n.find.attr;tb[t]=function(e,t,n){var i,s;return n||(s=tb[t],tb[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,tb[t]=s),i}});var ub=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return M(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ub.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var vb=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(H)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(vb," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(H)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(vb," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(H)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===V||"boolean"===r)&&(this.className&&O.set(this,"__className__",this.className),this.className=this.className||e===!1?"":O.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(vb," ").indexOf(t)>=0)return!0;return!1}});var wb=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(wb,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var xb=n.now(),yb=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var zb,Ab,Bb=/#.*$/,Cb=/([?&])_=[^&]*/,Db=/^(.*?):[ \t]*([^\r\n]*)$/gm,Eb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fb=/^(?:GET|HEAD)$/,Gb=/^\/\//,Hb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ib={},Jb={},Kb="*/".concat("*");try{Ab=location.href}catch(Lb){Ab=l.createElement("a"),Ab.href="",Ab=Ab.href}zb=Hb.exec(Ab.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ab,type:"GET",isLocal:Eb.test(zb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ob(Ob(e,n.ajaxSettings),t):Ob(n.ajaxSettings,e)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(e,t){function x(e,t,o,a){var l,g,y,w,S,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",E.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=Pb(c,E,o)),w=Qb(c,w,E,l),l?(c.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(n.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(n.etag[i]=S)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),E.status=e,E.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,E]):d.rejectWith(h,[E,x,y]),E.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[E,c,l?g:y]),v.fireWith(h,[E,x]),f&&(p.trigger("ajaxComplete",[E,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=Db.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),x(0,t),this}};if(d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,c.url=((e||c.url||Ab)+"").replace(Bb,"").replace(Gb,zb[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(H)||[""],null==c.crossDomain&&(a=Hb.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===zb[1]&&a[2]===zb[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(zb[3]||("http:"===zb[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),Nb(Ib,c,t,E),2===b)return E;f=c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Fb.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(yb.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Cb.test(i)?i.replace(Cb,"$1_="+xb++):i+(yb.test(i)?"&":"?")+"_="+xb++)),c.ifModified&&(n.lastModified[i]&&E.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&E.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",c.contentType),E.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Kb+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)E.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,E,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})E[l](c[l]);if(r=Nb(Jb,c,t,E)){E.readyState=1,f&&p.trigger("ajaxSend",[E,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){E.abort("timeout")},c.timeout));try{b=1,r.send(g,x)}catch(S){if(!(2>b))throw S;x(-1,S)}}else x(-1,"No Transport");return E}return E.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};var Rb=/%20/g,Sb=/\[\]$/,Tb=/\r?\n/g,Ub=/^(?:submit|button|image|reset|file)$/i,Vb=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Wb(r,e[r],t,s);return i.join("&").replace(Rb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&Vb.test(this.nodeName)&&!Ub.test(e)&&(this.checked||!U.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(Tb,"\r\n")}}):{name:t.name,value:r.replace(Tb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Xb=0,Yb={},Zb={0:200,1223:204},$b=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var e in Yb)Yb[e]()}),k.cors=!!$b&&"withCredentials"in $b,k.ajax=$b=!!$b,n.ajaxTransport(function(e){var t;return k.cors||$b&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Xb;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Yb[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Zb[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Yb[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=_b.pop()||n.expando+"_"+xb++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(ac.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(ac,"$1"+i):e.jsonp!==!1&&(e.url+=(yb.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,_b.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=y.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var bc=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&bc)return bc.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var cc=a.jQuery,dc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=dc),e&&a.jQuery===n&&(a.jQuery=cc),n},typeof b===V&&(a.jQuery=a.$=n),n}),function(e){var t=typeof self=="object"&&self.self==self&&self||typeof global=="object"&&global.global==global&&global;if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore"),r;try{r=require("jquery")}catch(i){}e(t,exports,n,r)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,r){var i=e.Backbone,s=Array.prototype.slice;t.VERSION="1.2.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],a(e,this),i)};case 4:return function(e,i,s){return n[t](this[r],a(e,this),i,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}},u=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=o(t,i,r))})},a=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?f(e):n.isString(e)?function(t){return t.get(e)}:e},f=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},c=/\s+/,h=function(e,t,r,i,s){var o=0,u;if(r&&typeof r=="object"){i!==void 0&&"context"in s&&s.context===void 0&&(s.context=i);for(u=n.keys(r);o<u.length;o++)t=h(e,t,u[o],r[u[o]],s)}else if(r&&c.test(r))for(u=r.split(c);o<u.length;o++)t=e(t,u[o],i,s);else t=e(t,r,i,s);return t};l.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,r,i){e._events=h(d,e._events||{},t,n,{context:r,ctx:e,listening:i});if(i){var s=e._listeners||(e._listeners={});s[i.id]=i}return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[i];if(!o){var u=this._listenId||(this._listenId=n.uniqueId("l"));o=s[i]={obj:e,objId:i,id:u,listeningTo:s,count:0}}return p(e,t,r,this,o),this};var d=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),s=r.context,o=r.ctx,u=r.listening;u&&u.count++,i.push({callback:n,context:s,ctx:s||o,listening:u})}return e};l.off=function(e,t,n){return this._events?(this._events=h(v,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=e?[e._listenId]:n.keys(i);for(var o=0;o<s.length;o++){var u=i[s[o]];if(!u)break;u.obj.off(t,r,this)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var v=function(e,t,r,i){if(!e)return;var s=0,o,u=i.context,a=i.listeners;if(!t&&!r&&!u){var f=n.keys(a);for(;s<f.length;s++)o=a[f[s]],delete a[o.id],delete o.listeningTo[o.objId];return}var l=t?[t]:n.keys(e);for(;s<l.length;s++){t=l[s];var c=e[t];if(!c)break;var h=[];for(var p=0;p<c.length;p++){var d=c[p];r&&r!==d.callback&&r!==d.callback._callback||u&&u!==d.context?h.push(d):(o=d.listening,o&&--o.count===0&&(delete a[o.id],delete o.listeningTo[o.objId]))}h.length?e[t]=h:delete e[t]}if(n.size(e))return e};l.once=function(e,t,r){var i=h(m,{},e,t,n.bind(this.off,this));return this.on(i,void 0,r)},l.listenToOnce=function(e,t,r){var i=h(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var s=e[t]=n.once(function(){i(t,s),r.apply(this,arguments)});s._callback=r}return e};l.trigger=function(e){if(!this._events)return this;var t=Math.max(0,arguments.length-1),n=Array(t);for(var r=0;r<t;r++)n[r]=arguments[r+1];return h(g,this._events,e,void 0,n),this};var g=function(e,t,n,r){if(e){var i=e[t],s=e.all;i&&s&&(s=s.slice()),i&&y(i,r),s&&y(s,[t].concat(r))}return e},y=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(e==null)return this;var i;typeof e=="object"?(i=e,r=t):(i={})[e]=t,r||(r={});if(!this._validate(i,r))return!1;var s=r.unset,o=r.silent,u=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=n.clone(this.attributes),this.changed={});var f=this.attributes,l=this.changed,c=this._previousAttributes;for(var h in i)t=i[h],n.isEqual(f[h],t)||u.push(h),n.isEqual(c[h],t)?delete l[h]:l[h]=t,s?delete f[h]:f[h]=t;this.id=this.get(this.idAttribute);if(!o){u.length&&(this._pending=r);for(var p=0;p<u.length;p++)this.trigger("change:"+u[p],this,f[u[p]],r)}if(a)return this;if(!o)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var s=e[i];if(n.isEqual(t[i],s))continue;r[i]=s}return n.size(r)?r:!1},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},R(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0,parse:!0},r);var s=r.wait;if(i&&!s){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var o=this,u=r.success,a=this.attributes;r.success=function(e){o.attributes=a;var t=r.parse?o.parse(e,r):e;s&&(t=n.extend({},i,t));if(t&&!o.set(t,r))return!1;u&&u.call(r.context,o,e,r),o.trigger("sync",o,e,r)},R(this,r),i&&s&&(this.attributes=n.extend({},a,i));var f=this.isNew()?"create":r.patch?"patch":"update";f==="patch"&&!r.attrs&&(r.attrs=i);var l=this.sync(f,this,r);return this.attributes=a,l},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&s(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(R(this,e),o=this.sync("delete",this,e)),i||s(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||q();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};u(b,w,"attributes");var E=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},S={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},T=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r=Array(e.length-n),i=t.length;for(var s=0;s<r.length;s++)r[s]=e[s+n];for(s=0;s<i;s++)e[s+n]=t[s];for(s=0;s<r.length;s++)e[s+i+n]=r[s]};n.extend(E.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:n.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),r?i[0]:i},set:function(e,t){if(e==null)return;t=n.defaults({},t,S),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;i!=null&&(i=+i),i<0&&(i+=this.length+1);var s=[],o=[],u=[],a={},f=t.add,l=t.merge,c=t.remove,h=!1,p=this.comparator&&i==null&&t.sort!==!1,d=n.isString(this.comparator)?this.comparator:null,v;for(var m=0;m<e.length;m++){v=e[m];var g=this.get(v);if(g){if(l&&v!==g){var y=this._isModel(v)?v.attributes:v;t.parse&&(y=g.parse(y,t)),g.set(y,t),p&&!h&&(h=g.hasChanged(d))}a[g.cid]||(a[g.cid]=!0,s.push(g)),e[m]=g}else f&&(v=e[m]=this._prepareModel(v,t),v&&(o.push(v),this._addReference(v,t),a[v.cid]=!0,s.push(v)))}if(c){for(m=0;m<this.length;m++)v=this.models[m],a[v.cid]||u.push(v);u.length&&this._removeModels(u,t)}var b=!1,w=!p&&f&&c;s.length&&w?(b=this.length!=s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,T(this.models,s,0),this.length=this.models.length):o.length&&(p&&(h=!0),T(this.models,o,i==null?this.length:i),this.length=this.models.length),h&&this.sort({silent:!0});if(!t.silent){for(m=0;m<o.length;m++)i!=null&&(t.index=i+m),v=o[m],v.trigger("add",v,this,t);(h||b)&&this.trigger("sort",this,t),(o.length||u.length)&&this.trigger("update",this,t)}return r?e[0]:e},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(e==null)return void 0;var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),r===1||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var r=t.wait;e=this._prepareModel(e,t);if(!e)return!1;r||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,n){r&&i.add(e,n),s&&s.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=this.get(e[r]);if(!i)continue;var s=this.indexOf(i);this.models.splice(s,1),this.length--,t.silent||(t.index=s,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}return n.length?n:!1},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);n!=null&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);n!=null&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r);if(e==="change"){var i=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);i!==s&&(i!=null&&delete this._byId[i],s!=null&&(this._byId[s]=t))}this.trigger.apply(this,arguments)}});var N={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};u(E,N,"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,L)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){e||(e=n.result(this,"events"));if(!e)return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[r]);if(!r)continue;var i=t.match(k);this.delegate(i[1],i[2],n.bind(r,this))}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}else this.setElement(n.result(this,"el"))},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var s=A[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||q()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1);var a=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,a&&a.call(i.context,e,t,n)};var f=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,f,i),f};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var O=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,_=/(\(\?)?:\w+/g,D=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(O.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o,r)!==!1&&(s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(M,"(?:$1)?").replace(_,function(e,t){return t?e:"([^/?]+)"}).replace(D,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var H=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,F=/#.*$/;H.started=!1,n.extend(H.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return e.charAt(0)==="/"?e.slice(1):e},getFragment:function(e){return e==null&&(this._usePushState||!this._wantsHashChange?e=this.getPath():e=this.getHash()),e.replace(B,"")},start:function(e){if(H.started)throw new Error("Backbone.history has already been started");H.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!this.history&&!!this.history.pushState,this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),H.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})):!1},navigate:function(e,t){if(!H.started)return!1;if(!t||t===!0)t={trigger:!!t};e=this.getFragment(e||"");var n=this.root;if(e===""||e.charAt(0)==="?")n=n.slice(0,-1)||"/";var r=n+e;e=this.decodeFragment(e.replace(F,""));if(this.fragment===e)return;this.fragment=e;if(this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new H;var I=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};b.extend=E.extend=O.extend=C.extend=H.extend=I;var q=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}),function(e,t){if(typeof define=="function"&&define.amd)define("superhero",["backbone","underscore"],function(n,r){return e.Superhero=t(e,n,r)});else if(typeof exports!="undefined"){var n=require("backbone"),r=require("underscore");module.exports=t(e,n,r)}else e.Superhero=t(e,e.Backbone,e._)}(this,function(e,t,n){"use strict";var r={};r.Events=t.Events,r.ajax=t.ajax,r._isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;var i=function(e,t){var r=(":"+e).replace(/:([a-z])/g,function(e){return e[1].toUpperCase()}),i="on"+r;n.isFunction(this[i])&&this[i](),this.trigger(e,t)};r.createNameSpace=function(e){var t=e.split("."),n=window;for(var r=0,i=t.length;r<i;r++)n=n[t[r]]=n[t[r]]||{};return n},r.Module=function(e){this.initialize.apply(this,arguments)},r.Module.extend=t.View.extend,r.Module.prototype._triggerCallback=i,n.extend(r.Module.prototype,r.Events,{initialize:function(){},close:function(){this._triggerCallback("close"),this.stopListening(),this.off()}}),r.Router=t.Router.extend({execute:function(e,n){this.trigger("before:route"),this._previousFragment=this._fragment,this._fragment=t.history.getFragment(),t.Router.prototype.execute.apply(this,arguments)},getTransitionData:function(){return{fragment:this._fragment,previousFragment:this._previousFragment}}}),r.history=t.history;var s="state:default",o="state:initialized",u="state:closed",a="state:removed";r.BaseView=t.View.extend({constructor:function(){this._currentState=s,t.View.apply(this,arguments),n.bindAll(this,"_triggerCallback","_resumeInitializationQueue"),this._appendToInitializationQueue("_initializeUI"),this._resumeInitializationQueue()},setState:function(e){this._currentState=e},getState:function(){return this._currentState},hasState:function(e){return this._currentState===e},_enforceState:function(e){var t=Array.prototype.slice.call(arguments);if(t.indexOf(this._currentState)===-1)throw new Error("Superhero.View cannot not change state from "+this._currentState)},close:function(){this._enforceState(o,s),this._triggerCallback("close"),this._disposeUI(),this.undelegateEvents(),this.stopListening(),this.off(),this.el=null,this.$el=null,this.setState(u)},remove:function(){this._enforceState(o,u);var e=this.el;return this.hasState(o)&&this.close(),this._triggerCallback("before:remove"),e.parentNode&&e.parentNode.removeChild(e),this._triggerCallback("remove"),this.setState(a),this},delegate:function(e,n,r){return e==="tap"?this._delegateTapEvent(e,n,r):t.View.prototype.delegate.apply(this,arguments)},undelegate:function(e,n,r){return e==="tap"?this._undelegateTapEvent(e,n,r):t.View.prototype.undelegate.apply(this,arguments)},_delegateTapEvent:function(e,t,i){if(r._isTouch){var s=n.bind(this._touchHandler,this);this.$el.on("touchstart.delegateEvents"+this.cid,t,s),this.$el.on("touchend.delegateEvents"+this.cid,t,{listener:i},s),this.$el.on("touchcancel.delegateEvents"+this.cid,t,s),this.$el.on("click.delegateEvents"+this.cid,t,s)}else this.$el.on("click.delegateEvents"+this.cid,t,n.bind(i,this));return this},_undelegateTapEvent:function(e,t,n){return r._isTouch?(this.$el.off("touchstart.delegateEvents"+this.cid),this.$el.off("touchend.delegateEvents"+this.cid),this.$el.off("touchcancel.delegateEvents"+this.cid),this.$el.off("click.delegateEvents"+this.cid)):this.$el.off("click.delegateEvents"+this.cid),this},_touchHandler:function(e){var t=e.originalEvent||e;if(!t.changedTouches)return;var r=t.changedTouches[0],i=r.clientX,s=r.clientY;switch(e.type){case"touchstart":this._touching=[i,s];break;case"touchcancel":this._touching=null;break;case"touchend":if(!this._touching)return;var o=this._touching[0],u=this._touching[1],a=10;if(i<o+a&&i>o-a&&s<u+a&&s>u-a){e.data.listener(e);var f=this;n.delay(function(){f._touching=null},300)}break;case"click":if(this._touching){e.preventDefault();return}e.data.listener(e)}},_appendToInitializationQueue:function(e,t){this._initializationQueue=this._initializationQueue||[],!t&&t!==0&&(t=this._initializationQueue.length),this._initializationQueue.splice(t,0,{status:"new",methodName:e})},_setInitializationComplete:function(e){if(!this.hasState(s))return;for(var t=0,n=this._initializationQueue.length;t<n;t++)this._initializationQueue[t].methodName===e&&(this._initializationQueue[t].status="completed");this._resumeInitializationQueue()},_resumeInitializationQueue:function(){if(!this.hasState(s))return;for(var e=0,t=this._initializationQueue.length;e<t;e++){var n=this._initializationQueue[e];if(n.status==="new"){var r=this[n.methodName].call(this);n.status="running",r&&this._setInitializationComplete(n.methodName);return}if(n.status==="running")return}this.setState(o),this._triggerCallback("initialized")},_initializeUI:function(){this._uiBindings=n.clone(this.ui),this.ui={};for(var e in this._uiBindings)if(this._uiBindings.hasOwnProperty(e)){var t=this.el.querySelectorAll(this._uiBindings[e]);this.ui[e]=t.length<=1?t[0]:t}return this._triggerCallback("ui:initialized"),!0},_disposeUI:function(){for(var e in this.ui)this.ui.hasOwnProperty(e)&&(this.ui[e]=null);this.ui=this._uiBindings,delete this._uiBindings},_triggerCallback:i}),r.Component=r.BaseView.extend({}),r.View=r.BaseView.extend({constructor:function(){var e=arguments[0]||{};e.template&&(this.template=e.template),e.templateData&&(this.templateData=e.templateData),this.template&&this._appendToInitializationQueue("_initializeTemplate",0),e.region&&(this.region=e.region,this._appendToInitializationQueue("_waitOnAddedToRegion")),this._appendToInitializationQueue("_initializeComponents"),r.BaseView.apply(this,arguments)},close:function(){r.BaseView.prototype.close.apply(this,arguments),this._disposeComponents(),this.region=null},updateTemplate:function(e){this._renderTemplate(e)},_initializeTemplate:function(){if(this.template){if(r.TemplateCache.has(this.template))return this._renderTemplate(),!0;var e=this.template;this.listenTo(r.TemplateCache,"template:retrieved",function(t){t.id===e&&(this._renderTemplate(),this._setInitializationComplete("_initializeTemplate"),this.stopListening(r.TemplateCache,"template:retrieved"))}),r.TemplateCache._retrieveTemplate(this.template)}return!1},_renderTemplate:function(e){this._triggerCallback("before:template:rendered");var t=this.model&&this.model.toJSON?this.model.toJSON():this.model,i=n.extend({},e,t,this.templateData);this.el.innerHTML=r.TemplateCache.get(this.template)(i),this._triggerCallback("template:rendered")},_waitOnAddedToRegion:function(){return!1},_addedToRegion:function(){this._setInitializationComplete("_waitOnAddedToRegion"),this._triggerCallback("view:added")},addComponent:function(e,t,r,i){var s=r;n.isString(r)&&(s=this.el.querySelector(r)),i=i||{},i.el=s;var o=new t(i);return this._createdComponentModules.push(o),n.isArray(this.components[e])?this.components[e].push(o):this.components[e]=o,o},_initializeComponents:function(){this._componentBindings=n.clone(this.components),this.components={},this._createdComponentModules=[];for(var e in this._componentBindings)if(this._componentBindings.hasOwnProperty(e)){var t=this._componentBindings[e],r=this.el.querySelectorAll(t.selector);if(r.length===1)this.addComponent(e,t.module||t.type,r[0],t.options);else{this.components[e]=[];for(var i=0,s=r.length;i<s;i++)this.addComponent(e,t.module||t.type,r[i],t.options)}}return this._triggerCallback("components:initialized"),!0},_disposeComponents:function(){if(!this._createdComponentModules)return;for(var e=0,t=this._createdComponentModules.length;e<t;e++){var n=this._createdComponentModules[e];n.hasState(o)&&n.close()}this.components=this._componentBindings,delete this._createdComponentModules,delete this._componentBindings}}),r.LayoutView=r.View.extend({constructor:function(){this._appendToInitializationQueue("_initializeRegions"),r.View.apply(this,arguments)},close:function(){r.View.prototype.close.apply(this,arguments),this._disposeRegions()},_initializeRegions:function(){for(var e in this.regions)this.regions.hasOwnProperty(e)&&r.RegionManager.addRegion(this.cid,e,this.el.querySelector(this.regions[e]));return this._triggerCallback("regions:initialized"),!0},_disposeRegions:function(){for(var e in this.regions)this.regions.hasOwnProperty(e)&&r.RegionManager.removeRegion(this.cid,e)}}),r.Collection=t.Collection.extend({}),r.Model=t.Model.extend({parse:function(e){for(var n in this.model)if(this.model.hasOwnProperty(n)){var r=this.model[n],i=e[n];e[n]=new r(i,{parse:!0}),e[n]instanceof t.Model?e[n].urlRoot=this.url()+"/"+n:e[n].url=this.url()+"/"+n}return e},isValid:function(e,t){var r={};r[e]=t;var i=this._executeValidation(r);return n.isEmpty(i)},validate:function(e){var t=this._executeValidation(e);if(!n.isEmpty(t))return t;this.validationError={},this.trigger("valid",this)},_executeValidation:function(e){var t={};for(var r in e){if(!this.validation||!this.validation[r])continue;var i=this.validation[r];n.isFunction(i)&&i(r,e[r])===!1&&(t[r]="invalid"),n.isRegExp(i)&&(i.lastIndex=0,i.test(e[r])===!1&&(t[r]="invalid"))}return t}});var f=r.Module.extend({_registeredRegions:{},_registeredRegionNames:{},addRegion:function(e,t,n){var i=this._createRegionID(e,t);this._registeredRegions[i]=new r.Region({id:i,name:t,el:n}),this._registeredRegionNames[t]=i},removeRegion:function(e,t){var n=this._createRegionID(e,t),r=this._registeredRegions[n];r.close(),delete this._registeredRegions[n]},get:function(e){return this._registeredRegions[this._registeredRegionNames[e]]},_createRegionID:function(e,t){return e+"."+t}});r.RegionManager=new f,r.Region=r.Module.extend({initialize:function(e){this.id=e.id,this.name=e.name,this.el=e.el,this._activeViewClass=null,this._activeView=null,this._allowSameView=!1},show:function(e,t,n){if(e!==this._activeViewClass||this._allowSameView)t=t||{},t.region=this,this._transitionData=n,this._pendingView=new e(t),this._needsTransition=this._activeView&&this._activeView!==null||!1,this._needsTransition&&this._detachView(this._activeView),this._triggerCallback("before:view:added",e),this._activeView=this._pendingView,this._activeViewClass=e,this._attachView(this._activeView),this._pendingView=null,this._allowSameView=!1;return this._activeView},allowSameView:function(){this._allowSameView=!0},clear:function(e){this._transitionData=e,this._activeView&&this._detachView(this._activeView,!0)},close:function(){if(!this._activeView)return;this._activeView.remove(),this._activeView=null,this._activeViewClass=null,this.name=null,this.id=null,this.el=null},_attachView:function(e){var t=e.render().el;this._activeView=e,this.el.insertBefore(t,this.el.firstChild),e._addedToRegion(),this._triggerImmediateTransitionIn(e),this._needsTransition||this._triggerTransitionIn(e),this._triggerCallback("view:added")},_detachView:function(e,t){this._activeView=null,this._activeViewClass=null,this._triggerTransitionOut(e,t)},_removeView:function(e,t){e.remove(),this._triggerCallback("view:removed");var n=this._activeView||this._pendingView;!t&&n&&this._triggerTransitionIn(n)},_triggerImmediateTransitionIn:function(e){if(n.isFunction(e.immediateTransitionIn)){if(e.hasState(o))return e.immediateTransitionIn(this._transitionData);this.listenToOnce(e,"initialized",function(){e.immediateTransitionIn(this._transitionData)})}},_triggerTransitionIn:function(e){if(n.isFunction(e.transitionIn)){if(e.hasState(o))return e.transitionIn(this._transitionData);this.listenToOnce(e,"initialized",function(){e.transitionIn(this._transitionData)})}},_triggerTransitionOut:function(e,t){n.isFunction(e.transitionOut)?e.transitionOut(function(){this._removeView(e,t)}.bind(this),this._transitionData):this._removeView(e,t)},_triggerCallback:i});var l=r.Module.extend({_basePath:"/",_templateCache:{},initialize:function(){this._initializeTemplates()},has:function(e){return this._templateCache[e]!==undefined},get:function(e){return this._templateCache[e]},set:function(e,t){this._compileTemplate(e,t)},setBasePath:function(e){this._basePath=e},retrieveTemplate:function(e){this._retrieveTemplate(e)},remove:function(e){this._templateCache[e]=null,delete this._templateCache[e]},_initializeTemplates:function(){var e=document.querySelectorAll('[type="text/template"]');for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r.textContent,s=r.id;r.parentNode.removeChild(r),this._compileTemplate(s,i)}},_retrieveTemplate:function(e,n){var r={url:this._basePath+e,success:function(t){this._compileTemplate(e,t),n&&n.apply(),this._triggerCallback("template:retrieved",{id:e})}.bind(this)};t.ajax(r)},_compileTemplate:function(e,t){this._templateCache[e]=n.template(t)},_triggerCallback:i});return r.TemplateCache=new l,r}),define("app/utils/ResizeManager",["underscore","superhero"],function(e,t){var n=t.Module.extend({RESIZE_INTERVAL:250,initialize:function(){e.bindAll(this,"_windowResizeHandler","_updateValues","_startThrottleTimer","_throttleTimerHandler"),this.minViewportWidth=window.getComputedStyle(document.body).getPropertyValue("min-width"),this.minViewportWidth=this.minViewportWidth.replace("px",""),this._updateValues(),this._setupEventListeners(),setTimeout(this._updateValues,30)},_setupEventListeners:function(){var e=Settings.isTablet||Settings.isMobile||Settings.device.type==="tablet"||Settings.device.type==="mobile"?"orientationchange":"resize";window.addEventListener(e,this._windowResizeHandler)},viewportWidth:function(e){return e&&this._updateViewportDimensions(),this._viewportWidth},viewportHeight:function(e){return e&&this._updateViewportDimensions(),this._viewportHeight},documentWidth:function(e){return e&&this._updateDocumentDimensions(),this._documentWidth},documentHeight:function(e){return e&&this._updateDocumentDimensions(),this._documentHeight},_updateValues:function(){this._updateViewportDimensions(),this._updateDocumentDimensions()},_updateViewportDimensions:function(){this._viewportWidth=Math.min(window.innerWidth||this.minViewportWidth),this._viewportHeight=Math.min(window.innerHeight)},_updateDocumentDimensions:function(){var e=document.body,t=document.documentElement;this._documentWidth=Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth),this._documentHeight=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},_startThrottleTimer:function(){this._throttleTimer&&clearTimeout(this._throttleTimer),this._throttleTimer=setTimeout(this._throttleTimerHandler,this.RESIZE_INTERVAL)},_throttleTimerHandler:function(){this._updateValues(),this.trigger("resize:complete",this._getEventPayload())},_windowResizeHandler:function(e){this._updateValues(),this._startThrottleTimer(),this.trigger("resize",this._getEventPayload())},_getEventPayload:function(){return{target:this,viewportWidth:this._viewportWidth,viewportHeight:this._viewportHeight,documentWidth:this._documentWidth,documentHeight:this._documentHeight}}});return new n}),define("app/utils/ScrollManager",["underscore","superhero","app/utils/ResizeManager"],function(e,t,n){var r=t.Module.extend({DIRECTION_DOWN:"direction:down",DIRECTION_UP:"direction:up",PIXEL_STEP:20,LINE_HEIGHT:40,PAGE_HEIGHT:800,_isScrollEnabled:!0,_scrollTop:0,_previousScrollTop:0,_registeredScrollNotifications:[],_mousewheelEvent:/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",initialize:function(){e.bindAll(this,"_scrollHandler","_mousewheelHandler","_scrollEndTimeoutHandler","_checkElementScrolledIntoView","_tickHandler","_animatedScrollCompleteHandler","_applyScrollTop"),this._offsetCalculationsTick=0,this._offsetCalculationsInterval=200,this.scrollTop(0),this.setupEventListeners(),window.scroll=this},setupEventListeners:function(){window.addEventListener("scroll",this._scrollHandler),TweenMax.ticker.addEventListener("tick",this._tickHandler)},enableMousewheel:function(e){this._mousewheelElement=e,this._mousewheelElement.addEventListener(this._mousewheelEvent,this._mousewheelHandler)},disableMousewheel:function(){this._mousewheelElement.removeEventListener(this._mousewheelEvent,this._mousewheelHandler)},enableScroll:function(){this._isScrollEnabled=!0},disableScroll:function(){this._isScrollEnabled=!1},calculateScrollDuration:function(e,t){var r=Math.min(n.viewportHeight(),Math.abs(Math.abs(t)-Math.abs(this._scrollTop)))/1e3;return r},scrollTo:function(e,t,n){if(this._isAnimating)return;n===undefined&&(n=this.calculateScrollDuration(e,t)),this._isAnimating=!0,this._scrollTween=TweenMax.to(this,n,{animatedScrollTop:-t,ease:Power1.easeInOut,onComplete:this._animatedScrollCompleteHandler})},getScrollTop:function(){return this._scrollTop},_animatedScrollCompleteHandler:function(){var e=this;setTimeout(function(){e._isAnimating=!1},300)},_endAnimatedScroll:function(){this._isAnimating&&this._scrollTween.kill(),this._isAnimating=!1},_applyScrollTop:function(e){return e!==undefined&&(document.body.scrollTop=document.documentElement.scrollTop=e),this._scrollTop},animatedScrollTop:function(e){return this._isAnimating=!0,this._applyScrollTop(e)},scrollTop:function(e){return this._endAnimatedScroll(),this._applyScrollTop(e)},registerElementScrollNotification:function(e,t,n){n=n||0,this._registeredScrollNotifications.push({element:e,userOffset:n,callback:t}),this._scrollNotificationsAdded=!0,this.rafID=requestAnimationFrame(this._checkElementScrolledIntoView)},resetElementScrollNotifications:function(){this.rafID&&cancelAnimationFrame(this.rafID),this._offsetCalculationsTick=0,this._offsetCalculationsInterval=200,this._registeredScrollNotifications=[]},_calculateElementOffsets:function(){if(this._scrollNotificationsAdded||this._offsetCalculationsTick%this._offsetCalculationsInterval===0){for(var e=0,t=this._registeredScrollNotifications.length;e<t;e++){var n=this._registeredScrollNotifications[e];n.offsetTop=this._getElementGlobalOffsetTop(n.element)+n.userOffset}this._registeredScrollNotifications.sort(function(e,t){return e.offsetTop-t.offsetTop}),this._offsetCalculationsInterval*=2}this._scrollNotificationsAdded=!1,this._offsetCalculationsTick++},_checkElementScrolledIntoView:function(){this._calculateElementOffsets();var e=this._scrollTop+n.viewportHeight();for(var t=0,r=this._registeredScrollNotifications.length;t<r;t++){var i=this._registeredScrollNotifications[t];if(!(i&&e>i.offsetTop))break;i.callback(i.element)}this._registeredScrollNotifications.splice(0,t)},_getElementGlobalOffsetTop:function(e,t){var n=0;for(;;){n+=e.offsetTop;if(e.offsetParent===null||e.offsetParent===t)break;e=e.offsetParent}return n},_determineScrollDirection:function(e){var t=this._previousScrollTop>e?this.DIRECTION_UP:this.DIRECTION_DOWN;return this._previousScrollTop=e,t},_determineMouseWheelDirection:function(e){return e<0?this.DIRECTION_UP:this.DIRECTION_DOWN},_updateValues:function(){this._scrollTop=document.body.scrollTop||document.documentElement.scrollTop,this._scrollDirectionY=this._determineScrollDirection(this._scrollTop)},_normalizeMousewheelEvent:function(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*this.PIXEL_STEP,i=n*this.PIXEL_STEP,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(e.deltaMode==1?(r*=this.LINE_HEIGHT,i*=this.LINE_HEIGHT):(r*=this.PAGE_HEIGHT,i*=this.PAGE_HEIGHT)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,deltaX:r,deltaY:i}},_scrollHandler:function(e){this._updateValues(),this._requestScrollUpdate()},_mousewheelHandler:function(e){e.preventDefault();if(!this._isScrollEnabled)return;var t=this._normalizeMousewheelEvent(e);t.direction=this._determineMouseWheelDirection(t.spinY),t.animating=this._isAnimating,this.trigger("mousewheel",t)},_scrollEndTimeoutHandler:function(e){this.trigger("scroll:end",{target:this,y:this._scrollTop})},_requestScrollUpdate:function(){this._scrollUpdateRequested=!0},_resetScrollEndDetection:function(){this._scrollEndTimeout&&clearTimeout(this._scrollEndTimeout),this._isAnimating||(this._scrollEndTimeout=setTimeout(this._scrollEndTimeoutHandler,500))},_tickHandler:function(){this._scrollUpdateRequested&&(this._scrollUpdateRequested=!1,this.trigger("scroll",{target:this,y:this._scrollTop,directionY:this._scrollDirectionY,directionX:this._scrollDirectionX,animating:this._isAnimating}),this._checkElementScrolledIntoView(),this._resetScrollEndDetection())}});return new r}),define("app/models/CaseModel",["superhero"],function(e){return e.Model.extend({defaults:{title:null,permalink:null},initialize:function(){},preventOrphans:function(e){var t=this.get(e);t=t.replace(/\s(\w+\.|!|\?|$)/gi,"&nbsp;$1"),this.set(e,t)},fetch:function(t){return t=t||{},t.cache=!1,e.Model.prototype.fetch.call(this,t)}})}),define("app/models/CaseCollection",["superhero","app/models/CaseModel"],function(e,t){var n=e.Collection.extend({model:t,url:function(){var e="/actions/api/cases";return this._getFeatured?e+"?type=featured":e},getFeatured:function(){this._getFeatured=!0,this.fetch()},getModelBySlug:function(e){return this._activeModel=this.findWhere({slug:e}),this._activeModel},getActiveModel:function(){return this._activeModel},getNextModel:function(){var e=this.indexOf(this._activeModel)+1;return e>this.length-1&&(e=0),this.at(e)},getPreviousModel:function(){var e=this.indexOf(this._activeModel)-1;return e<0&&(e=this.length-1),this.at(e)}});return new n});var THREE={REVISION:"69"};"object"==typeof module&&(module.exports=THREE),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:0<e?1:0}),THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(0===t)this.r=this.g=this.b=n;else{var r=function(e,t,n){return 0>n&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e};t=.5>=n?n*(1+t):n+t-n*t,n=2*n-t,this.r=r(n,t,e+1/3),this.g=r(n,t,e),this.b=r(n,t,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e))return e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e),this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e))return e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e),this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(e))return e=/^\#([0-9a-f]{6})$/i.exec(e),this.setHex(parseInt(e[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e))return e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e),this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this;if(/^(\w+)$/i.test(e))return this.setHex(THREE.ColorKeywords[e]),this},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e=e||{h:0,s:0,l:0};var t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),s=Math.min(t,n,r),o,u=(s+i)/2;if(s===i)s=o=0;else{var a=i-s,s=.5>=u?a/(i+s):a/(2-i-s);switch(i){case t:o=(n-r)/a+(n<r?6:0);break;case n:o=(r-t)/a+2;break;case r:o=(t-n)/a+4}o/=6}return e.h=o,e.s=s,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(0==e instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),s=Math.sin(e._x/2),o=Math.sin(e._y/2),u=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=s*r*i+n*o*u,this._y=n*o*i-s*r*u,this._z=n*r*u+s*o*i,this._w=n*r*i-s*o*u):"YXZ"===e.order?(this._x=s*r*i+n*o*u,this._y=n*o*i-s*r*u,this._z=n*r*u-s*o*i,this._w=n*r*i+s*o*u):"ZXY"===e.order?(this._x=s*r*i-n*o*u,this._y=n*o*i+s*r*u,this._z=n*r*u+s*o*i,this._w=n*r*i-s*o*u):"ZYX"===e.order?(this._x=s*r*i-n*o*u,this._y=n*o*i+s*r*u,this._z=n*r*u-s*o*i,this._w=n*r*i+s*o*u):"YZX"===e.order?(this._x=s*r*i+n*o*u,this._y=n*o*i+s*r*u,this._z=n*r*u-s*o*i,this._w=n*r*i-s*o*u):"XZY"===e.order&&(this._x=s*r*i-n*o*u,this._y=n*o*i-s*r*u,this._z=n*r*u+s*o*i,this._w=n*r*i+s*o*u),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0];e=t[4];var r=t[8],i=t[1],s=t[5],o=t[9],u=t[2],a=t[6],t=t[10],f=n+s+t;return 0<f?(n=.5/Math.sqrt(f+1),this._w=.25/n,this._x=(a-o)*n,this._y=(r-u)*n,this._z=(i-e)*n):n>s&&n>t?(n=2*Math.sqrt(1+n-s-t),this._w=(a-o)/n,this._x=.25*n,this._y=(e+i)/n,this._z=(r+u)/n):s>t?(n=2*Math.sqrt(1+s-n-t),this._w=(r-u)/n,this._x=(e+i)/n,this._y=.25*n,this._z=(o+a)/n):(n=2*Math.sqrt(1+t-n-s),this._w=(i-e)/n,this._x=(r+u)/n,this._y=(o+a)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector3),t=n.dot(r)+1,1e-6>t?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(0,this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,u=t._y,a=t._z,f=t._w;return this._x=n*f+s*o+r*a-i*u,this._y=r*f+s*u+i*o-n*a,this._z=i*f+s*a+n*u-r*o,this._w=s*f-n*o-r*u-i*a,this.onChangeCallback(),this},multiplyVector3:function(e){return 0,e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,s=this._w,o=s*e._w+n*e._x+r*e._y+i*e._z;0>o?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e);if(1<=o)return this._w=s,this._x=n,this._y=r,this._z=i,this;var u=Math.acos(o),a=Math.sqrt(1-o*o);return.001>Math.abs(a)?(this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this):(o=Math.sin((1-t)*u)/a,u=Math.sin(t*u)/a,this._w=s*o+this._w*u,this._x=n*o+this._x*u,this._y=r*o+this._y*u,this._z=i*o+this._z*u,this.onChangeCallback(),this)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,n,r){return n.copy(e).slerp(t,r)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(0,this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(0,this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e):this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(0,this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(0,this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(0,this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return 0==t instanceof THREE.Euler&&0,void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,n)),this}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6]*r,this.y=e[1]*t+e[4]*n+e[7]*r,this.z=e[2]*t+e[5]*n+e[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12],this.y=e[1]*t+e[5]*n+e[9]*r+e[13],this.z=e[2]*t+e[6]*n+e[10]*r+e[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z;e=e.elements;var i=1/(e[3]*t+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*t+e[4]*n+e[8]*r+e[12])*i,this.y=(e[1]*t+e[5]*n+e[9]*r+e[13])*i,this.z=(e[2]*t+e[6]*n+e[10]*r+e[14])*i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z;e=e.w;var u=e*t+s*r-o*n,a=e*n+o*t-i*r,f=e*r+i*n-s*t,t=-i*t-s*n-o*r;return this.x=u*e+t*-i+a*-o-f*-s,this.y=a*e+t*-s+f*-i-u*-o,this.z=f*e+t*-o+u*-s-a*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r,this.y=e[1]*t+e[5]*n+e[9]*r,this.z=e[2]*t+e[6]*n+e[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e):this.z=this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return 0,this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,u=t.z;return this.x=r*u-i*o,this.y=i*s-n*u,this.z=n*o-r*s,this},projectOnVector:function(){var e,t;return function(n){return void 0===e&&(e=new THREE.Vector3),e.copy(n).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/(this.length()*e.length()),Math.acos(THREE.Math.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,t*t+n*n+e*e},setEulerFromRotationMatrix:function(e,t){0},setEulerFromQuaternion:function(e,t){0},getPositionFromMatrix:function(e){return 0,this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return 0,this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return 0,this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length();return e=this.set(e.elements[8],e.elements[9],e.elements[10]).length(),this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){var n=4*e,r=t.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(0,this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(0,this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12]*i,this.y=e[1]*t+e[5]*n+e[9]*r+e[13]*i,this.z=e[2]*t+e[6]*n+e[10]*r+e[14]*i,this.w=e[3]*t+e[7]*n+e[11]*r+e[15]*i,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.z=this.y=this.x=0,this.w=1),this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r;e=e.elements;var i=e[0];r=e[4];var s=e[8],o=e[1],u=e[5],a=e[9];n=e[2],t=e[6];var f=e[10];return.01>Math.abs(r-o)&&.01>Math.abs(s-n)&&.01>Math.abs(a-t)?.1>Math.abs(r+o)&&.1>Math.abs(s+n)&&.1>Math.abs(a+t)&&.1>Math.abs(i+u+f-3)?(this.set(1,0,0,0),this):(e=Math.PI,i=(i+1)/2,u=(u+1)/2,f=(f+1)/2,r=(r+o)/4,s=(s+n)/4,a=(a+t)/4,i>u&&i>f?.01>i?(t=0,r=n=.707106781):(t=Math.sqrt(i),n=r/t,r=s/t):u>f?.01>u?(t=.707106781,n=0,r=.707106781):(n=Math.sqrt(u),t=r/n,r=a/n):.01>f?(n=t=.707106781,r=0):(r=Math.sqrt(f),t=s/r,n=a/r),this.set(t,n,r,e),this):(e=Math.sqrt((t-a)*(t-a)+(s-n)*(s-n)+(o-r)*(o-r)),.001>Math.abs(e)&&(e=1),this.x=(t-a)/e,this.y=(s-n)/e,this.z=(o-r)/e,this.w=Math.acos((i+u+f-1)/2),this)},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t){var n=THREE.Math.clamp,r=e.elements,i=r[0],s=r[4],o=r[8],u=r[1],a=r[5],f=r[9],l=r[2],c=r[6],r=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-f,r),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(c,a),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(f,-1,1)),.99999>Math.abs(f)?(this._y=Math.atan2(o,r),this._z=Math.atan2(u,a)):(this._y=Math.atan2(-l,i),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(-l,r),this._z=Math.atan2(-s,a)):(this._y=0,this._z=Math.atan2(u,i))):"ZYX"===t?(this._y=Math.asin(-n(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(c,r),this._z=Math.atan2(u,i)):(this._x=0,this._z=Math.atan2(-s,a))):"YZX"===t?(this._z=Math.asin(n(u,-1,1)),.99999>Math.abs(u)?(this._x=Math.atan2(-f,a),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(o,r))):"XZY"===t?(this._z=Math.asin(-n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(c,a),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-f,r),this._y=0)):0,this._order=t,this.onChangeCallback(),this},setFromQuaternion:function(e,t,n){var r=THREE.Math.clamp,i=e.x*e.x,s=e.y*e.y,o=e.z*e.z,u=e.w*e.w;return t=t||this._order,"XYZ"===t?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),u-i-s+o),this._y=Math.asin(r(2*(e.x*e.z+e.y*e.w),-1,1)),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),u+i-s-o)):"YXZ"===t?(this._x=Math.asin(r(2*(e.x*e.w-e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),u-i-s+o),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),u-i+s-o)):"ZXY"===t?(this._x=Math.asin(r(2*(e.x*e.w+e.y*e.z),-1,1)),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),u-i-s+o),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),u-i+s-o)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),u-i-s+o),this._y=Math.asin(r(2*(e.y*e.w-e.x*e.z),-1,1)),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),u+i-s-o)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),u-i+s-o),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),u+i-s-o),this._z=Math.asin(r(2*(e.x*e.y+e.z*e.w),-1,1))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),u-i+s-o),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),u+i-s-o),this._z=Math.asin(r(2*(e.z*e.w-e.x*e.y),-1,1))):0,this._order=t,!1!==n&&this.onChangeCallback(),this},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new THREE.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),i=t.dot(e)/i;return r&&(i=THREE.Math.clamp(i,0,1)),i}}(),closestPointToPoint:function(e,t,n){return e=this.closestPointToPointParameter(e,t),n=n||new THREE.Vector3,this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(Infinity,Infinity),this.max=void 0!==t?t:new THREE.Vector2(-Infinity,-Infinity)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-Infinity,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){return(t||new THREE.Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){return(t||new THREE.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(Infinity,Infinity,Infinity),this.max=void 0!==t?t:new THREE.Vector3(-Infinity,-Infinity,-Infinity)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r instanceof THREE.Geometry)for(var i=r.vertices,r=0,s=i.length;r<s;r++)e.copy(i[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e);else if(r instanceof THREE.BufferGeometry&&void 0!==r.attributes.position)for(i=r.attributes.position.array,r=0,s=i.length;r<s;r+=3)e.set(i[r],i[r+1],i[r+2]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){return(t||new THREE.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){return(t||new THREE.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){return t=t||new THREE.Sphere,t.center=this.center(),t.radius=.5*this.size(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&0},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,n,r,i,s,o,u,a){var f=this.elements;return f[0]=e,f[3]=t,f[6]=n,f[1]=r,f[4]=i,f[7]=s,f[2]=o,f[5]=u,f[8]=a,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){return e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(e){return 0,e.applyMatrix3(this)},multiplyVector3Array:function(e){return 0,this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0;i<r;i+=3,n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyMatrix3(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],e=e[8];return t*s*e-t*o*a-n*i*e+n*o*u+r*i*a-r*s*u},getInverse:function(e,t){var n=e.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4],n=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0===n){if(t)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return 0,this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&0},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=s,m[9]=o,m[13]=u,m[2]=a,m[6]=f,m[10]=l,m[14]=c,m[3]=h,m[7]=p,m[11]=d,m[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return 0,this.copyPosition(e)},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var n=this.elements;t=t.elements;var r=1/e.set(t[0],t[1],t[2]).length(),i=1/e.set(t[4],t[5],t[6]).length(),s=1/e.set(t[8],t[9],t[10]).length();return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[4]=t[4]*i,n[5]=t[5]*i,n[6]=t[6]*i,n[8]=t[8]*s,n[9]=t[9]*s,n[10]=t[10]*s,this}}(),makeRotationFromEuler:function(e){0==e instanceof THREE.Euler&&0;var t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),n=Math.sin(n),o=Math.cos(r),r=Math.sin(r),u=Math.cos(i),i=Math.sin(i);if("XYZ"===e.order){e=s*u;var a=s*i,f=n*u,l=n*i;t[0]=o*u,t[4]=-o*i,t[8]=r,t[1]=a+f*r,t[5]=e-l*r,t[9]=-n*o,t[2]=l-e*r,t[6]=f+a*r,t[10]=s*o}else"YXZ"===e.order?(e=o*u,a=o*i,f=r*u,l=r*i,t[0]=e+l*n,t[4]=f*n-a,t[8]=s*r,t[1]=s*i,t[5]=s*u,t[9]=-n,t[2]=a*n-f,t[6]=l+e*n,t[10]=s*o):"ZXY"===e.order?(e=o*u,a=o*i,f=r*u,l=r*i,t[0]=e-l*n,t[4]=-s*i,t[8]=f+a*n,t[1]=a+f*n,t[5]=s*u,t[9]=l-e*n,t[2]=-s*r,t[6]=n,t[10]=s*o):"ZYX"===e.order?(e=s*u,a=s*i,f=n*u,l=n*i,t[0]=o*u,t[4]=f*r-a,t[8]=e*r+l,t[1]=o*i,t[5]=l*r+e,t[9]=a*r-f,t[2]=-r,t[6]=n*o,t[10]=s*o):"YZX"===e.order?(e=s*o,a=s*r,f=n*o,l=n*r,t[0]=o*u,t[4]=l-e*i,t[8]=f*i+a,t[1]=i,t[5]=s*u,t[9]=-n*u,t[2]=-r*u,t[6]=a*i+f,t[10]=e-l*i):"XZY"===e.order&&(e=s*o,a=s*r,f=n*o,l=n*r,t[0]=o*u,t[4]=-i,t[8]=r*u,t[1]=e*i+l,t[5]=s*u,t[9]=a*i-f,t[2]=f*i-a,t[6]=n*u,t[10]=l*i+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return 0,this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,s=e.w,o=n+n,u=r+r,a=i+i;e=n*o;var f=n*u,n=n*a,l=r*u,r=r*a,i=i*a,o=s*o,u=s*u,s=s*a;return t[0]=1-(l+i),t[4]=f-s,t[8]=n+u,t[1]=f+s,t[5]=1-(e+i),t[9]=r-o,t[2]=n-u,t[6]=r+o,t[10]=1-(e+l),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,s){var o=this.elements;return n.subVectors(r,i).normalize(),0===n.length()&&(n.z=1),e.crossVectors(s,n).normalize(),0===e.length()&&(n.x+=1e-4,e.crossVectors(s,n).normalize()),t.crossVectors(n,e),o[0]=e.x,o[4]=t.x,o[8]=n.x,o[1]=e.y,o[5]=t.y,o[9]=n.y,o[2]=e.z,o[6]=t.z,o[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(0,this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],u=n[8],a=n[12],f=n[1],l=n[5],c=n[9],h=n[13],p=n[2],d=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],n=n[15],w=r[0],E=r[4],S=r[8],x=r[12],T=r[1],N=r[5],C=r[9],k=r[13],L=r[2],A=r[6],O=r[10],M=r[14],_=r[3],D=r[7],P=r[11],r=r[15];return i[0]=s*w+o*T+u*L+a*_,i[4]=s*E+o*N+u*A+a*D,i[8]=s*S+o*C+u*O+a*P,i[12]=s*x+o*k+u*M+a*r,i[1]=f*w+l*T+c*L+h*_,i[5]=f*E+l*N+c*A+h*D,i[9]=f*S+l*C+c*O+h*P,i[13]=f*x+l*k+c*M+h*r,i[2]=p*w+d*T+v*L+m*_,i[6]=p*E+d*N+v*A+m*D,i[10]=p*S+d*C+v*O+m*P,i[14]=p*x+d*k+v*M+m*r,i[3]=g*w+y*T+b*L+n*_,i[7]=g*E+y*N+b*A+n*D,i[11]=g*S+y*C+b*O+n*P,i[15]=g*x+y*k+b*M+n*r,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return 0,e.applyProjection(this)},multiplyVector4:function(e){return 0,e.applyMatrix4(this)},multiplyVector3Array:function(e){return 0,this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0;i<r;i+=3,n+=3)e.x=t[n],e.y=t[n+1],e.z=t[n+2],e.applyMatrix4(this),t[n]=e.x,t[n+1]=e.y,t[n+2]=e.z;return t}}(),rotateAxis:function(e){0,e.transformDirection(this)},crossVector:function(e){return 0,e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],u=e[9],a=e[13],f=e[2],l=e[6],c=e[10],h=e[14];return e[3]*(+i*u*l-r*a*l-i*o*c+n*a*c+r*o*h-n*u*h)+e[7]*(+t*u*h-t*a*c+i*s*c-r*s*h+r*a*f-i*u*f)+e[11]*(+t*a*l-t*o*h-i*s*l+n*s*h+i*o*f-n*a*f)+e[15]*(-r*o*f-t*u*l+t*o*c+r*s*l-n*s*c+n*u*f)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){0;var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],s=r[4],o=r[8],u=r[12],a=r[1],f=r[5],l=r[9],c=r[13],h=r[2],p=r[6],d=r[10],v=r[14],m=r[3],g=r[7],y=r[11],r=r[15];n[0]=l*v*g-c*d*g+c*p*y-f*v*y-l*p*r+f*d*r,n[4]=u*d*g-o*v*g-u*p*y+s*v*y+o*p*r-s*d*r,n[8]=o*c*g-u*l*g+u*f*y-s*c*y-o*f*r+s*l*r,n[12]=u*l*p-o*c*p-u*f*d+s*c*d+o*f*v-s*l*v,n[1]=c*d*m-l*v*m-c*h*y+a*v*y+l*h*r-a*d*r,n[5]=o*v*m-u*d*m+u*h*y-i*v*y-o*h*r+i*d*r,n[9]=u*l*m-o*c*m-u*a*y+i*c*y+o*a*r-i*l*r,n[13]=o*c*h-u*l*h+u*a*d-i*c*d-o*a*v+i*l*v,n[2]=f*v*m-c*p*m+c*h*g-a*v*g-f*h*r+a*p*r,n[6]=u*p*m-s*v*m-u*h*g+i*v*g+s*h*r-i*p*r,n[10]=s*c*m-u*f*m+u*a*g-i*c*g-s*a*r+i*f*r,n[14]=u*f*h-s*c*h-u*a*p+i*c*p+s*a*v-i*f*v,n[3]=l*p*m-f*d*m-l*h*g+a*d*g+f*h*y-a*p*y,n[7]=s*d*m-o*p*m+o*h*g-i*d*g-s*h*y+i*p*y,n[11]=o*f*m-s*l*m-o*a*g+i*l*g+s*a*y-i*f*y,n[15]=s*l*h-o*f*h+o*a*p-i*l*p-s*a*d+i*f*d,n=i*n[0]+a*n[4]+h*n[8]+m*n[12];if(0==n){if(t)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");return 0,this.identity(),this}return this.multiplyScalar(1/n),this},translate:function(e){0},rotateX:function(e){0},rotateY:function(e){0},rotateZ:function(e){0},rotateByAxis:function(e,t){0},scale:function(e){var t=this.elements,n=e.x,r=e.y;return e=e.z,t[0]*=n,t[4]*=r,t[8]*=e,t[1]*=n,t[5]*=r,t[9]*=e,t[2]*=n,t[6]*=r,t[10]*=e,t[3]*=n,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],Math.max(e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10])))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,u=e.z,a=i*s,f=i*o;return this.set(a*s+n,a*o-r*u,a*u+r*o,0,a*o+r*u,f*o+n,f*u-r*s,0,a*u-r*o,f*u+r*s,i*u*u+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(n,r,i){var s=this.elements,o=e.set(s[0],s[1],s[2]).length(),u=e.set(s[4],s[5],s[6]).length(),f=e.set(s[8],s[9],s[10]).length();0>this.determinant()&&(o=-o),n.x=s[12],n.y=s[13],n.z=s[14],t.elements.set(this.elements),n=1/o;var s=1/u,l=1/f;return t.elements[0]*=n,t.elements[1]*=n,t.elements[2]*=n,t.elements[4]*=s,t.elements[5]*=s,t.elements[6]*=s,t.elements[8]*=l,t.elements[9]*=l,t.elements[10]*=l,r.setFromRotationMatrix(t),i.x=o,i.y=u,i.z=f,this}}(),makeFrustum:function(e,t,n,r,i,s){var o=this.elements;return o[0]=2*i/(t-e),o[4]=0,o[8]=(t+e)/(t-e),o[12]=0,o[1]=0,o[5]=2*i/(r-n),o[9]=(r+n)/(r-n),o[13]=0,o[2]=0,o[6]=0,o[10]=-(s+i)/(s-i),o[14]=-2*s*i/(s-i),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,n,r){e=n*Math.tan(THREE.Math.degToRad(.5*e));var i=-e;return this.makeFrustum(i*t,e*t,i,e,n,r)},makeOrthographic:function(e,t,n,r,i,s){var o=this.elements,u=t-e,a=n-r,f=s-i;return o[0]=2/u,o[4]=0,o[8]=0,o[12]=-((t+e)/u),o[1]=0,o[5]=2/a,o[9]=0,o[13]=-((n+r)/a),o[2]=0,o[6]=0,o[10]=-2/f,o[14]=-((s+i)/f),o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new THREE.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new THREE.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return 0>r?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,n,r){var i=e.clone().add(t).multiplyScalar(.5),s=t.clone().sub(e).normalize(),o=.5*e.distanceTo(t),u=this.origin.clone().sub(i);e=-this.direction.dot(s),t=u.dot(this.direction);var a=-u.dot(s),f=u.lengthSq(),l=Math.abs(1-e*e),c,h;return 0<=l?(u=e*a-t,c=e*t-a,h=o*l,0<=u?c>=-h?c<=h?(o=1/l,u*=o,c*=o,e=u*(u+e*c+2*t)+c*(e*u+c+2*a)+f):(c=o,u=Math.max(0,-(e*c+t)),e=-u*u+c*(c+2*a)+f):(c=-o,u=Math.max(0,-(e*c+t)),e=-u*u+c*(c+2*a)+f):c<=-h?(u=Math.max(0,-(-e*o+t)),c=0<u?-o:Math.min(Math.max(-o,-a),o),e=-u*u+c*(c+2*a)+f):c<=h?(u=0,c=Math.min(Math.max(-o,-a),o),e=c*(c+2*a)+f):(u=Math.max(0,-(e*o+t)),c=0<u?o:Math.min(Math.max(-o,-a),o),e=-u*u+c*(c+2*a)+f)):(c=0<e?-o:o,u=Math.max(0,-(e*c+t)),e=-u*u+c*(c+2*a)+f),n&&n.copy(this.direction.clone().multiplyScalar(u).add(this.origin)),r&&r.copy(s.clone().multiplyScalar(c).add(i)),e},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new THREE.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,s=t.radius*t.radius;return i>s?null:(s=Math.sqrt(s-i),i=r-s,r+=s,0>i&&0>r?null:0>i?this.at(r,n):this.at(i,n))}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0==t?0==e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,0<=e?e:null)},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var n,r,i,s,o;r=1/this.direction.x,s=1/this.direction.y,o=1/this.direction.z;var u=this.origin;0<=r?(n=(e.min.x-u.x)*r,r*=e.max.x-u.x):(n=(e.max.x-u.x)*r,r*=e.min.x-u.x),0<=s?(i=(e.min.y-u.y)*s,s*=e.max.y-u.y):(i=(e.max.y-u.y)*s,s*=e.min.y-u.y);if(n>s||i>r)return null;if(i>n||n!==n)n=i;if(s<r||r!==r)r=s;0<=o?(i=(e.min.z-u.z)*o,o*=e.max.z-u.z):(i=(e.max.z-u.z)*o,o*=e.min.z-u.z);if(n>o||i>r)return null;if(i>n||n!==n)n=i;if(o<r||r!==r)r=o;return 0>r?null:this.at(0<=n?n:r,t)},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(i,s,o,u,f){t.subVectors(s,i),n.subVectors(o,i),r.crossVectors(t,n),s=this.direction.dot(r);if(0<s){if(u)return null;u=1}else{if(!(0>s))return null;u=-1,s=-s}return e.subVectors(this.origin,i),i=u*this.direction.dot(n.crossVectors(e,n)),0>i?null:(o=u*this.direction.dot(t.cross(e)),0>o||i+o>s?null:(i=-u*e.dot(r),0>i?null:this.at(i/s,f)))}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).center(r);for(var i=0,s=0,o=t.length;s<o;s++)i=Math.max(i,r.distanceToSquared(t[s]));return this.radius=Math.sqrt(i),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new THREE.Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){return e=e||new THREE.Box3,e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,n,r,i,s){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==s?s:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,n,r,i,s){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements;e=n[0];var r=n[1],i=n[2],s=n[3],o=n[4],u=n[5],a=n[6],f=n[7],l=n[8],c=n[9],h=n[10],p=n[11],d=n[12],v=n[13],m=n[14],n=n[15];return t[0].setComponents(s-e,f-o,p-l,n-d).normalize(),t[1].setComponents(s+e,f+o,p+l,n+d).normalize(),t[2].setComponents(s+r,f+u,p+c,n+v).normalize(),t[3].setComponents(s-r,f-u,p-c,n-v).normalize(),t[4].setComponents(s-i,f-a,p-h,n-m).normalize(),t[5].setComponents(s+i,f+a,p+h,n+m).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,n=e.center;e=-e.radius;for(var r=0;6>r;r++)if(t[r].distanceToPoint(n)<e)return!1;return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){for(var r=this.planes,i=0;6>i;i++){var s=r[i];e.x=0<s.normal.x?n.min.x:n.max.x,t.x=0<s.normal.x?n.max.x:n.min.x,e.y=0<s.normal.y?n.min.y:n.max.y,t.y=0<s.normal.y?n.max.y:n.min.y,e.z=0<s.normal.z?n.min.z:n.max.z,t.z=0<s.normal.z?n.max.z:n.min.z;var o=s.distanceToPoint(e),s=s.distanceToPoint(t);if(0>o&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,r,i){return r=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,n),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new THREE.Vector3).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectLine:function(){var e=new THREE.Vector3;return function(t,n){var r=n||new THREE.Vector3,i=t.delta(e),s=this.normal.dot(i);if(0!=s)return s=-(t.start.dot(this.normal)+this.constant)/s,0>s||1<s?void 0:r.copy(i).multiplyScalar(s).add(t.start);if(0==this.distanceToPoint(t.start))return r.copy(t.start)}}(),coplanarPoint:function(e){return(e||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(r,i){var s=i||n.getNormalMatrix(r),s=e.copy(this.normal).applyMatrix3(s),o=this.coplanarPoint(t);return o.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(s,o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=Array(36),n=0,r;return function(){for(var i=0;36>i;i++)8==i||13==i||18==i||23==i?t[i]="-":14==i?t[i]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),r=n&15,n>>=4,t[i]=e[19==i?r&3|8:r]);return t.join("")}}(),clamp:function(e,t,n){return e<t?t:e>n?n:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e}},THREE.Spline=function(e){function t(e,t,n,r,i,s,o){return e=.5*(n-e),r=.5*(r-t),(2*(t-n)+e+r)*o+(-3*(t-n)-2*e-r)*s+e*i+t}this.points=e;var n=[],r={x:0,y:0,z:0},i,s,o,u,a,f,l,c,h;this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return i=(this.points.length-1)*e,s=Math.floor(i),o=i-s,n[0]=0===s?s:s-1,n[1]=s,n[2]=s>this.points.length-2?this.points.length-1:s+1,n[3]=s>this.points.length-3?this.points.length-1:s+2,f=this.points[n[0]],l=this.points[n[1]],c=this.points[n[2]],h=this.points[n[3]],u=o*o,a=o*u,r.x=t(f.x,l.x,c.x,h.x,o,u,a),r.y=t(f.y,l.y,c.y,h.y,o,u,a),r.z=t(f.z,l.z,c.z,h.z,o,u,a),r},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i=t=t=0,s=new THREE.Vector3,o=new THREE.Vector3,u=[],a=0;u[0]=0,e||(e=100),n=this.points.length*e,s.copy(this.points[0]);for(e=1;e<n;e++)t=e/n,r=this.getPoint(t),o.copy(r),a+=o.distanceTo(s),s.copy(r),t*=this.points.length-1,t=Math.floor(t),t!=i&&(u[t]=a,i=t);return u[u.length]=a,{chunks:u,total:a}},this.reparametrizeByArcLength=function(e){var t,n,r,i,s,o,u=[],a=new THREE.Vector3,f=this.getLength();u.push(a.copy(this.points[0]).clone());for(t=1;t<this.points.length;t++){n=f.chunks[t]-f.chunks[t-1],o=Math.ceil(e*n/f.total),i=(t-1)/(this.points.length-1),s=t/(this.points.length-1);for(n=1;n<o-1;n++)r=i+1/o*n*(s-i),r=this.getPoint(r),u.push(a.copy(r).clone());u.push(a.copy(this.points[t]).clone())}this.points=u}},THREE.Triangle=function(e,t,n){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==n?n:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,n,r,i){return i=i||new THREE.Vector3,i.subVectors(r,n),e.subVectors(t,n),i.cross(e),t=i.lengthSq(),0<t?i.multiplyScalar(1/Math.sqrt(t)):i.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,s,o,u){e.subVectors(o,i),t.subVectors(s,i),n.subVectors(r,i),r=e.dot(e),i=e.dot(t),s=e.dot(n);var f=t.dot(t);o=t.dot(n);var l=r*f-i*i;return u=u||new THREE.Vector3,0==l?u.set(-2,-1,-1):(l=1/l,f=(f*s-i*o)*l,r=(r*o-i*s)*l,u.set(1-f-r,r,f))}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,n,r,i){return t=THREE.Triangle.barycoordFromPoint(t,n,r,i,e),0<=t.x&&0<=t.y&&1>=t.x+t.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;this.autoStart&&!this.running&&this.start();if(this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),e=.001*(t-this.oldTime);this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=[],r=t.length,i=0;i<r;i++)n[i]=t[i];for(i=0;i<r;i++)n[i].call(this,e)}}}},function(e){e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||Infinity,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},n=function(e,t,r,i){e.raycast(t,r);if(!0===i){e=e.children,i=0;for(var s=e.length;i<s;i++)n(e[i],t,r,!0)}};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(e,r){var i=[];if(0==e instanceof Array)return 0,i;for(var s=0,o=e.length;s<o;s++)n(e[s],this,i,r);return i.sort(t),i}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var e=new THREE.Vector3,t=new THREE.Euler,n=new THREE.Quaternion,r=new THREE.Vector3(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r}}),this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return 0,this.rotation.order},set eulerOrder(e){0,this.rotation.order=e},get useQuaternion(){0},set useQuaternion(e){0},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translate:function(e,t){return 0,this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(0,this):(e instanceof THREE.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):0,this)},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);t=this.children.indexOf(e),-1!==t&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(t,1))},getChildByName:function(e,t){return 0,this.getObjectByName(e,t)},getObjectById:function(e,t){if(this.id===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectById(e,t);if(void 0!==i)return i}},getObjectByName:function(e,t){if(this.name===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByName(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return e=e||new THREE.Vector3,this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){return n=n||new THREE.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldRotation:function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Euler,this.getWorldQuaternion(e),t.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new THREE.Vector3,t=new THREE.Quaternion;return function(n){return n=n||new THREE.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Vector3,this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=0,n=this.children.length;t<n;t++)this.children[t].traverseVisible(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===e)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0;for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},n=function(n){void 0===e.geometries&&(e.geometries=[]);if(void 0===t[n.uuid]){var r=n.toJSON();delete r.metadata,t[n.uuid]=r,e.geometries.push(r)}return n.uuid},r={},i=function(t){void 0===e.materials&&(e.materials=[]);if(void 0===r[t.uuid]){var n=t.toJSON();delete n.metadata,r[t.uuid]=n,e.materials.push(n)}return t.uuid},s=function(e){var t={};t.uuid=e.uuid,t.type=e.type,""!==e.name&&(t.name=e.name),"{}"!==JSON.stringify(e.userData)&&(t.userData=e.userData),!0!==e.visible&&(t.visible=e.visible),e instanceof THREE.PerspectiveCamera?(t.fov=e.fov,t.aspect=e.aspect,t.near=e.near,t.far=e.far):e instanceof THREE.OrthographicCamera?(t.left=e.left,t.right=e.right,t.top=e.top,t.bottom=e.bottom,t.near=e.near,t.far=e.far):e instanceof THREE.AmbientLight?t.color=e.color.getHex():e instanceof THREE.DirectionalLight?(t.color=e.color.getHex(),t.intensity=e.intensity):e instanceof THREE.PointLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance):e instanceof THREE.SpotLight?(t.color=e.color.getHex(),t.intensity=e.intensity,t.distance=e.distance,t.angle=e.angle,t.exponent=e.exponent):e instanceof THREE.HemisphereLight?(t.color=e.color.getHex(),t.groundColor=e.groundColor.getHex()):e instanceof THREE.Mesh?(t.geometry=n(e.geometry),t.material=i(e.material)):e instanceof THREE.Line?(t.geometry=n(e.geometry),t.material=i(e.material)):e instanceof THREE.Sprite&&(t.material=i(e.material)),t.matrix=e.matrix.toArray();if(0<e.children.length){t.children=[];for(var r=0;r<e.children.length;r++)t.children.push(s(e.children[r]))}return t};return e.object=s(this),e},clone:function(e,t){void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData));if(!0===t)for(var n=0;n<this.children.length;n++)e.add(this.children[n].clone());return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){0,this.projectVector=function(e,t){0,e.project(t)},this.unprojectVector=function(e,t){0,e.unproject(t)},this.pickingRay=function(e,t){0}},THREE.Face3=function(e,t,n,r,i,s){this.a=e,this.b=t,this.c=n,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=i instanceof THREE.Color?i:new THREE.Color,this.vertexColors=i instanceof Array?i:[],this.vertexTangents=[],this.materialIndex=void 0!==s?s:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,n=this.vertexNormals.length;t<n;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();t=0;for(n=this.vertexColors.length;t<n;t++)e.vertexColors[t]=this.vertexColors[t].clone();t=0;for(n=this.vertexTangents.length;t<n;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,n,r,i,s,o){return 0,new THREE.Face3(e,t,n,i,s,o)},THREE.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r]},set:function(e){return this.array.set(e),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},THREE.Int8Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Uint8Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Uint8ClampedAttribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Int16Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Uint16Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Int32Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Uint32Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Float32Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.Float64Attribute=function(e,t){return 0,new THREE.BufferAttribute(e,t)},THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.offsets=this.drawcalls=[],this.boundingSphere=this.boundingBox=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t,n){0==t instanceof THREE.BufferAttribute?(0,this.attributes[e]={array:t,itemSize:n}):(this.attributes[e]=t,this.attributesKeys=Object.keys(this.attributes))},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,n){this.drawcalls.push({start:e,count:t,index:void 0!==n?n:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t&&((new THREE.Matrix3).getNormalMatrix(e).applyToVector3Array(t.array),t.needsUpdate=!0)},center:function(){},fromGeometry:function(e,t){t=t||{vertexColors:THREE.NoColors};var n=e.vertices,r=e.faces,i=e.faceVertexUvs,s=t.vertexColors,o=0<i[0].length,u=3==r[0].vertexNormals.length,a=new Float32Array(9*r.length);this.addAttribute("position",new THREE.BufferAttribute(a,3));var f=new Float32Array(9*r.length);this.addAttribute("normal",new THREE.BufferAttribute(f,3));if(s!==THREE.NoColors){var l=new Float32Array(9*r.length);this.addAttribute("color",new THREE.BufferAttribute(l,3))}if(!0===o){var c=new Float32Array(6*r.length);this.addAttribute("uv",new THREE.BufferAttribute(c,2))}for(var h=0,p=0,d=0;h<r.length;h++,p+=6,d+=9){var v=r[h],m=n[v.a],g=n[v.b],y=n[v.c];a[d]=m.x,a[d+1]=m.y,a[d+2]=m.z,a[d+3]=g.x,a[d+4]=g.y,a[d+5]=g.z,a[d+6]=y.x,a[d+7]=y.y,a[d+8]=y.z,!0===u?(m=v.vertexNormals[0],g=v.vertexNormals[1],y=v.vertexNormals[2],f[d]=m.x,f[d+1]=m.y,f[d+2]=m.z,f[d+3]=g.x,f[d+4]=g.y,f[d+5]=g.z,f[d+6]=y.x,f[d+7]=y.y,f[d+8]=y.z):(m=v.normal,f[d]=m.x,f[d+1]=m.y,f[d+2]=m.z,f[d+3]=m.x,f[d+4]=m.y,f[d+5]=m.z,f[d+6]=m.x,f[d+7]=m.y,f[d+8]=m.z),s===THREE.FaceColors?(v=v.color,l[d]=v.r,l[d+1]=v.g,l[d+2]=v.b,l[d+3]=v.r,l[d+4]=v.g,l[d+5]=v.b,l[d+6]=v.r,l[d+7]=v.g,l[d+8]=v.b):s===THREE.VertexColors&&(m=v.vertexColors[0],g=v.vertexColors[1],v=v.vertexColors[2],l[d]=m.r,l[d+1]=m.g,l[d+2]=m.b,l[d+3]=g.r,l[d+4]=g.g,l[d+5]=g.b,l[d+6]=v.r,l[d+7]=v.g,l[d+8]=v.b),!0===o&&(v=i[0][h][0],m=i[0][h][1],g=i[0][h][2],c[p]=v.x,c[p+1]=v.y,c[p+2]=m.x,c[p+3]=m.y,c[p+4]=g.x,c[p+5]=g.y)}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var e=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.attributes.position.array;if(t){var n=this.boundingBox;n.makeEmpty();for(var r=0,i=t.length;r<i;r+=3)e.set(t[r],t[r+1],t[r+2]),n.expandByPoint(e)}if(void 0===t||0===t.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&0}}(),computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var n=this.attributes.position.array;if(n){e.makeEmpty();for(var r=this.boundingSphere.center,i=0,s=n.length;i<s;i+=3)t.set(n[i],n[i+1],n[i+2]),e.expandByPoint(t);e.center(r);for(var o=0,i=0,s=n.length;i<s;i+=3)t.set(n[i],n[i+1],n[i+2]),o=Math.max(o,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&0}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.length),3));else for(var n=e.normal.array,r=0,i=n.length;r<i;r++)n[r]=0;var n=e.normal.array,s,o,u,a=new THREE.Vector3,f=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3;if(e.index)for(var p=e.index.array,d=0<this.offsets.length?this.offsets:[{start:0,count:p.length,index:0}],v=0,m=d.length;v<m;++v){i=d[v].start,s=d[v].count;for(var g=d[v].index,r=i,i=i+s;r<i;r+=3)s=3*(g+p[r]),o=3*(g+p[r+1]),u=3*(g+p[r+2]),a.fromArray(t,s),f.fromArray(t,o),l.fromArray(t,u),c.subVectors(l,f),h.subVectors(a,f),c.cross(h),n[s]+=c.x,n[s+1]+=c.y,n[s+2]+=c.z,n[o]+=c.x,n[o+1]+=c.y,n[o+2]+=c.z,n[u]+=c.x,n[u+1]+=c.y,n[u+2]+=c.z}else for(r=0,i=t.length;r<i;r+=9)a.fromArray(t,r),f.fromArray(t,r+3),l.fromArray(t,r+6),c.subVectors(l,f),h.subVectors(a,f),c.cross(h),n[r]=c.x,n[r+1]=c.y,n[r+2]=c.z,n[r+3]=c.x,n[r+4]=c.y,n[r+5]=c.z,n[r+6]=c.x,n[r+7]=c.y,n[r+8]=c.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){function e(e,t,n){c.fromArray(r,3*e),h.fromArray(r,3*t),p.fromArray(r,3*n),d.fromArray(s,2*e),v.fromArray(s,2*t),m.fromArray(s,2*n),g=h.x-c.x,y=p.x-c.x,b=h.y-c.y,w=p.y-c.y,E=h.z-c.z,S=p.z-c.z,x=v.x-d.x,T=m.x-d.x,N=v.y-d.y,C=m.y-d.y,k=1/(x*C-T*N),L.set((C*g-N*y)*k,(C*b-N*w)*k,(C*E-N*S)*k),A.set((x*y-T*g)*k,(x*w-T*b)*k,(x*S-T*E)*k),a[e].add(L),a[t].add(L),a[n].add(L),f[e].add(A),f[t].add(A),f[n].add(A)}function t(e){I.fromArray(i,3*e),q.copy(I),U=a[e],j.copy(U),j.sub(I.multiplyScalar(I.dot(U))).normalize(),F.crossVectors(q,U),z=F.dot(f[e]),R=0>z?-1:1,u[4*e]=j.x,u[4*e+1]=j.y,u[4*e+2]=j.z,u[4*e+3]=R}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)0;else{var n=this.attributes.index.array,r=this.attributes.position.array,i=this.attributes.normal.array,s=this.attributes.uv.array,o=r.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*o),4));for(var u=this.attributes.tangent.array,a=[],f=[],l=0;l<o;l++)a[l]=new THREE.Vector3,f[l]=new THREE.Vector3;var c=new THREE.Vector3,h=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector2,v=new THREE.Vector2,m=new THREE.Vector2,g,y,b,w,E,S,x,T,N,C,k,L=new THREE.Vector3,A=new THREE.Vector3,O,M,_,D,P;0===this.drawcalls.length&&this.addDrawCall(0,n.length,0);var H=this.drawcalls,l=0;for(M=H.length;l<M;++l){O=H[l].start,_=H[l].count;var B=H[l].index,o=O;for(O+=_;o<O;o+=3)_=B+n[o],D=B+n[o+1],P=B+n[o+2],e(_,D,P)}var j=new THREE.Vector3,F=new THREE.Vector3,I=new THREE.Vector3,q=new THREE.Vector3,R,U,z,l=0;for(M=H.length;l<M;++l)for(O=H[l].start,_=H[l].count,B=H[l].index,o=O,O+=_;o<O;o+=3)_=B+n[o],D=B+n[o+1],P=B+n[o+2],t(_),t(D),t(P)}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535),Date.now(),e=this.attributes.index.array;for(var n=this.attributes.position.array,r=e.length/3,i=new Uint16Array(e.length),s=0,o=0,u=[{start:0,count:0,index:0}],a=u[0],f=0,l=0,c=new Int32Array(6),h=new Int32Array(n.length),p=new Int32Array(n.length),d=0;d<n.length;d++)h[d]=-1,p[d]=-1;for(n=0;n<r;n++){for(var v=l=0;3>v;v++)d=e[3*n+v],-1==h[d]?(c[2*v]=d,c[2*v+1]=-1,l++):h[d]<a.index?(c[2*v]=d,c[2*v+1]=-1,f++):(c[2*v]=d,c[2*v+1]=h[d]);if(o+l>a.index+t)for(a={start:s,count:0,index:o},u.push(a),l=0;6>l;l+=2)v=c[l+1],-1<v&&v<a.index&&(c[l+1]=-1);for(l=0;6>l;l+=2)d=c[l],v=c[l+1],-1===v&&(v=o++),h[d]=v,p[v]=d,i[s++]=v-a.index,a.count++}return this.reorderBuffers(i,p,o),this.offsets=u},merge:function(){0},normalizeNormals:function(){for(var e=this.attributes.normal.array,t,n,r,i=0,s=e.length;i<s;i+=3)t=e[i],n=e[i+1],r=e[i+2],t=1/Math.sqrt(t*t+n*n+r*r),e[i]*=t,e[i+1]*=t,e[i+2]*=t},reorderBuffers:function(e,t,n){var r={},i;for(i in this.attributes)"index"!=i&&(r[i]=new this.attributes[i].array.constructor(this.attributes[i].itemSize*n));for(var s=0;s<n;s++){var o=t[s];for(i in this.attributes)if("index"!=i)for(var u=this.attributes[i].array,a=this.attributes[i].itemSize,f=r[i],l=0;l<a;l++)f[s*a+l]=u[o*a+l]}this.attributes.index.array=e;for(i in this.attributes)"index"!=i&&(this.attributes[i].array=r[i],this.attributes[i].numItems=this.attributes[i].itemSize*n)},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},t=this.attributes,n=this.offsets,r=this.boundingSphere,i;for(i in t){for(var s=t[i],o=[],u=s.array,a=0,f=u.length;a<f;a++)o[a]=u[a];e.data.attributes[i]={itemSize:s.itemSize,type:s.array.constructor.name,array:o}}return 0<n.length&&(e.data.offsets=JSON.parse(JSON.stringify(n))),null!==r&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e},clone:function(){var e=new THREE.BufferGeometry,t;for(t in this.attributes)e.addAttribute(t,this.attributes[t].clone());t=0;for(var n=this.offsets.length;t<n;t++){var r=this.offsets[t];e.offsets.push({start:r.start,index:r.index,count:r.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.hasTangents=!1,this.dynamic=!0,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);n=0;for(r=this.faces.length;n<r;n++){e=this.faces[n],e.normal.applyMatrix3(t).normalize();for(var i=0,s=e.vertexNormals.length;i<s;i++)e.vertexNormals[i].applyMatrix3(t).normalize()}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},fromBufferGeometry:function(e){for(var t=this,n=e.attributes,r=n.position.array,i=void 0!==n.index?n.index.array:void 0,s=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,u=void 0!==n.uv?n.uv.array:void 0,a=[],f=[],l=n=0;n<r.length;n+=3,l+=2)t.vertices.push(new THREE.Vector3(r[n],r[n+1],r[n+2])),void 0!==s&&a.push(new THREE.Vector3(s[n],s[n+1],s[n+2])),void 0!==o&&t.colors.push(new THREE.Color(o[n],o[n+1],o[n+2])),void 0!==u&&f.push(new THREE.Vector2(u[l],u[l+1]));u=function(e,n,r){var i=void 0!==s?[a[e].clone(),a[n].clone(),a[r].clone()]:[],u=void 0!==o?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[];t.faces.push(new THREE.Face3(e,n,r,i,u)),t.faceVertexUvs[0].push([f[e],f[n],f[r]])};if(void 0!==i)for(n=0;n<i.length;n+=3)u(i[n],i[n+1],i[n+2]);else for(n=0;n<r.length/3;n+=3)u(n,n+1,n+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=new THREE.Vector3;return e.addVectors(this.boundingBox.min,this.boundingBox.max),e.multiplyScalar(-0.5),this.applyMatrix((new THREE.Matrix4).makeTranslation(e.x,e.y,e.z)),this.computeBoundingBox(),e},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],s=this.vertices[i.a],o=this.vertices[i.b];e.subVectors(this.vertices[i.c],o),t.subVectors(s,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r;r=Array(this.vertices.length),t=0;for(n=this.vertices.length;t<n;t++)r[t]=new THREE.Vector3;if(e){var i,s,o,u=new THREE.Vector3,a=new THREE.Vector3;new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,e=0;for(t=this.faces.length;e<t;e++)n=this.faces[e],i=this.vertices[n.a],s=this.vertices[n.b],o=this.vertices[n.c],u.subVectors(o,s),a.subVectors(i,s),u.cross(a),r[n.a].add(u),r[n.b].add(u),r[n.c].add(u)}else for(e=0,t=this.faces.length;e<t;e++)n=this.faces[e],r[n.a].add(n.normal),r[n.b].add(n.normal),r[n.c].add(n.normal);t=0;for(n=this.vertices.length;t<n;t++)r[t].normalize();e=0;for(t=this.faces.length;e<t;e++)n=this.faces[e],n.vertexNormals[0]=r[n.a].clone(),n.vertexNormals[1]=r[n.b].clone(),n.vertexNormals[2]=r[n.c].clone()},computeMorphNormals:function(){var e,t,n,r,i;n=0;for(r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var s=new THREE.Geometry;s.faces=this.faces,e=0;for(t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[],i=this.morphNormals[e].faceNormals;var o=this.morphNormals[e].vertexNormals,u,a;n=0;for(r=this.faces.length;n<r;n++)u=new THREE.Vector3,a={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},i.push(u),o.push(a)}o=this.morphNormals[e],s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals(),n=0;for(r=this.faces.length;n<r;n++)i=this.faces[n],u=o.faceNormals[n],a=o.vertexNormals[n],u.copy(i.normal),a.a.copy(i.vertexNormals[0]),a.b.copy(i.vertexNormals[1]),a.c.copy(i.vertexNormals[2])}n=0;for(r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=[],y=[];n=new THREE.Vector3;var b=new THREE.Vector3,w=new THREE.Vector3,E=new THREE.Vector3,S=new THREE.Vector3;e=0;for(t=this.vertices.length;e<t;e++)g[e]=new THREE.Vector3,y[e]=new THREE.Vector3;e=0;for(t=this.faces.length;e<t;e++)i=this.faces[e],s=this.faceVertexUvs[0][e],r=i.a,m=i.b,i=i.c,o=this.vertices[r],u=this.vertices[m],a=this.vertices[i],f=s[0],l=s[1],c=s[2],s=u.x-o.x,h=a.x-o.x,p=u.y-o.y,d=a.y-o.y,u=u.z-o.z,o=a.z-o.z,a=l.x-f.x,v=c.x-f.x,l=l.y-f.y,f=c.y-f.y,c=1/(a*f-v*l),n.set((f*s-l*h)*c,(f*p-l*d)*c,(f*u-l*o)*c),b.set((a*h-v*s)*c,(a*d-v*p)*c,(a*o-v*u)*c),g[r].add(n),g[m].add(n),g[i].add(n),y[r].add(b),y[m].add(b),y[i].add(b);b=["a","b","c","d"],e=0;for(t=this.faces.length;e<t;e++)for(i=this.faces[e],n=0;n<Math.min(i.vertexNormals.length,3);n++)S.copy(i.vertexNormals[n]),r=i[b[n]],m=g[r],w.copy(m),w.sub(S.multiplyScalar(S.dot(m))).normalize(),E.crossVectors(i.vertexNormals[n],m),r=E.dot(y[r]),r=0>r?-1:1,i.vertexTangents[n]=new THREE.Vector4(w.x,w.y,w.z,r);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(0==e instanceof THREE.Geometry)0;else{var r,i=this.vertices.length,s=this.vertices,o=e.vertices,u=this.faces,a=e.faces,f=this.faceVertexUvs[0];e=e.faceVertexUvs[0],void 0===n&&(n=0),void 0!==t&&(r=(new THREE.Matrix3).getNormalMatrix(t));for(var l=0,c=o.length;l<c;l++){var h=o[l].clone();void 0!==t&&h.applyMatrix4(t),s.push(h)}l=0;for(c=a.length;l<c;l++){var o=a[l],p,d=o.vertexNormals,v=o.vertexColors,h=new THREE.Face3(o.a+i,o.b+i,o.c+i);h.normal.copy(o.normal),void 0!==r&&h.normal.applyMatrix3(r).normalize(),t=0;for(s=d.length;t<s;t++)p=d[t].clone(),void 0!==r&&p.applyMatrix3(r).normalize(),h.vertexNormals.push(p);h.color.copy(o.color),t=0;for(s=v.length;t<s;t++)p=v[t],h.vertexColors.push(p.clone());h.materialIndex=o.materialIndex+n,u.push(h)}l=0;for(c=e.length;l<c;l++)if(n=e[l],r=[],void 0!==n){t=0;for(s=n.length;t<s;t++)r.push(new THREE.Vector2(n[t].x,n[t].y));f.push(r)}}},mergeVertices:function(){var e={},t=[],n=[],r,i=Math.pow(10,4),s,o;s=0;for(o=this.vertices.length;s<o;s++)r=this.vertices[s],r=Math.round(r.x*i)+"_"+Math.round(r.y*i)+"_"+Math.round(r.z*i),void 0===e[r]?(e[r]=s,t.push(this.vertices[s]),n[s]=t.length-1):n[s]=n[e[r]];e=[],s=0;for(o=this.faces.length;s<o;s++)for(i=this.faces[s],i.a=n[i.a],i.b=n[i.b],i.c=n[i.c],i=[i.a,i.b,i.c],r=0;3>r;r++)if(i[r]==i[(r+1)%3]){e.push(s);break}for(s=e.length-1;0<=s;s--)for(i=e[s],this.faces.splice(i,1),n=0,o=this.faceVertexUvs.length;n<o;n++)this.faceVertexUvs[n].splice(i,1);return s=this.vertices.length-t.length,this.vertices=t,s},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==f[t]?f[t]:(f[t]=a.length/3,a.push(e.x,e.y,e.z),f[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=l.length,l.push(e.getHex()),c[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/2,h.push(e.x,e.y),p[t])}var i={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};""!==this.name&&(i.name=this.name);if(void 0!==this.parameters){var s=this.parameters,o;for(o in s)void 0!==s[o]&&(i[o]=s[o]);return i}s=[];for(o=0;o<this.vertices.length;o++){var u=this.vertices[o];s.push(u.x,u.y,u.z)}var u=[],a=[],f={},l=[],c={},h=[],p={};for(o=0;o<this.faces.length;o++){var d=this.faces[o],v=void 0!==this.faceVertexUvs[0][o],m=0<d.normal.length(),g=0<d.vertexNormals.length,y=1!==d.color.r||1!==d.color.g||1!==d.color.b,b=0<d.vertexColors.length,w=0,w=e(w,0,0),w=e(w,1,!1),w=e(w,2,!1),w=e(w,3,v),w=e(w,4,m),w=e(w,5,g),w=e(w,6,y),w=e(w,7,b);u.push(w),u.push(d.a,d.b,d.c),v&&(v=this.faceVertexUvs[0][o],u.push(r(v[0]),r(v[1]),r(v[2]))),m&&u.push(t(d.normal)),g&&(m=d.vertexNormals,u.push(t(m[0]),t(m[1]),t(m[2]))),y&&u.push(n(d.color)),b&&(d=d.vertexColors,u.push(n(d[0]),n(d[1]),n(d[2])))}return i.data={},i.data.vertices=s,i.data.normals=a,0<l.length&&(i.data.colors=l),0<h.length&&(i.data.uvs=[h]),i.data.faces=u,i},clone:function(){for(var e=new THREE.Geometry,t=this.vertices,n=0,r=t.length;n<r;n++)e.vertices.push(t[n].clone());t=this.faces,n=0;for(r=t.length;n<r;n++)e.faces.push(t[n].clone());t=this.faceVertexUvs[0],n=0;for(r=t.length;n<r;n++){for(var i=t[n],s=[],o=0,u=i.length;o<u;o++)s.push(new THREE.Vector2(i[o].x,i[o].y));e.faceVertexUvs[0].push(s)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.getWorldDirection=function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Vector3,this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},THREE.CubeCamera=function(e,t,n){THREE.Object3D.call(this),this.type="CubeCamera";var r=new THREE.PerspectiveCamera(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new THREE.Vector3(1,0,0)),this.add(r);var i=new THREE.PerspectiveCamera(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new THREE.Vector3(-1,0,0)),this.add(i);var s=new THREE.PerspectiveCamera(90,1,e,t);s.up.set(0,0,1),s.lookAt(new THREE.Vector3(0,1,0)),this.add(s);var o=new THREE.PerspectiveCamera(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new THREE.Vector3(0,-1,0)),this.add(o);var u=new THREE.PerspectiveCamera(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new THREE.Vector3(0,0,1)),this.add(u);var a=new THREE.PerspectiveCamera(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new THREE.Vector3(0,0,-1)),this.add(a),this.renderTarget=new THREE.WebGLRenderTargetCube(n,n,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var n=this.renderTarget,l=n.generateMipmaps;n.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,s,n),n.activeCubeFace=3,e.render(t,o,n),n.activeCubeFace=4,e.render(t,u,n),n.generateMipmaps=l,n.activeCubeFace=5,e.render(t,a,n)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.OrthographicCamera=function(e,t,n,r,i,s){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-e,n+e,r+t,r-t,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.PerspectiveCamera=function(e,t,n,r){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,s){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=r,this.width=i,this.height=s,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,e=Math.tan(THREE.Math.degToRad(.5*e))*this.near,n=-e,r=t*n,t=Math.abs(t*e-r),n=Math.abs(e-n);this.projectionMatrix.makeFrustum(r+this.x*t/this.fullWidth,r+(this.x+this.width)*t/this.fullWidth,e-(this.y+this.height)*n/this.fullHeight,e-this.y*n/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.Light=function(e){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.type="AreaLight",this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.height=this.width=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},THREE.HemisphereLight=function(e,t,n){THREE.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==n?n:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,n){THREE.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},THREE.SpotLight=function(e,t,n,r,i){THREE.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==i?i:10,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},THREE.Cache=function(){this.files={}},THREE.Cache.prototype={constructor:THREE.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},THREE.Loader=function(e){this.statusDomElement=(this.showStatus=e)?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ",t=e.total?t+((100*e.loaded/e.total).toFixed(0)+"%"):t+((e.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=t},extractUrlBase:function(e){return e=e.split("/"),1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(e,t){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t);return n},needsTangents:function(e){for(var t=0,n=e.length;t<n;t++)if(e[t]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(e,t){function n(e){return e=Math.log(e)/Math.LN2,Math.pow(2,Math.round(e))}function r(e,r,i,o,u,a,l){var h=t+i,p,d=THREE.Loader.Handlers.get(h);null!==d?p=d.load(h):(p=new THREE.Texture,d=s.imageLoader,d.crossOrigin=s.crossOrigin,d.load(h,function(e){if(!1===THREE.Math.isPowerOfTwo(e.width)||!1===THREE.Math.isPowerOfTwo(e.height)){var t=n(e.width),r=n(e.height),i=document.createElement("canvas");i.width=t,i.height=r,i.getContext("2d").drawImage(e,0,0,t,r),p.image=i}else p.image=e;p.needsUpdate=!0})),p.sourceFile=i,o&&(p.repeat.set(o[0],o[1]),1!==o[0]&&(p.wrapS=THREE.RepeatWrapping),1!==o[1]&&(p.wrapT=THREE.RepeatWrapping)),u&&p.offset.set(u[0],u[1]),a&&(i={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==i[a[0]]&&(p.wrapS=i[a[0]]),void 0!==i[a[1]]&&(p.wrapT=i[a[1]])),l&&(p.anisotropy=l),e[r]=p}function i(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var s=this,o="MeshLambertMaterial",u={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var a=e.shading.toLowerCase();"phong"===a?o="MeshPhongMaterial":"basic"===a&&(o="MeshBasicMaterial")}void 0!==e.blending&&void 0!==THREE[e.blending]&&(u.blending=THREE[e.blending]);if(void 0!==e.transparent||1>e.opacity)u.transparent=e.transparent;return void 0!==e.depthTest&&(u.depthTest=e.depthTest),void 0!==e.depthWrite&&(u.depthWrite=e.depthWrite),void 0!==e.visible&&(u.visible=e.visible),void 0!==e.flipSided&&(u.side=THREE.BackSide),void 0!==e.doubleSided&&(u.side=THREE.DoubleSide),void 0!==e.wireframe&&(u.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?u.vertexColors=THREE.FaceColors:e.vertexColors&&(u.vertexColors=THREE.VertexColors)),e.colorDiffuse?u.color=i(e.colorDiffuse):e.DbgColor&&(u.color=e.DbgColor),e.colorSpecular&&(u.specular=i(e.colorSpecular)),e.colorAmbient&&(u.ambient=i(e.colorAmbient)),e.colorEmissive&&(u.emissive=i(e.colorEmissive)),e.transparency&&(u.opacity=e.transparency),e.specularCoef&&(u.shininess=e.specularCoef),e.mapDiffuse&&t&&r(u,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&r(u,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&r(u,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&r(u,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&r(u,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&r(u,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(u.bumpScale=e.mapBumpScale),e.mapNormal?(o=THREE.ShaderLib.normalmap,a=THREE.UniformsUtils.clone(o.uniforms),a.tNormal.value=u.normalMap,e.mapNormalFactor&&a.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),u.map&&(a.tDiffuse.value=u.map,a.enableDiffuse.value=!0),u.specularMap&&(a.tSpecular.value=u.specularMap,a.enableSpecular.value=!0),u.lightMap&&(a.tAO.value=u.lightMap,a.enableAO.value=!0),a.diffuse.value.setHex(u.color),a.specular.value.setHex(u.specular),a.ambient.value.setHex(u.ambient),a.shininess.value=u.shininess,void 0!==u.opacity&&(a.opacity.value=u.opacity),o=new THREE.ShaderMaterial({fragmentShader:o.fragmentShader,vertexShader:o.vertexShader,uniforms:a,lights:!0,fog:!0}),u.transparent&&(o.transparent=!0)):o=new THREE[o](u),void 0!==e.DbgName&&(o.name=e.DbgName),o}},THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,n=this.handlers.length;t<n;t+=2){var r=this.handlers[t+1];if(this.handlers[t].test(e))return r}return null}},THREE.XHRLoader=function(e){this.cache=new THREE.Cache,this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,n,r){var i=this,s=i.cache.get(e);void 0!==s?t&&t(s):(s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",function(n){i.cache.add(e,this.response),t&&t(this.response),i.manager.itemEnd(e)},!1),void 0!==n&&s.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&s.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(s.responseType=this.responseType),s.send(null),i.manager.itemStart(e))},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.cache=new THREE.Cache,this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,n,r){var i=this,s=i.cache.get(e);if(void 0===s)return s=document.createElement("img"),void 0!==t&&s.addEventListener("load",function(n){i.cache.add(e,this),t(this),i.manager.itemEnd(e)},!1),void 0!==n&&s.addEventListener("progress",function(e){n(e)},!1),void 0!==r&&s.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),s.src=e,i.manager.itemStart(e),s;t(s)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(e,t,n){n=n&&"string"==typeof n?n:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,n)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,n,r,i){var s=new XMLHttpRequest,o=0;s.onreadystatechange=function(){if(s.readyState===s.DONE)if(200===s.status||0===s.status){if(s.responseText){var u=JSON.parse(s.responseText);if(void 0!==u.metadata&&"scene"===u.metadata.type){0;return}u=e.parse(u,r),n(u.geometry,u.materials)}else 0;e.onLoadComplete()}else 0;else s.readyState===s.LOADING?i&&(0===o&&(o=s.getResponseHeader("Content-Length")),i({total:o,loaded:s.responseText.length})):s.readyState===s.HEADERS_RECEIVED&&void 0!==i&&(o=s.getResponseHeader("Content-Length"))},s.open("GET",t,!0),s.withCredentials=this.withCredentials,s.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){var n=new THREE.Geometry,r=void 0!==e.scale?1/e.scale:1;return function(t){var r,i,s,o,u,f,l,h,p,d,v,m,g,y=e.faces;f=e.vertices;var b=e.normals,w=e.colors,E=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&E++;for(r=0;r<E;r++)n.faceVertexUvs[r]=[]}o=0;for(u=f.length;o<u;)r=new THREE.Vector3,r.x=f[o++]*t,r.y=f[o++]*t,r.z=f[o++]*t,n.vertices.push(r);o=0;for(u=y.length;o<u;)if(t=y[o++],p=t&1,s=t&2,r=t&8,l=t&16,d=t&32,f=t&64,t&=128,p){p=new THREE.Face3,p.a=y[o],p.b=y[o+1],p.c=y[o+3],v=new THREE.Face3,v.a=y[o+1],v.b=y[o+2],v.c=y[o+3],o+=4,s&&(s=y[o++],p.materialIndex=s,v.materialIndex=s),s=n.faces.length;if(r)for(r=0;r<E;r++)for(m=e.uvs[r],n.faceVertexUvs[r][s]=[],n.faceVertexUvs[r][s+1]=[],i=0;4>i;i++)h=y[o++],g=m[2*h],h=m[2*h+1],g=new THREE.Vector2(g,h),2!==i&&n.faceVertexUvs[r][s].push(g),0!==i&&n.faceVertexUvs[r][s+1].push(g);l&&(l=3*y[o++],p.normal.set(b[l++],b[l++],b[l]),v.normal.copy(p.normal));if(d)for(r=0;4>r;r++)l=3*y[o++],d=new THREE.Vector3(b[l++],b[l++],b[l]),2!==r&&p.vertexNormals.push(d),0!==r&&v.vertexNormals.push(d);f&&(f=y[o++],f=w[f],p.color.setHex(f),v.color.setHex(f));if(t)for(r=0;4>r;r++)f=y[o++],f=w[f],2!==r&&p.vertexColors.push(new THREE.Color(f)),0!==r&&v.vertexColors.push(new THREE.Color(f));n.faces.push(p),n.faces.push(v)}else{p=new THREE.Face3,p.a=y[o++],p.b=y[o++],p.c=y[o++],s&&(s=y[o++],p.materialIndex=s),s=n.faces.length;if(r)for(r=0;r<E;r++)for(m=e.uvs[r],n.faceVertexUvs[r][s]=[],i=0;3>i;i++)h=y[o++],g=m[2*h],h=m[2*h+1],g=new THREE.Vector2(g,h),n.faceVertexUvs[r][s].push(g);l&&(l=3*y[o++],p.normal.set(b[l++],b[l++],b[l]));if(d)for(r=0;3>r;r++)l=3*y[o++],d=new THREE.Vector3(b[l++],b[l++],b[l]),p.vertexNormals.push(d);f&&(f=y[o++],p.color.setHex(w[f]));if(t)for(r=0;3>r;r++)f=y[o++],p.vertexColors.push(new THREE.Color(w[f]));n.faces.push(p)}}(r),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=t)n.skinWeights.push(new THREE.Vector4(e.skinWeights[r],1<t?e.skinWeights[r+1]:0,2<t?e.skinWeights[r+2]:0,3<t?e.skinWeights[r+3]:0));if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=t)n.skinIndices.push(new THREE.Vector4(e.skinIndices[r],1<t?e.skinIndices[r+1]:0,2<t?e.skinIndices[r+2]:0,3<t?e.skinIndices[r+3]:0));n.bones=e.bones,n.bones&&0<n.bones.length&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&0,n.animation=e.animation,n.animations=e.animations}(),function(t){if(void 0!==e.morphTargets){var r,i,s,o,u,f;r=0;for(i=e.morphTargets.length;r<i;r++)for(n.morphTargets[r]={},n.morphTargets[r].name=e.morphTargets[r].name,n.morphTargets[r].vertices=[],u=n.morphTargets[r].vertices,f=e.morphTargets[r].vertices,s=0,o=f.length;s<o;s+=3){var l=new THREE.Vector3;l.x=f[s]*t,l.y=f[s+1]*t,l.z=f[s+2]*t,u.push(l)}}if(void 0!==e.morphColors)for(r=0,i=e.morphColors.length;r<i;r++)for(n.morphColors[r]={},n.morphColors[r].name=e.morphColors[r].name,n.morphColors[r].colors=[],o=n.morphColors[r].colors,u=e.morphColors[r].colors,t=0,s=u.length;t<s;t+=3)f=new THREE.Color(16755200),f.setRGB(u[t],u[t+1],u[t+2]),o.push(f)}(r),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:(r=this.initMaterials(e.materials,t),this.needsTangents(r)&&n.computeTangents(),{geometry:n,materials:r})},THREE.LoadingManager=function(e,t,n){var r=this,i=0,s=0;this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++},this.itemEnd=function(e){i++,void 0!==r.onProgress&&r.onProgress(e,i,s),i===s&&void 0!==r.onLoad&&r.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,n,r){var i=this,s=new THREE.XHRLoader;s.setCrossOrigin(this.crossOrigin),s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry,n=e.attributes,r;for(r in n){var i=n[r],s=new self[i.type](i.array);t.addAttribute(r,new THREE.BufferAttribute(s,i.itemSize))}return n=e.offsets,void 0!==n&&(t.offsets=JSON.parse(JSON.stringify(n))),e=e.boundingSphere,void 0!==e&&(n=new THREE.Vector3,void 0!==e.center&&n.fromArray(e.center),t.boundingSphere=new THREE.Sphere(n,e.radius)),t}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,n,r){var i=this,s=new THREE.XHRLoader;s.setCrossOrigin(this.crossOrigin),s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe);if(void 0!==e.materials)for(var n=0,r=e.materials.length;n<r;n++)t.materials.push(this.parse(e.materials[n]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,n,r){var i=this,s=new THREE.XHRLoader(i.manager);s.setCrossOrigin(this.crossOrigin),s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),n=this.parseMaterials(e.materials);return this.parseObject(e.object,t,n)},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new THREE.JSONLoader,r=new THREE.BufferGeometryLoader,i=0,s=e.length;i<s;i++){var o,u=e[i];switch(u.type){case"PlaneGeometry":o=new THREE.PlaneGeometry(u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"CubeGeometry":o=new THREE.BoxGeometry(u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":o=new THREE.CircleGeometry(u.radius,u.segments);break;case"CylinderGeometry":o=new THREE.CylinderGeometry(u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded);break;case"SphereGeometry":o=new THREE.SphereGeometry(u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"IcosahedronGeometry":o=new THREE.IcosahedronGeometry(u.radius,u.detail);break;case"TorusGeometry":o=new THREE.TorusGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":o=new THREE.TorusKnotGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.p,u.q,u.heightScale);break;case"BufferGeometry":o=r.parse(u.data);break;case"Geometry":o=n.parse(u.data).geometry}o.uuid=u.uuid,void 0!==u.name&&(o.name=u.name),t[u.uuid]=o}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var n=new THREE.MaterialLoader,r=0,i=e.length;r<i;r++){var s=e[r],o=n.parse(s);o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseObject:function(){var e=new THREE.Matrix4;return function(t,n,r){var i;switch(t.type){case"Scene":i=new THREE.Scene;break;case"PerspectiveCamera":i=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":i=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new THREE.AmbientLight(t.color);break;case"DirectionalLight":i=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":i=new THREE.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":i=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":i=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":i=n[t.geometry];var s=r[t.material];void 0===i&&0,void 0===s&&0,i=new THREE.Mesh(i,s);break;case"Line":i=n[t.geometry],s=r[t.material],void 0===i&&0,void 0===s&&0,i=new THREE.Line(i,s);break;case"Sprite":s=r[t.material],void 0===s&&0,i=new THREE.Sprite(s);break;case"Group":i=new THREE.Group;break;default:i=new THREE.Object3D}i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData);if(void 0!==t.children)for(var o in t.children)i.add(this.parseObject(t.children[o],n,r));return i}}()},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,n,r){var i=new THREE.ImageLoader(this.manager);i.setCrossOrigin(this.crossOrigin),i.load(e,function(e){e=new THREE.Texture(e),e.needsUpdate=!0,void 0!==t&&t(e)},n,r)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.CompressedTextureLoader=function(){this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(e,t,n){var r=this,i=[],s=new THREE.CompressedTexture;s.image=i;var o=new THREE.XHRLoader;o.setResponseType("arraybuffer");if(e instanceof Array){var u=0;n=function(n){o.load(e[n],function(e){e=r._parser(e,!0),i[n]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},u+=1,6===u&&(1==e.mipmapCount&&(s.minFilter=THREE.LinearFilter),s.format=e.format,s.needsUpdate=!0,t&&t(s))})};for(var a=0,f=e.length;a<f;++a)n(a)}else o.load(e,function(e){e=r._parser(e,!0);if(e.isCubemap)for(var n=e.mipmaps.length/e.mipmapCount,o=0;o<n;o++){i[o]={mipmaps:[]};for(var u=0;u<e.mipmapCount;u++)i[o].mipmaps.push(e.mipmaps[o*e.mipmapCount+u]),i[o].format=e.format,i[o].width=e.width,i[o].height=e.height}else s.image.width=e.width,s.image.height=e.height,s.mipmaps=e.mipmaps;1===e.mipmapCount&&(s.minFilter=THREE.LinearFilter),s.format=e.format,s.needsUpdate=!0,t&&t(s)});return s}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.needsUpdate=this.visible=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n)0;else if(t in this){var r=this[t];r instanceof THREE.Color?r.set(n):r instanceof THREE.Vector3&&n instanceof THREE.Vector3?r.copy(n):this[t]="overdraw"==t?Number(n):n}}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof THREE.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshLambertMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshPhongMaterial?(e.color=this.color.getHex(),e.ambient=this.ambient.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshNormalMaterial?(this.shading!==THREE.FlatShading&&(e.shading=this.shading),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshDepthMaterial?(this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof THREE.SpriteMaterial&&(e.color=this.color.getHex()),1>this.opacity&&(e.opacity=this.opacity),!1!==this.transparent&&(e.transparent=this.transparent),!1!==this.wireframe&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.wrapAround=this.metal=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.bumpMap=this.lightMap=this.map=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.envMap=this.alphaMap=this.specularMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.type="MeshDepthMaterial",this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.type="MeshNormalMaterial",this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.uuid=THREE.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,n=this.materials.length;t<n;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},THREE.PointCloudMaterial=function(e){THREE.Material.call(this),this.type="PointCloudMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.clone=function(){var e=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleBasicMaterial=function(e){return 0,new THREE.PointCloudMaterial(e)},THREE.ParticleSystemMaterial=function(e){return 0,new THREE.PointCloudMaterial(e)},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.clone=function(){var e=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,e),e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},THREE.Texture=function(e,t,n,r,i,s,o,u,a){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.image=void 0!==e?e:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:THREE.LinearFilter,this.minFilter=void 0!==s?s:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==a?a:1,this.format=void 0!==o?o:THREE.RGBAFormat,this.type=void 0!==u?u:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(e,t,n,r,i,s,o,u,a){THREE.Texture.call(this,e,t,n,r,i,s,o,u,a),this.images=e},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.clone=function(e){return void 0===e&&(e=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,e),e.images=this.images,e},THREE.CompressedTexture=function(e,t,n,r,i,s,o,u,a,f,l){THREE.Texture.call(this,null,s,o,u,a,f,r,i,l),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=this.flipY=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,n,r,i,s,o,u,a,f,l){THREE.Texture.call(this,null,s,o,u,a,f,r,i,l),this.image={data:e,width:t,height:n}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.VideoTexture=function(e,t,n,r,i,s,o,u,a){THREE.Texture.call(this,e,t,n,r,i,s,o,u,a),this.generateMipmaps=!1;var f=this,l=function(){requestAnimationFrame(l),e.readyState===e.HAVE_ENOUGH_DATA&&(f.needsUpdate=!0)};l()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud=function(e,t){THREE.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.PointCloudMaterial({color:16777215*Math.random()}),this.sortParticles=!1},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray;return function(n,r){var i=this,s=i.geometry,o=n.params.PointCloud.threshold;e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e);if(null===s.boundingBox||!1!==t.isIntersectionBox(s.boundingBox)){var u=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=new THREE.Vector3,o=function(e,s){var o=t.distanceToPoint(e);if(o<u){var a=t.closestPointToPoint(e);a.applyMatrix4(i.matrixWorld);var f=n.ray.origin.distanceTo(a);r.push({distance:f,distanceToRay:o,point:a.clone(),index:s,face:null,object:i})}};if(s instanceof THREE.BufferGeometry){var l=s.attributes,c=l.position.array;if(void 0!==l.index){var l=l.index.array,h=s.offsets;0===h.length&&(h=[{start:0,count:l.length,index:0}]);for(var p=0,d=h.length;p<d;++p)for(var v=h[p].start,m=h[p].index,s=v,v=v+h[p].count;s<v;s++){var g=m+l[s];f.fromArray(c,3*g),o(f,g)}}else for(l=c.length/3,s=0;s<l;s++)f.set(c[3*s],c[3*s+1],c[3*s+2]),o(f,s)}else for(f=this.geometry.vertices,s=0;s<f.length;s++)o(f[s],s)}}}(),THREE.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new THREE.PointCloud(this.geometry,this.material)),e.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){return 0,new THREE.PointCloud(e,t)},THREE.Line=function(e,t,n){THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==n?n:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere;return function(r,i){var s=r.linePrecision,s=s*s,o=this.geometry;null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(this.matrixWorld);if(!1!==r.ray.isIntersectionSphere(n)&&(e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e),o instanceof THREE.Geometry))for(var o=o.vertices,u=o.length,f=new THREE.Vector3,l=new THREE.Vector3,h=this.mode===THREE.LineStrip?1:2,p=0;p<u-1;p+=h)if(!(t.distanceSqToSegment(o[p],o[p+1],l,f)>s)){var d=t.origin.distanceTo(l);d<r.near||d>r.far||i.push({distance:d,point:f.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}(),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.mode)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(0,0)},THREE.Mesh.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere,r=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3;return function(o,u){var l=this.geometry;null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(this.matrixWorld);if(!1!==o.ray.isIntersectionSphere(n)&&(e.getInverse(this.matrixWorld),t.copy(o.ray).applyMatrix4(e),null===l.boundingBox||!1!==t.isIntersectionBox(l.boundingBox)))if(l instanceof THREE.BufferGeometry){var h=this.material;if(void 0!==h){var p=l.attributes,v,m,g=o.precision;if(void 0!==p.index){var y=p.index.array,w=p.position.array,E=l.offsets;0===E.length&&(E=[{start:0,count:y.length,index:0}]);for(var S=0,x=E.length;S<x;++S)for(var p=E[S].start,T=E[S].index,l=p,N=p+E[S].count;l<N;l+=3){p=T+y[l],v=T+y[l+1],m=T+y[l+2],r.fromArray(w,3*p),i.fromArray(w,3*v),s.fromArray(w,3*m);var C=h.side===THREE.BackSide?t.intersectTriangle(s,i,r,!0):t.intersectTriangle(r,i,s,h.side!==THREE.DoubleSide);if(null!==C){C.applyMatrix4(this.matrixWorld);var k=o.ray.origin.distanceTo(C);k<g||k<o.near||k>o.far||u.push({distance:k,point:C,face:new THREE.Face3(p,v,m,THREE.Triangle.normal(r,i,s)),faceIndex:null,object:this})}}}else for(w=p.position.array,y=l=0,N=w.length;l<N;l+=3,y+=9)p=l,v=l+1,m=l+2,r.fromArray(w,y),i.fromArray(w,y+3),s.fromArray(w,y+6),C=h.side===THREE.BackSide?t.intersectTriangle(s,i,r,!0):t.intersectTriangle(r,i,s,h.side!==THREE.DoubleSide),null!==C&&(C.applyMatrix4(this.matrixWorld),k=o.ray.origin.distanceTo(C),k<g||k<o.near||k>o.far||u.push({distance:k,point:C,face:new THREE.Face3(p,v,m,THREE.Triangle.normal(r,i,s)),faceIndex:null,object:this}))}}else if(l instanceof THREE.Geometry)for(y=this.material instanceof THREE.MeshFaceMaterial,w=!0===y?this.material.materials:null,g=o.precision,E=l.vertices,S=0,x=l.faces.length;S<x;S++)if(T=l.faces[S],h=!0===y?w[T.materialIndex]:this.material,void 0!==h){p=E[T.a],v=E[T.b],m=E[T.c];if(!0===h.morphTargets){C=l.morphTargets,k=this.morphTargetInfluences,r.set(0,0,0),i.set(0,0,0),s.set(0,0,0);for(var N=0,L=C.length;N<L;N++){var A=k[N];if(0!==A){var O=C[N].vertices;r.x+=(O[T.a].x-p.x)*A,r.y+=(O[T.a].y-p.y)*A,r.z+=(O[T.a].z-p.z)*A,i.x+=(O[T.b].x-v.x)*A,i.y+=(O[T.b].y-v.y)*A,i.z+=(O[T.b].z-v.z)*A,s.x+=(O[T.c].x-m.x)*A,s.y+=(O[T.c].y-m.y)*A,s.z+=(O[T.c].z-m.z)*A}}r.add(p),i.add(v),s.add(m),p=r,v=i,m=s}C=h.side===THREE.BackSide?t.intersectTriangle(m,v,p,!0):t.intersectTriangle(p,v,m,h.side!==THREE.DoubleSide),null!==C&&(C.applyMatrix4(this.matrixWorld),k=o.ray.origin.distanceTo(C),k<g||k<o.near||k>o.far||u.push({distance:k,point:C,face:T,faceIndex:S,object:this}))}}}(),THREE.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e,t),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Skeleton=function(e,t,n){this.useVertexTexture=void 0!==n?n:!0,this.identityMatrix=new THREE.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=e=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(0,this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new THREE.Matrix4)},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new THREE.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},THREE.Skeleton.prototype.pose=function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);t=0;for(n=this.bones.length;t<n;t++)if(e=this.bones[t])e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale)},THREE.Skeleton.prototype.update=function(){var e=new THREE.Matrix4;return function(){for(var t=0,n=this.bones.length;t<n;t++)e.multiplyMatrices(this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh=function(e,t,n){THREE.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4,e=[];if(this.geometry&&void 0!==this.geometry.bones){for(var r,i,s,o,u=0,a=this.geometry.bones.length;u<a;++u)r=this.geometry.bones[u],i=r.pos,s=r.rotq,o=r.scl,t=new THREE.Bone(this),e.push(t),t.name=r.name,t.position.set(i[0],i[1],i[2]),t.quaternion.set(s[0],s[1],s[2],s[3]),void 0!==o?t.scale.set(o[0],o[1],o[2]):t.scale.set(1,1,1);u=0;for(a=this.geometry.bones.length;u<a;++u)r=this.geometry.bones[u],-1!==r.parent?e[r.parent].add(e[u]):this.add(e[u])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(e,void 0,n))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();Infinity!==n?t.multiplyScalar(n):t.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):0},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.currentKeyframe=this.lastKeyframe=this.time=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,n=e.animations,r=/([a-z]+)_?(\d+)/,i=0,s=e.morphTargets.length;i<s;i++){var o=e.morphTargets[i].name.match(r);if(o&&1<o.length){o=o[1],n[o]||(n[o]={start:Infinity,end:-Infinity});var u=n[o];i<u.start&&(u.start=i),i>u.end&&(u.end=i),t||(t=o)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:n}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];n?(this.setFrameRange(n.start,n.end),this.duration=(n.end-n.start)/t*1e3,this.time=0):0},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);e=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1),e!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[e]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=e),t=this.time%t/t,this.directionBackwards&&(t=1-t),this.morphTargetInfluences[this.currentKeyframe]=t,this.morphTargetInfluences[this.lastKeyframe]=1-t},THREE.MorphAnimMesh.prototype.interpolateTargets=function(e,t,n){for(var r=this.morphTargetInfluences,i=0,s=r.length;i<s;i++)r[i]=0;-1<e&&(r[e]=1-n),-1<t&&(r[t]=n)},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=0;n<this.objects.length&&!(t<this.objects[n].distance);n++);this.objects.splice(n,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,n=this.objects.length;t<n&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){if(1<this.objects.length){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld),n=e.distanceTo(t),this.objects[0].object.visible=!0;for(var r=1,i=this.objects.length;r<i;r++){if(!(n>=this.objects[r].distance))break;this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0}for(;r<i;r++)this.objects[r].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(e){void 0===e&&(e=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,e);for(var t=0,n=this.objects.length;t<n;t++){var r=this.objects[t].object.clone();r.visible=0===t,e.addLevel(r,this.objects[t].distance)}return e},THREE.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-0.5,-0.5,0,.5,-0.5,0,.5,.5,0,-0.5,.5,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),r=new THREE.BufferGeometry;return r.addAttribute("index",new THREE.BufferAttribute(e,1)),r.addAttribute("position",new THREE.BufferAttribute(t,3)),r.addAttribute("uv",new THREE.BufferAttribute(n,2)),function(e){THREE.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=void 0!==e?e:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceToPoint(e);r>this.scale.x||n.push({distance:r,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(e,t,n,r,i){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(e,t,n,r,i,s){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===s&&(s=1),void 0===i&&(i=new THREE.Color(16777215)),void 0===r&&(r=THREE.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:s,color:i,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t=this.lensFlares.length,n,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<t;e++)n=this.lensFlares[e],n.x=this.positionScreen.x+r*n.distance,n.y=this.positionScreen.y+i*n.distance,n.wantedRotation=n.x*Math.PI*.25,n.rotation+=.25*(n.wantedRotation-n.rotation)},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.overrideMaterial=this.fog=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,n){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.default_vertex="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n	mvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n	mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	uniform samplerCube envMap;\n	uniform float flipEnvMap;\n	uniform int combine;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform bool useRefract;\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n	uniform bool useRefract;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	vec3 reflectVec;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		if ( useRefract ) {\n\n			reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		} else { \n\n			reflectVec = reflect( cameraToVertex, worldNormal );\n\n		}\n\n	#else\n\n		reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n		vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#else\n\n		vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		cubeColor.xyz *= cubeColor.xyz;\n\n	#endif\n\n	if ( combine == 1 ) {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n	} else if ( combine == 2 ) {\n\n		gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n	} else {\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n	}\n\n#endif",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif",THREE.ShaderChunk.defaultnormal_vertex="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n	objectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n	objectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n	objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	if ( useRefract ) {\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	} else {\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	}\n\n#endif",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#endif\n\n	#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#endif\n\n	#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]),i;for(i in r)t[i]=r[i]}return t},clone:function(e){var t={},n;for(n in e){t[n]={};for(var r in e[n]){var i=e[n][r];t[n][r]=i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix4||i instanceof THREE.Texture?i.clone():i instanceof Array?i.slice():i}}return t}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED\n		if ( gl_FrontFacing )\n			gl_FragColor.xyz *= vLightFront;\n		else\n			gl_FragColor.xyz *= vLightBack;\n	#else\n		gl_FragColor.xyz *= vLightFront;\n	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n	#else\n		gl_PointSize = size;\n	#endif\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform vec2 uNormalScale;\nuniform bool useRefract;\nuniform float refractionRatio;\nuniform float reflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\n	uniform vec3 wrapRGB;\n#endif\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	gl_FragColor = vec4( vec3( 1.0 ), opacity );\n	vec3 specularTex = vec3( 1.0 );\n	vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\n	normalTex.xy *= uNormalScale;\n	normalTex = normalize( normalTex );\n	if( enableDiffuse ) {\n		#ifdef GAMMA_INPUT\n			vec4 texelColor = texture2D( tDiffuse, vUv );\n			texelColor.xyz *= texelColor.xyz;\n			gl_FragColor = gl_FragColor * texelColor;\n		#else\n			gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n		#endif\n	}\n	if( enableAO ) {\n		#ifdef GAMMA_INPUT\n			vec4 aoColor = texture2D( tAO, vUv );\n			aoColor.xyz *= aoColor.xyz;\n			gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n		#else\n			gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n		#endif\n	}",THREE.ShaderChunk.alphatest_fragment,"	if( enableSpecular )\n		specularTex = texture2D( tSpecular, vUv ).xyz;\n	mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\n	vec3 finalNormal = tsb * normalTex;\n	#ifdef FLIP_SIDED\n		finalNormal = -finalNormal;\n	#endif\n	vec3 normal = normalize( finalNormal );\n	vec3 viewPosition = normalize( vViewPosition );\n	#if MAX_POINT_LIGHTS > 0\n		vec3 pointDiffuse = vec3( 0.0 );\n		vec3 pointSpecular = vec3( 0.0 );\n		for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n			vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n			vec3 pointVector = lPosition.xyz + vViewPosition.xyz;\n			float pointDistance = 1.0;\n			if ( pointLightDistance[ i ] > 0.0 )\n				pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );\n			pointVector = normalize( pointVector );\n			#ifdef WRAP_AROUND\n				float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\n				float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\n				vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n			#else\n				float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n			#endif\n			pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;\n			vec3 pointHalfVector = normalize( pointVector + viewPosition );\n			float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n			float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );\n			pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n		}\n	#endif\n	#if MAX_SPOT_LIGHTS > 0\n		vec3 spotDiffuse = vec3( 0.0 );\n		vec3 spotSpecular = vec3( 0.0 );\n		for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n			vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n			vec3 spotVector = lPosition.xyz + vViewPosition.xyz;\n			float spotDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );\n			spotVector = normalize( spotVector );\n			float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n			if ( spotEffect > spotLightAngleCos[ i ] ) {\n				spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n				#ifdef WRAP_AROUND\n					float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );\n					float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );\n					vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n				#else\n					float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );\n				#endif\n				spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;\n				vec3 spotHalfVector = normalize( spotVector + viewPosition );\n				float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n				float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n				float specularNormalization = ( shininess + 2.0 ) / 8.0;\n				vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );\n				spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;\n			}\n		}\n	#endif\n	#if MAX_DIR_LIGHTS > 0\n		vec3 dirDiffuse = vec3( 0.0 );\n		vec3 dirSpecular = vec3( 0.0 );\n		for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\n			vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n			vec3 dirVector = normalize( lDirection.xyz );\n			#ifdef WRAP_AROUND\n				float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\n				float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\n				vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n			#else\n				float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n			#endif\n			dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;\n			vec3 dirHalfVector = normalize( dirVector + viewPosition );\n			float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n			float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n			dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n		}\n	#endif\n	#if MAX_HEMI_LIGHTS > 0\n		vec3 hemiDiffuse = vec3( 0.0 );\n		vec3 hemiSpecular = vec3( 0.0 );\n		for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n			vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n			vec3 lVector = normalize( lDirection.xyz );\n			float dotProduct = dot( normal, lVector );\n			float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n			vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n			hemiDiffuse += diffuse * hemiColor;\n			vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n			float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n			float hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n			vec3 lVectorGround = -lVector;\n			vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n			float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n			float hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n			float dotProductGround = dot( normal, lVectorGround );\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n			vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n			vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n			hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n		}\n	#endif\n	vec3 totalDiffuse = vec3( 0.0 );\n	vec3 totalSpecular = vec3( 0.0 );\n	#if MAX_DIR_LIGHTS > 0\n		totalDiffuse += dirDiffuse;\n		totalSpecular += dirSpecular;\n	#endif\n	#if MAX_HEMI_LIGHTS > 0\n		totalDiffuse += hemiDiffuse;\n		totalSpecular += hemiSpecular;\n	#endif\n	#if MAX_POINT_LIGHTS > 0\n		totalDiffuse += pointDiffuse;\n		totalSpecular += pointSpecular;\n	#endif\n	#if MAX_SPOT_LIGHTS > 0\n		totalDiffuse += spotDiffuse;\n		totalSpecular += spotSpecular;\n	#endif\n	#ifdef METAL\n		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );\n	#else\n		gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n	#endif\n	if ( enableReflection ) {\n		vec3 vReflect;\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		if ( useRefract ) {\n			vReflect = refract( cameraToVertex, normal, refractionRatio );\n		} else {\n			vReflect = reflect( cameraToVertex, normal );\n		}\n		vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n		#ifdef GAMMA_INPUT\n			cubeColor.xyz *= cubeColor.xyz;\n		#endif\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );\n	}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\nuniform bool enableDisplacement;\n#ifdef VERTEX_TEXTURES\n	uniform sampler2D tDisplacement;\n	uniform float uDisplacementScale;\n	uniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"	#ifdef USE_SKINNING\n		vNormal = normalize( normalMatrix * skinnedNormal.xyz );\n		vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );\n		vTangent = normalize( normalMatrix * skinnedTangent.xyz );\n	#else\n		vNormal = normalize( normalMatrix * normal );\n		vTangent = normalize( normalMatrix * tangent.xyz );\n	#endif\n	vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\n	vUv = uv * uRepeat + uOffset;\n	vec3 displacedPosition;\n	#ifdef VERTEX_TEXTURES\n		if ( enableDisplacement ) {\n			vec3 dv = texture2D( tDisplacement, uv ).xyz;\n			float df = uDisplacementScale * dv.x + uDisplacementBias;\n			displacedPosition = position + normalize( normal ) * df;\n		} else {\n			#ifdef USE_SKINNING\n				vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n				vec4 skinned = vec4( 0.0 );\n				skinned += boneMatX * skinVertex * skinWeight.x;\n				skinned += boneMatY * skinVertex * skinWeight.y;\n				skinned += boneMatZ * skinVertex * skinWeight.z;\n				skinned += boneMatW * skinVertex * skinWeight.w;\n				skinned  = bindMatrixInverse * skinned;\n				displacedPosition = skinned.xyz;\n			#else\n				displacedPosition = position;\n			#endif\n		}\n	#else\n		#ifdef USE_SKINNING\n			vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n			vec4 skinned = vec4( 0.0 );\n			skinned += boneMatX * skinVertex * skinWeight.x;\n			skinned += boneMatY * skinVertex * skinWeight.y;\n			skinned += boneMatZ * skinVertex * skinWeight.z;\n			skinned += boneMatW * skinVertex * skinWeight.w;\n			skinned  = bindMatrixInverse * skinned;\n			displacedPosition = skinned.xyz;\n		#else\n			displacedPosition = position;\n		#endif\n	#endif\n	vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );\n	vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"	vWorldPosition = worldPosition.xyz;\n	vViewPosition = -mvPosition.xyz;\n	#ifdef USE_SHADOWMAP\n		for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n		}\n	#endif\n}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n	vWorldPosition = worldPosition.xyz;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(e){var t=e.geometry;e=e.material;var n=t.vertices.length;if(e.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var r in e.attributes){var i=e.attributes[r];if(!i.__webglInitialized||i.createUniqueBuffers){i.__webglInitialized=!0;var s=1;"v2"===i.type?s=2:"v3"===i.type?s=3:"v4"===i.type?s=4:"c"===i.type&&(s=3),i.size=s,i.array=new Float32Array(n*s),i.buffer=Dt.createBuffer(),i.buffer.belongsToAttribute=r,i.needsUpdate=!0}t.__webglCustomAttributesList.push(i)}}}function n(e,t){var n=t.geometry,i=e.faces3,s=3*i.length,o=1*i.length,u=3*i.length,i=r(t,e);e.__vertexArray=new Float32Array(3*s),e.__normalArray=new Float32Array(3*s),e.__colorArray=new Float32Array(3*s),e.__uvArray=new Float32Array(2*s),1<n.faceVertexUvs.length&&(e.__uv2Array=new Float32Array(2*s)),n.hasTangents&&(e.__tangentArray=new Float32Array(4*s)),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*s),e.__skinWeightArray=new Float32Array(4*s)),n=null!==Bt.get("OES_element_index_uint")&&21845<o?Uint32Array:Uint16Array,e.__typeArray=n,e.__faceArray=new n(3*o),e.__lineArray=new n(2*u);var a;if(e.numMorphTargets)for(e.__morphTargetsArrays=[],n=0,a=e.numMorphTargets;n<a;n++)e.__morphTargetsArrays.push(new Float32Array(3*s));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],n=0,a=e.numMorphNormals;n<a;n++)e.__morphNormalsArrays.push(new Float32Array(3*s));e.__webglFaceCount=3*o,e.__webglLineCount=2*u;if(i.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var f in i.attributes){var o=i.attributes[f],u={},l;for(l in o)u[l]=o[l];if(!u.__webglInitialized||u.createUniqueBuffers)u.__webglInitialized=!0,n=1,"v2"===u.type?n=2:"v3"===u.type?n=3:"v4"===u.type?n=4:"c"===u.type&&(n=3),u.size=n,u.array=new Float32Array(s*n),u.buffer=Dt.createBuffer(),u.buffer.belongsToAttribute=f,o.needsUpdate=!0,u.__original=o;e.__webglCustomAttributesList.push(u)}}e.__inittedArrays=!0}function r(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function i(e,t,n,r){n=n.attributes;var i=t.attributes;t=t.attributesKeys;for(var s=0,a=t.length;s<a;s++){var f=t[s],l=i[f];if(0<=l){var c=n[f];void 0!==c?(f=c.itemSize,Dt.bindBuffer(Dt.ARRAY_BUFFER,c.buffer),o(l),Dt.vertexAttribPointer(l,f,Dt.FLOAT,!1,0,r*f*4)):void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[f].length?Dt.vertexAttrib2fv(l,e.defaultAttributeValues[f]):3===e.defaultAttributeValues[f].length&&Dt.vertexAttrib3fv(l,e.defaultAttributeValues[f]))}}u()}function s(){for(var e=0,t=Tt.length;e<t;e++)Tt[e]=0}function o(e){Tt[e]=1,0===Nt[e]&&(Dt.enableVertexAttribArray(e),Nt[e]=1)}function u(){for(var e=0,t=Nt.length;e<t;e++)Nt[e]!==Tt[e]&&(Dt.disableVertexAttribArray(e),Nt[e]=0)}function a(e,t){return e.material.id!==t.material.id?t.material.id-e.material.id:e.z!==t.z?t.z-e.z:e.id-t.id}function f(e,t){return e.z!==t.z?e.z-t.z:e.id-t.id}function l(e,t){return t[0]-e[0]}function c(e,i){if(!1!==i.visible){if(!(i instanceof THREE.Scene||i instanceof THREE.Group)){void 0===i.__webglInit&&(i.__webglInit=!0,i._modelViewMatrix=new THREE.Matrix4,i._normalMatrix=new THREE.Matrix3,i.addEventListener("removed",Zt));var s=i.geometry;if(void 0!==s&&void 0===s.__webglInit&&(s.__webglInit=!0,s.addEventListener("dispose",en),!(s instanceof THREE.BufferGeometry)))if(i instanceof THREE.Mesh)v(e,i,s);else if(i instanceof THREE.Line){if(void 0===s.__webglVertexBuffer){s.__webglVertexBuffer=Dt.createBuffer(),s.__webglColorBuffer=Dt.createBuffer(),s.__webglLineDistanceBuffer=Dt.createBuffer(),Y.info.memory.geometries++;var o=s.vertices.length;s.__vertexArray=new Float32Array(3*o),s.__colorArray=new Float32Array(3*o),s.__lineDistanceArray=new Float32Array(1*o),s.__webglLineCount=o,t(i),s.verticesNeedUpdate=!0,s.colorsNeedUpdate=!0,s.lineDistancesNeedUpdate=!0}}else if(i instanceof THREE.PointCloud&&void 0===s.__webglVertexBuffer){s.__webglVertexBuffer=Dt.createBuffer(),s.__webglColorBuffer=Dt.createBuffer(),Y.info.memory.geometries++;var u=s.vertices.length;s.__vertexArray=new Float32Array(3*u),s.__colorArray=new Float32Array(3*u),s.__sortArray=[],s.__webglParticleCount=u,t(i),s.verticesNeedUpdate=!0,s.colorsNeedUpdate=!0}if(void 0===i.__webglActive)if(i.__webglActive=!0,i instanceof THREE.Mesh){if(s instanceof THREE.BufferGeometry)m(V,s,i);else if(s instanceof THREE.Geometry)for(var a=un[s.id],f=0,h=a.length;f<h;f++)m(V,a[f],i)}else i instanceof THREE.Line||i instanceof THREE.PointCloud?m(V,s,i):(i instanceof THREE.ImmediateRenderObject||i.immediateRenderCallback)&&$.push({id:null,object:i,opaque:null,transparent:null,z:0});if(i instanceof THREE.Light)X.push(i);else if(i instanceof THREE.Sprite)Q.push(i);else if(i instanceof THREE.LensFlare)G.push(i);else{var p=V[i.id];if(p&&(!1===i.frustumCulled||!0===Ct.intersectsObject(i))){var d=i.geometry,b,w;if(d instanceof THREE.BufferGeometry)for(var E=d.attributes,S=d.attributesKeys,x=0,T=S.length;x<T;x++){var N=S[x],C=E[N];void 0===C.buffer&&(C.buffer=Dt.createBuffer(),C.needsUpdate=!0);if(!0===C.needsUpdate){var k="index"===N?Dt.ELEMENT_ARRAY_BUFFER:Dt.ARRAY_BUFFER;Dt.bindBuffer(k,C.buffer),Dt.bufferData(k,C.array,Dt.STATIC_DRAW),C.needsUpdate=!1}}else if(i instanceof THREE.Mesh){!0===d.groupsNeedUpdate&&v(e,i,d);for(var L=un[d.id],A=0,O=L.length;A<O;A++){var M=L[A];w=r(i,M),!0===d.groupsNeedUpdate&&n(M,i),b=w.attributes&&g(w);if(d.verticesNeedUpdate||d.morphTargetsNeedUpdate||d.elementsNeedUpdate||d.uvsNeedUpdate||d.normalsNeedUpdate||d.colorsNeedUpdate||d.tangentsNeedUpdate||b){var _=M,D=i,P=Dt.DYNAMIC_DRAW,H=!d.dynamic,B=w;if(_.__inittedArrays){var j=B&&void 0!==B.shading&&B.shading===THREE.SmoothShading,F=void 0,I=void 0,q=void 0,R=void 0,U=void 0,z=void 0,W=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,rt=void 0,it=void 0,st=void 0,ot=void 0,ut=void 0,at=void 0,ft=void 0,lt=void 0,ct=void 0,ht=void 0,pt=void 0,dt=void 0,vt=void 0,mt=void 0,gt=void 0,yt=void 0,bt=void 0,wt=void 0,Et=void 0,St=void 0,xt=void 0,Tt=void 0,Nt=void 0,Ot=void 0,Mt=void 0,_t=void 0,Pt=void 0,Ht=void 0,Bt=void 0,jt=0,Ft=0,It=0,qt=0,Rt=0,Ut=0,zt=0,Wt=0,Xt=0,Vt=0,$t=0,Jt=0,Kt=void 0,Qt=_.__vertexArray,Gt=_.__uvArray,Yt=_.__uv2Array,tn=_.__normalArray,nn=_.__tangentArray,rn=_.__colorArray,sn=_.__skinIndexArray,on=_.__skinWeightArray,an=_.__morphTargetsArrays,fn=_.__morphNormalsArrays,ln=_.__webglCustomAttributesList,cn=void 0,hn=_.__faceArray,pn=_.__lineArray,dn=D.geometry,vn=dn.elementsNeedUpdate,mn=dn.uvsNeedUpdate,gn=dn.normalsNeedUpdate,yn=dn.tangentsNeedUpdate,bn=dn.colorsNeedUpdate,wn=dn.morphTargetsNeedUpdate,En=dn.vertices,Sn=_.faces3,xn=dn.faces,Tn=dn.faceVertexUvs[0],Nn=dn.faceVertexUvs[1],Cn=dn.skinIndices,kn=dn.skinWeights,Ln=dn.morphTargets,An=dn.morphNormals;if(dn.verticesNeedUpdate){F=0;for(I=Sn.length;F<I;F++)R=xn[Sn[F]],rt=En[R.a],it=En[R.b],st=En[R.c],Qt[Ft]=rt.x,Qt[Ft+1]=rt.y,Qt[Ft+2]=rt.z,Qt[Ft+3]=it.x,Qt[Ft+4]=it.y,Qt[Ft+5]=it.z,Qt[Ft+6]=st.x,Qt[Ft+7]=st.y,Qt[Ft+8]=st.z,Ft+=9;Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Qt,P)}if(wn)for(Ot=0,Mt=Ln.length;Ot<Mt;Ot++){F=$t=0;for(I=Sn.length;F<I;F++)Ht=Sn[F],R=xn[Ht],rt=Ln[Ot].vertices[R.a],it=Ln[Ot].vertices[R.b],st=Ln[Ot].vertices[R.c],_t=an[Ot],_t[$t]=rt.x,_t[$t+1]=rt.y,_t[$t+2]=rt.z,_t[$t+3]=it.x,_t[$t+4]=it.y,_t[$t+5]=it.z,_t[$t+6]=st.x,_t[$t+7]=st.y,_t[$t+8]=st.z,B.morphNormals&&(j?(Bt=An[Ot].vertexNormals[Ht],ft=Bt.a,lt=Bt.b,ct=Bt.c):ct=lt=ft=An[Ot].faceNormals[Ht],Pt=fn[Ot],Pt[$t]=ft.x,Pt[$t+1]=ft.y,Pt[$t+2]=ft.z,Pt[$t+3]=lt.x,Pt[$t+4]=lt.y,Pt[$t+5]=lt.z,Pt[$t+6]=ct.x,Pt[$t+7]=ct.y,Pt[$t+8]=ct.z),$t+=9;Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglMorphTargetsBuffers[Ot]),Dt.bufferData(Dt.ARRAY_BUFFER,an[Ot],P),B.morphNormals&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglMorphNormalsBuffers[Ot]),Dt.bufferData(Dt.ARRAY_BUFFER,fn[Ot],P))}if(kn.length){F=0;for(I=Sn.length;F<I;F++)R=xn[Sn[F]],vt=kn[R.a],mt=kn[R.b],gt=kn[R.c],on[Vt]=vt.x,on[Vt+1]=vt.y,on[Vt+2]=vt.z,on[Vt+3]=vt.w,on[Vt+4]=mt.x,on[Vt+5]=mt.y,on[Vt+6]=mt.z,on[Vt+7]=mt.w,on[Vt+8]=gt.x,on[Vt+9]=gt.y,on[Vt+10]=gt.z,on[Vt+11]=gt.w,yt=Cn[R.a],bt=Cn[R.b],wt=Cn[R.c],sn[Vt]=yt.x,sn[Vt+1]=yt.y,sn[Vt+2]=yt.z,sn[Vt+3]=yt.w,sn[Vt+4]=bt.x,sn[Vt+5]=bt.y,sn[Vt+6]=bt.z,sn[Vt+7]=bt.w,sn[Vt+8]=wt.x,sn[Vt+9]=wt.y,sn[Vt+10]=wt.z,sn[Vt+11]=wt.w,Vt+=12;0<Vt&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglSkinIndicesBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,sn,P),Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglSkinWeightsBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,on,P))}if(bn){F=0;for(I=Sn.length;F<I;F++)R=xn[Sn[F]],W=R.vertexColors,Z=R.color,3===W.length&&B.vertexColors===THREE.VertexColors?(ht=W[0],pt=W[1],dt=W[2]):dt=pt=ht=Z,rn[Xt]=ht.r,rn[Xt+1]=ht.g,rn[Xt+2]=ht.b,rn[Xt+3]=pt.r,rn[Xt+4]=pt.g,rn[Xt+5]=pt.b,rn[Xt+6]=dt.r,rn[Xt+7]=dt.g,rn[Xt+8]=dt.b,Xt+=9;0<Xt&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,rn,P))}if(yn&&dn.hasTangents){F=0;for(I=Sn.length;F<I;F++)R=xn[Sn[F]],et=R.vertexTangents,ot=et[0],ut=et[1],at=et[2],nn[zt]=ot.x,nn[zt+1]=ot.y,nn[zt+2]=ot.z,nn[zt+3]=ot.w,nn[zt+4]=ut.x,nn[zt+5]=ut.y,nn[zt+6]=ut.z,nn[zt+7]=ut.w,nn[zt+8]=at.x,nn[zt+9]=at.y,nn[zt+10]=at.z,nn[zt+11]=at.w,zt+=12;Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglTangentBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,nn,P)}if(gn){F=0;for(I=Sn.length;F<I;F++)if(R=xn[Sn[F]],U=R.vertexNormals,z=R.normal,3===U.length&&j)for(Et=0;3>Et;Et++)xt=U[Et],tn[Ut]=xt.x,tn[Ut+1]=xt.y,tn[Ut+2]=xt.z,Ut+=3;else for(Et=0;3>Et;Et++)tn[Ut]=z.x,tn[Ut+1]=z.y,tn[Ut+2]=z.z,Ut+=3;Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglNormalBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,tn,P)}if(mn&&Tn){F=0;for(I=Sn.length;F<I;F++)if(q=Sn[F],tt=Tn[q],void 0!==tt)for(Et=0;3>Et;Et++)Tt=tt[Et],Gt[It]=Tt.x,Gt[It+1]=Tt.y,It+=2;0<It&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglUVBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Gt,P))}if(mn&&Nn){F=0;for(I=Sn.length;F<I;F++)if(q=Sn[F],nt=Nn[q],void 0!==nt)for(Et=0;3>Et;Et++)Nt=nt[Et],Yt[qt]=Nt.x,Yt[qt+1]=Nt.y,qt+=2;0<qt&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,_.__webglUV2Buffer),Dt.bufferData(Dt.ARRAY_BUFFER,Yt,P))}if(vn){F=0;for(I=Sn.length;F<I;F++)hn[Rt]=jt,hn[Rt+1]=jt+1,hn[Rt+2]=jt+2,Rt+=3,pn[Wt]=jt,pn[Wt+1]=jt+1,pn[Wt+2]=jt,pn[Wt+3]=jt+2,pn[Wt+4]=jt+1,pn[Wt+5]=jt+2,Wt+=6,jt+=3;Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,_.__webglFaceBuffer),Dt.bufferData(Dt.ELEMENT_ARRAY_BUFFER,hn,P),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,_.__webglLineBuffer),Dt.bufferData(Dt.ELEMENT_ARRAY_BUFFER,pn,P)}if(ln)for(Et=0,St=ln.length;Et<St;Et++)if(cn=ln[Et],cn.__original.needsUpdate){Jt=0;if(1===cn.size){if(void 0===cn.boundTo||"vertices"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)R=xn[Sn[F]],cn.array[Jt]=cn.value[R.a],cn.array[Jt+1]=cn.value[R.b],cn.array[Jt+2]=cn.value[R.c],Jt+=3;else if("faces"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)Kt=cn.value[Sn[F]],cn.array[Jt]=Kt,cn.array[Jt+1]=Kt,cn.array[Jt+2]=Kt,Jt+=3}else if(2===cn.size){if(void 0===cn.boundTo||"vertices"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)R=xn[Sn[F]],rt=cn.value[R.a],it=cn.value[R.b],st=cn.value[R.c],cn.array[Jt]=rt.x,cn.array[Jt+1]=rt.y,cn.array[Jt+2]=it.x,cn.array[Jt+3]=it.y,cn.array[Jt+4]=st.x,cn.array[Jt+5]=st.y,Jt+=6;else if("faces"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)st=it=rt=Kt=cn.value[Sn[F]],cn.array[Jt]=rt.x,cn.array[Jt+1]=rt.y,cn.array[Jt+2]=it.x,cn.array[Jt+3]=it.y,cn.array[Jt+4]=st.x,cn.array[Jt+5]=st.y,Jt+=6}else if(3===cn.size){var On;On="c"===cn.type?["r","g","b"]:["x","y","z"];if(void 0===cn.boundTo||"vertices"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)R=xn[Sn[F]],rt=cn.value[R.a],it=cn.value[R.b],st=cn.value[R.c],cn.array[Jt]=rt[On[0]],cn.array[Jt+1]=rt[On[1]],cn.array[Jt+2]=rt[On[2]],cn.array[Jt+3]=it[On[0]],cn.array[Jt+4]=it[On[1]],cn.array[Jt+5]=it[On[2]],cn.array[Jt+6]=st[On[0]],cn.array[Jt+7]=st[On[1]],cn.array[Jt+8]=st[On[2]],Jt+=9;else if("faces"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)st=it=rt=Kt=cn.value[Sn[F]],cn.array[Jt]=rt[On[0]],cn.array[Jt+1]=rt[On[1]],cn.array[Jt+2]=rt[On[2]],cn.array[Jt+3]=it[On[0]],cn.array[Jt+4]=it[On[1]],cn.array[Jt+5]=it[On[2]],cn.array[Jt+6]=st[On[0]],cn.array[Jt+7]=st[On[1]],cn.array[Jt+8]=st[On[2]],Jt+=9;else if("faceVertices"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)Kt=cn.value[Sn[F]],rt=Kt[0],it=Kt[1],st=Kt[2],cn.array[Jt]=rt[On[0]],cn.array[Jt+1]=rt[On[1]],cn.array[Jt+2]=rt[On[2]],cn.array[Jt+3]=it[On[0]],cn.array[Jt+4]=it[On[1]],cn.array[Jt+5]=it[On[2]],cn.array[Jt+6]=st[On[0]],cn.array[Jt+7]=st[On[1]],cn.array[Jt+8]=st[On[2]],Jt+=9}else if(4===cn.size)if(void 0===cn.boundTo||"vertices"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)R=xn[Sn[F]],rt=cn.value[R.a],it=cn.value[R.b],st=cn.value[R.c],cn.array[Jt]=rt.x,cn.array[Jt+1]=rt.y,cn.array[Jt+2]=rt.z,cn.array[Jt+3]=rt.w,cn.array[Jt+4]=it.x,cn.array[Jt+5]=it.y,cn.array[Jt+6]=it.z,cn.array[Jt+7]=it.w,cn.array[Jt+8]=st.x,cn.array[Jt+9]=st.y,cn.array[Jt+10]=st.z,cn.array[Jt+11]=st.w,Jt+=12;else if("faces"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)st=it=rt=Kt=cn.value[Sn[F]],cn.array[Jt]=rt.x,cn.array[Jt+1]=rt.y,cn.array[Jt+2]=rt.z,cn.array[Jt+3]=rt.w,cn.array[Jt+4]=it.x,cn.array[Jt+5]=it.y,cn.array[Jt+6]=it.z,cn.array[Jt+7]=it.w,cn.array[Jt+8]=st.x,cn.array[Jt+9]=st.y,cn.array[Jt+10]=st.z,cn.array[Jt+11]=st.w,Jt+=12;else if("faceVertices"===cn.boundTo)for(F=0,I=Sn.length;F<I;F++)Kt=cn.value[Sn[F]],rt=Kt[0],it=Kt[1],st=Kt[2],cn.array[Jt]=rt.x,cn.array[Jt+1]=rt.y,cn.array[Jt+2]=rt.z,cn.array[Jt+3]=rt.w,cn.array[Jt+4]=it.x,cn.array[Jt+5]=it.y,cn.array[Jt+6]=it.z,cn.array[Jt+7]=it.w,cn.array[Jt+8]=st.x,cn.array[Jt+9]=st.y,cn.array[Jt+10]=st.z,cn.array[Jt+11]=st.w,Jt+=12;Dt.bindBuffer(Dt.ARRAY_BUFFER,cn.buffer),Dt.bufferData(Dt.ARRAY_BUFFER,cn.array,P)}H&&(delete _.__inittedArrays,delete _.__colorArray,delete _.__normalArray,delete _.__tangentArray,delete _.__uvArray,delete _.__uv2Array,delete _.__faceArray,delete _.__vertexArray,delete _.__lineArray,delete _.__skinIndexArray,delete _.__skinWeightArray)}}}d.verticesNeedUpdate=!1,d.morphTargetsNeedUpdate=!1,d.elementsNeedUpdate=!1,d.uvsNeedUpdate=!1,d.normalsNeedUpdate=!1,d.colorsNeedUpdate=!1,d.tangentsNeedUpdate=!1,w.attributes&&y(w)}else if(i instanceof THREE.Line){w=r(i,d),b=w.attributes&&g(w);if(d.verticesNeedUpdate||d.colorsNeedUpdate||d.lineDistancesNeedUpdate||b){var Mn=Dt.DYNAMIC_DRAW,_n,Dn,Pn,Hn,Bn,jn,Fn=d.vertices,In=d.colors,qn=d.lineDistances,Rn=Fn.length,Un=In.length,zn=qn.length,Wn=d.__vertexArray,Xn=d.__colorArray,Vn=d.__lineDistanceArray,$n=d.colorsNeedUpdate,Jn=d.lineDistancesNeedUpdate,Kn=d.__webglCustomAttributesList,Qn,Gn,Yn,Zn,er,tr;if(d.verticesNeedUpdate){for(_n=0;_n<Rn;_n++)Hn=Fn[_n],Bn=3*_n,Wn[Bn]=Hn.x,Wn[Bn+1]=Hn.y,Wn[Bn+2]=Hn.z;Dt.bindBuffer(Dt.ARRAY_BUFFER,d.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Wn,Mn)}if($n){for(Dn=0;Dn<Un;Dn++)jn=In[Dn],Bn=3*Dn,Xn[Bn]=jn.r,Xn[Bn+1]=jn.g,Xn[Bn+2]=jn.b;Dt.bindBuffer(Dt.ARRAY_BUFFER,d.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Xn,Mn)}if(Jn){for(Pn=0;Pn<zn;Pn++)Vn[Pn]=qn[Pn];Dt.bindBuffer(Dt.ARRAY_BUFFER,d.__webglLineDistanceBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,Vn,Mn)}if(Kn)for(Qn=0,Gn=Kn.length;Qn<Gn;Qn++)if(tr=Kn[Qn],tr.needsUpdate&&(void 0===tr.boundTo||"vertices"===tr.boundTo)){Bn=0,Zn=tr.value.length;if(1===tr.size)for(Yn=0;Yn<Zn;Yn++)tr.array[Yn]=tr.value[Yn];else if(2===tr.size)for(Yn=0;Yn<Zn;Yn++)er=tr.value[Yn],tr.array[Bn]=er.x,tr.array[Bn+1]=er.y,Bn+=2;else if(3===tr.size)if("c"===tr.type)for(Yn=0;Yn<Zn;Yn++)er=tr.value[Yn],tr.array[Bn]=er.r,tr.array[Bn+1]=er.g,tr.array[Bn+2]=er.b,Bn+=3;else for(Yn=0;Yn<Zn;Yn++)er=tr.value[Yn],tr.array[Bn]=er.x,tr.array[Bn+1]=er.y,tr.array[Bn+2]=er.z,Bn+=3;else if(4===tr.size)for(Yn=0;Yn<Zn;Yn++)er=tr.value[Yn],tr.array[Bn]=er.x,tr.array[Bn+1]=er.y,tr.array[Bn+2]=er.z,tr.array[Bn+3]=er.w,Bn+=4;Dt.bindBuffer(Dt.ARRAY_BUFFER,tr.buffer),Dt.bufferData(Dt.ARRAY_BUFFER,tr.array,Mn)}}d.verticesNeedUpdate=!1,d.colorsNeedUpdate=!1,d.lineDistancesNeedUpdate=!1,w.attributes&&y(w)}else if(i instanceof THREE.PointCloud){w=r(i,d),b=w.attributes&&g(w);if(d.verticesNeedUpdate||d.colorsNeedUpdate||i.sortParticles||b){var nr=Dt.DYNAMIC_DRAW,rr,ir,sr,or,ur,ar,fr=d.vertices,lr=fr.length,cr=d.colors,hr=cr.length,pr=d.__vertexArray,dr=d.__colorArray,vr=d.__sortArray,mr=d.verticesNeedUpdate,gr=d.colorsNeedUpdate,yr=d.__webglCustomAttributesList,br,wr,Er,Sr,xr,Tr;if(i.sortParticles){Lt.copy(kt),Lt.multiply(i.matrixWorld);for(rr=0;rr<lr;rr++)sr=fr[rr],At.copy(sr),At.applyProjection(Lt),vr[rr]=[At.z,rr];vr.sort(l);for(rr=0;rr<lr;rr++)sr=fr[vr[rr][1]],or=3*rr,pr[or]=sr.x,pr[or+1]=sr.y,pr[or+2]=sr.z;for(ir=0;ir<hr;ir++)or=3*ir,ar=cr[vr[ir][1]],dr[or]=ar.r,dr[or+1]=ar.g,dr[or+2]=ar.b;if(yr)for(br=0,wr=yr.length;br<wr;br++)if(Tr=yr[br],void 0===Tr.boundTo||"vertices"===Tr.boundTo)if(or=0,Sr=Tr.value.length,1===Tr.size)for(Er=0;Er<Sr;Er++)ur=vr[Er][1],Tr.array[Er]=Tr.value[ur];else if(2===Tr.size)for(Er=0;Er<Sr;Er++)ur=vr[Er][1],xr=Tr.value[ur],Tr.array[or]=xr.x,Tr.array[or+1]=xr.y,or+=2;else if(3===Tr.size)if("c"===Tr.type)for(Er=0;Er<Sr;Er++)ur=vr[Er][1],xr=Tr.value[ur],Tr.array[or]=xr.r,Tr.array[or+1]=xr.g,Tr.array[or+2]=xr.b,or+=3;else for(Er=0;Er<Sr;Er++)ur=vr[Er][1],xr=Tr.value[ur],Tr.array[or]=xr.x,Tr.array[or+1]=xr.y,Tr.array[or+2]=xr.z,or+=3;else if(4===Tr.size)for(Er=0;Er<Sr;Er++)ur=vr[Er][1],xr=Tr.value[ur],Tr.array[or]=xr.x,Tr.array[or+1]=xr.y,Tr.array[or+2]=xr.z,Tr.array[or+3]=xr.w,or+=4}else{if(mr)for(rr=0;rr<lr;rr++)sr=fr[rr],or=3*rr,pr[or]=sr.x,pr[or+1]=sr.y,pr[or+2]=sr.z;if(gr)for(ir=0;ir<hr;ir++)ar=cr[ir],or=3*ir,dr[or]=ar.r,dr[or+1]=ar.g,dr[or+2]=ar.b;if(yr)for(br=0,wr=yr.length;br<wr;br++)if(Tr=yr[br],Tr.needsUpdate&&(void 0===Tr.boundTo||"vertices"===Tr.boundTo))if(Sr=Tr.value.length,or=0,1===Tr.size)for(Er=0;Er<Sr;Er++)Tr.array[Er]=Tr.value[Er];else if(2===Tr.size)for(Er=0;Er<Sr;Er++)xr=Tr.value[Er],Tr.array[or]=xr.x,Tr.array[or+1]=xr.y,or+=2;else if(3===Tr.size)if("c"===Tr.type)for(Er=0;Er<Sr;Er++)xr=Tr.value[Er],Tr.array[or]=xr.r,Tr.array[or+1]=xr.g,Tr.array[or+2]=xr.b,or+=3;else for(Er=0;Er<Sr;Er++)xr=Tr.value[Er],Tr.array[or]=xr.x,Tr.array[or+1]=xr.y,Tr.array[or+2]=xr.z,or+=3;else if(4===Tr.size)for(Er=0;Er<Sr;Er++)xr=Tr.value[Er],Tr.array[or]=xr.x,Tr.array[or+1]=xr.y,Tr.array[or+2]=xr.z,Tr.array[or+3]=xr.w,or+=4}if(mr||i.sortParticles)Dt.bindBuffer(Dt.ARRAY_BUFFER,d.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,pr,nr);if(gr||i.sortParticles)Dt.bindBuffer(Dt.ARRAY_BUFFER,d.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,dr,nr);if(yr)for(br=0,wr=yr.length;br<wr;br++)if(Tr=yr[br],Tr.needsUpdate||i.sortParticles)Dt.bindBuffer(Dt.ARRAY_BUFFER,Tr.buffer),Dt.bufferData(Dt.ARRAY_BUFFER,Tr.array,nr)}d.verticesNeedUpdate=!1,d.colorsNeedUpdate=!1,w.attributes&&y(w)}for(var Nr=0,Cr=p.length;Nr<Cr;Nr++){var kr=p[Nr],Lr=kr,Ar=Lr.object,Or=Lr.buffer,Mr=Ar.geometry,_r=Ar.material;_r instanceof THREE.MeshFaceMaterial?(_r=_r.materials[Mr instanceof THREE.BufferGeometry?0:Or.materialIndex],Lr.material=_r,_r.transparent?K.push(Lr):J.push(Lr)):_r&&(Lr.material=_r,_r.transparent?K.push(Lr):J.push(Lr)),kr.render=!0,!0===Y.sortObjects&&(null!==i.renderDepth?kr.z=i.renderDepth:(At.setFromMatrixPosition(i.matrixWorld),At.applyProjection(kt),kr.z=At.z))}}}}Nr=0;for(Cr=i.children.length;Nr<Cr;Nr++)c(e,i.children[Nr])}}function h(e,t,n,r,i,s){for(var o,u=e.length-1;-1!==u;u--){o=e[u];var a=o.object,f=o.buffer;S(a,t);if(s)o=s;else{o=o.material;if(!o)continue;i&&Y.setBlending(o.blending,o.blendEquation,o.blendSrc,o.blendDst),Y.setDepthTest(o.depthTest),Y.setDepthWrite(o.depthWrite),C(o.polygonOffset,o.polygonOffsetFactor,o.polygonOffsetUnits)}Y.setMaterialFaces(o),f instanceof THREE.BufferGeometry?Y.renderBufferDirect(t,n,r,o,f,a):Y.renderBuffer(t,n,r,o,f,a)}}function p(e,t,n,r,i,s,o){for(var u,a=0,f=e.length;a<f;a++){u=e[a];var l=u.object;if(l.visible){if(o)u=o;else{u=u[t];if(!u)continue;s&&Y.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst),Y.setDepthTest(u.depthTest),Y.setDepthWrite(u.depthWrite),C(u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits)}Y.renderImmediateObject(n,r,i,u,l)}}}function d(e){var t=e.object.material;t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)}function v(e,t,r){var i=t.material,s=!1;if(void 0===un[r.id]||!0===r.groupsNeedUpdate){delete V[t.id],e=un;for(var o=r.id,i=i instanceof THREE.MeshFaceMaterial,u=Bt.get("OES_element_index_uint")?4294967296:65535,a,s={},f=r.morphTargets.length,l=r.morphNormals.length,c,h={},p=[],d=0,v=r.faces.length;d<v;d++){a=r.faces[d];var g=i?a.materialIndex:0;g in s||(s[g]={hash:g,counter:0}),a=s[g].hash+"_"+s[g].counter,a in h||(c={id:an++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:f,numMorphNormals:l},h[a]=c,p.push(c)),h[a].vertices+3>u&&(s[g].counter+=1,a=s[g].hash+"_"+s[g].counter,a in h||(c={id:an++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:f,numMorphNormals:l},h[a]=c,p.push(c))),h[a].faces3.push(d),h[a].vertices+=3}e[o]=p,r.groupsNeedUpdate=!1}e=un[r.id],o=0;for(i=e.length;o<i;o++){u=e[o];if(void 0===u.__webglVertexBuffer){s=u,s.__webglVertexBuffer=Dt.createBuffer(),s.__webglNormalBuffer=Dt.createBuffer(),s.__webglTangentBuffer=Dt.createBuffer(),s.__webglColorBuffer=Dt.createBuffer(),s.__webglUVBuffer=Dt.createBuffer(),s.__webglUV2Buffer=Dt.createBuffer(),s.__webglSkinIndicesBuffer=Dt.createBuffer(),s.__webglSkinWeightsBuffer=Dt.createBuffer(),s.__webglFaceBuffer=Dt.createBuffer(),s.__webglLineBuffer=Dt.createBuffer(),l=f=void 0;if(s.numMorphTargets)for(s.__webglMorphTargetsBuffers=[],f=0,l=s.numMorphTargets;f<l;f++)s.__webglMorphTargetsBuffers.push(Dt.createBuffer());if(s.numMorphNormals)for(s.__webglMorphNormalsBuffers=[],f=0,l=s.numMorphNormals;f<l;f++)s.__webglMorphNormalsBuffers.push(Dt.createBuffer());Y.info.memory.geometries++,n(u,t),r.verticesNeedUpdate=!0,r.morphTargetsNeedUpdate=!0,r.elementsNeedUpdate=!0,r.uvsNeedUpdate=!0,r.normalsNeedUpdate=!0,r.tangentsNeedUpdate=!0,s=r.colorsNeedUpdate=!0}else s=!1;(s||void 0===t.__webglActive)&&m(V,u,t)}t.__webglActive=!0}function m(e,t,n){var r=n.id;e[r]=e[r]||[],e[r].push({id:r,buffer:t,object:n,material:null,z:0})}function g(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function y(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function b(e,t,n,r,i){var s,o,u,a;st=0;if(r.needsUpdate){r.program&&on(r),r.addEventListener("dispose",rn);var f;r instanceof THREE.MeshDepthMaterial?f="depth":r instanceof THREE.MeshNormalMaterial?f="normal":r instanceof THREE.MeshBasicMaterial?f="basic":r instanceof THREE.MeshLambertMaterial?f="lambert":r instanceof THREE.MeshPhongMaterial?f="phong":r instanceof THREE.LineBasicMaterial?f="basic":r instanceof THREE.LineDashedMaterial?f="dashed":r instanceof THREE.PointCloudMaterial&&(f="particle_basic");if(f){var l=THREE.ShaderLib[f];r.__webglShader={uniforms:THREE.UniformsUtils.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else r.__webglShader={uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader};for(var c=0,h=0,p=0,d=0,v=0,m=t.length;v<m;v++){var g=t[v];g.onlyShadow||!1===g.visible||(g instanceof THREE.DirectionalLight&&c++,g instanceof THREE.PointLight&&h++,g instanceof THREE.SpotLight&&p++,g instanceof THREE.HemisphereLight&&d++)}s=c,o=h,u=p,a=d;for(var y,b=0,S=0,N=t.length;S<N;S++){var C=t[S];C.castShadow&&(C instanceof THREE.SpotLight&&b++,C instanceof THREE.DirectionalLight&&!C.shadowCascade&&b++)}y=b;var A;if(Ut&&i&&i.skeleton&&i.skeleton.useVertexTexture)A=1024;else{var O=Dt.getParameter(Dt.MAX_VERTEX_UNIFORM_VECTORS),M=Math.floor((O-20)/4);void 0!==i&&i instanceof THREE.SkinnedMesh&&(M=Math.min(i.skeleton.bones.length,M),M<i.skeleton.bones.length&&0),A=M}var P={precision:H,supportsVertexTextures:Rt,map:!!r.map,envMap:!!r.envMap,lightMap:!!r.lightMap,bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,vertexColors:r.vertexColors,fog:n,useFog:r.fog,fogExp:n instanceof THREE.FogExp2,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:U,skinning:r.skinning,maxBones:A,useVertexTexture:Ut&&i&&i.skeleton&&i.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:Y.maxMorphTargets,maxMorphNormals:Y.maxMorphNormals,maxDirLights:s,maxPointLights:o,maxSpotLights:u,maxHemiLights:a,maxShadows:y,shadowMapEnabled:Y.shadowMapEnabled&&i.receiveShadow&&0<y,shadowMapType:Y.shadowMapType,shadowMapDebug:Y.shadowMapDebug,shadowMapCascade:Y.shadowMapCascade,alphaTest:r.alphaTest,metal:r.metal,wrapAround:r.wrapAround,doubleSided:r.side===THREE.DoubleSide,flipSided:r.side===THREE.BackSide},B=[];f?B.push(f):(B.push(r.fragmentShader),B.push(r.vertexShader));if(void 0!==r.defines)for(var j in r.defines)B.push(j),B.push(r.defines[j]);for(j in P)B.push(j),B.push(P[j]);for(var F=B.join(),I,q=0,R=Z.length;q<R;q++){var z=Z[q];if(z.code===F){I=z,I.usedTimes++;break}}void 0===I&&(I=new THREE.WebGLProgram(Y,F,r,P),Z.push(I),Y.info.memory.programs=Z.length),r.program=I;var W=I.attributes;if(r.morphTargets){r.numSupportedMorphTargets=0;for(var X,V="morphTarget",$=0;$<Y.maxMorphTargets;$++)X=V+$,0<=W[X]&&r.numSupportedMorphTargets++}if(r.morphNormals)for(r.numSupportedMorphNormals=0,V="morphNormal",$=0;$<Y.maxMorphNormals;$++)X=V+$,0<=W[X]&&r.numSupportedMorphNormals++;r.uniformsList=[];for(var J in r.__webglShader.uniforms){var K=r.program.uniforms[J];K&&r.uniformsList.push([r.__webglShader.uniforms[J],K])}r.needsUpdate=!1}r.morphTargets&&!i.__webglMorphTargetInfluences&&(i.__webglMorphTargetInfluences=new Float32Array(Y.maxMorphTargets));var Q=!1,G=!1,tt=!1,rt=r.program,ot=rt.uniforms,ut=r.__webglShader.uniforms;rt.id!==et&&(Dt.useProgram(rt.program),et=rt.id,tt=G=Q=!0),r.id!==nt&&(-1===nt&&(tt=!0),nt=r.id,G=!0);if(Q||e!==it)Dt.uniformMatrix4fv(ot.projectionMatrix,!1,e.projectionMatrix.elements),U&&Dt.uniform1f(ot.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==it&&(it=e),(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&null!==ot.cameraPosition&&(At.setFromMatrixPosition(e.matrixWorld),Dt.uniform3f(ot.cameraPosition,At.x,At.y,At.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&null!==ot.viewMatrix&&Dt.uniformMatrix4fv(ot.viewMatrix,!1,e.matrixWorldInverse.elements);if(r.skinning)if(i.bindMatrix&&null!==ot.bindMatrix&&Dt.uniformMatrix4fv(ot.bindMatrix,!1,i.bindMatrix.elements),i.bindMatrixInverse&&null!==ot.bindMatrixInverse&&Dt.uniformMatrix4fv(ot.bindMatrixInverse,!1,i.bindMatrixInverse.elements),Ut&&i.skeleton&&i.skeleton.useVertexTexture){if(null!==ot.boneTexture){var at=E();Dt.uniform1i(ot.boneTexture,at),Y.setTexture(i.skeleton.boneTexture,at)}null!==ot.boneTextureWidth&&Dt.uniform1i(ot.boneTextureWidth,i.skeleton.boneTextureWidth),null!==ot.boneTextureHeight&&Dt.uniform1i(ot.boneTextureHeight,i.skeleton.boneTextureHeight)}else i.skeleton&&i.skeleton.boneMatrices&&null!==ot.boneGlobalMatrices&&Dt.uniformMatrix4fv(ot.boneGlobalMatrices,!1,i.skeleton.boneMatrices);if(G){n&&r.fog&&(ut.fogColor.value=n.color,n instanceof THREE.Fog?(ut.fogNear.value=n.near,ut.fogFar.value=n.far):n instanceof THREE.FogExp2&&(ut.fogDensity.value=n.density));if(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights){if(Mt){var tt=!0,ft,lt,ct,ht=0,pt=0,dt=0,vt,mt,gt,yt,bt,wt,Et=_t,St=Et.directional.colors,xt=Et.directional.positions,Tt=Et.point.colors,Nt=Et.point.positions,Ct=Et.point.distances,kt=Et.spot.colors,Lt=Et.spot.positions,Pt=Et.spot.distances,Ht=Et.spot.directions,Bt=Et.spot.anglesCos,jt=Et.spot.exponents,Ft=Et.hemi.skyColors,It=Et.hemi.groundColors,zt=Et.hemi.positions,Wt=0,Xt=0,Vt=0,Jt=0,Kt=0,Qt=0,Gt=0,Yt=0,Zt=0,en=0,nn=0,sn=0;ft=0;for(lt=t.length;ft<lt;ft++)ct=t[ft],ct.onlyShadow||(vt=ct.color,yt=ct.intensity,wt=ct.distance,ct instanceof THREE.AmbientLight?ct.visible&&(Y.gammaInput?(ht+=vt.r*vt.r,pt+=vt.g*vt.g,dt+=vt.b*vt.b):(ht+=vt.r,pt+=vt.g,dt+=vt.b)):ct instanceof THREE.DirectionalLight?(Kt+=1,ct.visible&&(Ot.setFromMatrixPosition(ct.matrixWorld),At.setFromMatrixPosition(ct.target.matrixWorld),Ot.sub(At),Ot.normalize(),Zt=3*Wt,xt[Zt]=Ot.x,xt[Zt+1]=Ot.y,xt[Zt+2]=Ot.z,Y.gammaInput?x(St,Zt,vt,yt*yt):T(St,Zt,vt,yt),Wt+=1)):ct instanceof THREE.PointLight?(Qt+=1,ct.visible&&(en=3*Xt,Y.gammaInput?x(Tt,en,vt,yt*yt):T(Tt,en,vt,yt),At.setFromMatrixPosition(ct.matrixWorld),Nt[en]=At.x,Nt[en+1]=At.y,Nt[en+2]=At.z,Ct[Xt]=wt,Xt+=1)):ct instanceof THREE.SpotLight?(Gt+=1,ct.visible&&(nn=3*Vt,Y.gammaInput?x(kt,nn,vt,yt*yt):T(kt,nn,vt,yt),Ot.setFromMatrixPosition(ct.matrixWorld),Lt[nn]=Ot.x,Lt[nn+1]=Ot.y,Lt[nn+2]=Ot.z,Pt[Vt]=wt,At.setFromMatrixPosition(ct.target.matrixWorld),Ot.sub(At),Ot.normalize(),Ht[nn]=Ot.x,Ht[nn+1]=Ot.y,Ht[nn+2]=Ot.z,Bt[Vt]=Math.cos(ct.angle),jt[Vt]=ct.exponent,Vt+=1)):ct instanceof THREE.HemisphereLight&&(Yt+=1,ct.visible&&(Ot.setFromMatrixPosition(ct.matrixWorld),Ot.normalize(),sn=3*Jt,zt[sn]=Ot.x,zt[sn+1]=Ot.y,zt[sn+2]=Ot.z,mt=ct.color,gt=ct.groundColor,Y.gammaInput?(bt=yt*yt,x(Ft,sn,mt,bt),x(It,sn,gt,bt)):(T(Ft,sn,mt,yt),T(It,sn,gt,yt)),Jt+=1)));ft=3*Wt;for(lt=Math.max(St.length,3*Kt);ft<lt;ft++)St[ft]=0;ft=3*Xt;for(lt=Math.max(Tt.length,3*Qt);ft<lt;ft++)Tt[ft]=0;ft=3*Vt;for(lt=Math.max(kt.length,3*Gt);ft<lt;ft++)kt[ft]=0;ft=3*Jt;for(lt=Math.max(Ft.length,3*Yt);ft<lt;ft++)Ft[ft]=0;ft=3*Jt;for(lt=Math.max(It.length,3*Yt);ft<lt;ft++)It[ft]=0;Et.directional.length=Wt,Et.point.length=Xt,Et.spot.length=Vt,Et.hemi.length=Jt,Et.ambient[0]=ht,Et.ambient[1]=pt,Et.ambient[2]=dt,Mt=!1}if(tt){var un=_t;ut.ambientLightColor.value=un.ambient,ut.directionalLightColor.value=un.directional.colors,ut.directionalLightDirection.value=un.directional.positions,ut.pointLightColor.value=un.point.colors,ut.pointLightPosition.value=un.point.positions,ut.pointLightDistance.value=un.point.distances,ut.spotLightColor.value=un.spot.colors,ut.spotLightPosition.value=un.spot.positions,ut.spotLightDistance.value=un.spot.distances,ut.spotLightDirection.value=un.spot.directions,ut.spotLightAngleCos.value=un.spot.anglesCos,ut.spotLightExponent.value=un.spot.exponents,ut.hemisphereLightSkyColor.value=un.hemi.skyColors,ut.hemisphereLightGroundColor.value=un.hemi.groundColors,ut.hemisphereLightDirection.value=un.hemi.positions,w(ut,!0)}else w(ut,!1)}if(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial){ut.opacity.value=r.opacity,Y.gammaInput?ut.diffuse.value.copyGammaToLinear(r.color):ut.diffuse.value=r.color,ut.map.value=r.map,ut.lightMap.value=r.lightMap,ut.specularMap.value=r.specularMap,ut.alphaMap.value=r.alphaMap,r.bumpMap&&(ut.bumpMap.value=r.bumpMap,ut.bumpScale.value=r.bumpScale),r.normalMap&&(ut.normalMap.value=r.normalMap,ut.normalScale.value.copy(r.normalScale));var an;r.map?an=r.map:r.specularMap?an=r.specularMap:r.normalMap?an=r.normalMap:r.bumpMap?an=r.bumpMap:r.alphaMap&&(an=r.alphaMap);if(void 0!==an){var fn=an.offset,ln=an.repeat;ut.offsetRepeat.value.set(fn.x,fn.y,ln.x,ln.y)}ut.envMap.value=r.envMap,ut.flipEnvMap.value=r.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,ut.reflectivity.value=r.reflectivity,ut.refractionRatio.value=r.refractionRatio,ut.combine.value=r.combine,ut.useRefract.value=r.envMap&&r.envMap.mapping instanceof THREE.CubeRefractionMapping}r instanceof THREE.LineBasicMaterial?(ut.diffuse.value=r.color,ut.opacity.value=r.opacity):r instanceof THREE.LineDashedMaterial?(ut.diffuse.value=r.color,ut.opacity.value=r.opacity,ut.dashSize.value=r.dashSize,ut.totalSize.value=r.dashSize+r.gapSize,ut.scale.value=r.scale):r instanceof THREE.PointCloudMaterial?(ut.psColor.value=r.color,ut.opacity.value=r.opacity,ut.size.value=r.size,ut.scale.value=D.height/2,ut.map.value=r.map):r instanceof THREE.MeshPhongMaterial?(ut.shininess.value=r.shininess,Y.gammaInput?(ut.ambient.value.copyGammaToLinear(r.ambient),ut.emissive.value.copyGammaToLinear(r.emissive),ut.specular.value.copyGammaToLinear(r.specular)):(ut.ambient.value=r.ambient,ut.emissive.value=r.emissive,ut.specular.value=r.specular),r.wrapAround&&ut.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshLambertMaterial?(Y.gammaInput?(ut.ambient.value.copyGammaToLinear(r.ambient),ut.emissive.value.copyGammaToLinear(r.emissive)):(ut.ambient.value=r.ambient,ut.emissive.value=r.emissive),r.wrapAround&&ut.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshDepthMaterial?(ut.mNear.value=e.near,ut.mFar.value=e.far,ut.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(ut.opacity.value=r.opacity);if(i.receiveShadow&&!r._shadowPass&&ut.shadowMatrix)for(var cn=0,hn=0,pn=t.length;hn<pn;hn++){var dn=t[hn];dn.castShadow&&(dn instanceof THREE.SpotLight||dn instanceof THREE.DirectionalLight&&!dn.shadowCascade)&&(ut.shadowMap.value[cn]=dn.shadowMap,ut.shadowMapSize.value[cn]=dn.shadowMapSize,ut.shadowMatrix.value[cn]=dn.shadowMatrix,ut.shadowDarkness.value[cn]=dn.shadowDarkness,ut.shadowBias.value[cn]=dn.shadowBias,cn++)}for(var vn=r.uniformsList,mn,gn,yn,bn=0,wn=vn.length;bn<wn;bn++){var En=vn[bn][0];if(!1!==En.needsUpdate){var Sn=En.type,xn=En.value,Tn=vn[bn][1];switch(Sn){case"1i":Dt.uniform1i(Tn,xn);break;case"1f":Dt.uniform1f(Tn,xn);break;case"2f":Dt.uniform2f(Tn,xn[0],xn[1]);break;case"3f":Dt.uniform3f(Tn,xn[0],xn[1],xn[2]);break;case"4f":Dt.uniform4f(Tn,xn[0],xn[1],xn[2],xn[3]);break;case"1iv":Dt.uniform1iv(Tn,xn);break;case"3iv":Dt.uniform3iv(Tn,xn);break;case"1fv":Dt.uniform1fv(Tn,xn);break;case"2fv":Dt.uniform2fv(Tn,xn);break;case"3fv":Dt.uniform3fv(Tn,xn);break;case"4fv":Dt.uniform4fv(Tn,xn);break;case"Matrix3fv":Dt.uniformMatrix3fv(Tn,!1,xn);break;case"Matrix4fv":Dt.uniformMatrix4fv(Tn,!1,xn);break;case"i":Dt.uniform1i(Tn,xn);break;case"f":Dt.uniform1f(Tn,xn);break;case"v2":Dt.uniform2f(Tn,xn.x,xn.y);break;case"v3":Dt.uniform3f(Tn,xn.x,xn.y,xn.z);break;case"v4":Dt.uniform4f(Tn,xn.x,xn.y,xn.z,xn.w);break;case"c":Dt.uniform3f(Tn,xn.r,xn.g,xn.b);break;case"iv1":Dt.uniform1iv(Tn,xn);break;case"iv":Dt.uniform3iv(Tn,xn);break;case"fv1":Dt.uniform1fv(Tn,xn);break;case"fv":Dt.uniform3fv(Tn,xn);break;case"v2v":void 0===En._array&&(En._array=new Float32Array(2*xn.length));for(var Nn=0,Cn=xn.length;Nn<Cn;Nn++)yn=2*Nn,En._array[yn]=xn[Nn].x,En._array[yn+1]=xn[Nn].y;Dt.uniform2fv(Tn,En._array);break;case"v3v":void 0===En._array&&(En._array=new Float32Array(3*xn.length)),Nn=0;for(Cn=xn.length;Nn<Cn;Nn++)yn=3*Nn,En._array[yn]=xn[Nn].x,En._array[yn+1]=xn[Nn].y,En._array[yn+2]=xn[Nn].z;Dt.uniform3fv(Tn,En._array);break;case"v4v":void 0===En._array&&(En._array=new Float32Array(4*xn.length)),Nn=0;for(Cn=xn.length;Nn<Cn;Nn++)yn=4*Nn,En._array[yn]=xn[Nn].x,En._array[yn+1]=xn[Nn].y,En._array[yn+2]=xn[Nn].z,En._array[yn+3]=xn[Nn].w;Dt.uniform4fv(Tn,En._array);break;case"m3":Dt.uniformMatrix3fv(Tn,!1,xn.elements);break;case"m3v":void 0===En._array&&(En._array=new Float32Array(9*xn.length)),Nn=0;for(Cn=xn.length;Nn<Cn;Nn++)xn[Nn].flattenToArrayOffset(En._array,9*Nn);Dt.uniformMatrix3fv(Tn,!1,En._array);break;case"m4":Dt.uniformMatrix4fv(Tn,!1,xn.elements);break;case"m4v":void 0===En._array&&(En._array=new Float32Array(16*xn.length)),Nn=0;for(Cn=xn.length;Nn<Cn;Nn++)xn[Nn].flattenToArrayOffset(En._array,16*Nn);Dt.uniformMatrix4fv(Tn,!1,En._array);break;case"t":mn=xn,gn=E(),Dt.uniform1i(Tn,gn);if(!mn)continue;if(mn instanceof THREE.CubeTexture||mn.image instanceof Array&&6===mn.image.length){var kn=mn,Ln=gn;if(6===kn.image.length)if(kn.needsUpdate){kn.image.__webglTextureCube||(kn.addEventListener("dispose",tn),kn.image.__webglTextureCube=Dt.createTexture(),Y.info.memory.textures++),Dt.activeTexture(Dt.TEXTURE0+Ln),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,kn.image.__webglTextureCube),Dt.pixelStorei(Dt.UNPACK_FLIP_Y_WEBGL,kn.flipY);for(var An=kn instanceof THREE.CompressedTexture,On=kn.image[0]instanceof THREE.DataTexture,Mn=[],_n=0;6>_n;_n++)Mn[_n]=!Y.autoScaleCubemaps||An||On?On?kn.image[_n].image:kn.image[_n]:L(kn.image[_n],qt);var Dn=Mn[0],Pn=THREE.Math.isPowerOfTwo(Dn.width)&&THREE.Math.isPowerOfTwo(Dn.height),Hn=_(kn.format),Bn=_(kn.type);k(Dt.TEXTURE_CUBE_MAP,kn,Pn);for(_n=0;6>_n;_n++)if(An)for(var jn,Fn=Mn[_n].mipmaps,In=0,qn=Fn.length;In<qn;In++)jn=Fn[In],kn.format!==THREE.RGBAFormat&&kn.format!==THREE.RGBFormat?-1<$t().indexOf(Hn)?Dt.compressedTexImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+_n,In,Hn,jn.width,jn.height,0,jn.data):0:Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+_n,In,Hn,jn.width,jn.height,0,Hn,Bn,jn.data);else On?Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+_n,0,Hn,Mn[_n].width,Mn[_n].height,0,Hn,Bn,Mn[_n].data):Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+_n,0,Hn,Hn,Bn,Mn[_n]);kn.generateMipmaps&&Pn&&Dt.generateMipmap(Dt.TEXTURE_CUBE_MAP),kn.needsUpdate=!1,kn.onUpdate&&kn.onUpdate()}else Dt.activeTexture(Dt.TEXTURE0+Ln),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,kn.image.__webglTextureCube)}else if(mn instanceof THREE.WebGLRenderTargetCube){var Rn=mn;Dt.activeTexture(Dt.TEXTURE0+gn),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,Rn.__webglTexture)}else Y.setTexture(mn,gn);break;case"tv":void 0===En._array&&(En._array=[]),Nn=0;for(Cn=En.value.length;Nn<Cn;Nn++)En._array[Nn]=E();Dt.uniform1iv(Tn,En._array),Nn=0;for(Cn=En.value.length;Nn<Cn;Nn++)mn=En.value[Nn],gn=En._array[Nn],mn&&Y.setTexture(mn,gn);break;default:0}}}}return Dt.uniformMatrix4fv(ot.modelViewMatrix,!1,i._modelViewMatrix.elements),ot.normalMatrix&&Dt.uniformMatrix3fv(ot.normalMatrix,!1,i._normalMatrix.elements),null!==ot.modelMatrix&&Dt.uniformMatrix4fv(ot.modelMatrix,!1,i.matrixWorld.elements),rt}function w(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function E(){var e=st;return e>=jt&&0,st+=1,e}function S(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function x(e,t,n,r){e[t]=n.r*n.r*r,e[t+1]=n.g*n.g*r,e[t+2]=n.b*n.b*r}function T(e,t,n,r){e[t]=n.r*r,e[t+1]=n.g*r,e[t+2]=n.b*r}function N(e){e!==gt&&(Dt.lineWidth(e),gt=e)}function C(e,t,n){dt!==e&&(e?Dt.enable(Dt.POLYGON_OFFSET_FILL):Dt.disable(Dt.POLYGON_OFFSET_FILL),dt=e),!e||vt===t&&mt===n||(Dt.polygonOffset(t,n),vt=t,mt=n)}function k(e,t,n){n?(Dt.texParameteri(e,Dt.TEXTURE_WRAP_S,_(t.wrapS)),Dt.texParameteri(e,Dt.TEXTURE_WRAP_T,_(t.wrapT)),Dt.texParameteri(e,Dt.TEXTURE_MAG_FILTER,_(t.magFilter)),Dt.texParameteri(e,Dt.TEXTURE_MIN_FILTER,_(t.minFilter))):(Dt.texParameteri(e,Dt.TEXTURE_WRAP_S,Dt.CLAMP_TO_EDGE),Dt.texParameteri(e,Dt.TEXTURE_WRAP_T,Dt.CLAMP_TO_EDGE),Dt.texParameteri(e,Dt.TEXTURE_MAG_FILTER,M(t.magFilter)),Dt.texParameteri(e,Dt.TEXTURE_MIN_FILTER,M(t.minFilter))),(n=Bt.get("EXT_texture_filter_anisotropic"))&&t.type!==THREE.FloatType&&(1<t.anisotropy||t.__oldAnisotropy)&&(Dt.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,Y.getMaxAnisotropy())),t.__oldAnisotropy=t.anisotropy)}function L(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElement("canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),0,r}return e}function A(e,t){Dt.bindRenderbuffer(Dt.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Dt.renderbufferStorage(Dt.RENDERBUFFER,Dt.DEPTH_COMPONENT16,t.width,t.height),Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_ATTACHMENT,Dt.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Dt.renderbufferStorage(Dt.RENDERBUFFER,Dt.DEPTH_STENCIL,t.width,t.height),Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_STENCIL_ATTACHMENT,Dt.RENDERBUFFER,e)):Dt.renderbufferStorage(Dt.RENDERBUFFER,Dt.RGBA4,t.width,t.height)}function O(e){e instanceof THREE.WebGLRenderTargetCube?(Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,e.__webglTexture),Dt.generateMipmap(Dt.TEXTURE_CUBE_MAP),Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,null)):(Dt.bindTexture(Dt.TEXTURE_2D,e.__webglTexture),Dt.generateMipmap(Dt.TEXTURE_2D),Dt.bindTexture(Dt.TEXTURE_2D,null))}function M(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Dt.NEAREST:Dt.LINEAR}function _(e){var t;if(e===THREE.RepeatWrapping)return Dt.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Dt.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Dt.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Dt.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Dt.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Dt.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Dt.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Dt.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Dt.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Dt.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Dt.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Dt.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Dt.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Dt.BYTE;if(e===THREE.ShortType)return Dt.SHORT;if(e===THREE.UnsignedShortType)return Dt.UNSIGNED_SHORT;if(e===THREE.IntType)return Dt.INT;if(e===THREE.UnsignedIntType)return Dt.UNSIGNED_INT;if(e===THREE.FloatType)return Dt.FLOAT;if(e===THREE.AlphaFormat)return Dt.ALPHA;if(e===THREE.RGBFormat)return Dt.RGB;if(e===THREE.RGBAFormat)return Dt.RGBA;if(e===THREE.LuminanceFormat)return Dt.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Dt.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Dt.FUNC_ADD;if(e===THREE.SubtractEquation)return Dt.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Dt.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Dt.ZERO;if(e===THREE.OneFactor)return Dt.ONE;if(e===THREE.SrcColorFactor)return Dt.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Dt.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Dt.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Dt.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Dt.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Dt.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Dt.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Dt.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Dt.SRC_ALPHA_SATURATE;t=Bt.get("WEBGL_compressed_texture_s3tc");if(null!==t){if(e===THREE.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}t=Bt.get("WEBGL_compressed_texture_pvrtc");if(null!==t){if(e===THREE.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===THREE.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===THREE.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===THREE.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}t=Bt.get("EXT_blend_minmax");if(null!==t){if(e===THREE.MinEquation)return t.MIN_EXT;if(e===THREE.MaxEquation)return t.MAX_EXT}return 0}0,e=e||{};var D=void 0!==e.canvas?e.canvas:document.createElement("canvas"),P=void 0!==e.context?e.context:null,H=void 0!==e.precision?e.precision:"highp",B=void 0!==e.alpha?e.alpha:!1,j=void 0!==e.depth?e.depth:!0,F=void 0!==e.stencil?e.stencil:!0,I=void 0!==e.antialias?e.antialias:!1,q=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,R=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,U=void 0!==e.logarithmicDepthBuffer?e.logarithmicDepthBuffer:!1,z=new THREE.Color(0),W=0,X=[],V={},$=[],J=[],K=[],Q=[],G=[];this.domElement=D,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Y=this,Z=[],et=null,tt=null,nt=-1,rt=-1,it=null,st=0,ot=-1,ut=-1,at=-1,ft=-1,lt=-1,ct=-1,ht=-1,pt=-1,dt=null,vt=null,mt=null,gt=null,yt=0,bt=0,wt=D.width,Et=D.height,St=0,xt=0,Tt=new Uint8Array(16),Nt=new Uint8Array(16),Ct=new THREE.Frustum,kt=new THREE.Matrix4,Lt=new THREE.Matrix4,At=new THREE.Vector3,Ot=new THREE.Vector3,Mt=!0,_t={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},Dt;try{var Pt={alpha:B,depth:j,stencil:F,antialias:I,premultipliedAlpha:q,preserveDrawingBuffer:R};Dt=P||D.getContext("webgl",Pt)||D.getContext("experimental-webgl",Pt);if(null===Dt)throw null!==D.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context."}catch(Ht){0}void 0===Dt.getShaderPrecisionFormat&&(Dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var Bt=new THREE.WebGLExtensions(Dt);Bt.get("OES_texture_float"),Bt.get("OES_texture_float_linear"),Bt.get("OES_standard_derivatives"),U&&Bt.get("EXT_frag_depth"),Dt.clearColor(0,0,0,1),Dt.clearDepth(1),Dt.clearStencil(0),Dt.enable(Dt.DEPTH_TEST),Dt.depthFunc(Dt.LEQUAL),Dt.frontFace(Dt.CCW),Dt.cullFace(Dt.BACK),Dt.enable(Dt.CULL_FACE),Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.SRC_ALPHA,Dt.ONE_MINUS_SRC_ALPHA),Dt.viewport(yt,bt,wt,Et),Dt.clearColor(z.r,z.g,z.b,W),this.context=Dt;var jt=Dt.getParameter(Dt.MAX_TEXTURE_IMAGE_UNITS),Ft=Dt.getParameter(Dt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),It=Dt.getParameter(Dt.MAX_TEXTURE_SIZE),qt=Dt.getParameter(Dt.MAX_CUBE_MAP_TEXTURE_SIZE),Rt=0<Ft,Ut=Rt&&Bt.get("OES_texture_float"),zt=Dt.getShaderPrecisionFormat(Dt.VERTEX_SHADER,Dt.HIGH_FLOAT),Wt=Dt.getShaderPrecisionFormat(Dt.VERTEX_SHADER,Dt.MEDIUM_FLOAT);Dt.getShaderPrecisionFormat(Dt.VERTEX_SHADER,Dt.LOW_FLOAT);var Xt=Dt.getShaderPrecisionFormat(Dt.FRAGMENT_SHADER,Dt.HIGH_FLOAT),Vt=Dt.getShaderPrecisionFormat(Dt.FRAGMENT_SHADER,Dt.MEDIUM_FLOAT);Dt.getShaderPrecisionFormat(Dt.FRAGMENT_SHADER,Dt.LOW_FLOAT);var $t=function(){var e;return function(){if(void 0!==e)return e;e=[];if(Bt.get("WEBGL_compressed_texture_pvrtc")||Bt.get("WEBGL_compressed_texture_s3tc"))for(var t=Dt.getParameter(Dt.COMPRESSED_TEXTURE_FORMATS),n=0;n<t.length;n++)e.push(t[n]);return e}}(),Jt=0<zt.precision&&0<Xt.precision,Kt=0<Wt.precision&&0<Vt.precision;"highp"!==H||Jt||(Kt?(H="mediump",0):(H="lowp",0)),"mediump"!==H||Kt||(H="lowp",0);var Qt=new THREE.ShadowMapPlugin(this,X,V,$),Gt=new THREE.SpritePlugin(this,Q),Yt=new THREE.LensFlarePlugin(this,G);this.getContext=function(){return Dt},this.supportsVertexTextures=function(){return Rt},this.supportsFloatTextures=function(){return Bt.get("OES_texture_float")},this.supportsStandardDerivatives=function(){return Bt.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return Bt.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return Bt.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return Bt.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=Bt.get("EXT_texture_filter_anisotropic");return e=null!==t?Dt.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return H},this.setSize=function(e,t,n){D.width=e*this.devicePixelRatio,D.height=t*this.devicePixelRatio,!1!==n&&(D.style.width=e+"px",D.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){yt=e*this.devicePixelRatio,bt=t*this.devicePixelRatio,wt=n*this.devicePixelRatio,Et=r*this.devicePixelRatio,Dt.viewport(yt,bt,wt,Et)},this.setScissor=function(e,t,n,r){Dt.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,n*this.devicePixelRatio,r*this.devicePixelRatio)},this.enableScissorTest=function(e){e?Dt.enable(Dt.SCISSOR_TEST):Dt.disable(Dt.SCISSOR_TEST)},this.setClearColor=function(e,t){z.set(e),W=void 0!==t?t:1,Dt.clearColor(z.r,z.g,z.b,W)},this.setClearColorHex=function(e,t){0,this.setClearColor(e,t)},this.getClearColor=function(){return z},this.getClearAlpha=function(){return W},this.clear=function(e,t,n){var r=0;if(void 0===e||e)r|=Dt.COLOR_BUFFER_BIT;if(void 0===t||t)r|=Dt.DEPTH_BUFFER_BIT;if(void 0===n||n)r|=Dt.STENCIL_BUFFER_BIT;Dt.clear(r)},this.clearColor=function(){Dt.clear(Dt.COLOR_BUFFER_BIT)},this.clearDepth=function(){Dt.clear(Dt.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Dt.clear(Dt.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=function(){it=et=null,nt=rt=ut=ot=pt=ht=at=-1,Mt=!0};var Zt=function(e){e.target.traverse(function(e){e.removeEventListener("remove",Zt);if(e instanceof THREE.Mesh||e instanceof THREE.PointCloud||e instanceof THREE.Line)delete V[e.id];else if(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)for(var t=$,n=t.length-1;0<=n;n--)t[n].object===e&&t.splice(n,1);delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive})},en=function(e){e=e.target,e.removeEventListener("dispose",en),delete e.__webglInit;if(e instanceof THREE.BufferGeometry){for(var t in e.attributes){var n=e.attributes[t];void 0!==n.buffer&&(Dt.deleteBuffer(n.buffer),delete n.buffer)}Y.info.memory.geometries--}else if(t=un[e.id],void 0!==t){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(void 0!==i.numMorphTargets){for(var s=0,o=i.numMorphTargets;s<o;s++)Dt.deleteBuffer(i.__webglMorphTargetsBuffers[s]);delete i.__webglMorphTargetsBuffers}if(void 0!==i.numMorphNormals){s=0;for(o=i.numMorphNormals;s<o;s++)Dt.deleteBuffer(i.__webglMorphNormalsBuffers[s]);delete i.__webglMorphNormalsBuffers}sn(i)}delete un[e.id]}else sn(e);rt=-1},tn=function(e){e=e.target,e.removeEventListener("dispose",tn),e.image&&e.image.__webglTextureCube?(Dt.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube):void 0!==e.__webglInit&&(Dt.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit),Y.info.memory.textures--},nn=function(e){e=e.target,e.removeEventListener("dispose",nn);if(e&&void 0!==e.__webglTexture){Dt.deleteTexture(e.__webglTexture),delete e.__webglTexture;if(e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)Dt.deleteFramebuffer(e.__webglFramebuffer[t]),Dt.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Dt.deleteFramebuffer(e.__webglFramebuffer),Dt.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}Y.info.memory.textures--},rn=function(e){e=e.target,e.removeEventListener("dispose",rn),on(e)},sn=function(e){for(var t="__webglVertexBuffer __webglNormalBuffer __webglTangentBuffer __webglColorBuffer __webglUVBuffer __webglUV2Buffer __webglSkinIndicesBuffer __webglSkinWeightsBuffer __webglFaceBuffer __webglLineBuffer __webglLineDistanceBuffer".split(" "),n=0,r=t.length;n<r;n++){var i=t[n];void 0!==e[i]&&(Dt.deleteBuffer(e[i]),delete e[i])}if(void 0!==e.__webglCustomAttributesList){for(i in e.__webglCustomAttributesList)Dt.deleteBuffer(e.__webglCustomAttributesList[i].buffer);delete e.__webglCustomAttributesList}Y.info.memory.geometries--},on=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var n,r,i=!1;e=0;for(n=Z.length;e<n;e++)if(r=Z[e],r.program===t){r.usedTimes--,0===r.usedTimes&&(i=!0);break}if(!0===i){i=[],e=0;for(n=Z.length;e<n;e++)r=Z[e],r.program!==t&&i.push(r);Z=i,Dt.deleteProgram(t),Y.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,n){s(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Dt.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Dt.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Dt.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Dt.createBuffer()),e.hasPositions&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglVertexBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,e.positionArray,Dt.DYNAMIC_DRAW),o(t.attributes.position),Dt.vertexAttribPointer(t.attributes.position,3,Dt.FLOAT,!1,0,0));if(e.hasNormals){Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglNormalBuffer);if(n.shading===THREE.FlatShading){var r,i,a,f,l,c,h,p,d,v,m,g=3*e.count;for(m=0;m<g;m+=9)v=e.normalArray,r=v[m],i=v[m+1],a=v[m+2],f=v[m+3],c=v[m+4],p=v[m+5],l=v[m+6],h=v[m+7],d=v[m+8],r=(r+f+l)/3,i=(i+c+h)/3,a=(a+p+d)/3,v[m]=r,v[m+1]=i,v[m+2]=a,v[m+3]=r,v[m+4]=i,v[m+5]=a,v[m+6]=r,v[m+7]=i,v[m+8]=a}Dt.bufferData(Dt.ARRAY_BUFFER,e.normalArray,Dt.DYNAMIC_DRAW),o(t.attributes.normal),Dt.vertexAttribPointer(t.attributes.normal,3,Dt.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglUvBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,e.uvArray,Dt.DYNAMIC_DRAW),o(t.attributes.uv),Dt.vertexAttribPointer(t.attributes.uv,2,Dt.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==THREE.NoColors&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,e.__webglColorBuffer),Dt.bufferData(Dt.ARRAY_BUFFER,e.colorArray,Dt.DYNAMIC_DRAW),o(t.attributes.color),Dt.vertexAttribPointer(t.attributes.color,3,Dt.FLOAT,!1,0,0)),u(),Dt.drawArrays(Dt.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,o,u){if(!1!==r.visible)if(e=b(e,t,n,r,u),t=!1,n=16777215*o.id+2*e.id+(r.wireframe?1:0),n!==rt&&(rt=n,t=!0),t&&s(),u instanceof THREE.Mesh)if(u=!0===r.wireframe?Dt.LINES:Dt.TRIANGLES,n=o.attributes.index){var a,f;n.array instanceof Uint32Array&&Bt.get("OES_element_index_uint")?(a=Dt.UNSIGNED_INT,f=4):(a=Dt.UNSIGNED_SHORT,f=2);var l=o.offsets;if(0===l.length)t&&(i(r,e,o,0),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,n.buffer)),Dt.drawElements(u,n.array.length,a,0),Y.info.render.calls++,Y.info.render.vertices+=n.array.length,Y.info.render.faces+=n.array.length/3;else{t=!0;for(var c=0,h=l.length;c<h;c++){var p=l[c].index;t&&(i(r,e,o,p),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,n.buffer)),Dt.drawElements(u,l[c].count,a,l[c].start*f),Y.info.render.calls++,Y.info.render.vertices+=l[c].count,Y.info.render.faces+=l[c].count/3}}}else t&&i(r,e,o,0),r=o.attributes.position,Dt.drawArrays(u,0,r.array.length/3),Y.info.render.calls++,Y.info.render.vertices+=r.array.length/3,Y.info.render.faces+=r.array.length/9;else if(u instanceof THREE.PointCloud)t&&i(r,e,o,0),r=o.attributes.position,Dt.drawArrays(Dt.POINTS,0,r.array.length/3),Y.info.render.calls++,Y.info.render.points+=r.array.length/3;else if(u instanceof THREE.Line)if(u=u.mode===THREE.LineStrip?Dt.LINE_STRIP:Dt.LINES,N(r.linewidth),n=o.attributes.index)if(n.array instanceof Uint32Array?(a=Dt.UNSIGNED_INT,f=4):(a=Dt.UNSIGNED_SHORT,f=2),l=o.offsets,0===l.length)t&&(i(r,e,o,0),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,n.buffer)),Dt.drawElements(u,n.array.length,a,0),Y.info.render.calls++,Y.info.render.vertices+=n.array.length;else for(1<l.length&&(t=!0),c=0,h=l.length;c<h;c++)p=l[c].index,t&&(i(r,e,o,p),Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,n.buffer)),Dt.drawElements(u,l[c].count,a,l[c].start*f),Y.info.render.calls++,Y.info.render.vertices+=l[c].count;else t&&i(r,e,o,0),r=o.attributes.position,Dt.drawArrays(u,0,r.array.length/3),Y.info.render.calls++,Y.info.render.points+=r.array.length/3},this.renderBuffer=function(e,t,n,r,i,a){if(!1!==r.visible){n=b(e,t,n,r,a),t=n.attributes,e=!1,n=16777215*i.id+2*n.id+(r.wireframe?1:0),n!==rt&&(rt=n,e=!0),e&&s();if(!r.morphTargets&&0<=t.position)e&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglVertexBuffer),o(t.position),Dt.vertexAttribPointer(t.position,3,Dt.FLOAT,!1,0,0));else if(a.morphTargetBase){n=r.program.attributes,-1!==a.morphTargetBase&&0<=n.position?(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[a.morphTargetBase]),o(n.position),Dt.vertexAttribPointer(n.position,3,Dt.FLOAT,!1,0,0)):0<=n.position&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglVertexBuffer),o(n.position),Dt.vertexAttribPointer(n.position,3,Dt.FLOAT,!1,0,0));if(a.morphTargetForcedOrder.length)for(var f=0,c=a.morphTargetForcedOrder,h=a.morphTargetInfluences;f<r.numSupportedMorphTargets&&f<c.length;)0<=n["morphTarget"+f]&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[c[f]]),o(n["morphTarget"+f]),Dt.vertexAttribPointer(n["morphTarget"+f],3,Dt.FLOAT,!1,0,0)),0<=n["morphNormal"+f]&&r.morphNormals&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[c[f]]),o(n["morphNormal"+f]),Dt.vertexAttribPointer(n["morphNormal"+f],3,Dt.FLOAT,!1,0,0)),a.__webglMorphTargetInfluences[f]=h[c[f]],f++;else{var c=[],h=a.morphTargetInfluences,p,d=h.length;for(p=0;p<d;p++)f=h[p],0<f&&c.push([f,p]);c.length>r.numSupportedMorphTargets?(c.sort(l),c.length=r.numSupportedMorphTargets):c.length>r.numSupportedMorphNormals?c.sort(l):0===c.length&&c.push([0,0]);for(f=0;f<r.numSupportedMorphTargets;)c[f]?(p=c[f][1],0<=n["morphTarget"+f]&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglMorphTargetsBuffers[p]),o(n["morphTarget"+f]),Dt.vertexAttribPointer(n["morphTarget"+f],3,Dt.FLOAT,!1,0,0)),0<=n["morphNormal"+f]&&r.morphNormals&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglMorphNormalsBuffers[p]),o(n["morphNormal"+f]),Dt.vertexAttribPointer(n["morphNormal"+f],3,Dt.FLOAT,!1,0,0)),a.__webglMorphTargetInfluences[f]=h[p]):a.__webglMorphTargetInfluences[f]=0,f++}null!==r.program.uniforms.morphTargetInfluences&&Dt.uniform1fv(r.program.uniforms.morphTargetInfluences,a.__webglMorphTargetInfluences)}if(e){if(i.__webglCustomAttributesList)for(n=0,h=i.__webglCustomAttributesList.length;n<h;n++)c=i.__webglCustomAttributesList[n],0<=t[c.buffer.belongsToAttribute]&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,c.buffer),o(t[c.buffer.belongsToAttribute]),Dt.vertexAttribPointer(t[c.buffer.belongsToAttribute],c.size,Dt.FLOAT,!1,0,0));0<=t.color&&(0<a.geometry.colors.length||0<a.geometry.faces.length?(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglColorBuffer),o(t.color),Dt.vertexAttribPointer(t.color,3,Dt.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Dt.vertexAttrib3fv(t.color,r.defaultAttributeValues.color)),0<=t.normal&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglNormalBuffer),o(t.normal),Dt.vertexAttribPointer(t.normal,3,Dt.FLOAT,!1,0,0)),0<=t.tangent&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglTangentBuffer),o(t.tangent),Dt.vertexAttribPointer(t.tangent,4,Dt.FLOAT,!1,0,0)),0<=t.uv&&(a.geometry.faceVertexUvs[0]?(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglUVBuffer),o(t.uv),Dt.vertexAttribPointer(t.uv,2,Dt.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Dt.vertexAttrib2fv(t.uv,r.defaultAttributeValues.uv)),0<=t.uv2&&(a.geometry.faceVertexUvs[1]?(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglUV2Buffer),o(t.uv2),Dt.vertexAttribPointer(t.uv2,2,Dt.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Dt.vertexAttrib2fv(t.uv2,r.defaultAttributeValues.uv2)),r.skinning&&0<=t.skinIndex&&0<=t.skinWeight&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglSkinIndicesBuffer),o(t.skinIndex),Dt.vertexAttribPointer(t.skinIndex,4,Dt.FLOAT,!1,0,0),Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglSkinWeightsBuffer),o(t.skinWeight),Dt.vertexAttribPointer(t.skinWeight,4,Dt.FLOAT,!1,0,0)),0<=t.lineDistance&&(Dt.bindBuffer(Dt.ARRAY_BUFFER,i.__webglLineDistanceBuffer),o(t.lineDistance),Dt.vertexAttribPointer(t.lineDistance,1,Dt.FLOAT,!1,0,0))}u(),a instanceof THREE.Mesh?(a=i.__typeArray===Uint32Array?Dt.UNSIGNED_INT:Dt.UNSIGNED_SHORT,r.wireframe?(N(r.wireframeLinewidth),e&&Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer),Dt.drawElements(Dt.LINES,i.__webglLineCount,a,0)):(e&&Dt.bindBuffer(Dt.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer),Dt.drawElements(Dt.TRIANGLES,i.__webglFaceCount,a,0)),Y.info.render.calls++,Y.info.render.vertices+=i.__webglFaceCount,Y.info.render.faces+=i.__webglFaceCount/3):a instanceof THREE.Line?(a=a.mode===THREE.LineStrip?Dt.LINE_STRIP:Dt.LINES,N(r.linewidth),Dt.drawArrays(a,0,i.__webglLineCount),Y.info.render.calls++):a instanceof THREE.PointCloud&&(Dt.drawArrays(Dt.POINTS,0,i.__webglParticleCount),Y.info.render.calls++,Y.info.render.points+=i.__webglParticleCount)}},this.render=function(e,t,n,r){if(0==t instanceof THREE.Camera)0;else{var i=e.fog;nt=rt=-1,it=null,Mt=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof THREE.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),kt.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Ct.setFromMatrix(kt),X.length=0,J.length=0,K.length=0,Q.length=0,G.length=0,c(e,e),!0===Y.sortObjects&&(J.sort(a),K.sort(f)),Qt.render(e,t),Y.info.render.calls=0,Y.info.render.vertices=0,Y.info.render.faces=0,Y.info.render.points=0,this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r=0;for(var s=$.length;r<s;r++){var o=$[r],u=o.object;u.visible&&(S(u,t),d(o))}e.overrideMaterial?(r=e.overrideMaterial,this.setBlending(r.blending,r.blendEquation,r.blendSrc,r.blendDst),this.setDepthTest(r.depthTest),this.setDepthWrite(r.depthWrite),C(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits),h(J,t,X,i,!0,r),h(K,t,X,i,!0,r),p($,"",t,X,i,!1,r)):(r=null,this.setBlending(THREE.NoBlending),h(J,t,X,i,!1,r),p($,"opaque",t,X,i,!1,r),h(K,t,X,i,!0,r),p($,"transparent",t,X,i,!0,r)),Gt.render(e,t),Yt.render(e,t,St,xt),n&&n.generateMipmaps&&n.minFilter!==THREE.NearestFilter&&n.minFilter!==THREE.LinearFilter&&O(n),this.setDepthTest(!0),this.setDepthWrite(!0)}},this.renderImmediateObject=function(e,t,n,r,i){var s=b(e,t,n,r,i);rt=-1,Y.setMaterialFaces(r),i.immediateRenderCallback?i.immediateRenderCallback(s,Dt,Ct):i.render(function(e){Y.renderBufferImmediate(e,s,r)})};var un={},an=0;this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Dt.disable(Dt.CULL_FACE):(t===THREE.FrontFaceDirectionCW?Dt.frontFace(Dt.CW):Dt.frontFace(Dt.CCW),e===THREE.CullFaceBack?Dt.cullFace(Dt.BACK):e===THREE.CullFaceFront?Dt.cullFace(Dt.FRONT):Dt.cullFace(Dt.FRONT_AND_BACK),Dt.enable(Dt.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide;e=e.side===THREE.BackSide,ot!==t&&(t?Dt.disable(Dt.CULL_FACE):Dt.enable(Dt.CULL_FACE),ot=t),ut!==e&&(e?Dt.frontFace(Dt.CW):Dt.frontFace(Dt.CCW),ut=e)},this.setDepthTest=function(e){ht!==e&&(e?Dt.enable(Dt.DEPTH_TEST):Dt.disable(Dt.DEPTH_TEST),ht=e)},this.setDepthWrite=function(e){pt!==e&&(Dt.depthMask(e),pt=e)},this.setBlending=function(e,t,n,r){e!==at&&(e===THREE.NoBlending?Dt.disable(Dt.BLEND):e===THREE.AdditiveBlending?(Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.SRC_ALPHA,Dt.ONE)):e===THREE.SubtractiveBlending?(Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.ZERO,Dt.ONE_MINUS_SRC_COLOR)):e===THREE.MultiplyBlending?(Dt.enable(Dt.BLEND),Dt.blendEquation(Dt.FUNC_ADD),Dt.blendFunc(Dt.ZERO,Dt.SRC_COLOR)):e===THREE.CustomBlending?Dt.enable(Dt.BLEND):(Dt.enable(Dt.BLEND),Dt.blendEquationSeparate(Dt.FUNC_ADD,Dt.FUNC_ADD),Dt.blendFuncSeparate(Dt.SRC_ALPHA,Dt.ONE_MINUS_SRC_ALPHA,Dt.ONE,Dt.ONE_MINUS_SRC_ALPHA)),at=e);if(e===THREE.CustomBlending){if(t!==ft&&(Dt.blendEquation(_(t)),ft=t),n!==lt||r!==ct)Dt.blendFunc(_(n),_(r)),lt=n,ct=r}else ct=lt=ft=null},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",tn),e.__webglTexture=Dt.createTexture(),Y.info.memory.textures++),Dt.bindTexture(Dt.TEXTURE_2D,e.__webglTexture),Dt.pixelStorei(Dt.UNPACK_FLIP_Y_WEBGL,e.flipY),Dt.pixelStorei(Dt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Dt.pixelStorei(Dt.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=L(e.image,It);var t=e.image,n=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),r=_(e.format),i=_(e.type);k(Dt.TEXTURE_2D,e,n);var s=e.mipmaps;if(e instanceof THREE.DataTexture)if(0<s.length&&n){for(var o=0,u=s.length;o<u;o++)t=s[o],Dt.texImage2D(Dt.TEXTURE_2D,o,r,t.width,t.height,0,r,i,t.data);e.generateMipmaps=!1}else Dt.texImage2D(Dt.TEXTURE_2D,0,r,t.width,t.height,0,r,i,t.data);else if(e instanceof THREE.CompressedTexture)for(o=0,u=s.length;o<u;o++)t=s[o],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?-1<$t().indexOf(r)?Dt.compressedTexImage2D(Dt.TEXTURE_2D,o,r,t.width,t.height,0,t.data):0:Dt.texImage2D(Dt.TEXTURE_2D,o,r,t.width,t.height,0,r,i,t.data);else if(0<s.length&&n){o=0;for(u=s.length;o<u;o++)t=s[o],Dt.texImage2D(Dt.TEXTURE_2D,o,r,r,i,t);e.generateMipmaps=!1}else Dt.texImage2D(Dt.TEXTURE_2D,0,r,r,i,e.image);e.generateMipmaps&&n&&Dt.generateMipmap(Dt.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){Dt.activeTexture(Dt.TEXTURE0+t),e.needsUpdate?Y.uploadTexture(e):Dt.bindTexture(Dt.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",nn),e.__webglTexture=Dt.createTexture(),Y.info.memory.textures++;var n=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),r=_(e.format),i=_(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,e.__webglTexture),k(Dt.TEXTURE_CUBE_MAP,e,n);for(var s=0;6>s;s++){e.__webglFramebuffer[s]=Dt.createFramebuffer(),e.__webglRenderbuffer[s]=Dt.createRenderbuffer(),Dt.texImage2D(Dt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,r,e.width,e.height,0,r,i,null);var o=e,u=Dt.TEXTURE_CUBE_MAP_POSITIVE_X+s;Dt.bindFramebuffer(Dt.FRAMEBUFFER,e.__webglFramebuffer[s]),Dt.framebufferTexture2D(Dt.FRAMEBUFFER,Dt.COLOR_ATTACHMENT0,u,o.__webglTexture,0),A(e.__webglRenderbuffer[s],e)}n&&Dt.generateMipmap(Dt.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Dt.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Dt.createRenderbuffer(),Dt.bindTexture(Dt.TEXTURE_2D,e.__webglTexture),k(Dt.TEXTURE_2D,e,n),Dt.texImage2D(Dt.TEXTURE_2D,0,r,e.width,e.height,0,r,i,null),r=Dt.TEXTURE_2D,Dt.bindFramebuffer(Dt.FRAMEBUFFER,e.__webglFramebuffer),Dt.framebufferTexture2D(Dt.FRAMEBUFFER,Dt.COLOR_ATTACHMENT0,r,e.__webglTexture,0),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_ATTACHMENT,Dt.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Dt.framebufferRenderbuffer(Dt.FRAMEBUFFER,Dt.DEPTH_STENCIL_ATTACHMENT,Dt.RENDERBUFFER,e.__webglRenderbuffer):A(e.__webglRenderbuffer,e),n&&Dt.generateMipmap(Dt.TEXTURE_2D);t?Dt.bindTexture(Dt.TEXTURE_CUBE_MAP,null):Dt.bindTexture(Dt.TEXTURE_2D,null),Dt.bindRenderbuffer(Dt.RENDERBUFFER,null),Dt.bindFramebuffer(Dt.FRAMEBUFFER,null)}e?(t=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,n=e.width,e=e.height,i=r=0):(t=null,n=wt,e=Et,r=yt,i=bt),t!==tt&&(Dt.bindFramebuffer(Dt.FRAMEBUFFER,t),Dt.viewport(r,i,n,e),tt=t),St=n,xt=e},this.initMaterial=function(){0},this.addPrePlugin=function(){0},this.addPostPlugin=function(){0},this.updateShadowMap=function(){0}},THREE.WebGLRenderTarget=function(e,t,n){this.width=e,this.height=t,n=n||{},this.wrapS=void 0!==n.wrapS?n.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==n.wrapT?n.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n.magFilter?n.magFilter:THREE.LinearFilter,this.minFilter=void 0!==n.minFilter?n.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==n.format?n.format:THREE.RGBAFormat,this.type=void 0!==n.type?n.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==n.depthBuffer?n.depthBuffer:!0,this.stencilBuffer=void 0!==n.stencilBuffer?n.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,n){THREE.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLExtensions=function(e){var t={};this.get=function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"OES_texture_float":r=e.getExtension("OES_texture_float");break;case"OES_texture_float_linear":r=e.getExtension("OES_texture_float_linear");break;case"OES_standard_derivatives":r=e.getExtension("OES_standard_derivatives");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"OES_element_index_uint":r=e.getExtension("OES_element_index_uint");break;case"EXT_blend_minmax":r=e.getExtension("EXT_blend_minmax");break;case"EXT_frag_depth":r=e.getExtension("EXT_frag_depth")}return null===r&&0,t[n]=r}},THREE.WebGLProgram=function(){var e=0;return function(t,n,r,i){var s=t.context,o=r.defines,u=r.__webglShader.uniforms,f=r.attributes,l=r.__webglShader.vertexShader,c=r.__webglShader.fragmentShader,h=r.index0AttributeName;void 0===h&&!0===i.morphTargets&&(h="position");var p="SHADOWMAP_TYPE_BASIC";i.shadowMapType===THREE.PCFShadowMap?p="SHADOWMAP_TYPE_PCF":i.shadowMapType===THREE.PCFSoftShadowMap&&(p="SHADOWMAP_TYPE_PCF_SOFT");var d,v;d=[];for(var m in o)v=o[m],!1!==v&&(v="#define "+m+" "+v,d.push(v));d=d.join("\n"),o=s.createProgram(),r instanceof THREE.RawShaderMaterial?t=r="":(r=["precision "+i.precision+" float;","precision "+i.precision+" int;",d,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+i.maxDirLights,"#define MAX_POINT_LIGHTS "+i.maxPointLights,"#define MAX_SPOT_LIGHTS "+i.maxSpotLights,"#define MAX_HEMI_LIGHTS "+i.maxHemiLights,"#define MAX_SHADOWS "+i.maxShadows,"#define MAX_BONES "+i.maxBones,i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.lightMap?"#define USE_LIGHTMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals?"#define USE_MORPHNORMALS":"",i.wrapAround?"#define WRAP_AROUND":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+p:"",i.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",i.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n	attribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n	attribute vec3 morphTarget0;\n	attribute vec3 morphTarget1;\n	attribute vec3 morphTarget2;\n	attribute vec3 morphTarget3;\n	#ifdef USE_MORPHNORMALS\n		attribute vec3 morphNormal0;\n		attribute vec3 morphNormal1;\n		attribute vec3 morphNormal2;\n		attribute vec3 morphNormal3;\n	#else\n		attribute vec3 morphTarget4;\n		attribute vec3 morphTarget5;\n		attribute vec3 morphTarget6;\n		attribute vec3 morphTarget7;\n	#endif\n#endif\n#ifdef USE_SKINNING\n	attribute vec4 skinIndex;\n	attribute vec4 skinWeight;\n#endif\n"].join("\n"),t=["precision "+i.precision+" float;","precision "+i.precision+" int;",i.bumpMap||i.normalMap?"#extension GL_OES_standard_derivatives : enable":"",d,"#define MAX_DIR_LIGHTS "+i.maxDirLights,"#define MAX_POINT_LIGHTS "+i.maxPointLights,"#define MAX_SPOT_LIGHTS "+i.maxSpotLights,"#define MAX_HEMI_LIGHTS "+i.maxHemiLights,"#define MAX_SHADOWS "+i.maxShadows,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.lightMap?"#define USE_LIGHTMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.metal?"#define METAL":"",i.wrapAround?"#define WRAP_AROUND":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+p:"",i.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",i.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n")),l=new THREE.WebGLShader(s,s.VERTEX_SHADER,r+l),c=new THREE.WebGLShader(s,s.FRAGMENT_SHADER,t+c),s.attachShader(o,l),s.attachShader(o,c),void 0!==h&&s.bindAttribLocation(o,0,h),s.linkProgram(o),!1===s.getProgramParameter(o,s.LINK_STATUS)&&(0,0,0),""!==s.getProgramInfoLog(o)&&0,s.deleteShader(l),s.deleteShader(c),h="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" "),i.useVertexTexture?(h.push("boneTexture"),h.push("boneTextureWidth"),h.push("boneTextureHeight")):h.push("boneGlobalMatrices"),i.logarithmicDepthBuffer&&h.push("logDepthBufFC");for(var g in u)h.push(g);u=h,g={},h=0;for(t=u.length;h<t;h++)p=u[h],g[p]=s.getUniformLocation(o,p);this.uniforms=g,h="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(u=0;u<i.maxMorphTargets;u++)h.push("morphTarget"+u);for(u=0;u<i.maxMorphNormals;u++)h.push("morphNormal"+u);for(var y in f)h.push(y);i=h,f={},y=0;for(u=i.length;y<u;y++)g=i[y],f[g]=s.getAttribLocation(o,g);return this.attributes=f,this.attributesKeys=Object.keys(this.attributes),this.id=e++,this.code=n,this.usedTimes=1,this.program=o,this.vertexShader=l,this.fragmentShader=c,this}}(),THREE.WebGLShader=function(){var e=function(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")};return function(t,n,r){return n=t.createShader(n),t.shaderSource(n,r),t.compileShader(n),!1===t.getShaderParameter(n,t.COMPILE_STATUS)&&0,""!==t.getShaderInfoLog(n)&&(0,0),n}}(),THREE.LensFlarePlugin=function(e,t){var n,r,i,s,o,u,a,f,l,c,h=e.context,p,d,v,m,g,y;this.render=function(w,E,S,x){if(0!==t.length){w=new THREE.Vector3;var T=x/S,N=.5*S,C=.5*x,L=16/x,A=new THREE.Vector2(L*T,L),O=new THREE.Vector3(1,1,0),M=new THREE.Vector2(1,1);if(void 0===v){var L=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),_=new Uint16Array([0,1,2,0,2,3]);p=h.createBuffer(),d=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,p),h.bufferData(h.ARRAY_BUFFER,L,h.STATIC_DRAW),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,d),h.bufferData(h.ELEMENT_ARRAY_BUFFER,_,h.STATIC_DRAW),g=h.createTexture(),y=h.createTexture(),h.bindTexture(h.TEXTURE_2D,g),h.texImage2D(h.TEXTURE_2D,0,h.RGB,16,16,0,h.RGB,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.bindTexture(h.TEXTURE_2D,y),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,16,16,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);var L=(m=0<h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},_=h.createProgram(),D=h.createShader(h.FRAGMENT_SHADER),P=h.createShader(h.VERTEX_SHADER),H="precision "+e.getPrecision()+" float;\n";h.shaderSource(D,H+L.fragmentShader),h.shaderSource(P,H+L.vertexShader),h.compileShader(D),h.compileShader(P),h.attachShader(_,D),h.attachShader(_,P),h.linkProgram(_),v=_,l=h.getAttribLocation(v,"position"),c=h.getAttribLocation(v,"uv"),n=h.getUniformLocation(v,"renderType"),r=h.getUniformLocation(v,"map"),i=h.getUniformLocation(v,"occlusionMap"),s=h.getUniformLocation(v,"opacity"),o=h.getUniformLocation(v,"color"),u=h.getUniformLocation(v,"scale"),a=h.getUniformLocation(v,"rotation"),f=h.getUniformLocation(v,"screenPosition")}h.useProgram(v),h.enableVertexAttribArray(l),h.enableVertexAttribArray(c),h.uniform1i(i,0),h.uniform1i(r,1),h.bindBuffer(h.ARRAY_BUFFER,p),h.vertexAttribPointer(l,2,h.FLOAT,!1,16,0),h.vertexAttribPointer(c,2,h.FLOAT,!1,16,8),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,d),h.disable(h.CULL_FACE),h.depthMask(!1),_=0;for(D=t.length;_<D;_++)if(L=16/x,A.set(L*T,L),P=t[_],w.set(P.matrixWorld.elements[12],P.matrixWorld.elements[13],P.matrixWorld.elements[14]),w.applyMatrix4(E.matrixWorldInverse),w.applyProjection(E.projectionMatrix),O.copy(w),M.x=O.x*N+N,M.y=O.y*C+C,m||0<M.x&&M.x<S&&0<M.y&&M.y<x){h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,g),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGB,M.x-8,M.y-8,16,16,0),h.uniform1i(n,0),h.uniform2f(u,A.x,A.y),h.uniform3f(f,O.x,O.y,O.z),h.disable(h.BLEND),h.enable(h.DEPTH_TEST),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,y),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,M.x-8,M.y-8,16,16,0),h.uniform1i(n,1),h.disable(h.DEPTH_TEST),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,g),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0),P.positionScreen.copy(O),P.customUpdateCallback?P.customUpdateCallback(P):P.updateLensFlares(),h.uniform1i(n,2),h.enable(h.BLEND);for(var H=0,B=P.lensFlares.length;H<B;H++){var j=P.lensFlares[H];.001<j.opacity&&.001<j.scale&&(O.x=j.x,O.y=j.y,O.z=j.z,L=j.size*j.scale/x,A.x=L*T,A.y=L,h.uniform3f(f,O.x,O.y,O.z),h.uniform2f(u,A.x,A.y),h.uniform1f(a,j.rotation),h.uniform1f(s,j.opacity),h.uniform3f(o,j.color.r,j.color.g,j.color.b),e.setBlending(j.blending,j.blendEquation,j.blendSrc,j.blendDst),e.setTexture(j.texture,1),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0))}}h.enable(h.CULL_FACE),h.enable(h.DEPTH_TEST),h.depthMask(!0),e.resetGLState()}}},THREE.ShadowMapPlugin=function(e,t,n,r){function i(e,t,r){if(t.visible){var s=n[t.id];if(s&&t.castShadow&&(!1===t.frustumCulled||!0===l.intersectsObject(t)))for(var o=0,u=s.length;o<u;o++){var a=s[o];t._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),v.push(a)}o=0;for(u=t.children.length;o<u;o++)i(e,t.children[o],r)}}var s=e.context,o,u,a,f,l=new THREE.Frustum,c=new THREE.Matrix4,h=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector3,v=[],m=THREE.ShaderLib.depthRGBA,g=THREE.UniformsUtils.clone(m.uniforms);o=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}),u=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0}),a=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,skinning:!0}),f=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0,skinning:!0}),o._shadowPass=!0,u._shadowPass=!0,a._shadowPass=!0,f._shadowPass=!0,this.render=function(n,m){if(!1!==e.shadowMapEnabled){var g,y,w,E,S,x,T,N,C=[];E=0,s.clearColor(1,1,1,1),s.disable(s.BLEND),s.enable(s.CULL_FACE),s.frontFace(s.CCW),e.shadowMapCullFace===THREE.CullFaceFront?s.cullFace(s.FRONT):s.cullFace(s.BACK),e.setDepthTest(!0),g=0;for(y=t.length;g<y;g++)if(w=t[g],w.castShadow)if(w instanceof THREE.DirectionalLight&&w.shadowCascade)for(S=0;S<w.shadowCascadeCount;S++){var L;if(w.shadowCascadeArray[S])L=w.shadowCascadeArray[S];else{T=w;var A=S;L=new THREE.DirectionalLight,L.isVirtual=!0,L.onlyShadow=!0,L.castShadow=!0,L.shadowCameraNear=T.shadowCameraNear,L.shadowCameraFar=T.shadowCameraFar,L.shadowCameraLeft=T.shadowCameraLeft,L.shadowCameraRight=T.shadowCameraRight,L.shadowCameraBottom=T.shadowCameraBottom,L.shadowCameraTop=T.shadowCameraTop,L.shadowCameraVisible=T.shadowCameraVisible,L.shadowDarkness=T.shadowDarkness,L.shadowBias=T.shadowCascadeBias[A],L.shadowMapWidth=T.shadowCascadeWidth[A],L.shadowMapHeight=T.shadowCascadeHeight[A],L.pointsWorld=[],L.pointsFrustum=[],N=L.pointsWorld,x=L.pointsFrustum;for(var O=0;8>O;O++)N[O]=new THREE.Vector3,x[O]=new THREE.Vector3;N=T.shadowCascadeNearZ[A],T=T.shadowCascadeFarZ[A],x[0].set(-1,-1,N),x[1].set(1,-1,N),x[2].set(-1,1,N),x[3].set(1,1,N),x[4].set(-1,-1,T),x[5].set(1,-1,T),x[6].set(-1,1,T),x[7].set(1,1,T),L.originalCamera=m,x=new THREE.Gyroscope,x.position.copy(w.shadowCascadeOffset),x.add(L),x.add(L.target),m.add(x),w.shadowCascadeArray[S]=L,0}A=w,N=S,T=A.shadowCascadeArray[N],T.position.copy(A.position),T.target.position.copy(A.target.position),T.lookAt(T.target),T.shadowCameraVisible=A.shadowCameraVisible,T.shadowDarkness=A.shadowDarkness,T.shadowBias=A.shadowCascadeBias[N],x=A.shadowCascadeNearZ[N],A=A.shadowCascadeFarZ[N],T=T.pointsFrustum,T[0].z=x,T[1].z=x,T[2].z=x,T[3].z=x,T[4].z=A,T[5].z=A,T[6].z=A,T[7].z=A,C[E]=L,E++}else C[E]=w,E++;g=0;for(y=C.length;g<y;g++){w=C[g],w.shadowMap||(S=THREE.LinearFilter,e.shadowMapType===THREE.PCFSoftShadowMap&&(S=THREE.NearestFilter),w.shadowMap=new THREE.WebGLRenderTarget(w.shadowMapWidth,w.shadowMapHeight,{minFilter:S,magFilter:S,format:THREE.RGBAFormat}),w.shadowMapSize=new THREE.Vector2(w.shadowMapWidth,w.shadowMapHeight),w.shadowMatrix=new THREE.Matrix4);if(!w.shadowCamera){if(w instanceof THREE.SpotLight)w.shadowCamera=new THREE.PerspectiveCamera(w.shadowCameraFov,w.shadowMapWidth/w.shadowMapHeight,w.shadowCameraNear,w.shadowCameraFar);else{if(!(w instanceof THREE.DirectionalLight)){0;continue}w.shadowCamera=new THREE.OrthographicCamera(w.shadowCameraLeft,w.shadowCameraRight,w.shadowCameraTop,w.shadowCameraBottom,w.shadowCameraNear,w.shadowCameraFar)}n.add(w.shadowCamera),!0===n.autoUpdate&&n.updateMatrixWorld()}w.shadowCameraVisible&&!w.cameraHelper&&(w.cameraHelper=new THREE.CameraHelper(w.shadowCamera),n.add(w.cameraHelper));if(w.isVirtual&&L.originalCamera==m){S=m,E=w.shadowCamera,x=w.pointsFrustum,T=w.pointsWorld,h.set(Infinity,Infinity,Infinity),p.set(-Infinity,-Infinity,-Infinity);for(A=0;8>A;A++)N=T[A],N.copy(x[A]),N.unproject(S),N.applyMatrix4(E.matrixWorldInverse),N.x<h.x&&(h.x=N.x),N.x>p.x&&(p.x=N.x),N.y<h.y&&(h.y=N.y),N.y>p.y&&(p.y=N.y),N.z<h.z&&(h.z=N.z),N.z>p.z&&(p.z=N.z);E.left=h.x,E.right=p.x,E.top=p.y,E.bottom=h.y,E.updateProjectionMatrix()}E=w.shadowMap,x=w.shadowMatrix,S=w.shadowCamera,S.position.setFromMatrixPosition(w.matrixWorld),d.setFromMatrixPosition(w.target.matrixWorld),S.lookAt(d),S.updateMatrixWorld(),S.matrixWorldInverse.getInverse(S.matrixWorld),w.cameraHelper&&(w.cameraHelper.visible=w.shadowCameraVisible),w.shadowCameraVisible&&w.cameraHelper.update(),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(S.projectionMatrix),x.multiply(S.matrixWorldInverse),c.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),l.setFromMatrix(c),e.setRenderTarget(E),e.clear(),v.length=0,i(n,n,S),w=0;for(E=v.length;w<E;w++)T=v[w],x=T.object,T=T.buffer,A=x.material instanceof THREE.MeshFaceMaterial?x.material.materials[0]:x.material,N=void 0!==x.geometry.morphTargets&&0<x.geometry.morphTargets.length&&A.morphTargets,O=x instanceof THREE.SkinnedMesh&&A.skinning,N=x.customDepthMaterial?x.customDepthMaterial:O?N?f:a:N?u:o,e.setMaterialFaces(A),T instanceof THREE.BufferGeometry?e.renderBufferDirect(S,t,null,N,T,x):e.renderBuffer(S,t,null,N,T,x);w=0;for(E=r.length;w<E;w++)T=r[w],x=T.object,x.visible&&x.castShadow&&(x._modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld),e.renderImmediateObject(S,t,null,o,x))}g=e.getClearColor(),y=e.getClearAlpha(),s.clearColor(g.r,g.g,g.b,y),s.enable(s.BLEND),e.shadowMapCullFace===THREE.CullFaceFront&&s.cullFace(s.BACK),e.resetGLState()}}},THREE.SpritePlugin=function(e,t){function b(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w=e.context,E,S,x,T;this.render=function(N,C){if(0!==t.length){if(void 0===x){var L=new Float32Array([-0.5,-0.5,0,0,.5,-0.5,1,0,.5,.5,1,1,-0.5,.5,0,1]),A=new Uint16Array([0,1,2,0,2,3]);E=w.createBuffer(),S=w.createBuffer(),w.bindBuffer(w.ARRAY_BUFFER,E),w.bufferData(w.ARRAY_BUFFER,L,w.STATIC_DRAW),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,S),w.bufferData(w.ELEMENT_ARRAY_BUFFER,A,w.STATIC_DRAW);var L=w.createProgram(),A=w.createShader(w.VERTEX_SHADER),O=w.createShader(w.FRAGMENT_SHADER);w.shaderSource(A,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),w.shaderSource(O,["precision "+e.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),w.compileShader(A),w.compileShader(O),w.attachShader(L,A),w.attachShader(L,O),w.linkProgram(L),x=L,g=w.getAttribLocation(x,"position"),y=w.getAttribLocation(x,"uv"),n=w.getUniformLocation(x,"uvOffset"),r=w.getUniformLocation(x,"uvScale"),i=w.getUniformLocation(x,"rotation"),s=w.getUniformLocation(x,"scale"),o=w.getUniformLocation(x,"color"),u=w.getUniformLocation(x,"map"),a=w.getUniformLocation(x,"opacity"),f=w.getUniformLocation(x,"modelViewMatrix"),l=w.getUniformLocation(x,"projectionMatrix"),c=w.getUniformLocation(x,"fogType"),h=w.getUniformLocation(x,"fogDensity"),p=w.getUniformLocation(x,"fogNear"),d=w.getUniformLocation(x,"fogFar"),v=w.getUniformLocation(x,"fogColor"),m=w.getUniformLocation(x,"alphaTest"),L=document.createElement("canvas"),L.width=8,L.height=8,A=L.getContext("2d"),A.fillStyle="white",A.fillRect(0,0,8,8),T=new THREE.Texture(L),T.needsUpdate=!0}w.useProgram(x),w.enableVertexAttribArray(g),w.enableVertexAttribArray(y),w.disable(w.CULL_FACE),w.enable(w.BLEND),w.bindBuffer(w.ARRAY_BUFFER,E),w.vertexAttribPointer(g,2,w.FLOAT,!1,16,0),w.vertexAttribPointer(y,2,w.FLOAT,!1,16,8),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,S),w.uniformMatrix4fv(l,!1,C.projectionMatrix.elements),w.activeTexture(w.TEXTURE0),w.uniform1i(u,0),A=L=0,(O=N.fog)?(w.uniform3f(v,O.color.r,O.color.g,O.color.b),O instanceof THREE.Fog?(w.uniform1f(p,O.near),w.uniform1f(d,O.far),w.uniform1i(c,1),A=L=1):O instanceof THREE.FogExp2&&(w.uniform1f(h,O.density),w.uniform1i(c,2),A=L=2)):(w.uniform1i(c,0),A=L=0);for(var O=0,M=t.length;O<M;O++){var _=t[O];_._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,_.matrixWorld),_.z=null===_.renderDepth?-_._modelViewMatrix.elements[14]:_.renderDepth}t.sort(b);for(var P=[],O=0,M=t.length;O<M;O++){var _=t[O],H=_.material;w.uniform1f(m,H.alphaTest),w.uniformMatrix4fv(f,!1,_._modelViewMatrix.elements),P[0]=_.scale.x,P[1]=_.scale.y,_=0,N.fog&&H.fog&&(_=A),L!==_&&(w.uniform1i(c,_),L=_),null!==H.map?(w.uniform2f(n,H.map.offset.x,H.map.offset.y),w.uniform2f(r,H.map.repeat.x,H.map.repeat.y)):(w.uniform2f(n,0,0),w.uniform2f(r,1,1)),w.uniform1f(a,H.opacity),w.uniform3f(o,H.color.r,H.color.g,H.color.b),w.uniform1f(i,H.rotation),w.uniform2fv(s,P),e.setBlending(H.blending,H.blendEquation,H.blendSrc,H.blendDst),e.setDepthTest(H.depthTest),e.setDepthWrite(H.depthWrite),H.map&&H.map.image&&H.map.image.width?e.setTexture(H.map,0):e.setTexture(T,0),w.drawElements(w.TRIANGLES,6,w.UNSIGNED_SHORT,0)}w.enable(w.CULL_FACE),e.resetGLState()}}},THREE.GeometryUtils={merge:function(e,t,n){0;var r;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return 0,e.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,r){var i=new THREE.ImageLoader;i.crossOrigin=this.crossOrigin;var s=new THREE.Texture(void 0,t);return i.load(e,function(e){s.image=e,s.needsUpdate=!0,n&&n(s)},void 0,function(e){r&&r(e)}),s.sourceFile=e,s},loadTextureCube:function(e,t,n,r){var i=new THREE.ImageLoader;i.crossOrigin=this.crossOrigin;var s=new THREE.CubeTexture([],t);s.flipY=!1;var o=0;t=function(t){i.load(e[t],function(e){s.images[t]=e,o+=1,6===o&&(s.needsUpdate=!0,n&&n(s))})},r=0;for(var u=e.length;r<u;++r)t(r);return s},loadCompressedTexture:function(){0},loadCompressedTextureCube:function(){0},getNormalMap:function(e,t){var n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t|=1;var r=e.width,i=e.height,s=document.createElement("canvas");s.width=r,s.height=i;var o=s.getContext("2d");o.drawImage(e,0,0);for(var u=o.getImageData(0,0,r,i).data,a=o.createImageData(r,i),f=a.data,l=0;l<r;l++)for(var c=0;c<i;c++){var h=0>c-1?0:c-1,p=c+1>i-1?i-1:c+1,d=0>l-1?0:l-1,v=l+1>r-1?r-1:l+1,m=[],g=[0,0,u[4*(c*r+l)]/255*t];m.push([-1,0,u[4*(c*r+d)]/255*t]),m.push([-1,-1,u[4*(h*r+d)]/255*t]),m.push([0,-1,u[4*(h*r+l)]/255*t]),m.push([1,-1,u[4*(h*r+v)]/255*t]),m.push([1,0,u[4*(c*r+v)]/255*t]),m.push([1,1,u[4*(p*r+v)]/255*t]),m.push([0,1,u[4*(p*r+l)]/255*t]),m.push([-1,1,u[4*(p*r+d)]/255*t]),h=[],d=m.length;for(p=0;p<d;p++){var v=m[p],y=m[(p+1)%d],v=[v[0]-g[0],v[1]-g[1],v[2]-g[2]],y=[y[0]-g[0],y[1]-g[1],y[2]-g[2]];h.push(n([v[1]*y[2]-v[2]*y[1],v[2]*y[0]-v[0]*y[2],v[0]*y[1]-v[1]*y[0]]))}m=[0,0,0];for(p=0;p<h.length;p++)m[0]+=h[p][0],m[1]+=h[p][1],m[2]+=h[p][2];m[0]/=h.length,m[1]/=h.length,m[2]/=h.length,g=4*(c*r+l),f[g]=(m[0]+1)/2*255|0,f[g+1]=(m[1]+1)/2*255|0,f[g+2]=255*m[2]|0,f[g+3]=255}return o.putImageData(a,0,0),s},generateDataTexture:function(e,t,n){var r=e*t,i=new Uint8Array(3*r),s=Math.floor(255*n.r),o=Math.floor(255*n.g);n=Math.floor(255*n.b);for(var u=0;u<r;u++)i[3*u]=s,i[3*u+1]=o,i[3*u+2]=n;return e=new THREE.DataTexture(i,e,t,THREE.RGBFormat),e.needsUpdate=!0,e}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new THREE.Object3D,r=0,i=t.length;r<i;r++)n.add(new THREE.Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new THREE.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase();return this.faces[t]=this.faces[t]||{},this.faces[t][e.cssFontWeight]=this.faces[t][e.cssFontWeight]||{},this.faces[t][e.cssFontWeight][e.cssFontStyle]=e,this.faces[t][e.cssFontWeight][e.cssFontStyle]=e},drawText:function(e){var t=this.getFace(),n=this.size/t.resolution,r=0,i=String(e).split(""),s=i.length,o=[];for(e=0;e<s;e++){var u=new THREE.Path,u=this.extractGlyphPoints(i[e],t,n,r,u),r=r+u.offset;o.push(u.path)}return{paths:o,offset:r/2}},extractGlyphPoints:function(e,t,n,r,i){var s=[],o,u,a,f,l,c,h,p,d,v,m,g=t.glyphs[e]||t.glyphs["?"];if(g){if(g.o)for(t=g._cachedOutline||(g._cachedOutline=g.o.split(" ")),f=t.length,e=0;e<f;)switch(a=t[e++],a){case"m":a=t[e++]*n+r,l=t[e++]*n,i.moveTo(a,l);break;case"l":a=t[e++]*n+r,l=t[e++]*n,i.lineTo(a,l);break;case"q":a=t[e++]*n+r,l=t[e++]*n,p=t[e++]*n+r,d=t[e++]*n,i.quadraticCurveTo(p,d,a,l);if(o=s[s.length-1])for(c=o.x,h=o.y,o=1,u=this.divisions;o<=u;o++){var y=o/u;THREE.Shape.Utils.b2(y,c,p,a),THREE.Shape.Utils.b2(y,h,d,l)}break;case"b":if(a=t[e++]*n+r,l=t[e++]*n,p=t[e++]*n+r,d=t[e++]*n,v=t[e++]*n+r,m=t[e++]*n,i.bezierCurveTo(p,d,v,m,a,l),o=s[s.length-1])for(c=o.x,h=o.y,o=1,u=this.divisions;o<=u;o++)y=o/u,THREE.Shape.Utils.b3(y,c,p,v,a),THREE.Shape.Utils.b3(y,h,d,m,l)}return{offset:g.ha*n,path:i}}}},THREE.FontUtils.generateShapes=function(e,t){t=t||{};var n=void 0!==t.curveSegments?t.curveSegments:4,r=void 0!==t.font?t.font:"helvetiker",i=void 0!==t.weight?t.weight:"normal",s=void 0!==t.style?t.style:"normal";THREE.FontUtils.size=void 0!==t.size?t.size:100,THREE.FontUtils.divisions=n,THREE.FontUtils.face=r,THREE.FontUtils.weight=i,THREE.FontUtils.style=s,n=THREE.FontUtils.drawText(e).paths,r=[],i=0;for(s=n.length;i<s;i++)Array.prototype.push.apply(r,n[i].toShapes());return r},function(e){var t=function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n};return e.Triangulate=function(e,n){var r=e.length;if(3>r)return null;var i=[],s=[],o=[],u,a,f;if(0<t(e))for(a=0;a<r;a++)s[a]=a;else for(a=0;a<r;a++)s[a]=r-1-a;var l=2*r;for(a=r-1;2<r;){if(0>=l--){0;break}u=a,r<=u&&(u=0),a=u+1,r<=a&&(a=0),f=a+1,r<=f&&(f=0);var c;e:{var h=c=void 0,p=void 0,d=void 0,v=void 0,m=void 0,g=void 0,y=void 0,w=void 0,h=e[s[u]].x,p=e[s[u]].y,d=e[s[a]].x,v=e[s[a]].y,m=e[s[f]].x,g=e[s[f]].y;if(1e-10>(d-h)*(g-p)-(v-p)*(m-h))c=!1;else{var E=void 0,S=void 0,x=void 0,T=void 0,N=void 0,C=void 0,k=void 0,L=void 0,A=void 0,O=void 0,A=L=k=w=y=void 0,E=m-d,S=g-v,x=h-m,T=p-g,N=d-h,C=v-p;for(c=0;c<r;c++)if(y=e[s[c]].x,w=e[s[c]].y,!(y===h&&w===p||y===d&&w===v||y===m&&w===g)&&(k=y-h,L=w-p,A=y-d,O=w-v,y-=m,w-=g,A=E*O-S*A,k=N*L-C*k,L=x*w-T*y,-1e-10<=A&&-1e-10<=L&&-1e-10<=k)){c=!1;break e}c=!0}}if(c){i.push([e[s[u]],e[s[a]],e[s[f]]]),o.push([s[u],s[a],s[f]]),u=a;for(f=a+1;f<r;u++,f++)s[u]=s[f];r--,l=2*r}}return n?o:i},e.Triangulate.area=t,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Audio=function(e){THREE.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.load=function(e){var t=this,n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.source.connect(t.panner),t.source.start(0)})},n.send(),this},THREE.Audio.prototype.setLoop=function(e){this.source.loop=e},THREE.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},THREE.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},THREE.Audio.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;return function(t){THREE.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3;return function(o){THREE.Object3D.prototype.updateMatrixWorld.call(this,o),o=this.context.listener,this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),i.subVectors(e,s),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,this.up.x,this.up.y,this.up.z),o.setVelocity(i.x,i.y,i.z),s.copy(e)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(e){return 0,null},THREE.Curve.prototype.getPointAt=function(e){return e=this.getUtoTmapping(e),this.getPoint(e)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPoint(t/e));return n},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n,r=this.getPoint(0),i,s=0;t.push(0);for(i=1;i<=e;i++)n=this.getPoint(i/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var n=this.getLengths(),r=0,i=n.length,s;s=t?t:e*n[i-1];for(var o=0,u=i-1,a;o<=u;)if(r=Math.floor(o+(u-o)/2),a=n[r]-s,0>a)o=r+1;else{if(!(0<a)){u=r;break}u=r-1}return r=u,n[r]==s?r/(i-1):(o=n[r],n=(r+(s-o)/(n[r+1]-o))/(i-1))},THREE.Curve.prototype.getTangent=function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),1<e&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},THREE.Curve.prototype.getTangentAt=function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,n,r,i){e=.5*(n-e),r=.5*(r-t);var s=i*i;return(2*t-2*n+e+r)*i*s+(-3*t+3*n-2*e-r)*s+e*i+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){var t=e*this.getLength(),n=this.getCurveLengths();for(e=0;e<n.length;){if(n[e]>=t)return t=n[e]-t,e=this.curves[e],t=1-t/e.getLength(),e.getPointAt(t);e++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e=[],t=0,n,r=this.curves.length;for(n=0;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e},THREE.CurvePath.prototype.getBoundingBox=function(){var e=this.getPoints(),t,n,r,i,s,o;t=n=Number.NEGATIVE_INFINITY,i=s=Number.POSITIVE_INFINITY;var u,a,f,l,c=e[0]instanceof THREE.Vector3;l=c?new THREE.Vector3:new THREE.Vector2,a=0;for(f=e.length;a<f;a++)u=e[a],u.x>t?t=u.x:u.x<i&&(i=u.x),u.y>n?n=u.y:u.y<s&&(s=u.y),c&&(u.z>r?r=u.z:u.z<o&&(o=u.z)),l.add(u);return e={minX:i,minY:s,maxX:t,maxY:n},c&&(e.maxZ=r,e.minZ=o),e},THREE.CurvePath.prototype.createPointsGeometry=function(e){return e=this.getPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){return e=this.getSpacedPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,n=0;n<e.length;n++)t.vertices.push(new THREE.Vector3(e[n].x,e[n].y,e[n].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var n=this.getPoints(e),r,i;t||(t=this.bends),r=0;for(i=t.length;r<i;r++)n=this.getWrapPoints(n,t[r]);return n},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var n=this.getSpacedPoints(e),r,i;t||(t=this.bends),r=0;for(i=t.length;r<i;r++)n=this.getWrapPoints(n,t[r]);return n},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var n=this.getBoundingBox(),r,i,s,o,u,a;r=0;for(i=e.length;r<i;r++)s=e[r],o=s.x,u=s.y,a=o/n.maxX,a=t.getUtoTmapping(a,o),o=t.getPoint(a),a=t.getTangent(a),a.set(-a.y,a.x).multiplyScalar(u),s.x=o.x+a.x,s.y=o.y+a.y;return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Quaternion,s=new THREE.Vector3;return function(o){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||o)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(r,i,s),this.matrix.decompose(e,t,n),this.matrixWorld.compose(r,t,s)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0;for(var u=0,l=this.children.length;u<l;u++)this.children[u].updateMatrixWorld(o)}}(),THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(e,t){var n=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:n})},THREE.Path.prototype.lineTo=function(e,t){var n=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,r=new THREE.LineCurve(new THREE.Vector2(r[r.length-2],r[r.length-1]),new THREE.Vector2(e,t));this.curves.push(r),this.actions.push({action:THREE.PathActions.LINE_TO,args:n})},THREE.Path.prototype.quadraticCurveTo=function(e,t,n,r){var i=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,s=new THREE.QuadraticBezierCurve(new THREE.Vector2(s[s.length-2],s[s.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(n,r));this.curves.push(s),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:i})},THREE.Path.prototype.bezierCurveTo=function(e,t,n,r,i,s){var o=Array.prototype.slice.call(arguments),u=this.actions[this.actions.length-1].args,u=new THREE.CubicBezierCurve(new THREE.Vector2(u[u.length-2],u[u.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(n,r),new THREE.Vector2(i,s));this.curves.push(u),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:o})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,n=[new THREE.Vector2(n[n.length-2],n[n.length-1])];Array.prototype.push.apply(n,e),n=new THREE.SplineCurve(n),this.curves.push(n),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,n,r,i,s){var o=this.actions[this.actions.length-1].args;this.absarc(e+o[o.length-2],t+o[o.length-1],n,r,i,s)},THREE.Path.prototype.absarc=function(e,t,n,r,i,s){this.absellipse(e,t,n,n,r,i,s)},THREE.Path.prototype.ellipse=function(e,t,n,r,i,s,o){var u=this.actions[this.actions.length-1].args;this.absellipse(e+u[u.length-2],t+u[u.length-1],n,r,i,s,o)},THREE.Path.prototype.absellipse=function(e,t,n,r,i,s,o){var u=Array.prototype.slice.call(arguments),a=new THREE.EllipseCurve(e,t,n,r,i,s,o);this.curves.push(a),a=a.getPoint(1),u.push(a.x),u.push(a.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:u})},THREE.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var n=[],r=0;r<e;r++)n.push(this.getPoint(r/e));return n},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return 0,this.getSpacedPoints(e,t);e=e||12;var n=[],r,i,s,o,u,a,f,l,c,h,p,d,v;r=0;for(i=this.actions.length;r<i;r++)switch(s=this.actions[r],o=s.action,s=s.args,o){case THREE.PathActions.MOVE_TO:n.push(new THREE.Vector2(s[0],s[1]));break;case THREE.PathActions.LINE_TO:n.push(new THREE.Vector2(s[0],s[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:u=s[2],a=s[3],c=s[0],h=s[1],0<n.length?(o=n[n.length-1],p=o.x,d=o.y):(o=this.actions[r-1].args,p=o[o.length-2],d=o[o.length-1]);for(s=1;s<=e;s++)v=s/e,o=THREE.Shape.Utils.b2(v,p,c,u),v=THREE.Shape.Utils.b2(v,d,h,a),n.push(new THREE.Vector2(o,v));break;case THREE.PathActions.BEZIER_CURVE_TO:u=s[4],a=s[5],c=s[0],h=s[1],f=s[2],l=s[3],0<n.length?(o=n[n.length-1],p=o.x,d=o.y):(o=this.actions[r-1].args,p=o[o.length-2],d=o[o.length-1]);for(s=1;s<=e;s++)v=s/e,o=THREE.Shape.Utils.b3(v,p,c,f,u),v=THREE.Shape.Utils.b3(v,d,h,l,a),n.push(new THREE.Vector2(o,v));break;case THREE.PathActions.CSPLINE_THRU:o=this.actions[r-1].args,v=[new THREE.Vector2(o[o.length-2],o[o.length-1])],o=e*s[0].length,v=v.concat(s[0]),v=new THREE.SplineCurve(v);for(s=1;s<=o;s++)n.push(v.getPointAt(s/o));break;case THREE.PathActions.ARC:u=s[0],a=s[1],h=s[2],f=s[3],o=s[4],c=!!s[5],p=o-f,d=2*e;for(s=1;s<=d;s++)v=s/d,c||(v=1-v),v=f+v*p,o=u+h*Math.cos(v),v=a+h*Math.sin(v),n.push(new THREE.Vector2(o,v));break;case THREE.PathActions.ELLIPSE:for(u=s[0],a=s[1],h=s[2],l=s[3],f=s[4],o=s[5],c=!!s[6],p=o-f,d=2*e,s=1;s<=d;s++)v=s/d,c||(v=1-v),v=f+v*p,o=u+h*Math.cos(v),v=a+l*Math.sin(v),n.push(new THREE.Vector2(o,v))}return r=n[n.length-1],1e-10>Math.abs(r.x-n[0].x)&&1e-10>Math.abs(r.y-n[0].y)&&n.splice(n.length-1,1),t&&n.push(n[0]),n},THREE.Path.prototype.toShapes=function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],s=new THREE.Shape;s.actions=i.actions,s.curves=i.curves,t.push(s)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,s=0;s<n;i=s++){var o=t[i],u=t[s],a=u.x-o.x,f=u.y-o.y;if(1e-10<Math.abs(f)){if(0>f&&(o=t[s],a=-a,u=t[i],f=-f),!(e.y<o.y||e.y>u.y))if(e.y==o.y){if(e.x==o.x)return!0}else{i=f*(e.x-o.x)-a*(e.y-o.y);if(0==i)return!0;0>i||(r=!r)}}else if(e.y==o.y&&(u.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=u.x))return!0}return r}var i=function(e){var t,n,r,i,s=[],o=new THREE.Path;t=0;for(n=e.length;t<n;t++)r=e[t],i=r.args,r=r.action,r==THREE.PathActions.MOVE_TO&&0!=o.actions.length&&(s.push(o),o=new THREE.Path),o[r].apply(o,i);return 0!=o.actions.length&&s.push(o),s}(this.actions);if(0==i.length)return[];if(!0===t)return n(i);var s,o,u,a=[];if(1==i.length)return o=i[0],u=new THREE.Shape,u.actions=o.actions,u.curves=o.curves,a.push(u),a;var f=!THREE.Shape.Utils.isClockWise(i[0].getPoints()),f=e?!f:f;u=[];var l=[],c=[],h=0,p;l[h]=void 0,c[h]=[];var d,v;d=0;for(v=i.length;d<v;d++)o=i[d],p=o.getPoints(),s=THREE.Shape.Utils.isClockWise(p),(s=e?!s:s)?(!f&&l[h]&&h++,l[h]={s:new THREE.Shape,p:p},l[h].s.actions=o.actions,l[h].s.curves=o.curves,f&&h++,c[h]=[]):c[h].push({h:o,p:p[0]});if(!l[0])return n(i);if(1<l.length){d=!1,v=[],o=0;for(i=l.length;o<i;o++)u[o]=[];o=0;for(i=l.length;o<i;o++)for(s=c[o],f=0;f<s.length;f++){h=s[f],p=!0;for(var m=0;m<l.length;m++)r(h.p,l[m].p)&&(o!=m&&v.push({froms:o,tos:m,hole:f}),p?(p=!1,u[m].push(h)):d=!0);p&&u[o].push(h)}0<v.length&&(d||(c=u))}d=0;for(v=l.length;d<v;d++)for(u=l[d].s,a.push(u),o=c[d],i=0,s=o.length;i<s;i++)u.holes.push(o[i].h);return a},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){return new THREE.ExtrudeGeometry(this,e)},THREE.Shape.prototype.makeGeometry=function(e){return new THREE.ShapeGeometry(this,e)},THREE.Shape.prototype.getPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={triangulateShape:function(e,t){function n(e,t,n){return e.x!=t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function r(e,t,r,i,s){var o=t.x-e.x,u=t.y-e.y,a=i.x-r.x,f=i.y-r.y,l=e.x-r.x,c=e.y-r.y,h=u*a-o*f,p=u*l-o*c;if(1e-10<Math.abs(h)){if(0<h){if(0>p||p>h)return[];a=f*l-a*c;if(0>a||a>h)return[]}else{if(0<p||p<h)return[];a=f*l-a*c;if(0<a||a<h)return[]}return 0==a?!s||0!=p&&p!=h?[e]:[]:a==h?!s||0!=p&&p!=h?[t]:[]:0==p?[r]:p==h?[i]:(s=a/h,[{x:e.x+s*o,y:e.y+s*u}])}return 0!=p||f*l!=a*c?[]:(u=0==o&&0==u,a=0==a&&0==f,u&&a?e.x!=r.x||e.y!=r.y?[]:[e]:u?n(r,i,e)?[e]:[]:a?n(e,t,r)?[r]:[]:(0!=o?(e.x<t.x?(o=e,a=e.x,u=t,e=t.x):(o=t,a=t.x,u=e,e=e.x),r.x<i.x?(t=r,h=r.x,f=i,r=i.x):(t=i,h=i.x,f=r,r=r.x)):(e.y<t.y?(o=e,a=e.y,u=t,e=t.y):(o=t,a=t.y,u=e,e=e.y),r.y<i.y?(t=r,h=r.y,f=i,r=i.y):(t=i,h=i.y,f=r,r=r.y)),a<=h?e<h?[]:e==h?s?[]:[t]:e<=r?[t,u]:[t,f]:a>r?[]:a==r?s?[]:[o]:e<=r?[o,u]:[o,f]))}function i(e,t,n,r){var i=t.x-e.x,s=t.y-e.y;t=n.x-e.x,n=n.y-e.y;var o=r.x-e.x;return r=r.y-e.y,e=i*n-s*t,i=i*r-s*o,1e-10<Math.abs(e)?(t=o*n-r*t,0<e?0<=i&&0<=t:0<=i||0<=t):0<i}var s,o,u,a,f,l={};u=e.concat(),s=0;for(o=t.length;s<o;s++)Array.prototype.push.apply(u,t[s]);s=0;for(o=u.length;s<o;s++)f=u[s].x+":"+u[s].y,void 0!==l[f]&&0,l[f]=s;s=function(e,t){function n(e,t){var n=u.length-1,r=e-1;0>r&&(r=n);var s=e+1;return s>n&&(s=0),n=i(u[e],u[r],u[s],a[t]),n?(n=a.length-1,r=t-1,0>r&&(r=n),s=t+1,s>n&&(s=0),(n=i(a[t],a[r],a[s],u[e]))?!0:!1):!1}function s(e,t){var n,i;for(n=0;n<u.length;n++)if(i=n+1,i%=u.length,i=r(e,t,u[n],u[i],!0),0<i.length)return!0;return!1}function o(e,n){var i,s,o,u;for(i=0;i<f.length;i++)for(s=t[f[i]],o=0;o<s.length;o++)if(u=o+1,u%=s.length,u=r(e,n,s[o],s[u],!0),0<u.length)return!0;return!1}var u=e.concat(),a,f=[],l,c,h,p,v,m=[],g,y,b,w=0;for(l=t.length;w<l;w++)f.push(w);g=0;for(var E=2*f.length;0<f.length;){E--;if(0>E){0;break}for(c=g;c<u.length;c++){h=u[c],l=-1;for(w=0;w<f.length;w++)if(p=f[w],v=h.x+":"+h.y+":"+p,void 0===m[v]){a=t[p];for(y=0;y<a.length;y++)if(p=a[y],n(c,y)&&!s(h,p)&&!o(h,p)){l=y,f.splice(w,1),g=u.slice(0,c+1),p=u.slice(c),y=a.slice(l),b=a.slice(0,l+1),u=g.concat(y).concat(b).concat(p),g=c;break}if(0<=l)break;m[v]=!0}if(0<=l)break}}return u}(e,t);var c=THREE.FontUtils.Triangulate(s,!1);s=0;for(o=c.length;s<o;s++)for(a=c[s],u=0;3>u;u++)f=a[u].x+":"+a[u].y,f=l[f],void 0!==f&&(a[u]=f);return c.concat()},isClockWise:function(e){return 0>THREE.FontUtils.Triangulate.area(e)},b2p0:function(e,t){var n=1-e;return n*n*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,n,r){return this.b2p0(e,t)+this.b2p1(e,n)+this.b2p2(e,r)},b3p0:function(e,t){var n=1-e;return n*n*n*t},b3p1:function(e,t){var n=1-e;return 3*n*n*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,n,r,i){return this.b3p0(e,t)+this.b3p1(e,n)+this.b3p2(e,r)+this.b3p3(e,i)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new THREE.Vector2;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new THREE.Vector2;return t.x=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},THREE.CubicBezierCurve=function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(e){var t;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,e)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t;return t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t=new THREE.Vector2(t,e),t.normalize(),t},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(e){var t=this.points;e*=t.length-1;var n=Math.floor(e);e-=n;var r=t[0==n?n:n-1],i=t[n],s=t[n>t.length-2?t.length-1:n+1],t=t[n>t.length-3?t.length-1:n+2],n=new THREE.Vector2;return n.x=THREE.Curve.Utils.interpolate(r.x,i.x,s.x,t.x,e),n.y=THREE.Curve.Utils.interpolate(r.y,i.y,s.y,t.y,e),n},THREE.EllipseCurve=function(e,t,n,r,i,s,o){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;return 0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),e=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t,t=new THREE.Vector2,t.x=this.aX+this.xRadius*Math.cos(e),t.y=this.aY+this.yRadius*Math.sin(e),t},THREE.ArcCurve=function(e,t,n,r,i,s){THREE.EllipseCurve.call(this,e,t,n,n,r,i,s)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-1;var n=Math.floor(e);e-=n;var r=t[0==n?n:n-1],i=t[n],s=t[n>t.length-2?t.length-1:n+1],t=t[n>t.length-3?t.length-1:n+2],n=new THREE.Vector3;return n.x=THREE.Curve.Utils.interpolate(r.x,i.x,s.x,t.x,e),n.y=THREE.Curve.Utils.interpolate(r.y,i.y,s.y,t.y,e),n.z=THREE.Curve.Utils.interpolate(r.z,i.z,s.z,t.z,e),n}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-0;var n=Math.floor(e);e-=n;var n=n+(0<n?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length),r=t[(n-1)%t.length],i=t[n%t.length],s=t[(n+1)%t.length],t=t[(n+2)%t.length],n=new THREE.Vector3;return n.x=THREE.Curve.Utils.interpolate(r.x,i.x,s.x,t.x,e),n.y=THREE.Curve.Utils.interpolate(r.y,i.y,s.y,t.y,e),n.z=THREE.Curve.Utils.interpolate(r.z,i.z,s.z,t.z,e),n}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){0},get:function(){0},remove:function(){0},animations:[],init:function(e){if(!0!==e.initialized){for(var t=0;t<e.hierarchy.length;t++){for(var n=0;n<e.hierarchy[t].keys.length;n++)if(0>e.hierarchy[t].keys[n].time&&(e.hierarchy[t].keys[n].time=0),void 0!==e.hierarchy[t].keys[n].rot&&!(e.hierarchy[t].keys[n].rot instanceof THREE.Quaternion)){var r=e.hierarchy[t].keys[n].rot;e.hierarchy[t].keys[n].rot=(new THREE.Quaternion).fromArray(r)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){r={};for(n=0;n<e.hierarchy[t].keys.length;n++)for(var i=0;i<e.hierarchy[t].keys[n].morphTargets.length;i++){var s=e.hierarchy[t].keys[n].morphTargets[i];r[s]=-1}e.hierarchy[t].usedMorphTargets=r;for(n=0;n<e.hierarchy[t].keys.length;n++){var o={};for(s in r){for(i=0;i<e.hierarchy[t].keys[n].morphTargets.length;i++)if(e.hierarchy[t].keys[n].morphTargets[i]===s){o[s]=e.hierarchy[t].keys[n].morphTargetsInfluences[i];break}i===e.hierarchy[t].keys[n].morphTargets.length&&(o[s]=0)}e.hierarchy[t].keys[n].morphTargetsInfluences=o}}for(n=1;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].time===e.hierarchy[t].keys[n-1].time&&(e.hierarchy[t].keys.splice(n,1),n--);for(n=0;n<e.hierarchy[t].keys.length;n++)e.hierarchy[t].keys[n].index=n}return e.initialized=!0,e}},parse:function(e){var t=function(e,n){n.push(e);for(var r=0;r<e.children.length;r++)t(e.children[r],n)},n=[];if(e instanceof THREE.SkinnedMesh)for(var r=0;r<e.skeleton.bones.length;r++)n.push(e.skeleton.bones[r]);else t(e,n);return n},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){e=this.animations.indexOf(e),-1!==e&&this.animations.splice(e,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(t=0;t<this.animations.length;t++)this.animations[t].update(e)}},THREE.Animation=function(e,t){this.root=e,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype.keyTypes=["pos","rot","scl"],THREE.Animation.prototype.play=function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},THREE.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e];n.matrixAutoUpdate=!0,void 0===n.animationCache&&(n.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}),void 0===n.animationCache.animations[this.data.name]&&(n.animationCache.animations[this.data.name]={},n.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0},n.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0},n.animationCache.animations[this.data.name].originalMatrix=n.matrix);for(var n=n.animationCache.animations[this.data.name],r=0;3>r;r++){for(var i=this.keyTypes[r],s=this.data.hierarchy[e].keys[0],o=this.getNextKeyWith(i,e,1);o.time<this.currentTime&&o.index>s.index;)s=o,o=this.getNextKeyWith(i,e,o.index+1);n.prevKey[i]=s,n.nextKey[i]=o}}},THREE.Animation.prototype.resetBlendWeights=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e];void 0!==n.animationCache&&(n.animationCache.blending.positionWeight=0,n.animationCache.blending.quaternionWeight=0,n.animationCache.blending.scaleWeight=0)}},THREE.Animation.prototype.update=function(){var e=[],t=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Quaternion,i=function(e,t){var n=[],r=[],i,o,u,a,l,c;return i=(e.length-1)*t,o=Math.floor(i),i-=o,n[0]=0===o?o:o-1,n[1]=o,n[2]=o>e.length-2?o:o+1,n[3]=o>e.length-3?o:o+2,o=e[n[0]],a=e[n[1]],l=e[n[2]],c=e[n[3]],n=i*i,u=i*n,r[0]=s(o[0],a[0],l[0],c[0],i,n,u),r[1]=s(o[1],a[1],l[1],c[1],i,n,u),r[2]=s(o[2],a[2],l[2],c[2],i,n,u),r},s=function(e,t,n,r,i,s,o){return e=.5*(n-e),r=.5*(r-t),(2*(t-n)+e+r)*o+(-3*(t-n)-2*e-r)*s+e*i+t};return function(s){if(!1!==this.isPlaying&&(this.currentTime+=s*this.timeScale,0!==this.weight)){s=this.data.length;if(this.currentTime>s||0>this.currentTime){if(!this.loop){this.stop();return}this.currentTime%=s,0>this.currentTime&&(this.currentTime+=s),this.reset()}s=0;for(var o=this.hierarchy.length;s<o;s++)for(var u=this.hierarchy[s],f=u.animationCache.animations[this.data.name],l=u.animationCache.blending,h=0;3>h;h++){var p=this.keyTypes[h],v=f.prevKey[p],m=f.nextKey[p];if(0<this.timeScale&&m.time<=this.currentTime||0>this.timeScale&&v.time>=this.currentTime){v=this.data.hierarchy[s].keys[0];for(m=this.getNextKeyWith(p,s,1);m.time<this.currentTime&&m.index>v.index;)v=m,m=this.getNextKeyWith(p,s,m.index+1);f.prevKey[p]=v,f.nextKey[p]=m}u.matrixAutoUpdate=!0,u.matrixWorldNeedsUpdate=!0;var g=(this.currentTime-v.time)/(m.time-v.time),y=v[p],w=m[p];0>g&&(g=0),1<g&&(g=1);if("pos"===p){if(this.interpolationType===THREE.AnimationHandler.LINEAR)n.x=y[0]+(w[0]-y[0])*g,n.y=y[1]+(w[1]-y[1])*g,n.z=y[2]+(w[2]-y[2])*g,v=this.weight/(this.weight+l.positionWeight),u.position.lerp(n,v),l.positionWeight+=this.weight;else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)e[0]=this.getPrevKeyWith("pos",s,v.index-1).pos,e[1]=y,e[2]=w,e[3]=this.getNextKeyWith("pos",s,m.index+1).pos,g=.33*g+.33,m=i(e,g),v=this.weight/(this.weight+l.positionWeight),l.positionWeight+=this.weight,p=u.position,p.x+=(m[0]-p.x)*v,p.y+=(m[1]-p.y)*v,p.z+=(m[2]-p.z)*v,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(g=i(e,1.01*g),t.set(g[0],g[1],g[2]),t.sub(p),t.y=0,t.normalize(),g=Math.atan2(t.x,t.z),u.rotation.set(0,g,0))}else"rot"===p?(THREE.Quaternion.slerp(y,w,r,g),0===l.quaternionWeight?(u.quaternion.copy(r),l.quaternionWeight=this.weight):(v=this.weight/(this.weight+l.quaternionWeight),THREE.Quaternion.slerp(u.quaternion,r,u.quaternion,v),l.quaternionWeight+=this.weight)):"scl"===p&&(n.x=y[0]+(w[0]-y[0])*g,n.y=y[1]+(w[1]-y[1])*g,n.z=y[2]+(w[2]-y[2])*g,v=this.weight/(this.weight+l.scaleWeight),u.scale.lerp(n,v),l.scaleWeight+=this.weight)}return!0}}}(),THREE.Animation.prototype.getNextKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?n<r.length-1?n:r.length-1:n%r.length;n<r.length;n++)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;for(n=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<n?n:0:0<=n?n:n+r.length;0<=n;n--)if(void 0!==r[n][e])return r[n];return this.data.hierarchy[t].keys[r.length-1]},THREE.KeyFrameAnimation=function(e){this.root=e.node,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.loop=this.isPaused=!0,e=0;for(var t=this.hierarchy.length;e<t;e++){var n=this.data.hierarchy[e].sids,r=this.hierarchy[e];if(this.data.hierarchy[e].keys.length&&n){for(var i=0;i<n.length;i++){var s=n[i],o=this.getNextKeyWith(s,e,0);o&&o.apply(s)}r.matrixAutoUpdate=!1,this.data.hierarchy[e].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(e){this.currentTime=void 0!==e?e:0;if(!1===this.isPlaying){this.isPlaying=!0;var t=this.hierarchy.length,n,r;for(e=0;e<t;e++)n=this.hierarchy[e],r=this.data.hierarchy[e],void 0===r.animationCache&&(r.animationCache={},r.animationCache.prevKey=null,r.animationCache.nextKey=null,r.animationCache.originalMatrix=n.matrix),n=this.data.hierarchy[e].keys,n.length&&(r.animationCache.prevKey=n[0],r.animationCache.nextKey=n[1],this.startTime=Math.min(n[0].time,this.startTime),this.endTime=Math.max(n[n.length-1].time,this.endTime));this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1,THREE.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],n=this.data.hierarchy[e];if(void 0!==n.animationCache){var r=n.animationCache.originalMatrix;r.copy(t.matrix),t.matrix=r,delete n.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(e){if(!1!==this.isPlaying){this.currentTime+=e*this.timeScale,e=this.data.length,!0===this.loop&&this.currentTime>e&&(this.currentTime%=e),this.currentTime=Math.min(this.currentTime,e),e=0;for(var t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e],r=this.data.hierarchy[e],i=r.keys,r=r.animationCache;if(i.length){var s=r.prevKey,o=r.nextKey;if(o.time<=this.currentTime){for(;o.time<this.currentTime&&o.index>s.index;)s=o,o=i[s.index+1];r.prevKey=s,r.nextKey=o}o.time>=this.currentTime?s.interpolate(o,this.currentTime):s.interpolate(o,o.time),this.data.hierarchy[e].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,n){t=this.data.hierarchy[t].keys;for(n%=t.length;n<t.length;n++)if(t[n].hasTarget(e))return t[n];return t[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,n){t=this.data.hierarchy[t].keys;for(n=0<=n?n:n+t.length;0<=n;n--)if(t[n].hasTarget(e))return t[n];return t[t.length-1]},THREE.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var e=0,t=0;return function(n){if(!1!==this.isPlaying){this.currentTime+=n,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration),n=this.duration/this.frames;var r=Math.floor(this.currentTime/n);r!=t&&(this.mesh.morphTargetInfluences[e]=0,this.mesh.morphTargetInfluences[t]=1,this.mesh.morphTargetInfluences[r]=0,e=t,t=r),this.mesh.morphTargetInfluences[r]=this.currentTime%n/n,this.mesh.morphTargetInfluences[e]=1-this.mesh.morphTargetInfluences[r]}}}()},THREE.BoxGeometry=function(e,t,n,r,i,s){function o(e,t,n,r,i,s,o,a){var f,l=u.widthSegments,c=u.heightSegments,p=i/2,d=s/2,v=u.vertices.length;if("x"===e&&"y"===t||"y"===e&&"x"===t)f="z";else if("x"===e&&"z"===t||"z"===e&&"x"===t)f="y",c=u.depthSegments;else if("z"===e&&"y"===t||"y"===e&&"z"===t)f="x",l=u.depthSegments;var m=l+1,g=c+1,y=i/l,b=s/c,w=new THREE.Vector3;w[f]=0<o?1:-1;for(i=0;i<g;i++)for(s=0;s<m;s++){var E=new THREE.Vector3;E[e]=(s*y-p)*n,E[t]=(i*b-d)*r,E[f]=o,u.vertices.push(E)}for(i=0;i<c;i++)for(s=0;s<l;s++)d=s+m*i,e=s+m*(i+1),t=s+1+m*(i+1),n=s+1+m*i,r=new THREE.Vector2(s/l,1-i/c),o=new THREE.Vector2(s/l,1-(i+1)/c),f=new THREE.Vector2((s+1)/l,1-(i+1)/c),p=new THREE.Vector2((s+1)/l,1-i/c),d=new THREE.Face3(d+v,e+v,n+v),d.normal.copy(w),d.vertexNormals.push(w.clone(),w.clone(),w.clone()),d.materialIndex=a,u.faces.push(d),u.faceVertexUvs[0].push([r,o,p]),d=new THREE.Face3(e+v,t+v,n+v),d.normal.copy(w),d.vertexNormals.push(w.clone(),w.clone(),w.clone()),d.materialIndex=a,u.faces.push(d),u.faceVertexUvs[0].push([o.clone(),f,p.clone()])}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s},this.widthSegments=r||1,this.heightSegments=i||1,this.depthSegments=s||1;var u=this;r=e/2,i=t/2,s=n/2,o("z","y",-1,-1,n,t,r,0),o("z","y",1,-1,n,t,-r,1),o("x","z",1,1,e,n,i,2),o("x","z",1,-1,e,n,-i,3),o("x","y",1,-1,e,t,s,4),o("x","y",-1,-1,e,t,-s,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,s=[];i=new THREE.Vector3;var o=new THREE.Vector2(.5,.5);this.vertices.push(i),s.push(o);for(i=0;i<=t;i++){var u=new THREE.Vector3,a=n+i/t*r;u.x=e*Math.cos(a),u.y=e*Math.sin(a),this.vertices.push(u),s.push(new THREE.Vector2((u.x/e+1)/2,(u.y/e+1)/2))}n=new THREE.Vector3(0,0,1);for(i=1;i<=t;i++)this.faces.push(new THREE.Face3(i,i+1,0,[n.clone(),n.clone(),n.clone()])),this.faceVertexUvs[0].push([s[i].clone(),s[i+1].clone(),o.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=function(e,t,n,r,i,s){return 0,new THREE.BoxGeometry(e,t,n,r,i,s)},THREE.CylinderGeometry=function(e,t,n,r,i,s){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s},e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=r||8,i=i||1,s=void 0!==s?s:!1;var o=n/2,u,a,f=[],l=[];for(a=0;a<=i;a++){var c=[],h=[],p=a/i,d=p*(t-e)+e;for(u=0;u<=r;u++){var v=u/r,m=new THREE.Vector3;m.x=d*Math.sin(v*Math.PI*2),m.y=-p*n+o,m.z=d*Math.cos(v*Math.PI*2),this.vertices.push(m),c.push(this.vertices.length-1),h.push(new THREE.Vector2(v,1-p))}f.push(c),l.push(h)}n=(t-e)/n;for(u=0;u<r;u++)for(0!==e?(c=this.vertices[f[0][u]].clone(),h=this.vertices[f[0][u+1]].clone()):(c=this.vertices[f[1][u]].clone(),h=this.vertices[f[1][u+1]].clone()),c.setY(Math.sqrt(c.x*c.x+c.z*c.z)*n).normalize(),h.setY(Math.sqrt(h.x*h.x+h.z*h.z)*n).normalize(),a=0;a<i;a++){var p=f[a][u],d=f[a+1][u],v=f[a+1][u+1],m=f[a][u+1],g=c.clone(),y=c.clone(),b=h.clone(),w=h.clone(),E=l[a][u].clone(),S=l[a+1][u].clone(),x=l[a+1][u+1].clone(),T=l[a][u+1].clone();this.faces.push(new THREE.Face3(p,d,m,[g,y,w])),this.faceVertexUvs[0].push([E,S,T]),this.faces.push(new THREE.Face3(d,v,m,[y.clone(),b,w.clone()])),this.faceVertexUvs[0].push([S.clone(),x,T.clone()])}if(!1===s&&0<e)for(this.vertices.push(new THREE.Vector3(0,o,0)),u=0;u<r;u++)p=f[0][u],d=f[0][u+1],v=this.vertices.length-1,g=new THREE.Vector3(0,1,0),y=new THREE.Vector3(0,1,0),b=new THREE.Vector3(0,1,0),E=l[0][u].clone(),S=l[0][u+1].clone(),x=new THREE.Vector2(S.x,0),this.faces.push(new THREE.Face3(p,d,v,[g,y,b])),this.faceVertexUvs[0].push([E,S,x]);if(!1===s&&0<t)for(this.vertices.push(new THREE.Vector3(0,-o,0)),u=0;u<r;u++)p=f[a][u+1],d=f[a][u],v=this.vertices.length-1,g=new THREE.Vector3(0,-1,0),y=new THREE.Vector3(0,-1,0),b=new THREE.Vector3(0,-1,0),E=l[a][u+1].clone(),S=l[a][u].clone(),x=new THREE.Vector2(S.x,1),this.faces.push(new THREE.Face3(p,d,v,[g,y,b])),this.faceVertexUvs[0].push([E,S,x]);this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(e,t){"undefined"!=typeof e&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++)this.addShape(e[r],t)},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function n(e,t,n){return t||0,t.clone().multiplyScalar(n).add(e)}function r(e,t,n){var r=1,r=e.x-t.x,i=e.y-t.y,s=n.x-e.x,o=n.y-e.y,u=r*r+i*i;if(1e-10<Math.abs(r*o-i*s)){var a=Math.sqrt(u),f=Math.sqrt(s*s+o*o),u=t.x-i/a;t=t.y+r/a,s=((n.x-o/f-u)*o-(n.y+s/f-t)*s)/(r*o-i*s),n=u+r*s-e.x,e=t+i*s-e.y,r=n*n+e*e;if(2>=r)return new THREE.Vector2(n,e);r=Math.sqrt(r/2)}else e=!1,1e-10<r?1e-10<s&&(e=!0):-1e-10>r?-1e-10>s&&(e=!0):Math.sign(i)==Math.sign(o)&&(e=!0),e?(n=-i,e=r,r=Math.sqrt(u)):(n=r,e=i,r=Math.sqrt(u/2));return new THREE.Vector2(n/r,e/r)}function i(e,t){var n,r;for(q=e.length;0<=--q;){n=q,r=q-1,0>r&&(r=e.length-1);for(var i=0,s=p+2*l,i=0;i<s;i++){var o=j*i,u=j*(i+1),a=t+n+o,o=t+r+o,f=t+r+u,u=t+n+u,a=a+L,o=o+L,f=f+L,u=u+L;k.faces.push(new THREE.Face3(a,o,u,null,null,y)),k.faces.push(new THREE.Face3(o,f,u,null,null,y)),a=b.generateSideWallUV(k,a,o,f,u),k.faceVertexUvs[0].push([a[0],a[1],a[3]]),k.faceVertexUvs[0].push([a[1],a[2],a[3]])}}}function s(e,t,n){k.vertices.push(new THREE.Vector3(e,t,n))}function o(e,t,n){e+=L,t+=L,n+=L,k.faces.push(new THREE.Face3(e,t,n,null,null,g)),e=b.generateTopUV(k,e,t,n),k.faceVertexUvs[0].push(e)}var u=void 0!==t.amount?t.amount:100,a=void 0!==t.bevelThickness?t.bevelThickness:6,f=void 0!==t.bevelSize?t.bevelSize:a-2,l=void 0!==t.bevelSegments?t.bevelSegments:3,c=void 0!==t.bevelEnabled?t.bevelEnabled:!0,h=void 0!==t.curveSegments?t.curveSegments:12,p=void 0!==t.steps?t.steps:1,d=t.extrudePath,v,m=!1,g=t.material,y=t.extrudeMaterial,b=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,w,E,S,x;d&&(v=d.getSpacedPoints(p),m=!0,c=!1,w=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(d,p,!1),E=new THREE.Vector3,S=new THREE.Vector3,x=new THREE.Vector3),c||(f=a=l=0);var T,N,C,k=this,L=this.vertices.length,d=e.extractPoints(h),h=d.shape,A=d.holes;if(d=!THREE.Shape.Utils.isClockWise(h)){h=h.reverse(),N=0;for(C=A.length;N<C;N++)T=A[N],THREE.Shape.Utils.isClockWise(T)&&(A[N]=T.reverse());d=!1}var O=THREE.Shape.Utils.triangulateShape(h,A),M=h;N=0;for(C=A.length;N<C;N++)T=A[N],h=h.concat(T);var _,D,P,H,B,j=h.length,F,I=O.length,d=[],q=0;P=M.length,_=P-1;for(D=q+1;q<P;q++,_++,D++)_===P&&(_=0),D===P&&(D=0),d[q]=r(M[q],M[_],M[D]);var R=[],U,z=d.concat();N=0;for(C=A.length;N<C;N++){T=A[N],U=[],q=0,P=T.length,_=P-1;for(D=q+1;q<P;q++,_++,D++)_===P&&(_=0),D===P&&(D=0),U[q]=r(T[q],T[_],T[D]);R.push(U),z=z.concat(U)}for(_=0;_<l;_++){P=_/l,H=a*(1-P),D=f*Math.sin(P*Math.PI/2),q=0;for(P=M.length;q<P;q++)B=n(M[q],d[q],D),s(B.x,B.y,-H);N=0;for(C=A.length;N<C;N++)for(T=A[N],U=R[N],q=0,P=T.length;q<P;q++)B=n(T[q],U[q],D),s(B.x,B.y,-H)}D=f;for(q=0;q<j;q++)B=c?n(h[q],z[q],D):h[q],m?(S.copy(w.normals[0]).multiplyScalar(B.x),E.copy(w.binormals[0]).multiplyScalar(B.y),x.copy(v[0]).add(S).add(E),s(x.x,x.y,x.z)):s(B.x,B.y,0);for(P=1;P<=p;P++)for(q=0;q<j;q++)B=c?n(h[q],z[q],D):h[q],m?(S.copy(w.normals[P]).multiplyScalar(B.x),E.copy(w.binormals[P]).multiplyScalar(B.y),x.copy(v[P]).add(S).add(E),s(x.x,x.y,x.z)):s(B.x,B.y,u/p*P);for(_=l-1;0<=_;_--){P=_/l,H=a*(1-P),D=f*Math.sin(P*Math.PI/2),q=0;for(P=M.length;q<P;q++)B=n(M[q],d[q],D),s(B.x,B.y,u+H);N=0;for(C=A.length;N<C;N++)for(T=A[N],U=R[N],q=0,P=T.length;q<P;q++)B=n(T[q],U[q],D),m?s(B.x,B.y+v[p-1].y,v[p-1].x+H):s(B.x,B.y,u+H)}(function(){if(c){var e;e=0*j;for(q=0;q<I;q++)F=O[q],o(F[2]+e,F[1]+e,F[0]+e);e=p+2*l,e*=j;for(q=0;q<I;q++)F=O[q],o(F[0]+e,F[1]+e,F[2]+e)}else{for(q=0;q<I;q++)F=O[q],o(F[2],F[1],F[0]);for(q=0;q<I;q++)F=O[q],o(F[0]+j*p,F[1]+j*p,F[2]+j*p)}})(),function(){var e=0;i(M,e),e+=M.length,N=0;for(C=A.length;N<C;N++)T=A[N],i(T,e),e+=T.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r){return e=e.vertices,t=e[t],n=e[n],r=e[r],[new THREE.Vector2(t.x,t.y),new THREE.Vector2(n.x,n.y),new THREE.Vector2(r.x,r.y)]},generateSideWallUV:function(e,t,n,r,i){return e=e.vertices,t=e[t],n=e[n],r=e[r],i=e[i],.01>Math.abs(t.y-n.y)?[new THREE.Vector2(t.x,1-t.z),new THREE.Vector2(n.x,1-n.z),new THREE.Vector2(r.x,1-r.z),new THREE.Vector2(i.x,1-i.z)]:[new THREE.Vector2(t.y,1-t.z),new THREE.Vector2(n.y,1-n.z),new THREE.Vector2(r.y,1-r.z),new THREE.Vector2(i.y,1-i.z)]}},THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),this.type="ShapeGeometry",0==e instanceof Array&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n=t.material,r=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,i,s,o,u=this.vertices.length;i=e.extractPoints(void 0!==t.curveSegments?t.curveSegments:12);var a=i.shape,f=i.holes;if(!THREE.Shape.Utils.isClockWise(a))for(a=a.reverse(),i=0,s=f.length;i<s;i++)o=f[i],THREE.Shape.Utils.isClockWise(o)&&(f[i]=o.reverse());var l=THREE.Shape.Utils.triangulateShape(a,f);i=0;for(s=f.length;i<s;i++)o=f[i],a=a.concat(o);f=a.length,s=l.length;for(i=0;i<f;i++)o=a[i],this.vertices.push(new THREE.Vector3(o.x,o.y,0));for(i=0;i<s;i++)f=l[i],a=f[0]+u,o=f[1]+u,f=f[2]+u,this.faces.push(new THREE.Face3(a,o,f,null,null,n)),this.faceVertexUvs[0].push(r.generateTopUV(this,a,o,f))},THREE.LatheGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=t||12,n=n||0,r=r||2*Math.PI;for(var i=1/(e.length-1),s=1/t,o=0,u=t;o<=u;o++)for(var a=n+o*s*r,f=Math.cos(a),l=Math.sin(a),a=0,c=e.length;a<c;a++){var h=e[a],p=new THREE.Vector3;p.x=f*h.x-l*h.y,p.y=l*h.x+f*h.y,p.z=h.z,this.vertices.push(p)}n=e.length,o=0;for(u=t;o<u;o++)for(a=0,c=e.length-1;a<c;a++){t=l=a+n*o,r=l+n;var f=l+1+n,l=l+1,h=o*s,p=a*i,d=h+s,v=p+i;this.faces.push(new THREE.Face3(t,r,l)),this.faceVertexUvs[0].push([new THREE.Vector2(h,p),new THREE.Vector2(d,p),new THREE.Vector2(h,v)]),this.faces.push(new THREE.Face3(r,f,l)),this.faceVertexUvs[0].push([new THREE.Vector2(d,p),new THREE.Vector2(d,v),new THREE.Vector2(h,v)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(e,t,n,r){0,THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(e,t,n,r))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneBufferGeometry=function(e,t,n,r){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i=e/2,s=t/2;n=n||1,r=r||1;var o=n+1,u=r+1,a=e/n,f=t/r;t=new Float32Array(o*u*3),e=new Float32Array(o*u*3);for(var l=new Float32Array(o*u*2),c=0,h=0,p=0;p<u;p++)for(var d=p*f-s,v=0;v<o;v++)t[c]=v*a-i,t[c+1]=-d,e[c+2]=1,l[h]=v/n,l[h+1]=1-p/r,c+=3,h+=2;c=0,i=new(65535<t.length/3?Uint32Array:Uint16Array)(n*r*6);for(p=0;p<r;p++)for(v=0;v<n;v++)s=v+o*(p+1),u=v+1+o*(p+1),a=v+1+o*p,i[c]=v+o*p,i[c+1]=s,i[c+2]=a,i[c+3]=s,i[c+4]=u,i[c+5]=a,c+=6;this.addAttribute("index",new THREE.BufferAttribute(i,1)),this.addAttribute("position",new THREE.BufferAttribute(t,3)),this.addAttribute("normal",new THREE.BufferAttribute(e,3)),this.addAttribute("uv",new THREE.BufferAttribute(l,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.RingGeometry=function(e,t,n,r,i,s){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},e=e||0,t=t||50,i=void 0!==i?i:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):8;var o,u=[],a=e,f=(t-e)/r;for(e=0;e<r+1;e++){for(o=0;o<n+1;o++){var l=new THREE.Vector3,c=i+o/n*s;l.x=a*Math.cos(c),l.y=a*Math.sin(c),this.vertices.push(l),u.push(new THREE.Vector2((l.x/t+1)/2,(l.y/t+1)/2))}a+=f}t=new THREE.Vector3(0,0,1);for(e=0;e<r;e++)for(i=e*(n+1),o=0;o<n;o++)s=c=o+i,f=c+n+1,l=c+n+2,this.faces.push(new THREE.Face3(s,f,l,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([u[s].clone(),u[f].clone(),u[l].clone()]),s=c,f=c+n+2,l=c+1,this.faces.push(new THREE.Face3(s,f,l,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([u[s].clone(),u[f].clone(),u[l].clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,n,r,i,s,o){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,s=void 0!==s?s:0,o=void 0!==o?o:Math.PI;var u,a,f=[],l=[];for(a=0;a<=n;a++){var c=[],h=[];for(u=0;u<=t;u++){var p=u/t,d=a/n,v=new THREE.Vector3;v.x=-e*Math.cos(r+p*i)*Math.sin(s+d*o),v.y=e*Math.cos(s+d*o),v.z=e*Math.sin(r+p*i)*Math.sin(s+d*o),this.vertices.push(v),c.push(this.vertices.length-1),h.push(new THREE.Vector2(p,1-d))}f.push(c),l.push(h)}for(a=0;a<n;a++)for(u=0;u<t;u++){r=f[a][u+1],i=f[a][u],s=f[a+1][u],o=f[a+1][u+1];var c=this.vertices[r].clone().normalize(),h=this.vertices[i].clone().normalize(),p=this.vertices[s].clone().normalize(),d=this.vertices[o].clone().normalize(),v=l[a][u+1].clone(),m=l[a][u].clone(),g=l[a+1][u].clone(),y=l[a+1][u+1].clone();Math.abs(this.vertices[r].y)===e?(v.x=(v.x+m.x)/2,this.faces.push(new THREE.Face3(r,s,o,[c,p,d])),this.faceVertexUvs[0].push([v,g,y])):Math.abs(this.vertices[s].y)===e?(g.x=(g.x+y.x)/2,this.faces.push(new THREE.Face3(r,i,s,[c,h,p])),this.faceVertexUvs[0].push([v,m,g])):(this.faces.push(new THREE.Face3(r,i,o,[c,h,d])),this.faceVertexUvs[0].push([v,m,y]),this.faces.push(new THREE.Face3(i,s,o,[h.clone(),p,d.clone()])),this.faceVertexUvs[0].push([m.clone(),g,y.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(e,t){t=t||{};var n=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,n,t),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(e,t,n,r,i){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=n||8,r=r||6,i=i||2*Math.PI;for(var s=new THREE.Vector3,o=[],u=[],a=0;a<=n;a++)for(var f=0;f<=r;f++){var l=f/r*i,c=a/n*Math.PI*2;s.x=e*Math.cos(l),s.y=e*Math.sin(l);var h=new THREE.Vector3;h.x=(e+t*Math.cos(c))*Math.cos(l),h.y=(e+t*Math.cos(c))*Math.sin(l),h.z=t*Math.sin(c),this.vertices.push(h),o.push(new THREE.Vector2(f/r,a/n)),u.push(h.clone().sub(s).normalize())}for(a=1;a<=n;a++)for(f=1;f<=r;f++)e=(r+1)*a+f-1,t=(r+1)*(a-1)+f-1,i=(r+1)*(a-1)+f,s=(r+1)*a+f,l=new THREE.Face3(e,t,s,[u[e].clone(),u[t].clone(),u[s].clone()]),this.faces.push(l),this.faceVertexUvs[0].push([o[e].clone(),o[t].clone(),o[s].clone()]),l=new THREE.Face3(t,i,s,[u[t].clone(),u[i].clone(),u[s].clone()]),this.faces.push(l),this.faceVertexUvs[0].push([o[t].clone(),o[i].clone(),o[s].clone()]);this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(e,t,n,r,i,s,o){function u(e,t,n,r,i){var s=Math.cos(e),o=Math.sin(e);return e*=t/n,t=Math.cos(e),s*=r*(2+t)*.5,o=r*(2+t)*o*.5,r=i*r*Math.sin(e)*.5,new THREE.Vector3(s,o,r)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,p:i,q:s,heightScale:o},e=e||100,t=t||40,n=n||64,r=r||8,i=i||2,s=s||3,o=o||1;for(var a=Array(n),f=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,h=0;h<n;++h){a[h]=Array(r);var p=h/n*2*i*Math.PI,d=u(p,s,i,e,o),p=u(p+.01,s,i,e,o);f.subVectors(p,d),l.addVectors(p,d),c.crossVectors(f,l),l.crossVectors(c,f),c.normalize(),l.normalize();for(p=0;p<r;++p){var v=p/r*2*Math.PI,m=-t*Math.cos(v),v=t*Math.sin(v),g=new THREE.Vector3;g.x=d.x+m*l.x+v*c.x,g.y=d.y+m*l.y+v*c.y,g.z=d.z+m*l.z+v*c.z,a[h][p]=this.vertices.push(g)-1}}for(h=0;h<n;++h)for(p=0;p<r;++p)i=(h+1)%n,s=(p+1)%r,e=a[h][p],t=a[i][p],i=a[i][s],s=a[h][s],o=new THREE.Vector2(h/n,p/r),f=new THREE.Vector2((h+1)/n,p/r),l=new THREE.Vector2((h+1)/n,(p+1)/r),c=new THREE.Vector2(h/n,(p+1)/r),this.faces.push(new THREE.Face3(e,t,s)),this.faceVertexUvs[0].push([o,f,c]),this.faces.push(new THREE.Face3(t,i,s)),this.faceVertexUvs[0].push([f.clone(),l,c.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(e,t,n,r,i){THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var s=[],o,u,a=t+1,f,l,c,h,p=new THREE.Vector3,d,v,m;d=new THREE.TubeGeometry.FrenetFrames(e,t,i),v=d.normals,m=d.binormals,this.tangents=d.tangents,this.normals=v,this.binormals=m;for(d=0;d<a;d++)for(s[d]=[],f=d/(a-1),h=e.getPointAt(f),o=v[d],u=m[d],f=0;f<r;f++)l=f/r*2*Math.PI,c=-n*Math.cos(l),l=n*Math.sin(l),p.copy(h),p.x+=c*o.x+l*u.x,p.y+=c*o.y+l*u.y,p.z+=c*o.z+l*u.z,s[d][f]=this.vertices.push(new THREE.Vector3(p.x,p.y,p.z))-1;for(d=0;d<t;d++)for(f=0;f<r;f++)a=i?(d+1)%t:d+1,p=(f+1)%r,e=s[d][f],n=s[a][f],a=s[a][p],p=s[d][p],v=new THREE.Vector2(d/t,f/r),m=new THREE.Vector2((d+1)/t,f/r),o=new THREE.Vector2((d+1)/t,(f+1)/r),u=new THREE.Vector2(d/t,(f+1)/r),this.faces.push(new THREE.Face3(e,n,p)),this.faceVertexUvs[0].push([v,m,u]),this.faces.push(new THREE.Face3(n,a,p)),this.faceVertexUvs[0].push([m.clone(),o,u.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(e,t,n){new THREE.Vector3;var r=new THREE.Vector3;new THREE.Vector3;var i=[],s=[],o=[],u=new THREE.Vector3,a=new THREE.Matrix4;t+=1;var f,l,c;this.tangents=i,this.normals=s,this.binormals=o;for(f=0;f<t;f++)l=f/(t-1),i[f]=e.getTangentAt(l),i[f].normalize();s[0]=new THREE.Vector3,o[0]=new THREE.Vector3,e=Number.MAX_VALUE,f=Math.abs(i[0].x),l=Math.abs(i[0].y),c=Math.abs(i[0].z),f<=e&&(e=f,r.set(1,0,0)),l<=e&&(e=l,r.set(0,1,0)),c<=e&&r.set(0,0,1),u.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],u),o[0].crossVectors(i[0],s[0]);for(f=1;f<t;f++)s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),u.crossVectors(i[f-1],i[f]),1e-4<u.length()&&(u.normalize(),r=Math.acos(THREE.Math.clamp(i[f-1].dot(i[f]),-1,1)),s[f].applyMatrix4(a.makeRotationAxis(u,r))),o[f].crossVectors(i[f],s[f]);if(n)for(r=Math.acos(THREE.Math.clamp(s[0].dot(s[t-1]),-1,1)),r/=t-1,0<i[0].dot(u.crossVectors(s[0],s[t-1]))&&(r=-r),f=1;f<t;f++)s[f].applyMatrix4(a.makeRotationAxis(i[f],r*f)),o[f].crossVectors(i[f],s[f])},THREE.PolyhedronGeometry=function(e,t,n,r){function i(e){var t=e.normalize().clone();t.index=a.vertices.push(t)-1;var n=Math.atan2(e.z,-e.x)/2/Math.PI+.5;return e=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5,t.uv=new THREE.Vector2(n,1-e),t}function s(e,t,n){var r=new THREE.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);a.faces.push(r),m.copy(e).add(t).add(n).divideScalar(3),r=Math.atan2(m.z,-m.x),a.faceVertexUvs[0].push([u(e.uv,e,r),u(t.uv,t,r),u(n.uv,n,r)])}function o(e,t){var n=Math.pow(2,t);Math.pow(4,t);for(var r=i(a.vertices[e.a]),o=i(a.vertices[e.b]),u=i(a.vertices[e.c]),f=[],l=0;l<=n;l++){f[l]=[];for(var c=i(r.clone().lerp(u,l/n)),h=i(o.clone().lerp(u,l/n)),p=n-l,d=0;d<=p;d++)f[l][d]=0==d&&l==n?c:i(c.clone().lerp(h,d/p))}for(l=0;l<n;l++)for(d=0;d<2*(n-l)-1;d++)r=Math.floor(d/2),0==d%2?s(f[l][r+1],f[l+1][r],f[l][r]):s(f[l][r+1],f[l+1][r+1],f[l+1][r])}function u(e,t,n){return 0>n&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;for(var a=this,f=0,l=e.length;f<l;f+=3)i(new THREE.Vector3(e[f],e[f+1],e[f+2]));e=this.vertices;for(var c=[],h=f=0,l=t.length;f<l;f+=3,h++){var p=e[t[f]],d=e[t[f+1]],v=e[t[f+2]];c[h]=new THREE.Face3(p.index,d.index,v.index,[p.clone(),d.clone(),v.clone()])}for(var m=new THREE.Vector3,f=0,l=c.length;f<l;f++)o(c[f],r);f=0;for(l=this.faceVertexUvs[0].length;f<l;f++)t=this.faceVertexUvs[0][f],r=t[0].x,e=t[1].x,c=t[2].x,h=Math.max(r,Math.max(e,c)),p=Math.min(r,Math.min(e,c)),.9<h&&.1>p&&(.2>r&&(t[0].x+=1),.2>e&&(t[1].x+=1),.2>c&&(t[2].x+=1));f=0;for(l=this.vertices.length;f<l;f++)this.vertices[f].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,n)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=(1+Math.sqrt(5))/2,r=1/n;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t)},THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t},THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(e,t,n){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};var r=this.vertices,i=this.faces,s=this.faceVertexUvs[0],o,u,a,f,l=t+1;for(o=0;o<=n;o++)for(f=o/n,u=0;u<=t;u++)a=u/t,a=e(a,f),r.push(a);var c,h,p,d;for(o=0;o<n;o++)for(u=0;u<t;u++)e=o*l+u,r=o*l+u+1,f=(o+1)*l+u+1,a=(o+1)*l+u,c=new THREE.Vector2(u/t,o/n),h=new THREE.Vector2((u+1)/t,o/n),p=new THREE.Vector2((u+1)/t,(o+1)/n),d=new THREE.Vector2(u/t,(o+1)/n),i.push(new THREE.Face3(e,r,a)),s.push([c,h,d]),i.push(new THREE.Face3(r,f,a)),s.push([h.clone(),p,d.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);e=new THREE.BufferGeometry,e.addAttribute("position",new THREE.BufferAttribute(t,3)),e.addAttribute("color",new THREE.BufferAttribute(n,3)),t=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors}),THREE.Line.call(this,e,t,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0)),function(n,r,i,s,o,u){THREE.Object3D.call(this),void 0===s&&(s=16776960),void 0===i&&(i=1),void 0===o&&(o=.2*i),void 0===u&&(u=.2*o),this.position.copy(r),this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:s})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:s})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(i,o,u)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var e=new THREE.Vector3,t;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-0.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},THREE.BoxHelper=function(e){var t=new THREE.BufferGeometry;t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var n=t.boundingBox.min,t=t.boundingBox.max,r=this.geometry.attributes.position.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=n.x,r[4]=t.y,r[5]=t.z,r[6]=n.x,r[7]=t.y,r[8]=t.z,r[9]=n.x,r[10]=n.y,r[11]=t.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=n.y,r[20]=t.z,r[21]=t.x,r[22]=t.y,r[23]=t.z,r[24]=t.x,r[25]=t.y,r[26]=n.z,r[27]=n.x,r[28]=t.y,r[29]=n.z,r[30]=n.x,r[31]=t.y,r[32]=n.z,r[33]=n.x,r[34]=n.y,r[35]=n.z,r[36]=n.x,r[37]=n.y,r[38]=n.z,r[39]=t.x,r[40]=n.y,r[41]=n.z,r[42]=t.x,r[43]=n.y,r[44]=n.z,r[45]=t.x,r[46]=t.y,r[47]=n.z,r[48]=t.x,r[49]=t.y,r[50]=t.z,r[51]=t.x,r[52]=t.y,r[53]=n.z,r[54]=n.x,r[55]=t.y,r[56]=t.z,r[57]=n.x,r[58]=t.y,r[59]=n.z,r[60]=n.x,r[61]=n.y,r[62]=t.z,r[63]=n.x,r[64]=n.y,r[65]=n.z,r[66]=t.x,r[67]=n.y,r[68]=t.z,r[69]=t.x,r[70]=n.y,r[71]=n.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.BoundingBoxHelper=function(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:n,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){r.vertices.push(new THREE.Vector3),r.colors.push(new THREE.Color(t)),void 0===s[e]&&(s[e]=[]),s[e].push(r.vertices.length-1)}var r=new THREE.Geometry,i=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),s={};t("n1","n2",16755200),t("n2","n4",16755200),t("n4","n3",16755200),t("n3","n1",16755200),t("f1","f2",16755200),t("f2","f4",16755200),t("f4","f3",16755200),t("f3","f1",16755200),t("n1","f1",16755200),t("n2","f2",16755200),t("n3","f3",16755200),t("n4","f4",16755200),t("p","n1",16711680),t("p","n2",16711680),t("p","n3",16711680),t("p","n4",16711680),t("u1","u2",43775),t("u2","u3",43775),t("u3","u1",43775),t("c","t",16777215),t("p","c",3355443),t("cn1","cn2",3355443),t("cn3","cn4",3355443),t("cf1","cf2",3355443),t("cf3","cf4",3355443),THREE.Line.call(this,r,i,THREE.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var e,t,n=new THREE.Vector3,r=new THREE.Camera,i=function(i,s,o,u){n.set(s,o,u).unproject(r),i=t[i];if(void 0!==i)for(s=0,o=i.length;s<o;s++)e.vertices[i[s]].copy(n)};return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-0.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var n=new THREE.Geometry;n.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var r=new THREE.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(n,r),this.add(this.lightPlane),n=new THREE.Geometry,n.vertices.push(new THREE.Vector3,new THREE.Vector3),r=new THREE.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(n,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t){var n=void 0!==t?t:16777215,r=[0,0],i={},s=function(e,t){return e-t},o=["a","b","c"],u=new THREE.BufferGeometry,a=e.geometry.clone();a.mergeVertices(),a.computeFaceNormals();for(var f=a.vertices,a=a.faces,l=0,c=0,h=a.length;c<h;c++)for(var p=a[c],d=0;3>d;d++){r[0]=p[o[d]],r[1]=p[o[(d+1)%3]],r.sort(s);var v=r.toString();void 0===i[v]?(i[v]={vert1:r[0],vert2:r[1],face1:c,face2:void 0},l++):i[v].face2=c}r=new Float32Array(6*l),s=0;for(v in i)if(o=i[v],void 0===o.face2||.9999>a[o.face1].normal.dot(a[o.face2].normal))l=f[o.vert1],r[s++]=l.x,r[s++]=l.y,r[s++]=l.z,l=f[o.vert2],r[s++]=l.x,r[s++]=l.y,r[s++]=l.z;u.addAttribute("position",new THREE.BufferAttribute(r,3)),THREE.Line.call(this,u,new THREE.LineBasicMaterial({color:n}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16776960,r=void 0!==r?r:1,t=new THREE.Geometry,n=0;for(var i=this.object.geometry.faces.length;n<i;n++)t.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:e,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,n=t.geometry.vertices,r=t.geometry.faces,i=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(i);for(var s=t=0,o=r.length;t<o;t++,s+=2){var u=r[t];e[s].copy(n[u.a]).add(n[u.b]).add(n[u.c]).divideScalar(3).applyMatrix4(i),e[s+1].copy(u.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[s])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(e,t){var n=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var i=-e;i<=e;i+=t){n.vertices.push(new THREE.Vector3(-e,0,i),new THREE.Vector3(e,0,i),new THREE.Vector3(i,0,-e),new THREE.Vector3(i,0,e));var s=0===i?this.color1:this.color2;n.colors.push(s,s,s,s)}THREE.Line.call(this,n,r,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t,n,r){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color],e=new THREE.SphereGeometry(t,4,2),e.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(t=0;8>t;t++)e.faces[t].color=this.colors[4>t?0:1];t=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0}),this.lightSphere=new THREE.Mesh(e,t),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new THREE.SphereGeometry(t,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new THREE.Geometry,n=0;n<this.bones.length;n++)this.bones[n].parent instanceof THREE.Bone&&(t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(0,0,1)),t.colors.push(new THREE.Color(0,1,0)));n=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),THREE.Line.call(this,t,n,THREE.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof THREE.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},THREE.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new THREE.Matrix4).getInverse(this.root.matrixWorld),n=new THREE.Matrix4,r=0,i=0;i<this.bones.length;i++){var s=this.bones[i];s.parent instanceof THREE.Bone&&(n.multiplyMatrices(t,s.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,s.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,e=new THREE.CylinderGeometry(0,1,1,8,1,!0),e.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0)),e.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var t=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(e,t),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,t=void 0!==n?n:16711680,r=void 0!==r?r:1,n=new THREE.Geometry,e=e.geometry.faces;for(var i=0,s=e.length;i<s;i++)for(var o=0,u=e[i].vertexNormals.length;o<u;o++)n.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,n,new THREE.LineBasicMaterial({color:t,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,s=this.object.matrixWorld,o=0,u=0,a=i.length;u<a;u++)for(var f=i[u],l=0,c=f.vertexNormals.length;l<c;l++){var h=f.vertexNormals[l];n[o].copy(r[f[e[l]]]).applyMatrix4(s),t.copy(h).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),t.add(n[o]),o+=1,n[o].copy(t),o+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,t=void 0!==n?n:255,r=void 0!==r?r:1,n=new THREE.Geometry,e=e.geometry.faces;for(var i=0,s=e.length;i<s;i++)for(var o=0,u=e[i].vertexTangents.length;o<u;o++)n.vertices.push(new THREE.Vector3),n.vertices.push(new THREE.Vector3);THREE.Line.call(this,n,new THREE.LineBasicMaterial({color:t,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){e=["a","b","c","d"],this.object.updateMatrixWorld(!0);for(var n=this.geometry.vertices,r=this.object.geometry.vertices,i=this.object.geometry.faces,s=this.object.matrixWorld,o=0,u=0,a=i.length;u<a;u++)for(var f=i[u],l=0,c=f.vertexTangents.length;l<c;l++){var h=f.vertexTangents[l];n[o].copy(r[f[e[l]]]).applyMatrix4(s),t.copy(h).transformDirection(s).multiplyScalar(this.size),t.add(n[o]),o+=1,n[o].copy(t),o+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var n=void 0!==t?t:16777215,r=[0,0],i={},s=function(e,t){return e-t},o=["a","b","c"],u=new THREE.BufferGeometry;if(e.geometry instanceof THREE.Geometry){for(var a=e.geometry.vertices,f=e.geometry.faces,l=0,c=new Uint32Array(6*f.length),h=0,p=f.length;h<p;h++)for(var d=f[h],v=0;3>v;v++){r[0]=d[o[v]],r[1]=d[o[(v+1)%3]],r.sort(s);var m=r.toString();void 0===i[m]&&(c[2*l]=r[0],c[2*l+1]=r[1],i[m]=!0,l++)}r=new Float32Array(6*l),h=0;for(p=l;h<p;h++)for(v=0;2>v;v++)l=a[c[2*h+v]],o=6*h+3*v,r[o+0]=l.x,r[o+1]=l.y,r[o+2]=l.z;u.addAttribute("position",new THREE.BufferAttribute(r,3))}else if(e.geometry instanceof THREE.BufferGeometry){if(void 0!==e.geometry.attributes.index){a=e.geometry.attributes.position.array,p=e.geometry.attributes.index.array,f=e.geometry.drawcalls,l=0,0===f.length&&(f=[{count:p.length,index:0,start:0}]);for(var c=new Uint32Array(2*p.length),d=0,g=f.length;d<g;++d)for(var v=f[d].start,m=f[d].count,o=f[d].index,h=v,y=v+m;h<y;h+=3)for(v=0;3>v;v++)r[0]=o+p[h+v],r[1]=o+p[h+(v+1)%3],r.sort(s),m=r.toString(),void 0===i[m]&&(c[2*l]=r[0],c[2*l+1]=r[1],i[m]=!0,l++);r=new Float32Array(6*l),h=0;for(p=l;h<p;h++)for(v=0;2>v;v++)o=6*h+3*v,l=3*c[2*h+v],r[o+0]=a[l],r[o+1]=a[l+1],r[o+2]=a[l+2]}else for(a=e.geometry.attributes.position.array,l=a.length/3,c=l/3,r=new Float32Array(6*l),h=0,p=c;h<p;h++)for(v=0;3>v;v++)o=18*h+6*v,c=9*h+3*v,r[o+0]=a[c],r[o+1]=a[c+1],r[o+2]=a[c+2],l=9*h+(v+1)%3*3,r[o+3]=a[l],r[o+4]=a[l+1],r[o+5]=a[l+2];u.addAttribute("position",new THREE.BufferAttribute(r,3))}THREE.Line.call(this,u,new THREE.LineBasicMaterial({color:n}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(e){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){t={startFrame:t,endFrame:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[e]=t,this.animationsList.push(t)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t=/([a-z]+)_?(\d+)/,n,r={},i=this.geometry,s=0,o=i.morphTargets.length;s<o;s++){var u=i.morphTargets[s].name.match(t);if(u&&1<u.length){var a=u[1];r[a]||(r[a]={start:Infinity,end:-Infinity}),u=r[a],s<u.start&&(u.start=s),s>u.end&&(u.end=s),n||(n=a)}}for(a in r)u=r[a],this.createAnimation(a,u.start,u.end,e);this.firstAnimation=n},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){if(e=this.animationsMap[e])e.direction=1,e.directionBackwards=!1},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){if(e=this.animationsMap[e])e.direction=-1,e.directionBackwards=!0},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0;if(e=this.animationsMap[e])t=e.time;return t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1;if(e=this.animationsMap[e])t=e.duration;return t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):0},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){if(e=this.animationsMap[e])e.active=!1},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e;if(r.mirroredLoop){if(r.time>r.duration||0>r.time)r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),0>r.time&&(r.time=0,r.directionBackwards=!1)}else r.time%=r.duration,0>r.time&&(r.time+=r.duration);var s=r.startFrame+THREE.Math.clamp(Math.floor(r.time/i),0,r.length-1),o=r.weight;s!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*o,this.morphTargetInfluences[s]=0,r.lastFrame=r.currentFrame,r.currentFrame=s),i=r.time%i/i,r.directionBackwards&&(i=1-i),this.morphTargetInfluences[r.currentFrame]=i*o,this.morphTargetInfluences[r.lastFrame]=(1-i)*o}}},define("three",function(){}),THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null},THREE.Projector=function(){function q(){if(t===r){var e=new THREE.RenderableObject;return n.push(e),r++,t++,e}return n[t++]}function R(){if(s===u){var e=new THREE.RenderableVertex;return o.push(e),u++,s++,e}return o[s++]}function U(){if(f===c){var e=new THREE.RenderableFace;return l.push(e),c++,f++,e}return l[f++]}function z(){if(p===v){var e=new THREE.RenderableLine;return d.push(e),v++,p++,e}return d[p++]}function W(){if(g===b){var e=new THREE.RenderableSprite;return y.push(e),b++,g++,e}return y[g++]}function X(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function V(e,t){var n=0,r=1,i=e.z+e.w,s=t.z+t.w,o=-e.z+e.w,u=-t.z+t.w;return i>=0&&s>=0&&o>=0&&u>=0?!0:i<0&&s<0||o<0&&u<0?!1:(i<0?n=Math.max(n,i/(i-s)):s<0&&(r=Math.min(r,i/(i-s))),o<0?n=Math.max(n,o/(o-u)):u<0&&(r=Math.min(r,o/(o-u))),r<n?!1:(e.lerp(t,n),t.lerp(e,1-r),!0))}var e,t,n=[],r=0,i,s,o=[],u=0,a,f,l=[],c=0,h,p,d=[],v=0,m,g,y=[],b=0,w={objects:[],lights:[],elements:[]},E=new THREE.Vector3,S=new THREE.Vector3,x=new THREE.Vector3,T=new THREE.Vector3,N=new THREE.Vector4,C=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),k=new THREE.Box3,L=new Array(3),A=new Array(4),O=new THREE.Matrix4,M=new THREE.Matrix4,_,D=new THREE.Matrix4,P=new THREE.Matrix3,H=new THREE.Frustum,B=new THREE.Vector4,j=new THREE.Vector4;this.projectVector=function(e,t){0,e.project(t)},this.unprojectVector=function(e,t){0,e.unproject(t)},this.pickingRay=function(e,t){0};var F=function(){var e=[],t=[],n=null,r=null,s=new THREE.Matrix3,u=function(i){n=i,r=n.material,s.getNormalMatrix(n.matrixWorld),e.length=0,t.length=0},f=function(e){var t=e.position,n=e.positionWorld,r=e.positionScreen;n.copy(t).applyMatrix4(_),r.copy(n).applyMatrix4(M);var i=1/r.w;r.x*=i,r.y*=i,r.z*=i,e.visible=r.x>=-1&&r.x<=1&&r.y>=-1&&r.y<=1&&r.z>=-1&&r.z<=1},l=function(e,t,n){i=R(),i.position.set(e,t,n),f(i)},c=function(t,n,r){e.push(t,n,r)},p=function(e,n){t.push(e,n)},d=function(e,t,n){return e.visible===!0||t.visible===!0||n.visible===!0?!0:(L[0]=e.positionScreen,L[1]=t.positionScreen,L[2]=n.positionScreen,C.isIntersectionBox(k.setFromPoints(L)))},v=function(e,t,n){return(n.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(n.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0},m=function(e,t){var r=o[e],i=o[t];h=z(),h.id=n.id,h.v1.copy(r),h.v2.copy(i),h.z=(r.positionScreen.z+i.positionScreen.z)/2,h.material=n.material,w.elements.push(h)},g=function(i,u,f){var l=o[i],c=o[u],h=o[f];if(d(l,c,h)===!1)return;if(r.side===THREE.DoubleSide||v(l,c,h)===!0){a=U(),a.id=n.id,a.v1.copy(l),a.v2.copy(c),a.v3.copy(h),a.z=(l.positionScreen.z+c.positionScreen.z+h.positionScreen.z)/3;for(var p=0;p<3;p++){var m=arguments[p]*3,g=a.vertexNormalsModel[p];g.set(e[m],e[m+1],e[m+2]),g.applyMatrix3(s).normalize();var y=arguments[p]*2,b=a.uvs[p];b.set(t[y],t[y+1])}a.vertexNormalsLength=3,a.material=n.material,w.elements.push(a)}};return{setObject:u,projectVertex:f,checkTriangleVisibility:d,checkBackfaceCulling:v,pushVertex:l,pushNormal:c,pushUv:p,pushLine:m,pushTriangle:g}},I=new F;this.projectScene=function(n,r,i,u){f=0,p=0,g=0,w.elements.length=0,n.autoUpdate===!0&&n.updateMatrixWorld(),r.parent===undefined&&r.updateMatrixWorld(),O.copy(r.matrixWorldInverse.getInverse(r.matrixWorld)),M.multiplyMatrices(r.projectionMatrix,O),H.setFromMatrix(M),t=0,w.objects.length=0,w.lights.length=0,n.traverseVisible(function(t){if(t instanceof THREE.Light)w.lights.push(t);else if(t instanceof THREE.Mesh||t instanceof THREE.Line||t instanceof THREE.Sprite){if(t.material.visible===!1)return;if(t.frustumCulled===!1||H.intersectsObject(t)===!0)e=q(),e.id=t.id,e.object=t,t.renderDepth!==null?e.z=t.renderDepth:(T.setFromMatrixPosition(t.matrixWorld),T.applyProjection(M),e.z=T.z),w.objects.push(e)}}),i===!0&&w.objects.sort(X);for(var l=0,c=w.objects.length;l<c;l++){var d=w.objects[l].object,v=d.geometry;I.setObject(d),_=d.matrixWorld,s=0;if(d instanceof THREE.Mesh){if(v instanceof THREE.BufferGeometry){var y=v.attributes,b=v.offsets;if(y.position===undefined)continue;var C=y.position.array;for(var k=0,L=C.length;k<L;k+=3)I.pushVertex(C[k],C[k+1],C[k+2]);if(y.normal!==undefined){var A=y.normal.array;for(var k=0,L=A.length;k<L;k+=3)I.pushNormal(A[k],A[k+1],A[k+2])}if(y.uv!==undefined){var F=y.uv.array;for(var k=0,L=F.length;k<L;k+=2)I.pushUv(F[k],F[k+1])}if(y.index!==undefined){var $=y.index.array;if(b.length>0)for(var l=0;l<b.length;l++){var J=b[l],K=J.index;for(var k=J.start,L=J.start+J.count;k<L;k+=3)I.pushTriangle($[k]+K,$[k+1]+K,$[k+2]+K)}else for(var k=0,L=$.length;k<L;k+=3)I.pushTriangle($[k],$[k+1],$[k+2])}else for(var k=0,L=C.length/3;k<L;k+=3)I.pushTriangle(k,k+1,k+2)}else if(v instanceof THREE.Geometry){var Q=v.vertices,G=v.faces,Y=v.faceVertexUvs[0];P.getNormalMatrix(_);var Z=d.material instanceof THREE.MeshFaceMaterial,et=Z===!0?d.material:null;for(var tt=0,nt=Q.length;tt<nt;tt++){var rt=Q[tt];I.pushVertex(rt.x,rt.y,rt.z)}for(var it=0,st=G.length;it<st;it++){var ot=G[it],ut=Z===!0?et.materials[ot.materialIndex]:d.material;if(ut===undefined)continue;var at=ut.side,ft=o[ot.a],lt=o[ot.b],ct=o[ot.c];if(ut.morphTargets===!0){var ht=v.morphTargets,pt=d.morphTargetInfluences,dt=ft.position,vt=lt.position,mt=ct.position;E.set(0,0,0),S.set(0,0,0),x.set(0,0,0);for(var gt=0,yt=ht.length;gt<yt;gt++){var bt=pt[gt];if(bt===0)continue;var wt=ht[gt].vertices;E.x+=(wt[ot.a].x-dt.x)*bt,E.y+=(wt[ot.a].y-dt.y)*bt,E.z+=(wt[ot.a].z-dt.z)*bt,S.x+=(wt[ot.b].x-vt.x)*bt,S.y+=(wt[ot.b].y-vt.y)*bt,S.z+=(wt[ot.b].z-vt.z)*bt,x.x+=(wt[ot.c].x-mt.x)*bt,x.y+=(wt[ot.c].y-mt.y)*bt,x.z+=(wt[ot.c].z-mt.z)*bt}ft.position.add(E),lt.position.add(S),ct.position.add(x),I.projectVertex(ft),I.projectVertex(lt),I.projectVertex(ct)}if(I.checkTriangleVisibility(ft,lt,ct)===!1)continue;var Et=I.checkBackfaceCulling(ft,lt,ct);if(at!==THREE.DoubleSide){if(at===THREE.FrontSide&&Et===!1)continue;if(at===THREE.BackSide&&Et===!0)continue}a=U(),a.id=d.id,a.v1.copy(ft),a.v2.copy(lt),a.v3.copy(ct),a.normalModel.copy(ot.normal),Et===!1&&(at===THREE.BackSide||at===THREE.DoubleSide)&&a.normalModel.negate(),a.normalModel.applyMatrix3(P).normalize();var St=ot.vertexNormals;for(var xt=0,Tt=Math.min(St.length,3);xt<Tt;xt++){var Nt=a.vertexNormalsModel[xt];Nt.copy(St[xt]),Et===!1&&(at===THREE.BackSide||at===THREE.DoubleSide)&&Nt.negate(),Nt.applyMatrix3(P).normalize()}a.vertexNormalsLength=St.length;var Ct=Y[it];if(Ct!==undefined)for(var kt=0;kt<3;kt++)a.uvs[kt].copy(Ct[kt]);a.color=ot.color,a.material=ut,a.z=(ft.positionScreen.z+lt.positionScreen.z+ct.positionScreen.z)/3,w.elements.push(a)}}}else if(d instanceof THREE.Line){if(v instanceof THREE.BufferGeometry){var y=v.attributes;if(y.position!==undefined){var C=y.position.array;for(var k=0,L=C.length;k<L;k+=3)I.pushVertex(C[k],C[k+1],C[k+2]);if(y.index!==undefined){var $=y.index.array;for(var k=0,L=$.length;k<L;k+=2)I.pushLine($[k],$[k+1])}else{var Lt=d.mode===THREE.LinePieces?2:1;for(var k=0,L=C.length/3-1;k<L;k+=Lt)I.pushLine(k,k+1)}}}else if(v instanceof THREE.Geometry){D.multiplyMatrices(M,_);var Q=d.geometry.vertices;if(Q.length===0)continue;ft=R(),ft.positionScreen.copy(Q[0]).applyMatrix4(D);var Lt=d.mode===THREE.LinePieces?2:1;for(var tt=1,nt=Q.length;tt<nt;tt++){ft=R(),ft.positionScreen.copy(Q[tt]).applyMatrix4(D);if((tt+1)%Lt>0)continue;lt=o[s-2],B.copy(ft.positionScreen),j.copy(lt.positionScreen),V(B,j)===!0&&(B.multiplyScalar(1/B.w),j.multiplyScalar(1/j.w),h=z(),h.id=d.id,h.v1.positionScreen.copy(B),h.v2.positionScreen.copy(j),h.z=Math.max(B.z,j.z),h.material=d.material,d.material.vertexColors===THREE.VertexColors&&(h.vertexColors[0].copy(d.geometry.colors[tt]),h.vertexColors[1].copy(d.geometry.colors[tt-1])),w.elements.push(h))}}}else if(d instanceof THREE.Sprite){N.set(_.elements[12],_.elements[13],_.elements[14],1),N.applyMatrix4(M);var At=1/N.w;N.z*=At,N.z>=-1&&N.z<=1&&(m=W(),m.id=d.id,m.x=N.x*At,m.y=N.y*At,m.z=N.z,m.object=d,m.rotation=d.rotation,m.scale.x=d.scale.x*Math.abs(m.x-(N.x+r.projectionMatrix.elements[0])/(N.w+r.projectionMatrix.elements[12])),m.scale.y=d.scale.y*Math.abs(m.y-(N.y+r.projectionMatrix.elements[5])/(N.w+r.projectionMatrix.elements[13])),m.material=d.material,w.elements.push(m))}}return u===!0&&w.elements.sort(X),w}},define("projector",["three"],function(){}),THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new THREE.Color(16777215),this.program=function(e,t){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){function bt(){ht.setRGB(0,0,0),pt.setRGB(0,0,0),dt.setRGB(0,0,0);for(var e=0,t=s.length;e<t;e++){var n=s[e],r=n.color;n instanceof THREE.AmbientLight?ht.add(r):n instanceof THREE.DirectionalLight?pt.add(r):n instanceof THREE.PointLight&&dt.add(r)}}function wt(e,t,n){for(var r=0,i=s.length;r<i;r++){var o=s[r];Z.copy(o.color);if(o instanceof THREE.DirectionalLight){var u=vt.setFromMatrixPosition(o.matrixWorld).normalize(),a=t.dot(u);if(a<=0)continue;a*=o.intensity,n.add(Z.multiplyScalar(a))}else if(o instanceof THREE.PointLight){var u=vt.setFromMatrixPosition(o.matrixWorld),a=t.dot(vt.subVectors(u,e).normalize());if(a<=0)continue;a*=o.distance==0?1:1-Math.min(e.distanceTo(u)/o.distance,1);if(a==0)continue;a*=o.intensity,n.add(Z.multiplyScalar(a))}}}function Et(e,t,n){_t(n.opacity),Dt(n.blending);var r=t.scale.x*l,i=t.scale.y*c,s=.5*Math.sqrt(r*r+i*i);ct.min.set(e.x-s,e.y-s),ct.max.set(e.x+s,e.y+s);if(n instanceof THREE.SpriteMaterial){var o=n.map;if(o!==null&&o.image!==undefined){o.hasEventListener("update",kt)===!1&&(o.image.width>0&&Lt(o),o.addEventListener("update",kt));var u=et[o.id];u!==undefined?Ft(u):Ft("rgba( 0, 0, 0, 1 )");var a=o.image,f=a.width*o.offset.x,h=a.height*o.offset.y,p=a.width*o.repeat.x,d=a.height*o.repeat.y,v=r/p,g=i/d;m.save(),m.translate(e.x,e.y),n.rotation!==0&&m.rotate(n.rotation),m.translate(-r/2,-i/2),m.scale(v,g),m.translate(-f,-h),m.fillRect(f,h,p,d),m.restore()}else Ft(n.color.getStyle()),m.save(),m.translate(e.x,e.y),n.rotation!==0&&m.rotate(n.rotation),m.scale(r,-i),m.fillRect(-0.5,-0.5,1,1),m.restore()}else n instanceof THREE.SpriteCanvasMaterial&&(jt(n.color.getStyle()),Ft(n.color.getStyle()),m.save(),m.translate(e.x,e.y),n.rotation!==0&&m.rotate(n.rotation),m.scale(r,i),n.program(m),m.restore())}function St(e,t,n,r){_t(r.opacity),Dt(r.blending),m.beginPath(),m.moveTo(e.positionScreen.x,e.positionScreen.y),m.lineTo(t.positionScreen.x,t.positionScreen.y);if(r instanceof THREE.LineBasicMaterial){Pt(r.linewidth),Ht(r.linecap),Bt(r.linejoin);if(r.vertexColors!==THREE.VertexColors)jt(r.color.getStyle());else{var i=n.vertexColors[0].getStyle(),s=n.vertexColors[1].getStyle();if(i===s)jt(i);else{try{var o=m.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);o.addColorStop(0,i),o.addColorStop(1,s)}catch(u){o=i}jt(o)}}m.stroke(),ct.expandByScalar(r.linewidth*2)}else r instanceof THREE.LineDashedMaterial&&(Pt(r.linewidth),Ht(r.linecap),Bt(r.linejoin),jt(r.color.getStyle()),It([r.dashSize,r.gapSize]),m.stroke(),ct.expandByScalar(r.linewidth*2),It([]))}function xt(e,r,i,s,o,u,a,f){n.info.render.vertices+=3,n.info.render.faces++,_t(f.opacity),Dt(f.blending),P=e.positionScreen.x,H=e.positionScreen.y,B=r.positionScreen.x,j=r.positionScreen.y,F=i.positionScreen.x,I=i.positionScreen.y,Tt(P,H,B,j,F,I),(f instanceof THREE.MeshLambertMaterial||f instanceof THREE.MeshPhongMaterial)&&f.map===null?(G.copy(f.color),Y.copy(f.emissive),f.vertexColors===THREE.FaceColors&&G.multiply(a.color),V.copy(ht),mt.copy(e.positionWorld).add(r.positionWorld).add(i.positionWorld).divideScalar(3),wt(mt,a.normalModel,V),V.multiply(G).add(Y),f.wireframe===!0?Nt(V,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):Ct(V)):f instanceof THREE.MeshBasicMaterial||f instanceof THREE.MeshLambertMaterial||f instanceof THREE.MeshPhongMaterial?f.map!==null?f.map.mapping instanceof THREE.UVMapping&&(nt=a.uvs,At(P,H,B,j,F,I,nt[s].x,nt[s].y,nt[o].x,nt[o].y,nt[u].x,nt[u].y,f.map)):f.envMap!==null?f.envMap.mapping instanceof THREE.SphericalReflectionMapping?(gt.copy(a.vertexNormalsModel[s]).applyMatrix3(yt),rt=.5*gt.x+.5,it=.5*gt.y+.5,gt.copy(a.vertexNormalsModel[o]).applyMatrix3(yt),st=.5*gt.x+.5,ot=.5*gt.y+.5,gt.copy(a.vertexNormalsModel[u]).applyMatrix3(yt),ut=.5*gt.x+.5,at=.5*gt.y+.5,At(P,H,B,j,F,I,rt,it,st,ot,ut,at,f.envMap)):f.envMap.mapping instanceof THREE.SphericalRefractionMapping&&(gt.copy(a.vertexNormalsModel[s]).applyMatrix3(yt),rt=-0.5*gt.x+.5,it=-0.5*gt.y+.5,gt.copy(a.vertexNormalsModel[o]).applyMatrix3(yt),st=-0.5*gt.x+.5,ot=-0.5*gt.y+.5,gt.copy(a.vertexNormalsModel[u]).applyMatrix3(yt),ut=-0.5*gt.x+.5,at=-0.5*gt.y+.5,At(P,H,B,j,F,I,rt,it,st,ot,ut,at,f.envMap)):(V.copy(f.color),f.vertexColors===THREE.FaceColors&&V.multiply(a.color),f.wireframe===!0?Nt(V,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):Ct(V)):f instanceof THREE.MeshDepthMaterial?(V.r=V.g=V.b=1-t(e.positionScreen.z*e.positionScreen.w,k.near,k.far),f.wireframe===!0?Nt(V,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):Ct(V)):f instanceof THREE.MeshNormalMaterial?(gt.copy(a.normalModel).applyMatrix3(yt),V.setRGB(gt.x,gt.y,gt.z).multiplyScalar(.5).addScalar(.5),f.wireframe===!0?Nt(V,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):Ct(V)):(V.setRGB(1,1,1),f.wireframe===!0?Nt(V,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):Ct(V))}function Tt(e,t,n,r,i,s){m.beginPath(),m.moveTo(e,t),m.lineTo(n,r),m.lineTo(i,s),m.closePath()}function Nt(e,t,n,r){Pt(t),Ht(n),Bt(r),jt(e.getStyle()),m.stroke(),ct.expandByScalar(t*2)}function Ct(e){Ft(e.getStyle()),m.fill()}function kt(e){Lt(e.target)}function Lt(e){if(e instanceof THREE.CompressedTexture)return;var t=e.wrapS===THREE.RepeatWrapping,n=e.wrapT===THREE.RepeatWrapping,r=e.image,i=document.createElement("canvas");i.width=r.width,i.height=r.height;var s=i.getContext("2d");s.setTransform(1,0,0,-1,0,r.height),s.drawImage(r,0,0),et[e.id]=m.createPattern(i,t===!0&&n===!0?"repeat":t===!0&&n===!1?"repeat-x":t===!1&&n===!0?"repeat-y":"no-repeat")}function At(e,t,n,r,i,s,o,u,a,f,l,c,h){if(h instanceof THREE.DataTexture)return;h.hasEventListener("update",kt)===!1&&(h.image!==undefined&&h.image.width>0&&Lt(h),h.addEventListener("update",kt));var p=et[h.id];if(p===undefined){Ft("rgba(0,0,0,1)"),m.fill();return}Ft(p);var d,v,g,y,b,w,E,S,x=h.offset.x/h.repeat.x,T=h.offset.y/h.repeat.y,N=h.image.width*h.repeat.x,C=h.image.height*h.repeat.y;o=(o+x)*N,u=(u+T)*C,a=(a+x)*N,f=(f+T)*C,l=(l+x)*N,c=(c+T)*C,n-=e,r-=t,i-=e,s-=t,a-=o,f-=u,l-=o,c-=u,E=a*c-l*f;if(E===0)return;S=1/E,d=(c*n-f*i)*S,v=(c*r-f*s)*S,g=(a*i-l*n)*S,y=(a*s-l*r)*S,b=e-d*o-g*u,w=t-v*o-y*u,m.save(),m.transform(d,v,g,y,b,w),m.fill(),m.restore()}function Ot(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d,v,g,y,b,w,E,S=h.width-1,x=h.height-1;o*=S,u*=x,a*=S,f*=x,l*=S,c*=x,n-=e,r-=t,i-=e,s-=t,a-=o,f-=u,l-=o,c-=u,w=a*c-l*f,E=1/w,p=(c*n-f*i)*E,d=(c*r-f*s)*E,v=(a*i-l*n)*E,g=(a*s-l*r)*E,y=e-p*o-v*u,b=t-d*o-g*u,m.save(),m.transform(p,d,v,g,y,b),m.clip(),m.drawImage(h,0,0),m.restore()}function Mt(e,t,n){var r=t.x-e.x,i=t.y-e.y,s=r*r+i*i,o;if(s===0)return;o=n/Math.sqrt(s),r*=o,i*=o,t.x+=r,t.y+=i,e.x-=r,e.y-=i}function _t(e){b!==e&&(m.globalAlpha=e,b=e)}function Dt(e){w!==e&&(e===THREE.NormalBlending?m.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?m.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending&&(m.globalCompositeOperation="darker"),w=e)}function Pt(e){x!==e&&(m.lineWidth=e,x=e)}function Ht(e){T!==e&&(m.lineCap=e,T=e)}function Bt(e){N!==e&&(m.lineJoin=e,N=e)}function jt(e){E!==e&&(m.strokeStyle=e,E=e)}function Ft(e){S!==e&&(m.fillStyle=e,S=e)}function It(e){C.length!==e.length&&(m.setLineDash(e),C=e)}0;var t=THREE.Math.smoothstep;e=e||{};var n=this,r,i,s,o=new THREE.Projector,u=e.canvas!==undefined?e.canvas:document.createElement("canvas"),a=u.width,f=u.height,l=Math.floor(a/2),c=Math.floor(f/2),h=0,p=0,d=a,v=f,m=u.getContext("2d",{alpha:e.alpha===!0}),g=new THREE.Color(0),y=0,b=1,w=0,E=null,S=null,x=null,T=null,N=null,C=[],k,L,A,O,M,_=new THREE.RenderableVertex,D=new THREE.RenderableVertex,P,H,B,j,F,I,q,R,U,z,W,X,V=new THREE.Color,$=new THREE.Color,J=new THREE.Color,K=new THREE.Color,Q=new THREE.Color,G=new THREE.Color,Y=new THREE.Color,Z=new THREE.Color,et={},tt,nt,rt,it,st,ot,ut,at,ft=new THREE.Box2,lt=new THREE.Box2,ct=new THREE.Box2,ht=new THREE.Color,pt=new THREE.Color,dt=new THREE.Color,vt=new THREE.Vector3,mt=new THREE.Vector3,gt=new THREE.Vector3,yt=new THREE.Matrix3;m.setLineDash===undefined&&(m.setLineDash=function(){}),this.domElement=u,this.devicePixelRatio=e.devicePixelRatio!==undefined?e.devicePixelRatio:self.devicePixelRatio!==undefined?self.devicePixelRatio:1,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(e,t,n){a=e*this.devicePixelRatio,f=t*this.devicePixelRatio,u.width=a,u.height=f,l=Math.floor(a/2),c=Math.floor(f/2),n!==!1&&(u.style.width=e+"px",u.style.height=t+"px"),ft.min.set(-l,-c),ft.max.set(l,c),lt.min.set(-l,-c),lt.max.set(l,c),b=1,w=0,E=null,S=null,x=null,T=null,N=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){h=e*this.devicePixelRatio,p=t*this.devicePixelRatio,d=n*this.devicePixelRatio,v=r*this.devicePixelRatio},this.setScissor=function(){},this.enableScissorTest=function(){},this.setClearColor=function(e,t){g.set(e),y=t!==undefined?t:1,lt.min.set(-l,-c),lt.max.set(l,c)},this.setClearColorHex=function(e,t){0,this.setClearColor(e,t)},this.getClearColor=function(){return g},this.getClearAlpha=function(){return y},this.getMaxAnisotropy=function(){return 0},this.clear=function(){lt.empty()===!1&&(lt.intersect(ft),lt.expandByScalar(2),lt.min.x=lt.min.x+l,lt.min.y=-lt.min.y+c,lt.max.x=lt.max.x+l,lt.max.y=-lt.max.y+c,y<1&&m.clearRect(lt.min.x|0,lt.min.y|0,lt.max.x-lt.min.x|0,lt.max.y-lt.min.y|0),y>0&&(Dt(THREE.NormalBlending),_t(1),Ft("rgba("+Math.floor(g.r*255)+","+Math.floor(g.g*255)+","+Math.floor(g.b*255)+","+y+")"),m.fillRect(lt.min.x|0,lt.min.y|0,lt.max.x-lt.min.x|0,lt.max.y-lt.min.y|0)),lt.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,t){if(t instanceof THREE.Camera==0){0;return}this.autoClear===!0&&this.clear(),n.info.render.vertices=0,n.info.render.faces=0,m.setTransform(d/a,0,0,-v/f,h,f-p),m.translate(l,c),r=o.projectScene(e,t,this.sortObjects,this.sortElements),i=r.elements,s=r.lights,k=t,yt.getNormalMatrix(t.matrixWorldInverse),bt();for(var u=0,g=i.length;u<g;u++){var y=i[u],b=y.material;if(b===undefined||b.opacity===0)continue;ct.makeEmpty();if(y instanceof THREE.RenderableSprite)L=y,L.x*=l,L.y*=c,Et(L,y,b);else if(y instanceof THREE.RenderableLine)L=y.v1,A=y.v2,L.positionScreen.x*=l,L.positionScreen.y*=c,A.positionScreen.x*=l,A.positionScreen.y*=c,ct.setFromPoints([L.positionScreen,A.positionScreen]),ft.isIntersectionBox(ct)===!0&&St(L,A,y,b);else if(y instanceof THREE.RenderableFace){L=y.v1,A=y.v2,O=y.v3;if(L.positionScreen.z<-1||L.positionScreen.z>1)continue;if(A.positionScreen.z<-1||A.positionScreen.z>1)continue;if(O.positionScreen.z<-1||O.positionScreen.z>1)continue;L.positionScreen.x*=l,L.positionScreen.y*=c,A.positionScreen.x*=l,A.positionScreen.y*=c,O.positionScreen.x*=l,O.positionScreen.y*=c,b.overdraw>0&&(Mt(L.positionScreen,A.positionScreen,b.overdraw),Mt(A.positionScreen,O.positionScreen,b.overdraw),Mt(O.positionScreen,L.positionScreen,b.overdraw)),ct.setFromPoints([L.positionScreen,A.positionScreen,O.positionScreen]),ft.isIntersectionBox(ct)===!0&&xt(L,A,O,0,1,2,y,b)}lt.union(ct)}m.setTransform(1,0,0,1,0,0)}},define("canvasrenderer",["three"],function(){});var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,n,r;e=e||{},t=e.parent!==undefined?e.parent:document.body,n=e.id!==undefined?e.id:"oldie",r=Detector.getWebGLErrorMessage(),r.id=n,t.appendChild(r)}};typeof module=="object"&&(module.exports=Detector),define("detector",function(){}),THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},define("copyshader",["three"],function(){}),THREE.VignetteShader={uniforms:{tDiffuse:{type:"t",value:null},offset:{type:"f",value:1},darkness:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")},define("vignetteshader",["three"],function(){}),THREE.ShaderPass=function(e,t){this.textureID=t!==undefined?t:"tDiffuse",this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.ShaderPass.prototype={render:function(e,t,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}},define("shaderpass",["three"],function(){}),THREE.RenderPass=function(e,t,n,r,i){this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=i!==undefined?i:1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},THREE.RenderPass.prototype={render:function(e,t,n,r){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,n,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}},define("renderpass",["three"],function(){}),THREE.MaskPass=function(e,t){this.scene=e,this.camera=t,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype={render:function(e,t,n,r){var i=e.context;i.colorMask(!1,!1,!1,!1),i.depthMask(!1);var s,o;this.inverse?(s=0,o=1):(s=1,o=0),i.enable(i.STENCIL_TEST),i.stencilOp(i.REPLACE,i.REPLACE,i.REPLACE),i.stencilFunc(i.ALWAYS,s,4294967295),i.clearStencil(o),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.stencilFunc(i.EQUAL,1,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},THREE.ClearMaskPass=function(){this.enabled=!0},THREE.ClearMaskPass.prototype={render:function(e,t,n,r){var i=e.context;i.disable(i.STENCIL_TEST)}},define("maskpass",["three"],function(){}),THREE.FilmPass=function(e,t,n,r){THREE.FilmShader===undefined&&0;var i=THREE.FilmShader;this.uniforms=THREE.UniformsUtils.clone(i.uniforms),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),r!==undefined&&(this.uniforms.grayscale.value=r),e!==undefined&&(this.uniforms.nIntensity.value=e),t!==undefined&&(this.uniforms.sIntensity.value=t),n!==undefined&&(this.uniforms.sCount.value=n),this.enabled=!0,this.renderToScreen=!1,this.needsSwap=!0,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.FilmPass.prototype={render:function(e,t,n,r){this.uniforms.tDiffuse.value=n,this.uniforms.time.value+=r,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,!1)}},define("filmpass",["three"],function(){}),THREE.FilmShader={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},nIntensity:{type:"f",value:.5},sIntensity:{type:"f",value:.05},sCount:{type:"f",value:4096},grayscale:{type:"i",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float x = vUv.x * vUv.y * time *  1000.0;","x = mod( x, 13.0 ) * mod( x, 123.0 );","float dx = mod( x, 0.01 );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")},define("filmshader",["three"],function(){}),THREE.DigitalGlitch={uniforms:{tDiffuse:{type:"t",value:null},tDisp:{type:"t",value:null},byp:{type:"i",value:0},amount:{type:"f",value:.08},angle:{type:"f",value:.02},seed:{type:"f",value:.02},seed_x:{type:"f",value:.02},seed_y:{type:"f",value:.02},distortion_x:{type:"f",value:.5},distortion_y:{type:"f",value:.6},col_s:{type:"f",value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","if(byp<1) {","vec2 p = vUv;","float xs = floor(gl_FragCoord.x / 0.5);","float ys = floor(gl_FragCoord.y / 0.5);","vec4 normal = texture2D (tDisp, p*seed*seed);","if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","if(seed_x>0.){","p.y = 1. - (p.y + distortion_y);","}","else {","p.y = distortion_y;","}","}","if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","if(seed_y>0.){","p.x=distortion_x;","}","else {","p.x = 1. - (p.x + distortion_x);","}","}","p.x+=normal.x*seed_x*(seed/5.);","p.y+=normal.y*seed_y*(seed/5.);","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, p + offset);","vec4 cga = texture2D(tDiffuse, p);","vec4 cb = texture2D(tDiffuse, p - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","gl_FragColor = gl_FragColor+ snow;","}","else {","gl_FragColor=texture2D (tDiffuse, vUv);","}","}"].join("\n")},define("digitalglitch",["three"],function(){}),THREE.GlitchPass=function(e){THREE.DigitalGlitch===undefined&&0;var t=THREE.DigitalGlitch;this.uniforms=THREE.UniformsUtils.clone(t.uniforms),e==undefined&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.enabled=!0,this.renderToScreen=!1,this.needsSwap=!0,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad),this.goWild=!1,this.curF=0;var n=this;setTimeout(function(){n.generateTrigger()},1500)},THREE.GlitchPass.prototype={render:function(e,t,n,r){this.uniforms.tDiffuse.value=n,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||this.goWild==1?(this.uniforms.amount.value=Math.random()/1e3,this.uniforms.angle.value=THREE.Math.randFloat(-Math.PI/10,Math.PI/10),this.uniforms.distortion_x.value=THREE.Math.randFloat(0,.3),this.uniforms.distortion_y.value=THREE.Math.randFloat(0,.3),this.uniforms.seed_x.value=THREE.Math.randFloat(-0.1,.1),this.uniforms.seed_y.value=THREE.Math.randFloat(-0.2,.2),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/1e3,this.uniforms.angle.value=THREE.Math.randFloat(-Math.PI/10,Math.PI/10),this.uniforms.distortion_x.value=THREE.Math.randFloat(0,.3),this.uniforms.distortion_y.value=THREE.Math.randFloat(0,.3),this.uniforms.seed_x.value=THREE.Math.randFloat(-0.1,.1),this.uniforms.seed_y.value=THREE.Math.randFloat(-0.2,.2)):this.goWild==0&&(this.uniforms.byp.value=1),this.curF++,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,!1)},generateTrigger:function(){this.randX=THREE.Math.randInt(120,840)},generateHeightmap:function(e){var t=new Float32Array(e*e*3),n=e*e;for(var r=0;r<n;r++){var i=THREE.Math.randFloat(0,1);t[r*3+0]=i,t[r*3+1]=i,t[r*3+2]=i}var s=new THREE.DataTexture(t,e,e,THREE.RGBFormat,THREE.FloatType);return s.minFilter=THREE.NearestFilter,s.magFilter=THREE.NearestFilter,s.needsUpdate=!0,s.flipY=!1,s}},define("glitchpass",["three","digitalglitch"],function(){}),THREE.EffectComposer=function(e,t){this.renderer=e;if(t===undefined){var n=window.innerWidth||1,r=window.innerHeight||1,i={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};t=new THREE.WebGLRenderTarget(n,r,i)}this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],THREE.CopyShader===undefined&&0,this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},THREE.EffectComposer.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var t=!1,n,r,i=this.passes.length;for(r=0;r<i;r++){n=this.passes[r];if(!n.enabled)continue;n.render(this.renderer,this.writeBuffer,this.readBuffer,e,t);if(n.needsSwap){if(t){var s=this.renderer.context;s.stencilFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.stencilFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}n instanceof THREE.MaskPass?t=!0:n instanceof THREE.ClearMaskPass&&(t=!1)}},reset:function(e){e===undefined&&(e=this.renderTarget1.clone(),e.width=window.innerWidth,e.height=window.innerHeight),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){var n=this.renderTarget1.clone();n.width=e,n.height=t,this.reset(n)}},define("effectcomposer",["three"],function(){}),define("app/modules/GlitchBackgroundModule",["underscore","superhero","three","projector","canvasrenderer","detector","copyshader","vignetteshader","shaderpass","renderpass","maskpass","filmpass","filmshader","glitchpass","effectcomposer","app/utils/ResizeManager","app/utils/ScrollManager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){return t.Module.extend({canRender:!1,numFilesToLoad:0,filesLoaded:0,fogSettings:{near:14,far:15,color:0},objects:{background:{path:"/static/three/background.js",object:null,geom:null,geomBase:null,canMouseMoveTimer:null,canMouseMove:!0}},mouse:{x:0,y:0},initialize:function(t){e.bindAll(this,"_update","_handleResize","_handleMouseMove","_load","_loadComplete","_loadCompleteAll","_tickHandler"),this.isWebGL=Detector.webgl?!0:!1,Settings.os=="AndroidOS"&&(this.isWebGL=!1),this.el=t.el,this.loader=new THREE.JSONLoader,this._build()},close:function(){this.canRender=!1,this._removeEventListeners()},animateBackgroundIn:function(){this._animateBackgroundIn(this.objects.background)},animateBackgroundOut:function(){this._animateBackgroundOut(this.objects.background)},_setViewport:function(){var e=window.innerWidth,t=window.innerHeight;this._vw={x:0,y:0,width:e,height:t}},_build:function(){this._setViewport(),this._createScene(),this._createCamera(),this._createRenderer(),this._createComposer(),this._load()},_load:function(){this.numFilesToLoad=1,this.loader.load(this.objects.background.path,function(e){this.objects.background.geomBase=e.clone(),this.objects.background.geom=e,this._loadComplete()}.bind(this))},_loadComplete:function(){this.filesLoaded++,this.filesLoaded==this.numFilesToLoad&&!this.loadIsDone&&(this.loadIsDone=!0,this._loadCompleteAll())},_loadCompleteAll:function(){this.objects.background.object=this.background=this._createBackground(this.objects.background.geom),this.scene.add(this.background),this.pattern=this._createPattern(),this.scene.add(this.pattern),this.lightBackground=new THREE.PointLight(16777215,1,10),this.lightBackground.position.set(0,0,0),this.scene.add(this.lightBackground),this.light=new THREE.PointLight(16777215,1,6),this.light.position.set(0,0,6),this.scene.add(this.light),this._resize(),this._setupEventListeners()},_setupEventListeners:function(){this.listenTo(v,"resize",this._handleResize),document.addEventListener("mousemove",this._handleMouseMove),TweenMax.ticker.addEventListener("tick",this._tickHandler)},_removeEventListeners:function(){document.removeEventListener("mousemove",this._handleMouseMove),TweenMax.ticker.removeEventListener("tick",this._tickHandler)},_tickHandler:function(){this.canRender&&this._update()},_handleResize:function(){this._resize()},_resize:function(){this._setViewport(),Settings.agent=="mobile"||this._vw.width<720?this.canRender=!1:(this.canRender==0&&(this.canRender=!0),this.camera.aspect=this._vw.width/this._vw.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this._vw.width,this._vw.height),this.composer.setSize(this._vw.width,this._vw.height))},_handleMouseMove:function(e){var t=e.clientX||e.pageX,n=e.clientY||e.pageY;t-=this._vw.width/2,n-=this._vw.height/2,this.mouse.x=t,this.mouse.y=n},_createScene:function(){this.scene=new THREE.Scene,this.scene.fog=new THREE.Fog(this.fogSettings.color,this.fogSettings.near,this.fogSettings.far)},_createCamera:function(){this.camera=new THREE.PerspectiveCamera(75,this._vw.width/this._vw.height,.1,1e3),this.camera.position.set(0,0,10),this.camera.lookAt(new THREE.Vector3(0,0,0))},_createRenderer:function(){this.isWebGL?this.renderer=new THREE.WebGLRenderer({antialias:!1,devicePixelRatio:1}):this.renderer=new THREE.CanvasRenderer({antialias:!1,devicePixelRatio:1}),this.renderer.setClearColorHex(0,0),this.renderer.setSize(this._vw.width,this._vw.height),this.el.appendChild(this.renderer.domElement)},_createComposer:function(){this.composer=new THREE.EffectComposer(this.renderer),this.composer.addPass(new THREE.RenderPass(this.scene,this.camera)),filmPass=new THREE.ShaderPass(THREE.FilmShader),filmPass.uniforms.time.value=.05,filmPass.uniforms.sCount.value=0,filmPass.uniforms.sIntensity.value=.15,filmPass.uniforms.nIntensity.value=.15,filmPass.uniforms.grayscale.value=0,glitchPass=new THREE.GlitchPass,vignettePass=new THREE.ShaderPass(THREE.VignetteShader),vignettePass.uniforms.offset.value=.6,vignettePass.uniforms.darkness.value=1,vignettePass.renderToScreen=!0,this.composer.addPass(filmPass),this.composer.addPass(glitchPass),this.composer.addPass(vignettePass)},_createBackground:function(e){var t=new THREE.Object3D;this.isWebGL||(t.visible=!1);var n=new THREE.Mesh(e,new THREE.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:1,color:"white",transparent:!0,opacity:.05,depthTest:!1,depthWrite:!1}));n.position.z=2;var r=new THREE.Mesh(e,new THREE.MeshLambertMaterial({color:16777215,transparent:!0,opacity:.3,depthTest:!1,depthWrite:!1,shading:THREE.SmoothShading,side:THREE.BackSide}));return r.position.z=2,t.add(r),t.add(n),t},_createPattern:function(){var e=new THREE.Object3D,t=THREE.ImageUtils.loadTexture("/static/three/pattern.jpg");t.wrapS=t.wrapT=THREE.RepeatWrapping,t.repeat.set(12,12);var n=new THREE.PlaneGeometry(50,50),r=new THREE.MeshBasicMaterial({transparent:!0,opacity:.8,map:t,blending:THREE.AdditiveBlending,depthWrite:!1,depthTest:!1});return e.position.z=-2,e.add(new THREE.Mesh(n,r)),e},_animateBackgroundIn:function(e){e.object&&(e.object.children[0].material.opacity=.3,e.object.children[1].material.opacity=.05)},_animateBackgroundOut:function(e){e.object&&(e.object.children[0].material.opacity=.2,e.object.children[1].material.opacity=.02)},_update:function(){if(this.canRender===!1)return;this._mouseFollow(),this._updateCamera(),this._updateIcons(),this._updateLight(),this.isWebGL?this.composer.render():this.renderer.render(this.scene,this.camera)},_updateIcons:function(){for(var e in this.objects){var t=this.objects[e];t.geom.verticesNeedUpdate=!0}},_updateLight:function(){var e={x:this.mouse.x/80,y:-this.mouse.y/80},t=.1;this.light.position.x+=(e.x-this.light.position.x)*t,this.light.position.y+=(e.y-this.light.position.y)*t,this.lightBackground.position.x+=(e.x-this.lightBackground.position.x)*t,this.lightBackground.position.y+=(e.y-this.lightBackground.position.y)*t},_updateCamera:function(){var e={x:-this.mouse.y/2500,y:-this.mouse.x/5e3},t=.3},_mouseFollow:function(){var e=this.mouse.x/80,t=-this.mouse.y/80,n,r,i,s,o,u,a,f;for(var l in this.objects){n=this.objects[l];if(n.canMouseMove===!0){r=0;if(l=="background"){s=4,i=3;for(j=0;j<n.geom.vertices.length;j++)r=n.geom.vertices[j],vBase=n.geomBase.vertices[j],o=e-vBase.x,ys=t-vBase.y,a=Math.sqrt(o*o+ys*ys),Math.abs(a)<i?(f=Math.sin(Math.PI*Math.abs(a/i)),r.x=vBase.x-s*o*f/4,r.y=vBase.y-s*ys*f/4):(r.x=vBase.x,r.y=vBase.y)}}}}})}),define("app/views/components/ButtonPrimaryComponent",["superhero"],function(e){var t={TRIANGLE_WIDTH:29};return e.Component.extend({ui:{background:".button-primary-background",labelForeground:".button-primary-label-foreground",labelBackground:".button-primary-label-background"},events:{mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler"},onInitialized:function(){this._getWidth(),this._hideElements()},_getWidth:function(){this._width=230},_hideElements:function(){TweenMax.set(this.ui.background,{x:-this._width,alpha:0}),TweenMax.set(this.ui.labelForeground,{alpha:0,x:-40})},_startMouseEnterAnimation:function(){TweenMax.to(this.ui.background,.35,{x:0,ease:Power3.easeOut}),TweenMax.to(this.ui.background,.15,{alpha:1,ease:Power0.easeNone}),TweenMax.to(this.ui.labelBackground,.2,{x:20,ease:Power1.easeInOut}),TweenMax.to(this.ui.labelForeground,.5,{x:0,ease:Power3.easeOut}),this._labelForegroundAlphaTween=TweenMax.to(this.ui.labelForeground,.1,{alpha:1,ease:Power0.easeNone,delay:.05})},_startMouseLeaveAnimation:function(){this._labelForegroundAlphaTween&&this._labelForegroundAlphaTween.kill(),TweenMax.to(this.ui.background,.25,{x:-this._width,ease:Power3.easeInOut}),TweenMax.to(this.ui.background,.25,{alpha:0,ease:Power0.easeNone}),TweenMax.to(this.ui.labelBackground,.5,{x:0,ease:Power3.easeOut}),TweenMax.to(this.ui.labelForeground,.25,{x:-40,ease:Power3.easeInOut}),TweenMax.to(this.ui.labelForeground,.25,{alpha:0,ease:Power0.easeNone})},_mouseEnterHandler:function(e){this._startMouseEnterAnimation()},_mouseLeaveHandler:function(e){this._startMouseLeaveAnimation()}},t)}),define("app/views/pages/IntroView",["superhero","app/modules/GlitchBackgroundModule","app/views/components/ButtonPrimaryComponent"],function(e,t,n){return e.View.extend({className:"page page-intro",template:"pages/intro",ui:{buttonPrimary:".button-primary",logo:".page-intro-logo",body:".page-intro-body",buttons:".page-intro-buttons",column:".page-intro-column",sideTitle:".page-side-title",contactButton:".page-intro-button-contact",backgroundCanvas:".page-intro-background"},onInitialized:function(){this._setup(),this._setupButtons(),this.ui.contactButton.style.opacity=0,this.ui.logo.style.opacity=0,this.ui.body.style.opacity=0,this.ui.buttons.style.opacity=0,this.ui.sideTitle.style.opacity=0},onClose:function(){this.backgroundModule&&this.backgroundModule.close(),this._introTimeline&&this._introTimeline.kill()},_setup:function(){Settings.isMobile||(this.backgroundModule=new t({el:this.ui.backgroundCanvas}))},transitionIn:function(){this._introTimeline=new TimelineMax({delay:.3}),this._introTimeline.to(this.ui.sideTitle,.2,{alpha:1,ease:Power0.easeNone},0),this._introTimeline.from(this.ui.logo,.45,{y:30,ease:Power2.easeOut},0),this._introTimeline.to(this.ui.logo,.2,{alpha:1,ease:Power0.easeNone},.03),this._introTimeline.from(this.ui.body,.45,{y:30,ease:Power2.easeOut},.07),this._introTimeline.to(this.ui.body,.2,{alpha:1,ease:Power0.easeNone},.1),this._introTimeline.from(this.ui.buttons,.45,{y:30,ease:Power2.easeOut},.14),this._introTimeline.to(this.ui.buttons,.2,{alpha:1,ease:Power0.easeNone},.17),this._introTimeline.to(this.ui.contactButton,.2,{alpha:1,ease:Power0.easeNone,clearProps:"opacity"},.2)},transitionOut:function(e){this._outroTimeline=new TimelineMax({onComplete:e}),this._outroTimeline.to([this.ui.column,this.ui.sideTitle,this.ui.contactButton],.3,{alpha:0},0),this._outroTimeline.to(this.el,.3,{alpha:0},.3)},_setupButtons:function(){if(Settings.isMobile)return;for(var e=0,t=this.ui.buttonPrimary.length;e<t;e++)this.addComponent("buttonPrimary",n,this.ui.buttonPrimary[e])}})}),define("app/utils/EventBus",["superhero"],function(e){var t=e.Module.extend({});return new t}),define("app/views/components/SectionIndicatorComponent",["underscore","superhero","app/utils/ScrollManager","app/utils/ResizeManager"],function(e,t,n,r){return t.Component.extend({CLASS_ACTIVE:"section-indicator-button--active",ui:{buttons:".section-indicator-button",dots:".section-indicator-dot"},events:{"tap .section-indicator-button":"_buttonClickHandler"},initialize:function(t){e.bindAll(this,"_build","show"),this._sections=t.sections||null,this._visibility=[]},onInitialized:function(){this._setupEventListeners(),this._buildTimeout=TweenMax.delayedCall(.2,this._build)},onClose:function(){this._buildTimeout&&this._buildTimeout.kill()},scrollUpdate:function(e){this._scrollUpdateHandler(e)},show:function(){},_setupEventListeners:function(){this.listenTo(r,"resize",this._resizeHandler),this.listenTo(r,"resize:complete",this._resizeHandler)},_build:function(){this._resize(),this._visibility=this._calcVisibilitySections(0),this._update()},_update:function(){if(!this._visibility)return;var t=e.max(this._visibility),n=this._visibility.indexOf(t);if(!t&&!n)return;if(this._activeId===n)return;this._activeId=n;for(var r=0,i=this.ui.buttons.length;r<i;r++)this.ui.buttons[r].classList.remove(this.CLASS_ACTIVE);this.ui.buttons[n].classList.add(this.CLASS_ACTIVE)},_navigate:function(e){n.scrollTo(0,this._offsetSections[e].top-70,.8,Power2.easeOut)},_resize:function(){this._getOffsetSections()},_getOffsetSections:function(){this._offsetSections=[];var e,t;for(var n=0,r=this._sections.length;n<r;n++)e=this._getElementGlobalOffsetTop(this._sections[n]),t=this._sections[n].clientHeight,this._offsetSections.push({top:e,bottom:e+t,height:t})},_getElementGlobalOffsetTop:function(e){var t=0;for(;;){t+=e.offsetTop;if(e.offsetParent===null)break;e=e.offsetParent}return t},_calcVisibilitySections:function(e){var t,n,i=[],s=e+r.viewportHeight();if(!this._offsetSections)return;for(var o=0,u=this._offsetSections.length;o<u;o++)t=this._offsetSections[o],t.top>=e&&t.bottom<=s?n=t.height:t.top<=e&&t.bottom>=s?n=r.viewportHeight():t.bottom>=e&&t.bottom<=s?n=t.bottom-e:t.top>=e&&t.top<=s?n=Math.min(t.bottom,s)-t.top:n=0,i.push(100/t.height*n);return i},_scrollUpdateHandler:function(e){this._visibility=this._calcVisibilitySections(e.y),this._update()},_resizeHandler:function(e){this._resize()},_buttonClickHandler:function(e){var t=e.currentTarget.getAttribute("data-id");this.trigger("indicator:click",t)}})}),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.PreloadJS=createjs.PreloadJS||{};e.version="0.4.1",e.buildDate="Thu, 12 Dec 2013 23:33:38 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.type=null,t.target=null,t.currentTarget=null,t.eventPhase=0,t.bubbles=!1,t.cancelable=!1,t.timeStamp=0,t.defaultPrevented=!1,t.propagationStopped=!1,t.immediatePropagationStopped=!1,t.removed=!1,t.initialize=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=(new Date).getTime()},t.preventDefault=function(){this.defaultPrevented=!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(){},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t._listeners=null,t._captureListeners=null,t.initialize=function(){},t.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},t.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t){if("string"==typeof e){var n=this._listeners;if(!n||!n[e])return!1;e=new createjs.Event(e)}if(e.target=t||this,e.bubbles&&this.parent){for(var r=this,i=[r];r.parent;)i.push(r=r.parent);var s,o=i.length;for(s=o-1;s>=0&&!e.propagationStopped;s--)i[s]._dispatchEvent(e,1+(0==s));for(s=1;o>s&&!e.propagationStopped;s++)i[s]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;e.currentTarget=this,e.eventPhase=t,e.removed=!1,i=i.slice();for(var s=0;n>s&&!e.immediatePropagationStopped;s++){var o=i[s];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(e,t){for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(){this.init()};e.prototype=new createjs.EventDispatcher;var t=e.prototype,n=e;n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?)|(.{0,2}\/{1}))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,n.PATH_PATTERN=/^(?:(\w+:)\/{2})|(.{0,2}\/{1})?([/.]*?(?:[^?]+)?\/?)?$/,t.loaded=!1,t.canceled=!1,t.progress=0,t._item=null,t.getItem=function(){return this._item},t.init=function(){},t.load=function(){},t.close=function(){},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.Event("progress"),t.loaded=this.progress,t.total=1):(t=e,this.progress=e.loaded/e.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),t.progress=this.progress,this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){this._isCanceled()||this.dispatchEvent("complete")},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.Event("error")),this.dispatchEvent(e))},t._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},t._parseURI=function(e){return e?e.match(n.FILE_PATTERN):null},t._parsePath=function(e){return e?e.match(n.PATH_PATTERN):null},t._formatQueryString=function(e,t){if(null==e)throw new Error("You must specify data.");var n=[];for(var r in e)n.push(r+"="+escape(e[r]));return t&&(n=n.concat(t)),n.join("&")},t.buildPath=function(e,t){if(null==t)return e;var n=[],r=e.indexOf("?");if(-1!=r){var i=e.slice(r+1);n=n.concat(i.split("&"))}return-1!=r?e.slice(0,r)+"?"+this._formatQueryString(t,n):e+"?"+this._formatQueryString(t,n)},t._isCrossDomain=function(e){var t=document.createElement("a");t.href=e.src;var n=document.createElement("a");n.href=location.href;var r=""!=t.hostname&&(t.port!=n.port||t.protocol!=n.protocol||t.hostname!=n.hostname);return r},t._isLocal=function(e){var t=document.createElement("a");return t.href=e.src,""==t.hostname&&"file:"==t.protocol},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t,n){this.init(e,t,n)},t=e.prototype=new createjs.AbstractLoader,n=e;n.loadTimeout=8e3,n.LOAD_TIMEOUT=0,n.BINARY="binary",n.CSS="css",n.IMAGE="image",n.JAVASCRIPT="javascript",n.JSON="json",n.JSONP="jsonp",n.MANIFEST="manifest",n.SOUND="sound",n.SVG="svg",n.TEXT="text",n.XML="xml",n.POST="POST",n.GET="GET",t._basePath=null,t._crossOrigin="",t.useXHR=!0,t.stopOnError=!1,t.maintainScriptOrder=!0,t.next=null,t._typeCallbacks=null,t._extensionCallbacks=null,t._loadStartWasDispatched=!1,t._maxConnections=1,t._currentlyLoadingScript=null,t._currentLoads=null,t._loadQueue=null,t._loadQueueBackup=null,t._loadItemsById=null,t._loadItemsBySrc=null,t._loadedResults=null,t._loadedRawResults=null,t._numItems=0,t._numItemsLoaded=0,t._scriptOrder=null,t._loadedScripts=null,t.init=function(e,t,n){this._numItems=this._numItemsLoaded=0,this._paused=!1,this._loadStartWasDispatched=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=t,this.setUseXHR(e),this._crossOrigin=n===!0?"Anonymous":n===!1||null==n?"":n},t.setUseXHR=function(e){return this.useXHR=0!=e&&null!=window.XMLHttpRequest,this.useXHR},t.removeAll=function(){this.remove()},t.remove=function(e){var t=null;if(!e||e instanceof Array){if(e)t=e;else if(arguments.length>0)return}else t=[e];var n=!1;if(t){for(;t.length;){var r=t.pop(),i=this.getResult(r);for(s=this._loadQueue.length-1;s>=0;s--)if(o=this._loadQueue[s].getItem(),o.id==r||o.src==r){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if(o=this._loadQueueBackup[s].getItem(),o.id==r||o.src==r){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(i)delete this._loadItemsById[i.id],delete this._loadItemsBySrc[i.src],this._disposeItem(i);else for(var s=this._currentLoads.length-1;s>=0;s--){var o=this._currentLoads[s].getItem();if(o.id==r||o.src==r){this._currentLoads.splice(s,1)[0].cancel(),n=!0;break}}}n&&this._loadNext()}else{this.close();for(var u in this._loadItemsById)this._disposeItem(this._loadItemsById[u]);this.init(this.useXHR)}},t.reset=function(){this.close();for(var e in this._loadItemsById)this._disposeItem(this._loadItemsById[e]);for(var t=[],n=0,r=this._loadQueueBackup.length;r>n;n++)t.push(this._loadQueueBackup[n].getItem());this.loadManifest(t,!1)},n.isBinary=function(e){switch(e){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},n.isText=function(e){switch(e){case createjs.LoadQueue.TEXT:case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.XML:case createjs.LoadQueue.HTML:case createjs.LoadQueue.CSS:case createjs.LoadQueue.SVG:case createjs.LoadQueue.JAVASCRIPT:return!0;default:return!1}},t.installPlugin=function(e){if(null!=e&&null!=e.getPreloadHandlers){var t=e.getPreloadHandlers();if(t.scope=e,null!=t.types)for(var n=0,r=t.types.length;r>n;n++)this._typeCallbacks[t.types[n]]=t;if(null!=t.extensions)for(n=0,r=t.extensions.length;r>n;n++)this._extensionCallbacks[t.extensions[n]]=t}},t.setMaxConnections=function(e){this._maxConnections=e,!this._paused&&this._loadQueue.length>0&&this._loadNext()},t.loadFile=function(e,t,n){if(null==e){var r=new createjs.Event("error");return r.text="PRELOAD_NO_FILE",this._sendError(r),void 0}this._addItem(e,null,n),t!==!1?this.setPaused(!1):this.setPaused(!0)},t.loadManifest=function(e,t,r){var i=null,s=null;if(e instanceof Array){if(0==e.length){var o=new createjs.Event("error");return o.text="PRELOAD_MANIFEST_EMPTY",this._sendError(o),void 0}i=e}else if("string"==typeof e)i=[{src:e,type:n.MANIFEST}];else{if("object"!=typeof e){var o=new createjs.Event("error");return o.text="PRELOAD_MANIFEST_NULL",this._sendError(o),void 0}if(void 0!==e.src){if(null==e.type)e.type=n.MANIFEST;else if(e.type!=n.MANIFEST){var o=new createjs.Event("error");o.text="PRELOAD_MANIFEST_ERROR",this._sendError(o)}i=[e]}else void 0!==e.manifest&&(i=e.manifest,s=e.path)}for(var u=0,a=i.length;a>u;u++)this._addItem(i[u],s,r);t!==!1?this.setPaused(!1):this.setPaused(!0)},t.load=function(){this.setPaused(!1)},t.getItem=function(e){return this._loadItemsById[e]||this._loadItemsBySrc[e]},t.getResult=function(e,t){var n=this._loadItemsById[e]||this._loadItemsBySrc[e];if(null==n)return null;var r=n.id;return t&&this._loadedRawResults[r]?this._loadedRawResults[r]:this._loadedResults[r]},t.setPaused=function(e){this._paused=e,this._paused||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},t._addItem=function(e,t,n){var r=this._createLoadItem(e,t,n);if(null!=r){var i=this._createLoader(r);null!=i&&(this._loadQueue.push(i),this._loadQueueBackup.push(i),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT&&i instanceof createjs.XHRLoader&&(this._scriptOrder.push(r),this._loadedScripts.push(null)))}},t._createLoadItem=function(e,t,n){var r=null;switch(typeof e){case"string":r={src:e};break;case"object":r=window.HTMLAudioElement&&e instanceof window.HTMLAudioElement?{tag:e,src:r.tag.src,type:createjs.LoadQueue.SOUND}:e;break;default:return null}var i=this._parseURI(r.src);null!=i&&(r.ext=i[6]),null==r.type&&(r.type=this._getTypeByExtension(r.ext));var s="",o=n||this._basePath,u=r.src;if(i&&null==i[1]&&null==i[3])if(t){s=t;var a=this._parsePath(t);u=t+u,null!=o&&a&&null==a[1]&&null==a[2]&&(s=o+s)}else null!=o&&(s=o);if(r.src=s+r.src,r.path=s,(r.type==createjs.LoadQueue.JSON||r.type==createjs.LoadQueue.MANIFEST)&&(r._loadAsJSONP=null!=r.callback),r.type==createjs.LoadQueue.JSONP&&null==r.callback)throw new Error("callback is required for loading JSONP requests.");(void 0===r.tag||null===r.tag)&&(r.tag=this._createTag(r)),(void 0===r.id||null===r.id||""===r.id)&&(r.id=u);var f=this._typeCallbacks[r.type]||this._extensionCallbacks[r.ext];if(f){var l=f.callback.call(f.scope,r.src,r.type,r.id,r.data,s,this);if(l===!1)return null;l===!0||(null!=l.src&&(r.src=l.src),null!=l.id&&(r.id=l.id),null!=l.tag&&(r.tag=l.tag),null!=l.completeHandler&&(r.completeHandler=l.completeHandler),l.type&&(r.type=l.type),i=this._parseURI(r.src),null!=i&&null!=i[6]&&(r.ext=i[6].toLowerCase()))}return this._loadItemsById[r.id]=r,this._loadItemsBySrc[r.src]=r,r},t._createLoader=function(e){var t=this.useXHR;switch(e.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:t=!e._loadAsJSONP;break;case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:t=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:t=!1;break;case null:return null}return t?new createjs.XHRLoader(e,this._crossOrigin):new createjs.TagLoader(e)},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var e=0;e<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);e++){var t=this._loadQueue[e];if(this.maintainScriptOrder&&t instanceof createjs.TagLoader&&t.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(e,1),e--,this._loadItem(t)}}},t._loadItem=function(e){e.on("progress",this._handleProgress,this),e.on("complete",this._handleFileComplete,this),e.on("error",this._handleFileError,this),this._currentLoads.push(e),this._sendFileStart(e.getItem()),e.load()},t._handleFileError=function(e){var t=e.target;this._numItemsLoaded++,this._updateProgress();var n=new createjs.Event("error");n.text="FILE_LOAD_ERROR",n.item=t.getItem(),this._sendError(n),this.stopOnError||(this._removeLoadItem(t),this._loadNext())},t._handleFileComplete=function(e){var t=e.target,n=t.getItem();if(this._loadedResults[n.id]=t.getResult(),t instanceof createjs.XHRLoader&&(this._loadedRawResults[n.id]=t.getResult(!0)),this._removeLoadItem(t),this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT){if(!(t instanceof createjs.TagLoader))return this._loadedScripts[createjs.indexOf(this._scriptOrder,n)]=n,this._checkScriptLoadOrder(t),void 0;this._currentlyLoadingScript=!1}if(delete n._loadAsJSONP,n.type==createjs.LoadQueue.MANIFEST){var r=t.getResult();null!=r&&void 0!==r.manifest&&this.loadManifest(r,!0)}this._processFinishedLoad(n,t)},t._processFinishedLoad=function(e,t){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(e,t),this._loadNext()},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;e>t;t++){var n=this._loadedScripts[t];if(null===n)break;if(n!==!0){var r=this._loadedResults[n.id];(document.body||document.getElementsByTagName("body")[0]).appendChild(r),this._processFinishedLoad(n),this._loadedScripts[t]=!0}}},t._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;t>n;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}},t._handleProgress=function(e){var t=e.target;this._sendFileProgress(t.getItem(),t.progress),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var n=0,r=0,i=this._currentLoads.length;i>r;r++)n+=this._currentLoads[r].progress;e+=n/t*(t/this._numItems)}this._sendProgress(e)},t._disposeItem=function(e){delete this._loadedResults[e.id],delete this._loadedRawResults[e.id],delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src]},t._createTag=function(e){var t=null;switch(e.type){case createjs.LoadQueue.IMAGE:return t=document.createElement("img"),""==this._crossOrigin||this._isLocal(e)||(t.crossOrigin=this._crossOrigin),t;case createjs.LoadQueue.SOUND:return t=document.createElement("audio"),t.autoplay=!1,t;case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:case createjs.LoadQueue.MANIFEST:return t=document.createElement("script"),t.type="text/javascript",t;case createjs.LoadQueue.CSS:return t=this.useXHR?document.createElement("style"):document.createElement("link"),t.rel="stylesheet",t.type="text/css",t;case createjs.LoadQueue.SVG:return this.useXHR?t=document.createElement("svg"):(t=document.createElement("object"),t.type="image/svg+xml"),t}return null},t._getTypeByExtension=function(e){if(null==e)return createjs.LoadQueue.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},t._sendFileProgress=function(e,t){if(this._isCanceled())return this._cleanUp(),void 0;if(this.hasEventListener("fileprogress")){var n=new createjs.Event("fileprogress");n.progress=t,n.loaded=t,n.total=1,n.item=e,this.dispatchEvent(n)}},t._sendFileComplete=function(e,t){if(!this._isCanceled()){var n=new createjs.Event("fileload");n.loader=t,n.item=e,n.result=this._loadedResults[e.id],n.rawResult=this._loadedRawResults[e.id],e.completeHandler&&e.completeHandler(n),this.hasEventListener("fileload")&&this.dispatchEvent(n)}},t._sendFileStart=function(e){var t=new createjs.Event("filestart");t.item=e,this.hasEventListener("filestart")&&this.dispatchEvent(t)},t.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=e;var r=function(){};r.init=function(){var e=navigator.userAgent;r.isFirefox=e.indexOf("Firefox")>-1,r.isOpera=null!=window.opera,r.isChrome=e.indexOf("Chrome")>-1,r.isIOS=e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1},r.init(),createjs.LoadQueue.BrowserDetect=r}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e){this.init(e)},t=e.prototype=new createjs.AbstractLoader;t._loadTimeout=null,t._tagCompleteProxy=null,t._isAudio=!1,t._tag=null,t._jsonResult=null,t.init=function(e){this._item=e,this._tag=e.tag,this._isAudio=window.HTMLAudioElement&&e.tag instanceof window.HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},t.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP||this._item.type==createjs.LoadQueue.MANIFEST?this._jsonResult:this._tag},t.cancel=function(){this.canceled=!0,this._clean()},t.load=function(){var e=this._item,t=this._tag;clearTimeout(this._loadTimeout);var n=createjs.LoadQueue.LOAD_TIMEOUT;0==n&&(n=createjs.LoadQueue.loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),n),this._isAudio&&(t.src=null,t.preload="auto"),t.onerror=createjs.proxy(this._handleError,this),this._isAudio?(t.onstalled=createjs.proxy(this._handleStalled,this),t.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(t.onload=createjs.proxy(this._handleLoad,this),t.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var r=this.buildPath(e.src,e.values);switch(e.type){case createjs.LoadQueue.CSS:t.href=r;break;case createjs.LoadQueue.SVG:t.data=r;break;default:t.src=r}if(e.type==createjs.LoadQueue.JSONP||e.type==createjs.LoadQueue.JSON||e.type==createjs.LoadQueue.MANIFEST){if(null==e.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[e.callback])throw new Error('JSONP callback "'+e.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[e.callback]=createjs.proxy(this._handleJSONPLoad,this)}(e.type==createjs.LoadQueue.SVG||e.type==createjs.LoadQueue.JSONP||e.type==createjs.LoadQueue.JSON||e.type==createjs.LoadQueue.MANIFEST||e.type==createjs.LoadQueue.JAVASCRIPT||e.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=t.style.visibility,t.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(t)),null!=t.load&&t.load()},t._handleJSONPLoad=function(e){this._jsonResult=e},t._handleTimeout=function(){this._clean();var e=new createjs.Event("error");e.text="PRELOAD_TIMEOUT",this._sendError(e)},t._handleStalled=function(){},t._handleError=function(){this._clean();var e=new createjs.Event("error");this._sendError(e)},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this.getItem().tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleLoad()},t._handleLoad=function(){if(!this._isCanceled()){var e=this.getItem(),t=e.tag;if(!(this.loaded||this._isAudio&&4!==t.readyState)){switch(this.loaded=!0,e.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.CSS:t.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(t)}this._clean(),this._sendComplete()}}},t._clean=function(){clearTimeout(this._loadTimeout);var e=this.getItem(),t=e.tag;null!=t&&(t.onload=null,t.removeEventListener&&t.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),t.onstalled=null,t.onprogress=null,t.onerror=null,null!=t.parentNode&&e.type==createjs.LoadQueue.SVG&&e.type==createjs.LoadQueue.JSON&&e.type==createjs.LoadQueue.MANIFEST&&e.type==createjs.LoadQueue.CSS&&e.type==createjs.LoadQueue.JSONP&&t.parentNode.removeChild(t));var e=this.getItem();(e.type==createjs.LoadQueue.JSONP||e.type==createjs.LoadQueue.MANIFEST)&&(window[e.callback]=null)},t.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t){this.init(e,t)},t=e.prototype=new createjs.AbstractLoader;t._request=null,t._loadTimeout=null,t._xhrLevel=1,t._response=null,t._rawResponse=null,t._crossOrigin="",t.init=function(e,t){this._item=e,this._crossOrigin=t,!this._createXHR(e)},t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null==this._request)return this._handleError(),void 0;if(this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel){var e=createjs.LoadQueue.LOAD_TIMEOUT;if(0==e)e=createjs.LoadQueue.loadTimeout;else try{0}catch(t){}this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),e)}this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(n){var r=new createjs.Event("error");r.error=n,this._sendError(r)}},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.Event("progress");t.loaded=e.loaded,t.total=e.total,this._sendProgress(t)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},t._handleAbort=function(){this._clean();var e=new createjs.Event("error");e.text="XHR_ABORTED",this._sendError(e)},t._handleError=function(){this._clean();var e=new createjs.Event("error");this._sendError(e)},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){if(this.loaded=!0,!this._checkError())return this._handleError(),void 0;this._response=this._getResponse(),this._clean();var e=this._generateTag();e&&this._sendComplete()}},t._handleTimeout=function(e){this._clean();var t=new createjs.Event("error");t.text="PRELOAD_TIMEOUT",this._sendError(e)},t._checkError=function(){var e=parseInt(this._request.status);switch(e){case 404:case 0:return!1}return!0},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=this._isCrossDomain(e),n=null;if(t&&window.XDomainRequest)n=new XDomainRequest;else if(window.XMLHttpRequest)n=new XMLHttpRequest;else try{n=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(r){try{n=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){return!1}}}createjs.LoadQueue.isText(e.type)&&n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),this._xhrLevel="string"==typeof n.responseType?2:1;var i=null;return i=e.method==createjs.LoadQueue.GET?this.buildPath(e.src,e.values):e.src,n.open(e.method||createjs.LoadQueue.GET,i,!0),t&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&n.setRequestHeader("Origin",location.origin),e.values&&e.method==createjs.LoadQueue.POST&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(e.type)&&(n.responseType="arraybuffer"),this._request=n,!0},t._clean=function(){clearTimeout(this._loadTimeout);var e=this._request;e.onloadstart=null,e.onprogress=null,e.onabort=null,e.onerror=null,e.onload=null,e.ontimeout=null,e.onloadend=null,e.onreadystatechange=null},t._generateTag=function(){var e=this._item.type,t=this._item.tag;switch(e){case createjs.LoadQueue.IMAGE:return t.onload=createjs.proxy(this._handleTagReady,this),""!=this._crossOrigin&&(t.crossOrigin="Anonymous"),t.src=this.buildPath(this._item.src,this._item.values),this._rawResponse=this._response,this._response=t,!1;case createjs.LoadQueue.JAVASCRIPT:return t=document.createElement("script"),t.text=this._response,this._rawResponse=this._response,this._response=t,!0;case createjs.LoadQueue.CSS:var n=document.getElementsByTagName("head")[0];if(n.appendChild(t),t.styleSheet)t.styleSheet.cssText=this._response;else{var r=document.createTextNode(this._response);t.appendChild(r)}return this._rawResponse=this._response,this._response=t,!0;case createjs.LoadQueue.XML:var i=this._parseXML(this._response,"text/xml");return this._rawResponse=this._response,this._response=i,!0;case createjs.LoadQueue.SVG:var i=this._parseXML(this._response,"image/svg+xml");return this._rawResponse=this._response,null!=i.documentElement?(t.appendChild(i.documentElement),this._response=t):this._response=i,!0;case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:var s={};try{s=JSON.parse(this._response)}catch(o){s=o}return this._rawResponse=this._response,this._response=s,!0}return!0},t._parseXML=function(e,t){var n=null;try{if(window.DOMParser){var r=new DOMParser;n=r.parseFromString(e,t)}else n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e)}catch(i){}return n},t._handleTagReady=function(){this._sendComplete()},t.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=e}(),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o,u=gap,a=t[e];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(e)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(a)){for(s=a.length,n=0;s>n;n+=1)o[n]=str(n,a)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+u+"]":"["+o.join(",")+"]",gap=u,i}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,a),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+u+"}":"{"+o.join(",")+"}",gap=u,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("preloadjs",function(){}),define("app/utils/FileLoader",["superhero","preloadjs"],function(e,t){var n={};return e.Module.extend({loadManifest:function(e,t,n){var r=new createjs.LoadQueue;r.name=e,this._setup(r,n),r.loadManifest(t)},loadFile:function(e,t){var n=e.id,r=new createjs.LoadQueue;r.name=n,this._setup(r,t),r.loadFile(e)},disposeManifest:function(e){for(var t=0,n=e.length;t<n;t++)this.disposeFile(e[t].id)},disposeFile:function(e){var t=t||e;if(!n[e])return;var r=n[e].queue;r.remove(e),delete n[e]},getFile:function(e){return n[e]?n[e].result:null},_setup:function(e,t){e.setMaxConnections(10),t||e.setUseXHR(!1),_.bindAll(this,"_handleFileLoad","_handleQueueComplete","_handleQueueProgress","_handleQueueError"),e.on("fileload",this._handleFileLoad),e.on("complete",this._handleQueueComplete),e.on("progress",this._handleQueueProgress),e.on("error",this._handleQueueError)},_disposeQueue:function(e){e.off(),e.close()},_handleFileLoad:function(e){n[e.item.id]={result:e.result,queue:e.target},this.trigger("file:load:complete",{name:e.target.name})},_handleQueueComplete:function(e){this.trigger("manifest:load:complete",{name:e.target.name}),this._disposeQueue(e.target)},_handleQueueProgress:function(e){this.trigger("manifest:load:progress",{name:e.target.name,progress:e.loaded})},_handleQueueError:function(e){0,this.trigger("file:load:error",e)}})}),define("app/manifests/ArrowIconWhiteManifest",[],function(){return{normal:{dimensions:{width:50,height:80},images:["/static/img/sprites/sprite-arrow-white.png"],frames:[[1,1,7,5,0,-20,-43],[10,1,13,10,0,-14,-40],[25,1,16,24,0,-11,-36],[43,1,19,35,0,-8,-33],[64,1,33,69,0,-7,0],[99,1,37,69,0,-7,0],[138,1,37,66,0,-7,-3],[177,1,35,61,0,-8,-8],[214,1,35,56,0,-8,-12],[251,1,35,53,0,-8,-15],[288,1,35,51,0,-8,-17],[325,1,35,49,0,-8,-19],[362,1,35,49,0,-8,-20],[1,72,35,49,0,-8,-20],[38,72,35,49,0,-8,-20],[75,72,35,48,0,-8,-20],[112,72,35,48,0,-8,-20],[149,72,35,48,0,-8,-20],[186,72,29,47,0,-14,-21],[217,72,24,42,0,-19,-23],[243,72,24,39,0,-19,-26],[269,72,18,39,0,-19,-30],[289,72,13,38,0,-19,-34],[304,72,13,39,0,-19,-37],[319,72,13,38,0,-19,-40],[334,72,13,38,0,-19,-42],[349,72,13,38,0,-19,-42],[364,72,4,3,0,-23,-46]],animation:{startFrame:0,endFrame:27}},retina:{dimensions:{width:100,height:160},images:["/static/img/sprites/sprite-arrow-white@2x.png"],frames:[[1,1,11,7,0,-41,-87],[14,1,22,18,0,-30,-81],[38,1,29,44,0,-23,-74],[69,1,35,67,0,-17,-68],[106,1,65,137,0,-15,0],[173,1,72,137,0,-15,0],[247,1,70,129,0,-16,-8],[319,1,68,119,0,-17,-17],[389,1,67,110,0,-17,-25],[1,140,66,104,0,-18,-31],[69,140,67,99,0,-17,-36],[138,140,67,96,0,-17,-39],[207,140,68,95,0,-17,-41],[277,140,68,94,0,-17,-42],[347,140,68,94,0,-17,-42],[417,140,68,93,0,-17,-42],[1,246,68,93,0,-17,-42],[71,246,68,93,0,-17,-42],[141,246,56,92,0,-29,-43],[199,246,45,80,0,-40,-48],[246,246,44,74,0,-40,-54],[292,246,32,74,0,-40,-62],[326,246,23,73,0,-40,-70],[351,246,23,74,0,-40,-76],[376,246,23,74,0,-40,-81],[401,246,23,73,0,-40,-85],[426,246,23,74,0,-40,-86],[451,246,4,4,0,-48,-94]],animation:{startFrame:0,endFrame:27}}}}),define("app/manifests/ArrowIconBlackManifest",[],function(){return{normal:{dimensions:{width:50,height:80},images:["/static/img/sprites/sprite-arrow-black.png"],frames:[[1,1,7,5,0,-20,-43],[10,1,13,10,0,-14,-40],[25,1,16,24,0,-11,-36],[43,1,19,35,0,-8,-33],[64,1,34,69,0,-7,0],[100,1,37,69,0,-7,0],[139,1,37,66,0,-7,-3],[178,1,35,61,0,-8,-8],[215,1,35,56,0,-8,-12],[252,1,35,53,0,-8,-15],[289,1,35,51,0,-8,-17],[326,1,35,49,0,-8,-19],[363,1,35,49,0,-8,-20],[1,72,35,49,0,-8,-20],[38,72,35,48,0,-8,-20],[75,72,35,48,0,-8,-20],[112,72,35,48,0,-8,-20],[149,72,35,48,0,-8,-20],[186,72,29,47,0,-14,-21],[217,72,24,42,0,-19,-23],[243,72,24,39,0,-19,-26],[269,72,18,39,0,-19,-30],[289,72,13,38,0,-19,-34],[304,72,13,39,0,-19,-37],[319,72,13,38,0,-19,-40],[334,72,13,38,0,-19,-42],[349,72,13,38,0,-19,-42],[364,72,4,4,0,-23,-46]],animation:{startFrame:0,endFrame:27}},retina:{dimensions:{width:100,height:160},images:["/static/img/sprites/sprite-arrow-black@2x.png"],frames:[[1,1,11,7,0,-41,-87],[14,1,22,18,0,-30,-81],[38,1,29,44,0,-23,-74],[69,1,35,67,0,-17,-68],[106,1,65,137,0,-15,0],[173,1,72,137,0,-15,0],[247,1,70,129,0,-16,-8],[319,1,68,119,0,-17,-17],[389,1,67,110,0,-17,-25],[1,140,66,104,0,-18,-31],[69,140,67,99,0,-17,-36],[138,140,67,96,0,-17,-39],[207,140,68,95,0,-17,-41],[277,140,68,94,0,-17,-42],[347,140,68,94,0,-17,-42],[417,140,68,93,0,-17,-42],[1,246,68,93,0,-17,-42],[71,246,68,93,0,-17,-42],[141,246,56,92,0,-29,-43],[199,246,45,80,0,-40,-48],[246,246,44,74,0,-40,-54],[292,246,32,74,0,-40,-62],[326,246,23,73,0,-40,-70],[351,246,23,74,0,-40,-76],[376,246,23,74,0,-40,-81],[401,246,23,73,0,-40,-85],[426,246,23,74,0,-40,-86],[451,246,4,4,0,-48,-94]],animation:{startFrame:0,endFrame:27}}}}),define("app/views/components/ArrowIconComponent",["superhero","app/utils/FileLoader","app/manifests/ArrowIconWhiteManifest","app/manifests/ArrowIconBlackManifest"],function(e,t,n,r){return e.Component.extend({_fps:25,initialize:function(){this._options={},this._options.color=this.el.dataset.color||"white",_.bindAll(this,"show","pulse","_tickHandler","_updateHandler","_hoverTimelineCompleteHandler"),this._tweenObj={cur:0},this._fileLoader=new t},onInitialized:function(){this._setDimensions(),this._createStage(),this._createSprite(),this._createTimelines(),this._setupEventListeners()},onClose:function(){this._stage.close(),this._removeEventListeners(),this._pulseTimeline&&this._pulseTimeline.kill(),this._hoverTimeline&&this._hoverTimeline.kill()},_setupEventListeners:function(){TweenMax.ticker.addEventListener("tick",this._tickHandler)},_removeEventListeners:function(){TweenMax.ticker.removeEventListener("tick",this._tickHandler)},show:function(){TweenMax.fromTo(this._tweenObj,14/this._fps,{cur:0},{cur:14,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler})},stop:function(){this._pulseTimeline&&(this._pulseTimeline.pause(),this._pulseTimeline.progress(0),this._requestStageUpdate())},pulse:function(){this._pulseTimeline.play(0)},hover:function(){if(this._isHoverAnimating)return;this._isHoverAnimating=!0,this._hoverTimeline.play(0)},_createTimelines:function(){this._hoverTimeline=new TimelineMax({paused:!0,onComplete:this._hoverTimelineCompleteHandler}),this._hoverTimeline.fromTo(this._tweenObj,13/this._fps,{cur:13},{cur:27,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler}),this._hoverTimeline.fromTo(this._tweenObj,14/this._fps,{cur:0},{cur:14,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler}),this._pulseTimeline=new TimelineMax({paused:!0,repeat:-1,repeatDelay:.3}),this._pulseTimeline.fromTo(this._tweenObj,14/this._fps,{cur:0},{cur:14,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler}),this._pulseTimeline.fromTo(this._tweenObj,13/this._fps,{cur:13},{cur:27,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler},2.5)},_setDimensions:function(){var e=this._getData();this.el.width=e.dimensions.width,this.el.height=e.dimensions.height},_createStage:function(){this._stage=new createjs.Stage(this.el),this._stage.enableDOMEvents(!1)},_createSprite:function(){var e=new createjs.SpriteSheet(this._getData());this._sprite=new createjs.Sprite(e),this._sprite.x=0,this._sprite.y=0,this._stage.addChild(this._sprite),this._stage.update()},_updateSprite:function(){if(this._tweenObj.cur===this._tweenObj.prev)return!1;this._sprite.gotoAndStop(this._tweenObj.cur),this._tweenObj.prev=this._tweenObj.cur,this._requestStageUpdate()},_getData:function(){var e=this._options.color==="black"?r:n;return e=this._getPPI()>1?e.retina:e.normal,this._options.color==="white"&&(e.images=[this._fileLoader.getFile("arrow-white")]),this._options.color==="black"&&(e.images=[this._fileLoader.getFile("arrow-black")]),e},_getPPI:function(){var e=1,t=window.devicePixelRatio||1;return t>2.5&&(e=3),t>1.5&&(e=2),e},_updateHandler:function(){this._updateSprite()},_hoverTimelineCompleteHandler:function(e){this._isHoverAnimating=!1},_requestStageUpdate:function(){this._updateStage=!0},_tickHandler:function(e){this._stage&&this._updateStage&&(this._updateStage=!1,this._stage.update())}})}),define("app/manifests/MenuIconWhiteManifest",[],function(){return{normal:{dimensions:{width:50,height:50},images:["/static/img/sprites/sprite-menu-icon-white.png"],frames:[[1,1,31,20,0,-9,-15],[34,1,31,20,0,-9,-15],[67,1,31,20,0,-9,-15],[100,1,31,20,0,-9,-15],[133,1,31,20,0,-9,-15],[166,1,31,20,0,-9,-15],[199,1,31,20,0,-9,-15],[232,1,31,20,0,-9,-15],[1,23,31,20,0,-9,-15],[34,23,31,20,0,-9,-15],[67,23,31,20,0,-9,-15],[100,23,31,20,0,-9,-15],[133,23,31,20,0,-9,-15],[166,23,31,16,0,-9,-17],[199,23,31,9,0,-9,-21],[232,23,31,4,0,-9,-23],[1,45,30,12,0,-10,-19],[33,45,28,18,0,-11,-16],[63,45,24,24,0,-13,-13],[89,45,24,26,0,-13,-12],[115,45,22,26,0,-14,-12],[139,45,22,26,0,-14,-12],[163,45,24,26,0,-13,-12],[189,45,24,24,0,-13,-13],[215,45,24,24,0,-13,-13],[1,73,24,24,0,-13,-13],[27,73,24,24,0,-13,-13],[53,73,24,24,0,-13,-13],[79,73,24,24,0,-13,-13],[105,73,24,24,0,-13,-13],[131,73,26,22,0,-12,-14],[159,73,28,18,0,-11,-16],[189,73,30,14,0,-10,-18],[221,73,31,13,0,-9,-19],[1,99,31,15,0,-9,-18],[34,99,32,19,0,-9,-16],[68,99,32,21,0,-9,-15],[102,99,32,22,0,-9,-14],[136,99,32,22,0,-9,-14],[170,99,32,22,0,-9,-14],[204,99,32,22,0,-9,-14]],animation:{startFrame:0,endFrame:40}},retina:{dimensions:{width:100,height:100},images:["/static/img/sprites/sprite-menu-icon-white@2x.png"],frames:[[1,1,59,38,0,-20,-31],[62,1,59,38,0,-20,-31],[123,1,59,38,0,-20,-31],[184,1,59,38,0,-20,-31],[245,1,59,38,0,-20,-31],[306,1,59,38,0,-20,-31],[367,1,59,38,0,-20,-31],[428,1,59,38,0,-20,-31],[1,41,59,38,0,-20,-31],[62,41,59,38,0,-20,-31],[123,41,59,38,0,-20,-31],[184,41,59,38,0,-20,-31],[245,41,59,36,0,-20,-32],[306,41,59,30,0,-20,-35],[367,41,59,15,0,-20,-43],[428,41,59,6,0,-20,-47],[1,81,58,22,0,-21,-39],[61,81,54,34,0,-23,-33],[117,81,46,46,0,-27,-27],[165,81,44,48,0,-28,-26],[211,81,42,48,0,-29,-26],[255,81,42,48,0,-29,-26],[299,81,44,48,0,-28,-26],[345,81,44,46,0,-28,-27],[391,81,46,46,0,-27,-27],[439,81,46,44,0,-27,-28],[1,131,46,44,0,-27,-28],[49,131,46,44,0,-27,-28],[97,131,46,44,0,-27,-28],[145,131,46,44,0,-27,-28],[193,131,50,40,0,-25,-30],[245,131,54,32,0,-23,-34],[301,131,58,24,0,-21,-38],[361,131,59,24,0,-20,-39],[422,131,59,27,0,-20,-38],[1,177,60,36,0,-20,-33],[63,177,60,39,0,-20,-31],[125,177,60,42,0,-20,-29],[187,177,60,42,0,-20,-29],[249,177,60,40,0,-20,-30],[311,177,60,40,0,-20,-30]],animation:{startFrame:0,endFrame:40}}}}),define("app/manifests/MenuIconBlackManifest",[],function(){return{normal:{dimensions:{width:50,height:50},images:["/static/img/sprites/sprite-menu-icon-black.png"],frames:[[1,1,31,20,0,-9,-15],[34,1,31,20,0,-9,-15],[67,1,31,20,0,-9,-15],[100,1,31,20,0,-9,-15],[133,1,31,20,0,-9,-15],[166,1,31,20,0,-9,-15],[199,1,31,20,0,-9,-15],[232,1,31,20,0,-9,-15],[1,23,31,20,0,-9,-15],[34,23,31,20,0,-9,-15],[67,23,31,20,0,-9,-15],[100,23,31,20,0,-9,-15],[133,23,31,20,0,-9,-15],[166,23,31,16,0,-9,-17],[199,23,31,9,0,-9,-21],[232,23,31,4,0,-9,-23],[1,45,30,12,0,-10,-19],[33,45,28,18,0,-11,-16],[63,45,24,24,0,-13,-13],[89,45,24,26,0,-13,-12],[115,45,22,26,0,-14,-12],[139,45,22,26,0,-14,-12],[163,45,24,26,0,-13,-12],[189,45,24,24,0,-13,-13],[215,45,24,24,0,-13,-13],[1,73,24,24,0,-13,-13],[27,73,24,24,0,-13,-13],[53,73,24,24,0,-13,-13],[79,73,24,24,0,-13,-13],[105,73,24,24,0,-13,-13],[131,73,26,22,0,-12,-14],[159,73,28,18,0,-11,-16],[189,73,30,14,0,-10,-18],[221,73,31,13,0,-9,-19],[1,99,31,15,0,-9,-18],[34,99,32,19,0,-9,-16],[68,99,32,21,0,-9,-15],[102,99,32,22,0,-9,-14],[136,99,32,22,0,-9,-14],[170,99,32,22,0,-9,-14],[204,99,32,22,0,-9,-14]],animation:{startFrame:0,endFrame:40}},retina:{dimensions:{width:100,height:100},images:["/static/img/sprites/sprite-menu-icon-black@2x.png"],frames:[[1,1,59,38,0,-20,-31],[62,1,59,38,0,-20,-31],[123,1,59,38,0,-20,-31],[184,1,59,38,0,-20,-31],[245,1,59,38,0,-20,-31],[306,1,59,38,0,-20,-31],[367,1,59,38,0,-20,-31],[428,1,59,38,0,-20,-31],[1,41,59,38,0,-20,-31],[62,41,59,38,0,-20,-31],[123,41,59,38,0,-20,-31],[184,41,59,38,0,-20,-31],[245,41,59,36,0,-20,-32],[306,41,59,30,0,-20,-35],[367,41,59,15,0,-20,-43],[428,41,59,6,0,-20,-47],[1,81,58,22,0,-21,-39],[61,81,54,34,0,-23,-33],[117,81,46,46,0,-27,-27],[165,81,44,48,0,-28,-26],[211,81,42,48,0,-29,-26],[255,81,42,48,0,-29,-26],[299,81,44,48,0,-28,-26],[345,81,44,46,0,-28,-27],[391,81,46,46,0,-27,-27],[439,81,46,44,0,-27,-28],[1,131,46,44,0,-27,-28],[49,131,46,44,0,-27,-28],[97,131,46,44,0,-27,-28],[145,131,46,44,0,-27,-28],[193,131,50,40,0,-25,-30],[245,131,54,32,0,-23,-34],[301,131,58,24,0,-21,-38],[361,131,59,24,0,-20,-39],[422,131,59,27,0,-20,-38],[1,177,60,36,0,-20,-33],[63,177,60,39,0,-20,-31],[125,177,60,42,0,-20,-29],[187,177,60,42,0,-20,-29],[249,177,60,40,0,-20,-30],[311,177,60,40,0,-20,-30]],animation:{startFrame:0,endFrame:40}}}}),define("app/views/components/MenuIconComponent",["superhero","app/utils/EventBus","app/utils/FileLoader","app/manifests/MenuIconWhiteManifest","app/manifests/MenuIconBlackManifest"],function(e,t,n,r,i){return e.Component.extend({_fps:35,ui:{canvas:".button-main-menu-icon"},events:{mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",tap:"_tapHandler"},initialize:function(){_.bindAll(this,"_tickHandler","_updateHandler","_completeHandler","_closeAnimationCompleteHandler"),this._fileLoader=new n,this._tweenObj={cur:0}},onInitialized:function(){this._getColor(),this._setDimensions(),this._createStage(),this._createSprite(),this._setupEventListeners()},onClose:function(){this._stage.close(),this._removeEventListeners(),this._hoverTimeline&&this._hoverTimeline.kill()},_setupEventListeners:function(){this.listenTo(t,"menu:open",this._eventOpenHandler),this.listenTo(t,"menu:close",this._eventCloseHandler),this.listenTo(t,"menu:mouse:enter",this._eventMouseEnterHandler),this.listenTo(t,"menu:mouse:leave",this._eventMouseLeaveHandler),TweenMax.ticker.addEventListener("tick",this._tickHandler)},_removeEventListeners:function(){TweenMax.ticker.removeEventListener("tick",this._tickHandler)},_startMouseEnterAnimation:function(){this._isActive?this._isAnimating||TweenMax.fromTo(this.el,.35,{rotation:-90},{rotation:0,ease:Back.easeInOut}):TweenMax.to(this._tweenObj,7/this._fps,{cur:7,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler,onComplete:this._completeHandler})},_startMouseLeaveAnimation:function(){this._isActive||TweenMax.to(this._tweenObj,5/this._fps,{cur:0,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler,onComplete:this._completeHandler})},_startOpenAnimation:function(){this._isAnimating=!0,TweenMax.fromTo(this._tweenObj,18/this._fps,{cur:7},{cur:25,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler,onComplete:this._completeHandler})},_startCloseAnimation:function(){this._isAnimating=!0,TweenMax.to(this._tweenObj,15/this._fps,{cur:40,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler,onComplete:this._closeAnimationCompleteHandler})},_getColor:function(){this._color=this.ui.canvas.dataset.color||"white"},_setDimensions:function(){var e=this._getData();this.ui.canvas.width=e.dimensions.width,this.ui.canvas.height=e.dimensions.height},_createStage:function(){this._stage=new createjs.Stage(this.ui.canvas),this._stage.enableDOMEvents(!1)},_createSprite:function(){var e=new createjs.SpriteSheet(this._getData());this._sprite=new createjs.Sprite(e),this._sprite.x=0,this._sprite.y=0,this._stage.addChild(this._sprite),this._requestStageUpdate()},_updateSprite:function(){if(this._tweenObj.cur===this._tweenObj.prev)return!1;this._sprite.gotoAndStop(this._tweenObj.cur),this._tweenObj.prev=this._tweenObj.cur,this._requestStageUpdate()},_getData:function(){var e=this._color==="black"?i:r;return this._getPPI()>1?e.retina:e.normal},_getPPI:function(){var e=1,t=window.devicePixelRatio||1;return t>2.5&&(e=3),t>1.5&&(e=2),e},_updateHandler:function(){this._updateSprite()},_completeHandler:function(){this._isAnimating=!1},_mouseEnterHandler:function(e){t.trigger("menu:mouse:enter")},_mouseLeaveHandler:function(e){t.trigger("menu:mouse:leave")},_tapHandler:function(e){this._isActive?t.trigger("menu:close"):t.trigger("menu:open")},_closeAnimationCompleteHandler:function(e){this._tweenObj.cur=0,this._isActive=!1,this._isAnimating=!1},_eventOpenHandler:function(e){this._isActive=!0,this._startOpenAnimation()},_eventCloseHandler:function(e){this._startCloseAnimation()},_eventMouseEnterHandler:function(e){this._startMouseEnterAnimation()},_eventMouseLeaveHandler:function(e){this._startMouseLeaveAnimation()},_requestStageUpdate:function(){this._updateStage=!0},_tickHandler:function(e){this._stage&&this._updateStage&&(this._updateStage=!1,this._stage.update())}})}),define("app/views/pages/WorkView",["superhero","app/utils/ResizeManager","app/utils/ScrollManager","app/utils/EventBus","app/views/components/SectionIndicatorComponent","app/views/components/ArrowIconComponent","app/views/components/MenuIconComponent"],function(e,t,n,r,i,s,o){return e.View.extend({className:"page page-work",template:"pages/work",ui:{grid:".grid",projects:".project",projectImage:".project-image",projectLink:".project-link",projectOdd:".project--odd",sideTitle:".page-side-title",pageTitle:".page-work-title",caseIndex:".case-index"},components:{menuIcon:{selector:".button-main-menu",module:o},arrows:{selector:".sprite-animation-arrow",module:s}},events:{"click .page-work__arrow-up":"_buttonToTopClickHandler","click .section-indicator-button":"_sectionIndicatorButtonClickHandler","mouseenter .project-link":"_projectLinkMouseEnterHandler","mouseleave .project-link":"_projectLinkMouseLeaveHandler"},initialize:function(){_.bindAll(this,"_introPlay","_showArrows","_elementInViewportHandler")},onInitialized:function(){n.scrollTop(0),this._setup(),this._setupEventListeners()},onClose:function(){this._introTimeline.kill()},_setup:function(){this.addComponent("sectionIndicator",i,".case-index",{sections:this.ui.projects}),Settings.isMobile||(this._hideProjects(),this._registerScrollElements()),this._createIntroTimeline()},_setupEventListeners:function(){this.listenTo(n,"scroll",this._sectionIndicatorOnScrollHandler),this.listenTo(r,"menu:open",this._eventOpenHandler),this.listenTo(r,"menu:close",this._eventCloseHandler)},transitionIn:function(e){var t=e.previousFragment==="intro"?0:.2;TweenMax.delayedCall(t,this._introPlay)},transitionOut:function(e){TweenMax.to(this.el,.4,{alpha:0,ease:Power0.easeNone,onComplete:e})},_createIntroTimeline:function(){this._introTimeline=new TimelineMax({paused:!0}),this.ui.sideTitle&&this._introTimeline.from(this.ui.sideTitle,.2,{alpha:0,ease:Power0.easeNone},0),this._introTimeline.from(this.ui.pageTitle,.45,{y:80,ease:Power2.easeOut},0),this._introTimeline.from(this.ui.pageTitle,.4,{alpha:0,ease:Power0.easeNone},.03),this._introTimeline.from(this.ui.projects[0],.45,{y:80,ease:Power2.easeOut},.09),this._introTimeline.fromTo(this.ui.projectLink[0],.6,{y:120},{y:0,ease:Power2.easeOut},.09),this._introTimeline.fromTo(this.ui.projects[0],.2,{alpha:0},{alpha:1,delay:.03,ease:Power1.easeIn},.12),this._introTimeline.from(this.ui.caseIndex,.3,{alpha:0,ease:Power0.easeNone},.5),this._introTimeline.addCallback(this._showArrows,.4)},_hideProjects:function(){for(var e=0,t=this.ui.projects.length;e<t;e++)this.ui.projects[e].style.opacity=0},_registerScrollElements:function(){for(var e=0,t=this.ui.projects.length;e<t;e++)e!==0&&n.registerElementScrollNotification(this.ui.projects[e],this._elementInViewportHandler,350)},_showArrows:function(){for(var e=0;e<this.components.arrows.length;e++)this.components.arrows[e].show()},_introPlay:function(){this._introTimeline.play()},_scrollToSection:function(e){var t=this.ui.projects[e].offsetTop;n.scrollTo(null,-t)},_showProject:function(e){var t=e.querySelector(".project-link");TweenMax.fromTo(e,.5,{y:80},{y:0,clearProps:"y",force3D:!0,ease:Power2.easeOut}),TweenMax.fromTo(t,.6,{y:120},{y:0,clearProps:"y",force3D:!0,ease:Power2.easeOut}),TweenMax.fromTo(e,.2,{alpha:0},{alpha:1,clearProps:"alpha",force3D:!0,delay:.03,ease:Power1.easeIn})},_sectionIndicatorOnScrollHandler:function(e){this.components.sectionIndicator.scrollUpdate(e)},_sectionIndicatorButtonClickHandler:function(e){this._scrollToSection(e.currentTarget.dataset.index)},_buttonToTopClickHandler:function(){n.scrollTo(null,0)},_projectLinkMouseEnterHandler:function(e){this.components.arrows[e.currentTarget.dataset.index].hover()},_eventOpenHandler:function(e){this.ui.sideTitle&&TweenMax.to(this.ui.sideTitle,.2,{alpha:0,ease:Power0.easeNone})},_eventCloseHandler:function(e){this.ui.sideTitle&&TweenMax.to(this.ui.sideTitle,.2,{alpha:1,ease:Power0.easeNone})},_elementInViewportHandler:function(e){this._showProject(e)}})}),define("app/utils/GestureManager",["underscore","superhero"],function(e,t){return t.Module.extend({initialize:function(t){e.bindAll(this,"_touchstartHandler","_touchmoveHandler"),t.el.addEventListener("touchstart",this._touchstartHandler),t.el.addEventListener("touchmove",this._touchmoveHandler)},onClose:function(){options.el.removeEventListener("touchstart",this._touchstartHandler),options.el.removeEventListener("touchmove",this._touchmoveHandler)},_touchstartHandler:function(e){this._swipeStart(e)},_touchmoveHandler:function(e){this._swipeMove(e)},_swipeStart:function(e){this._swipe=this._swipe||{},this._swipe.start=this._swipe.start||{},this._swipe.delta=this._swipe.delta||{},this._swipe.start.x=e.touches[0].clientX,this._swipe.start.y=e.touches[0].clientY},_swipeMove:function(e){if(!this._swipe.start.x||!this._swipe.start.y)return;this._swipe.delta.x=this._swipe.start.x-e.touches[0].clientX,this._swipe.delta.y=this._swipe.start.y-e.touches[0].clientY,Math.abs(this._swipe.delta.x)>Math.abs(this._swipe.delta.y)?this._swipe.delta.x>0?this.trigger("swipe:left"):this.trigger("swipe:right"):this._swipe.delta.y>0?this.trigger("swipe:up"):this.trigger("swipe:down"),this._swipe.start.x=null,this._swipe.start.y=null}})}),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.glitchRefreshRate=e||5,this.glitchLinesX=t||4,this.glitchLinesY=n||30,this._glitchCouter=0}var t=createjs.extend(e,createjs.Filter);t.clone=function(){return new e(this.glitchRefreshRate,this.glitchLinesX,this.glitchLinesY)},t.toString=function(){return"[GlitchFilter]"},t._cloneArray=function(e){var t=[];for(var n=0;n<e.length;n++)t[n]=e[n];return t},t.getRandInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},t.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,o==null&&(o=t),u==null&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}return this._applyFilter(a)?(s.putImageData(a,o,u),!0):!1},t._applyFilter=function(e){this._glitchCouter++;var t=n=e.data,n=e.data,r=e.width,i=e.height,s=t.length;if(this._glitchCouter%this.glitchRefreshRate===0||!this._g){this._g=[];for(var o=0;o<Math.round(Math.random()*this.glitchLinesY)+4;o++){this._g[o]=[];for(var u=0;u<Math.round(Math.random()*this.glitchLinesX)+4;u++)this._g[o][u]=Math.round(Math.random())*Math.round(Math.random()*(r/2))}}var a,o,u,f,l,c,h;for(o=0;o<i;o++){f=Math.floor(this._g.length/i*o);for(u=0;u<r;u++)a=(o*r+u)*4,l=Math.floor(this._g[f].length/r*u),this._g[f][l]>0?(c=this._g[f][l]*4,h=a+c,h>0&&h<s&&(t[a]=n[a+c],t[a+2]=n[a+c+2])):t[a+3]=0}return!0},createjs.GlitchFilter=createjs.promote(e,"Filter")}(),define("app/utils/GlitchFilter",function(){}),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.glitchRefreshRate=e||5,this.glitchLinesX=t||4,this.glitchLinesY=n||30,this.glitchLinesY=this.glitchLinesY>301?this.glitchLinesY:301,this._glitchCouter=0}var t=createjs.extend(e,createjs.Filter);t.clone=function(){return new e(this.glitchRefreshRate,this.glitchLinesX,this.glitchLinesY)},t.toString=function(){return"[DistortFilter]"},t._cloneArray=function(e){var t=[];for(var n=0;n<e.length;n++)t[n]=e[n];return t},t.getRandInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},t._applyFilter=function(e){this._glitchCouter++;var t=n=e.data,n=e.data,r=e.width,i=e.height,s=t.length;if(this._glitchCouter%this.glitchRefreshRate===0||!this._g){this._g=[];for(var o=0;o<Math.round(Math.random()*this.glitchLinesY-300)+300;o++){this._g[o]=[];for(var u=0;u<this.glitchLinesX;u++)this._g[o][u]=Math.round(Math.random())*Math.round(Math.random()*3)}}var a,o,u,f,l,c,h;for(o=0;o<i;o++){f=Math.floor(this._g.length/i*o);for(u=0;u<r;u++){a=(o*r+u)*4;if(!this._g[f])continue;l=Math.floor(this._g[f].length/r*u),this._g[f][l]>0&&(c=this._g[f][l]*4,h=a+c,h>0&&h<s&&(t[a]=n[a+c],t[a+1]=n[a+c+1],t[a+2]=n[a+c+2],t[a+3]=n[a+c+3]))}}return!0},createjs.DistortFilter=createjs.promote(e,"Filter")}(),define("app/utils/DistortFilter",function(){}),define("app/views/components/CaseHeaderGalleryComponent",["superhero","app/utils/FileLoader","app/utils/ResizeManager","app/utils/GlitchFilter","app/utils/DistortFilter","app/models/CaseCollection"],function(e,t,n,r,i,s){return e.Component.extend({GLITCH_REFRESHRATE:4,GLITCH_LINES_X:4,GLITCH_LINES_Y:30,DISTORT_REFRESHRATE:2,DISTORT_LINES_X:1,DISTORT_LINES_Y:300,ui:{background:".case-header-background",content:".case-header-list-item",titles:".case-header-copy-title-label",titleLines:".case-header-copy-title-line",taglines:".case-header-copy-tagline",arrows:".sprite-animation-arrow"},initialize:function(e){_.bindAll(this,"show","_requestStageUpdate","_tickHandler","_transitionCompleteHandler","_showCompleteHandler"),this._options=e||{},this._options.useDefaultAnimation=this._options.useDefaultAnimation===!1?!1:!0,this._isAnimating=!1,this._previousSlideId=null,this._currentSlideId=0,this._fileLoader=new t},onInitialized:function(){this._width=n.viewportWidth(),this._height=n.viewportHeight(),this.glitchFilter=new createjs.GlitchFilter(this.GLITCH_REFRESHRATE,this.GLITCH_LINES_X,this.GLITCH_LINES_Y),this.distortFilter=new createjs.DistortFilter(this.DISTORT_REFRESHRATE,this.DISTORT_LINES_X,this._height),this._setupEventListeners(),this._createStage(),this._createStageSlider(),this._createSlides(),this._addSlider(),this._resize(),this._gotoActiveSlide()},onClose:function(){this._removeEventListeners(),this._stage.close()},show:function(){this._sliderWithGlitch.cache(0,0,this._width,this._height,.4),this._sliderContainer.cache(0,0,this._width,this._height,.5),TweenMax.fromTo(this._slider,.5,{scaleX:1.4,scaleY:1.4},{scaleX:1,scaleY:1,ease:Power3.easeOut,onUpdate:this._requestStageUpdate}),this._sliderWithGlitch&&TweenMax.fromTo(this._sliderWithGlitch,.4,{alpha:0},{alpha:1,repeat:1,yoyo:!0,ease:Power1.easeIn,onUpdate:this._requestStageUpdate,onComplete:this._showCompleteHandler}),this._sliderNoise&&TweenMax.fromTo(this._sliderNoise,.4,{alpha:0},{alpha:1,repeat:1,yoyo:!0,ease:Power1.easeIn,onUpdate:this._requestStageUpdate})},next:function(){if(this._isAnimating)return;this._swapSlideIds(),this._currentSlideId++,this._currentSlideId>this._slider.children.length-1&&(this._currentSlideId=0),this._animate({direction:-1})},previous:function(){if(this._isAnimating)return;this._swapSlideIds(),this._currentSlideId--,this._currentSlideId<0&&(this._currentSlideId=this._slider.children.length-1),this._animate({direction:1})},gotoAndPlay:function(e){if(this._isAnimating||e>this._slider.children.length-1||e<0)return;this._swapSlideIds(),this._currentSlideId=e,this._animate()},gotoInstantly:function(e){this._swapSlideIds(),this._currentSlideId=e,this._previousSlide=this._slider.getChildAt(this._previousSlideId),this._currentSlide=this._slider.getChildAt(this._currentSlideId),this._previousSlideContent=this.ui.content[this._previousSlideId],this._currentSlideContent=this.ui.content[this._currentSlideId],this._previousSlideContent&&TweenMax.set(this._previousSlideContent,{alpha:0,x:this._width}),this._currentSlideContent&&TweenMax.set(this._currentSlideContent,{alpha:1,x:0}),this._previousSlide&&TweenMax.set(this._previousSlide,{x:this._width}),this._currentSlide&&TweenMax.set(this._currentSlide,{x:0}),this._requestStageUpdate()},_setupEventListeners:function(){TweenMax.ticker.addEventListener("tick",this._tickHandler),this.listenTo(n,"resize",this._resizeHandler),this.listenTo(n,"resize:complete",this._resizeHandler)},_removeEventListeners:function(){TweenMax.ticker.removeEventListener("tick",this._tickHandler)},_resize:function(){this._width=n.viewportWidth(),this._height=n.viewportHeight(),this._defaultResize(),this._resizeStage(),this._resizeSlides(),this._resizeSliderNoise(),this._requestStageUpdate(),this._swapSlideIds()},_animate:function(e){this._sliderWithGlitch.cache(0,0,this._width,this._height,.4),this._sliderContainer.cache(0,0,this._width,this._height,.5);if(this._isAnimating||this._currentSlideId===this._previousSlideId)return;this._isAnimating=!0,e=e||{},e.direction=e.direction||this._direction(),this._previousSlide=this._slider.getChildAt(this._previousSlideId),this._currentSlide=this._slider.getChildAt(this._currentSlideId),this._previousSlideContent=this.ui.content[this._previousSlideId],this._currentSlideContent=this.ui.content[this._currentSlideId],this._defaultTransition(e)},_direction:function(){return this._currentSlideId>this._previousSlideId?-1:1},_swapSlideIds:function(){this._previousSlideId=this._currentSlideId},_transitionCompleteHandler:function(e){this._isAnimating=!1,this.trigger("transition:complete",{currentSlideId:this._currentSlideId,previousSlideId:this._previousSlideId,direction:e.direction}),this._sliderWithGlitch.uncache(),this._sliderContainer.uncache(),this._requestStageUpdate()},_defaultTransition:function(e){if(!this._options.useDefaultAnimation)return;var t=new TimelineMax;t.timeScale(2),this._previousSlide&&t.fromTo(this._previousSlide,1.2,{x:0},{x:this._width*e.direction,ease:Power2.easeInOut,onUpdate:this._requestStageUpdate},0),this._currentSlide&&t.fromTo(this._currentSlide,1.2,{x:this._width*-e.direction},{x:0,ease:Power2.easeInOut,onUpdate:this._requestStageUpdate},0),this._previousSlideContent&&(t.fromTo(this._previousSlideContent,1.2,{x:0},{x:this._width*e.direction,ease:Power2.easeInOut},0),t.fromTo(this._previousSlideContent,.6,{alpha:1},{alpha:0,ease:Power0.easeNone},0));if(this._currentSlideContent){var n=1.1;t.set(this._currentSlideContent,{alpha:1,x:0},n),t.fromTo(this.ui.titleLines[this._currentSlideId],.3,{scaleX:0},{scale:1,ease:Power1.easeOut},n),t.fromTo(this.ui.titleLines[this._currentSlideId],.2,{alpha:0},{alpha:1,ease:Power0.easeNone},n),t.fromTo(this.ui.titles[this._currentSlideId],.3,{x:-30},{x:0,ease:Power1.easeOut},n),t.fromTo(this.ui.titles[this._currentSlideId],.2,{alpha:0},{alpha:1,ease:Power0.easeNone},n),t.fromTo(this.ui.taglines[this._currentSlideId],.35,{x:-50},{x:0,ease:Power1.easeNone},n),t.fromTo(this.ui.taglines[this._currentSlideId],.35,{alpha:0},{alpha:1,ease:Power0.easeNone},n),t.fromTo(this.ui.arrows[this._currentSlideId],.35,{alpha:0},{alpha:1,ease:Power0.easeNone},n+.3)}this._sliderWithGlitch&&t.fromTo(this._sliderWithGlitch,.6,{alpha:0},{alpha:1,repeat:1,yoyo:!0,ease:Power1.easeIn,onUpdate:this._requestStageUpdate},0),this._sliderNoise&&t.fromTo(this._sliderNoise,.6,{alpha:0},{alpha:1,repeat:1,yoyo:!0,ease:Power1.easeIn,onUpdate:this._requestStageUpdate},0),t.addCallback(this._transitionCompleteHandler,1.7,[e])},_defaultResize:function(){if(!this._options.useDefaultAnimation)return;var e,t,n,r;for(e=0,t=this._slider.children.length;e<t;e++)n=this._slider.getChildAt(e),r=this.ui.content[e],e!==this._currentSlideId&&(TweenMax.set(n,{x:this._width}),TweenMax.set(r,{x:this._width}))},_createStage:function(){this._stage=new createjs.Stage(this.ui.background),this._stage.enableDOMEvents(!1)},_createStageSlider:function(){this._canvasSlider=document.createElement("canvas"),this._stageSlider=new createjs.Stage(this._canvasSlider),this._stageSlider.enableDOMEvents(!1)},_resizeStage:function(){this.ui.background.width=this._width,this.ui.background.height=this._height,this.ui.background.style.width=this._width+"px",this.ui.background.style.height=this._height+"px",this._canvasSlider.width=this._width,this._canvasSlider.height=this._height,this._canvasSlider.style.width=this._width+"px",this._canvasSlider.style.height=this._height+"px"},_requestStageUpdate:function(){this._stageUpdateRequest=!0},_createSlides:function(){this._slider=new createjs.Container,this._slider.regX=this._width*.5,this._slider.regY=this._height*.5,this._slider.x=this._width*.5,this._slider.y=this._height*.5,this._slider.scaleX=1.3,this._slider.scaleY=1.3,this._stageSlider.addChild(this._slider);var e;for(var t=0,n=s.length;t<n;t++)e=this._createSlide(s.at(t)),this._slider.addChild(e);this._requestStageUpdate()},_addSlider:function(){var e=new createjs.Bitmap(this._canvasSlider);this._sliderWithGlitch=new createjs.Bitmap(this._canvasSlider),this._sliderWithGlitch.filters=[this.glitchFilter],this._sliderWithGlitch.alpha=0,this._sliderNoise=new createjs.Bitmap(this._fileLoader.getFile("noise")),this._sliderNoise.alpha=0,this._sliderContainer=new createjs.Container,this._sliderContainer.filters=[this.distortFilter],this._sliderContainer.addChild(e,this._sliderWithGlitch,this._sliderNoise),this._stage.addChild(this._sliderContainer)},_createSlide:function(e){var t=new createjs.Container;t.name=e.get("slug");var n=new createjs.Shape;n.graphics.beginFill("#00FF00"),n.graphics.drawRect(0,0,this._width,this._height);var r=this._fileLoader.getFile(e.get("slug")+"-background"),i=new createjs.Bitmap(r);i.name="backgroundBitmap",i.regX=i.image.width/2,i.regY=i.image.height/2,this._positionBackgroundBitmap(i),this._scaleBitmap(i),t.addChild(i);if(e.get("header_image")){var s=this._fileLoader.getFile(e.get("slug")),o=new createjs.Bitmap(s);o.name="foregroundBitmap",o.regX=o.image.width,o.regY=o.image.height/2,this._positionForegroundBitmap(o),t.addChild(o)}return t},_gotoActiveSlide:function(){var e=s.getActiveModel(),t=s.indexOf(e);this.gotoInstantly(t)},_positionBackgroundBitmap:function(e){var t=new createjs.Shape;t.graphics.beginFill("#00FF00"),t.graphics.drawRect(0,0,this._width,this._height),e.x=n.viewportWidth()/2,e.y=this._height/2,e.mask=t},_positionForegroundBitmap:function(e){var t=Math.min(this._width,1440);e.x=Math.round(t+(this._width-t)/2-t*.1),e.y=Math.round(this._height*.5),this._width<=Settings.breakpoints.small?e.scaleX=e.scaleY=0:this._width<=Settings.breakpoints.medium?e.scaleX=e.scaleY=.8:e.scaleX=e.scaleY=1},_resizeSlides:function(){for(var e=0,t=this._slider.children.length;e<t;e++)this._resizeSlide(this._slider.getChildAt(e))},_resizeSlide:function(e){if(e.getChildByName("backgroundBitmap")){var t=e.getChildByName("backgroundBitmap");this._positionBackgroundBitmap(t),this._scaleBitmap(t)}if(e.getChildByName("foregroundBitmap")){var n=e.getChildByName("foregroundBitmap");this._positionForegroundBitmap(n)}},_resizeSliderNoise:function(e){if(!this._sliderNoise)return;this._sliderNoise.regX=this._sliderNoise.image.width/2,this._sliderNoise.regY=this._sliderNoise.image.height/2,this._sliderNoise.x=n.viewportWidth()/2,this._sliderNoise.y=this._height/2;var t=Math.max(this._width/this._sliderNoise.image.width,this._height/this._sliderNoise.image.height);this._sliderNoise.scaleX=this._sliderNoise.scaleY=t},_scaleBitmap:function(e){var t=Math.max(this._width/e.image.width,this._height/e.image.height);e.scaleX=e.scaleY=t},_resizeHandler:function(){this._resize()},_showCompleteHandler:function(){this._sliderWithGlitch.uncache(),this._sliderContainer.uncache(),this._requestStageUpdate()},_tickHandler:function(){this._stageUpdateRequest&&(this._stageUpdateRequest=!1,this._sliderWithGlitch.cacheCanvas&&this._sliderWithGlitch.updateCache(),this._sliderContainer.cacheCanvas&&this._sliderContainer.updateCache(),this._stageSlider.update(),this._stage.update())}})}),define("app/views/components/PaginatorComponent",["superhero"],function(e){return e.Component.extend({_index:0,_currentIndex:0,_iteration:0,_locked:!1,events:{},ui:{items:".list-item-paginator",buttons:".button-paginator"},initialize:function(){this._index=0,this._locked=!1,this._iteration=0},onInitialized:function(){this.select(0),this.transitionIn(),TweenMax.set(this.ui.items,{alpha:0,scaleX:.4,x:0})},onClose:function(){},transitionIn:function(){this.show(.7)},show:function(e){e=e||0,TweenMax.staggerTo(this.ui.items,.08,{alpha:1,x:0,scaleX:1,delay:e,ease:SlowMo.easeOut},.04)},hide:function(){TweenMax.staggerTo(this.ui.items,.08,{alpha:0,x:16.8,scaleX:.4,overwrite:"all",ease:SlowMo.easeOut},.04)},next:function(){this._currentIndex++,this._currentIndex>this.ui.items.length-1&&(this._currentIndex=0),this.select(this._currentIndex)},previous:function(){this._currentIndex--,this._currentIndex<0&&(this._currentIndex=this.ui.items.length-1),this.select(this._currentIndex)},select:function(e){if(this._locked)return;this._deselectCurrent(),e>this.ui.items.length-1?(this._iteration=1,e-=this.ui.items.length):this._iteration=0;var t=this.ui.buttons[e];t.classList.add("button-paginator--active"),t.parentNode.classList.add("list-item--active"),this._index=e},lock:function(){this._locked=!0},unlock:function(){this._locked=!1},_deselectCurrent:function(){var e=this.ui.buttons[this._index];e.classList.remove("button-paginator--active"),e.parentNode.classList.remove("list-item--active")}})}),define("app/views/components/CaseHeaderComponent",["superhero","app/utils/ResizeManager","app/utils/ScrollManager","app/utils/GestureManager","app/models/CaseCollection","app/views/components/CaseHeaderGalleryComponent","app/views/components/PaginatorComponent","app/views/components/ArrowIconComponent"],function(e,t,n,r,i,s,o,u){return e.View.extend({_throttleDuration:1e3,_isPageSideTitleVisible:!0,_currentSlideIndex:0,_isFirstTime:!0,_isMetadataVisible:!0,_isPaginatorVisible:!0,ui:{caseHeaderGallery:".case-header-gallery",paginatorItems:".list-item-paginator",pageSideTitle:".page-side-title",caseHeaderItems:".case-header-list-item",title:".case-header-copy-title-label",titleLine:".case-header-copy-title-line",tagline:".case-header-copy-tagline",buttonNext:".button-switch-case--next",buttonNextInner:".button-switch-case-inner--next",buttonNextIcon:".button-switch-case-icon--next",buttonNextLabel:".button-switch-case-label--next",buttonPrevious:".button-switch-case--previous",buttonPreviousInner:".button-switch-case-inner--previous",buttonPreviousIcon:".button-switch-case-icon--previous",buttonPreviousLabel:".button-switch-case-label--previous"},events:{"click .button-paginator":"_buttonClickHandler","tap .button-switch-case--next":"_buttonSwitchCaseNextTapHandler","mouseenter .button-switch-case--next":"_buttonSwitchCaseNextMouseEnterHandler","mouseleave .button-switch-case--next":"_buttonSwitchCaseNextMouseLeaveHandler","tap .button-switch-case--previous":"_buttonSwitchCasePreviousTapHandler","mouseenter .button-switch-case--previous":"_buttonSwitchCasePreviousMouseEnterHandler","mouseleave .button-switch-case--previous":"_buttonSwitchCasePreviousMouseLeaveHandler","tap .case-header-button-arrow":"_buttonArrowTapHandler"},components:{gallery:{selector:".case-header-gallery",module:s},paginator:{selector:".case-paginator",module:o},arrows:{selector:".sprite-animation-arrow",module:u}},initialize:function(){this._slugs=[],this._gotoThrottled=_.throttle(this._goto,this._throttleDuration)},onInitialized:function(){this._gestureManager=new r({el:this.el}),this._getSlideOrder(),this._hideSwitchCaseButtons(),this._updateSideTitle(),this._setupEventListeners(),this._resize()},onClose:function(){this._arrowPulseCall&&this._arrowPulseCall.kill()},playIntro:function(){var e=new TimelineMax;e.fromTo(this.ui.titleLine,.3,{scaleX:0},{scale:1,ease:Power1.easeOut},.3),e.fromTo(this.ui.titleLine,.2,{alpha:0},{alpha:1,ease:Power0.easeNone},.3),e.fromTo(this.ui.title,.3,{x:-30},{x:0,ease:Power1.easeOut},.3),e.fromTo(this.ui.title,.2,{alpha:0},{alpha:1,ease:Power0.easeNone},.3),e.fromTo(this.ui.tagline,.35,{x:-50},{x:0,ease:Power1.easeNone},.3),e.fromTo(this.ui.tagline,.35,{alpha:0},{alpha:1,ease:Power0.easeNone},.3),e.addCallback(this.components.arrows[this._currentSlideIndex].pulse,.7),e.addCallback(this.components.gallery.show,0)},_setupEventListeners:function(){this.listenTo(t,"resize",this._resizeHandler),this.listenTo(t,"resize:complete",this._resizeHandler),Settings.device.type!=="mobile"&&this.listenTo(n,"scroll",this._scrollHandler),this.listenTo(this._gestureManager,"swipe:left",this._gestureManagerSwipeLeftHandler),this.listenTo(this._gestureManager,"swipe:right",this._gestureManagerSwipeRightHandler),this.listenTo(this.components.gallery,"transition:complete",this._galleryTransitionCompleteHandler)},gotoByModel:function(e){var t=this._slugs.indexOf(e.get("slug"));this._previousSlideIndex=this._currentSlideIndex,this._currentSlideIndex=t,this._useAnimation?this.components.gallery.gotoAndPlay(t):this.components.gallery.gotoInstantly(t),this.components.arrows[this._previousSlideIndex].stop(),this.components.paginator.select(t),this._arrowPulseCall=TweenMax.delayedCall(.8,function(){this.components.arrows[this._currentSlideIndex].pulse()}.bind(this)),this._updateSideTitle(),this._useAnimation=!1},_goto:function(t,n){var r=this._slugs[t];this.model=i.getModelBySlug(r),e.history.navigate("work/"+r,{trigger:!0})},_getNextSlug:function(){this._previousSlideIndex=this._currentSlideIndex;var e=this._currentSlideIndex+1;return e>this._slugs.length-1&&(e=0),this._currentSlideIndex=e,this._slugs[e]},_getPreviousSlug:function(){this._previousSlideIndex=this._currentSlideIndex;var e=this._currentSlideIndex-1;return e<0&&(e=this._slugs.length-1),this._currentSlideIndex=e,this._slugs[e]},_getSlideOrder:function(){for(var e=0,t=this.ui.caseHeaderItems.length;e<t;e++)this._slugs.push(this.ui.caseHeaderItems[e].dataset.slug);var n=i.getActiveModel();this._currentSlideIndex=i.indexOf(n)},_updateSideTitle:function(){if(Settings.isMobile)return;this.ui.pageSideTitle.textContent="Work / "+this.model.get("title")},_hideSwitchCaseButtons:function(){this.ui.buttonNextInner.style.opacity=0,this.ui.buttonPreviousInner.style.opacity=0},_showButtonSwitchCaseNext:function(){TweenMax.fromTo(this.ui.buttonNextInner,.3,{x:60},{x:0,ease:Power2.easeOut}),TweenMax.fromTo(this.ui.buttonNextInner,.25,{alpha:0},{alpha:1,ease:Power0.easeNone}),TweenMax.fromTo(this.ui.buttonNextLabel,.3,{x:40},{x:0,ease:Power2.easeOut})},_hideButtonSwitchCaseNext:function(){TweenMax.fromTo(this.ui.buttonNextInner,.2,{x:0},{x:-40,ease:Power2.easeIn}),TweenMax.fromTo(this.ui.buttonNextInner,.2,{alpha:1},{alpha:0,ease:Power0.easeNone}),TweenMax.fromTo(this.ui.buttonNextLabel,.2,{x:0},{x:-30,ease:Power2.easeIn})},_showButtonSwitchCasePrevious:function(){TweenMax.fromTo(this.ui.buttonPreviousInner,.3,{x:-60},{x:0,ease:Power2.easeOut}),TweenMax.fromTo(this.ui.buttonPreviousInner,.25,{alpha:0},{alpha:1,ease:Power0.easeNone}),TweenMax.fromTo(this.ui.buttonPreviousLabel,.3,{x:-40},{x:0,ease:Power2.easeOut})},_hideButtonSwitchCasePrevious:function(){TweenMax.fromTo(this.ui.buttonPreviousInner,.2,{x:0},{x:40,ease:Power2.easeIn}),TweenMax.fromTo(this.ui.buttonPreviousInner,.2,{alpha:1},{alpha:0,ease:Power0.easeNone}),TweenMax.fromTo(this.ui.buttonPreviousLabel,.2,{x:0},{x:30,ease:Power2.easeIn})},_showPaginator:function(){if(this._isPaginatorVisible)return;this.components.paginator.show(.3),this._isPaginatorVisible=!0},_hidePaginator:function(){if(!this._isPaginatorVisible)return;this.components.paginator.hide(),this._isPaginatorVisible=!1},_showPageSideTitle:function(){if(this._isPageSideTitleVisible)return;TweenMax.to(this.ui.pageSideTitle,.2,{autoAlpha:1,ease:Power0.easeNone}),this._isPageSideTitleVisible=!0},_hidePageSideTitle:function(){if(!this._isPageSideTitleVisible)return;TweenMax.to(this.ui.pageSideTitle,.1,{autoAlpha:0,ease:Power0.easeNone}),this._isPageSideTitleVisible=!1},_resize:function(){this.el.style.height=t.viewportHeight()+"px"},_gotoWithAnimation:function(e,t){if(this._currentSlideIndex===e)return;this._useAnimation=!0,this._gotoThrottled(e,t)},_getNextIndex:function(){var e=this._currentSlideIndex;return e++,e=e>this._slugs.length-1?0:e,e},_getPreviousIndex:function(){var e=this._currentSlideIndex;return e--,e=e<0?this._slugs.length-1:e,e},_buttonClickHandler:function(e){var t=parseInt(e.currentTarget.dataset.index);this._gotoWithAnimation(t,!0)},_buttonSwitchCaseNextTapHandler:function(e){if(Settings.isDesktop){var t=this._getNextIndex();this._gotoWithAnimation(t,!0)}},_buttonSwitchCaseNextMouseEnterHandler:function(e){Settings.isDesktop&&this._showButtonSwitchCaseNext()},_buttonSwitchCaseNextMouseLeaveHandler:function(e){Settings.isDesktop&&this._hideButtonSwitchCaseNext()},_buttonSwitchCasePreviousTapHandler:function(e){if(Settings.isDesktop){var t=this._getPreviousIndex();this._gotoWithAnimation(t,!0)}},_buttonSwitchCasePreviousMouseEnterHandler:function(e){Settings.isDesktop&&this._showButtonSwitchCasePrevious()},_buttonSwitchCasePreviousMouseLeaveHandler:function(e){Settings.isDesktop&&this._hideButtonSwitchCasePrevious()},_gestureManagerSwipeLeftHandler:function(e){var t=this._getNextIndex();this._gotoWithAnimation(t,!0)},_gestureManagerSwipeRightHandler:function(e){var t=this._getPreviousIndex();this._gotoWithAnimation(t,!0)},_buttonArrowTapHandler:function(){n.scrollTo(null,-t.viewportHeight())},_galleryTransitionCompleteHandler:function(e){this._isAnimating=!1},_scrollHandler:function(e){e.y>20?this._showPageSideTitle():this._hidePageSideTitle(),e.y>5?this._hidePaginator():this._showPaginator()},_resizeHandler:function(e){this._resize()}})}),define("app/views/pages/CaseView",["superhero","app/utils/ScrollManager","app/utils/ResizeManager","app/views/components/CaseHeaderComponent","app/views/components/MenuIconComponent","app/views/components/ButtonPrimaryComponent"],function(e,t,n,r,i,s){return e.LayoutView.extend({className:"page page-case",template:"pages/case",ui:{container:".case-header-container",client:".case-header-metadata-value-client",projectType:".case-header-metadata-value-project-type",headerButton:".case-header-metadata-button",headerButtonLabel:".case-header-metadata-button-label",caseHeaderButtonColumn:".case-header-metadata-column--last",metadata:".case-header-metadata",metadataKeys:".case-header-metadata-key",metadataValues:".case-header-metadata-value"},regions:{"case":".case-content"},components:{menuIcon:{selector:".button-main-menu",module:i}},onInitialized:function(e){this.el.style.opacity=0,this._setup(),this._resize(),this._updateMetadata(),this._setupEventListeners()},transitionIn:function(){t.scrollTop(0),TweenMax.to(this.el,.3,{alpha:1,ease:Power0.easeNone}),this.components.caseHeaderComponent.playIntro()},transitionOut:function(e){TweenMax.to(this.el,.2,{alpha:0,ease:Power0.easeNone,onComplete:e})},_setup:function(){this.addComponent("caseHeaderComponent",r,".case-header",{model:this.model}),Settings.device.type!=="mobile"&&(this.addComponent("buttonPrimary",s,".button-primary"),this._hideMetadata(!0))},_setupEventListeners:function(){Settings.device.type!=="mobile"&&this.listenTo(t,"scroll",this._scrollHandler),this.listenTo(n,"resize",this._resizeHandler),this.listenTo(n,"resize:complete",this._resizeHandler)},updateHeader:function(e){this.model=e,this.components.caseHeaderComponent.gotoByModel(this.model),this._updateMetadata(),t.resetElementScrollNotifications()},_updateMetadata:function(){this.ui.client.textContent=this.model.get("client"),this.ui.projectType.textContent=this.model.get("project_type"),this.model.get("header_button")?(this.ui.caseHeaderButtonColumn.style.display=null,this.ui.headerButtonLabel[0].textContent=this.model.get("header_button"),this.ui.headerButtonLabel[1].textContent=this.model.get("header_button"),this.ui.headerButton.href=this.model.get("header_button_url")):this.ui.caseHeaderButtonColumn.style.display="none"},_showMetadata:function(){if(this._isMetadataVisible)return;var e=new TimelineMax;e.to(this.ui.metadata,.2,{y:0,ease:Power2.easeOut},0),e.fromTo(this.ui.metadataKeys,.3,{y:7},{y:0,ease:Power1.easeOut},.1),e.fromTo(this.ui.metadataKeys,.2,{alpha:0},{alpha:1,ease:Power0.easeNone},.1),e.fromTo(this.ui.metadataValues,.3,{y:-7},{y:0,ease:Power1.easeOut},.1),e.fromTo(this.ui.metadataValues,.2,{alpha:0},{alpha:1,ease:Power0.easeNone},.1),this._isMetadataVisible=!0},_hideMetadata:function(e){e=e||!1;if(!this._isMetadataVisible&&!e)return;var t=e?0:.2,n=Settings.device.type==="desktop"?120:this.ui.metadata.offsetHeight;TweenMax.to(this.ui.metadata,t,{y:n,ease:Power2.easeOut}),this._isMetadataVisible=!1},_resize:function(){Settings.isMobile||this._resizeContainer()},_resizeContainer:function(){this.ui.container.style.width=n.viewportWidth()+"px",this.ui.container.style.height=n.viewportHeight()+"px"},_scrollHandler:function(e){e.y>20?this._showMetadata():this._hideMetadata()},_resizeHandler:function(){this._resize()}})}),define("app/views/components/CaseLazyComponent",["superhero","app/utils/ScrollManager","app/utils/FileLoader"],function(e,t,n){return e.View.extend({__settings:{},initialize:function(e){e&&(this.__settings=e),this.fileLoader||(this.fileLoader=new n)},onInitialized:function(){_.bindAll(this,"_elementInViewportHandler"),t.registerElementScrollNotification(this.el,this._elementInViewportHandler,-200)},onClose:function(){this.__settings=null},_elementInViewportHandler:function(){this.onInitializedLazy&&this.onInitializedLazy(this.__settings)}})}),define("app/views/components/VideoComponent",["superhero","app/utils/ResizeManager"],function(e,t){return e.Component.extend({initialize:function(){_.bindAll(this,"_videoEndedHandler","_timeUpdateHandler")},onInitialized:function(){this._videoWidth=this.el.width,this._videoHeight=this.el.height,this._resize(),this._setupEventListeners()},ui:{videoPlayer:".section-video-player",videoStatus:".status",button:".button-video",buttonPlay:".button-video--play",buttonPause:".button-video--pause"},onClose:function(){this._removeEventListeners()},play:function(){this.el.play()},pause:function(){this.el.pause()},paused:function(){return this.el.paused},stop:function(){this.el.currentTime=0,this.el.pause()},mute:function(){this.el.muted=!0},unmute:function(){this.el.muted=!1},getCurrentTime:function(){return this.el.currentTime},_getDuration:function(){return this.el.duration},_setupEventListeners:function(){this.listenTo(t,"resize",this._resizeHandler),this.listenTo(t,"resize:complete",this._resizeHandler),this.el.addEventListener("timeupdate",this._timeUpdateHandler),this.el.addEventListener("ended",this._videoEndedHandler)},_removeEventListeners:function(){this.el.removeEventListener("timeupdate",this._timeUpdateHandler),this.el.removeEventListener("ended",this._videoEndedHandler)},_resize:function(){this._width=this.el.parentNode.offsetWidth,this._height=this.el.parentNode.offsetHeight;var e=Math.min(this._width/this._videoWidth,this._height/this._videoHeight),t=this._videoWidth*e-this._width,n=this._videoHeight*e-this._height;this.el.style.width=this._videoWidth*e+"px",this.el.style.height=this._videoHeight*e+"px",this.el.style.marginTop=-Math.round(n/2)+"px",this.el.style.marginLeft=-Math.round(t/2)+"px"},_resizeHandler:function(){this._resize()},_videoEndedHandler:function(){this.trigger("video:ended")},_videoProgress:function(){var e=this.getCurrentTime(),t=this._getDuration(),n=100/t*e,r=-100+n},_timeUpdateHandler:function(){this._videoProgress()}})});var Froogaloop=function(){function e(t){return new e.fn.init(t)}function t(e,t,n){if(!n.contentWindow.postMessage)return!1;e=JSON.stringify({method:e,value:t}),n.contentWindow.postMessage(e,o)}function n(e){var t,n;try{t=JSON.parse(e.data),n=t.event||t.method}catch(r){}"ready"!=n||s||(s=!0);if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===o&&(o=e.origin),e=t.value;var u=t.data,a=""===a?null:t.player_id;return t=a?i[a][n]:i[n],n=[],t?(void 0!==e&&n.push(e),u&&n.push(u),a&&n.push(a),0<n.length?t.apply(null,n):t.call()):!1}function r(e,t,n){n?(i[n]||(i[n]={}),i[n][e]=t):i[e]=t}var i={},s=!1,o="*";return e.fn=e.prototype={element:null,init:function(e){return"string"==typeof e&&(e=document.getElementById(e)),this.element=e,this},api:function(e,n){if(!this.element||!e)return!1;var i=this.element,s=""!==i.id?i.id:null,o=n&&n.constructor&&n.call&&n.apply?null:n,u=n&&n.constructor&&n.call&&n.apply?n:null;return u&&r(e,u,s),t(e,o,i),this},addEvent:function(e,n){if(!this.element)return!1;var i=this.element,o=""!==i.id?i.id:null;return r(e,n,o),"ready"!=e?t("addEventListener",e,i):"ready"==e&&s&&n.call(null,o),this},removeEvent:function(e){if(!this.element)return!1;var n=this.element,r=""!==n.id?n.id:null;e:{if(r&&i[r]){if(!i[r][e]){r=!1;break e}i[r][e]=null}else{if(!i[e]){r=!1;break e}i[e]=null}r=!0}"ready"!=e&&r&&t("removeEventListener",e,n)}},e.fn.init.prototype=e.fn,window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),window.Froogaloop=window.$f=e}();define("vendor/froogaloop2.min",function(){}),define("app/modules/VideoModule",["superhero","app/views/components/CaseLazyComponent","app/views/components/VideoComponent","vendor/froogaloop2.min"],function(e,t,n){var r={VIMEO_URL:"https://player.vimeo.com/video/[ID]?api=1"};return t.extend({ui:{container:".section-video-container",cover:".section-video-cover",playButton:".button-video--play",pauseOverlay:".section-video-pause-overlay"},events:{"click .button-video--play":"_buttonPlayClickHandler","click .section-video-pause-overlay":"_pauseOverlayClickHandler"},initialize:function(){_.bindAll(this,"_playerReadyHandler","_playerPlayHandler","_playerPauseHandler","_playerFinishHandler","_iframeLoadHandler")},onInitializedLazy:function(){this._addVideoFrame()},onClose:function(){this._player&&(this._removePlayerEvents(),this._player.api("unload")),this.ui.iframe&&this.ui.iframe.removeEventListener("load",this._iframeLoadHandler)},_addVideoFrame:function(){var e=this.ui.container.dataset.vimeoId;this.ui.iframe=document.createElement("iframe"),this.ui.iframe.addEventListener("load",this._iframeLoadHandler),this.ui.iframe.src=this.constructor.VIMEO_URL.replace("[ID]",e),this.ui.iframe.className="section-video-vimeo-iframe",this.ui.container.appendChild(this.ui.iframe)},_setupPlayer:function(){this._player=$f(this.ui.iframe),this._player.addEvent("ready",this._playerReadyHandler),Settings.isDesktop&&(this.ui.playButton.style.zIndex=20)},_addPlayerEvents:function(){this._player.addEvent("play",this._playerPlayHandler),this._player.addEvent("pause",this._playerPauseHandler),this._player.addEvent("finish",this._playerFinishHandler)},_removePlayerEvents:function(){this._player.removeEvent("ready",this._playerReadyHandler),this._player.removeEvent("play",this._playerPlayHandler),this._player.removeEvent("pause",this._playerPauseHandler),this._player.removeEvent("finish",this._playerFinishHandler)},_play:function(){this._player.api("play"),this._showPlayer(),this._hidePlayerElements()},_showPlayer:function(){this.ui.container.style.opacity=1},_hidePlayer:function(){this.ui.container.style.opacity=.01},_showPlayerElements:function(){TweenMax.to(this.ui.cover,.3,{autoAlpha:1,ease:Power0.easeNone}),TweenMax.to(this.ui.playButton,.3,{autoAlpha:1,ease:Power0.easeNone})},_hidePlayerElements:function(){TweenMax.to(this.ui.cover,.3,{autoAlpha:0,ease:Power0.easeNone}),TweenMax.to(this.ui.playButton,.3,{autoAlpha:0,ease:Power0.easeNone})},_buttonPlayClickHandler:function(e){this._play()},_pauseOverlayClickHandler:function(e){this._isPlaying?this._player.api("pause"):this._player.api("play")},_playerReadyHandler:function(e){this._addPlayerEvents()},_showPauseOverlay:function(){this.ui.pauseOverlay.style.visibility="visible",this.ui.pauseOverlay.style.opacity=1},_hidePauseOverlay:function(){this.ui.pauseOverlay.style.visibility="hidden",this.ui.pauseOverlay.style.opacity=0},_playerPlayHandler:function(e){this._isPlaying=!0,this._showPlayer(),this._hidePlayerElements(),Settings.device.os==="AndroidOS"&&this._showPauseOverlay()},_playerPauseHandler:function(e){this._isPlaying=!1},_playerFinishHandler:function(e){this._hidePlayer(),this._showPlayerElements(),this.ui.playButton.style.zIndex=20,Settings.device.os==="AndroidOS"&&this._hidePauseOverlay()},_iframeLoadHandler:function(){this._setupPlayer()}},r)}),define("app/views/components/GalleryComponent",["superhero","app/utils/ResizeManager","app/views/components/CaseLazyComponent"],function(e,t,n){return n.extend({MARGIN_SLIDE:64,_currentSlideId:0,_isAnimating:!1,_slidesArray:[],_timeline:null,ui:{slides:".list-item"},initialize:function(){this._currentSlideId=0,this._isAnimating=!1,this._slidesArray=[],this._timeline=new TimelineMax({paused:!0}),_.bindAll(this,"_animateOnCompleteHandler")},onInitializedLazy:function(e){this._setupEventListerners(),this._reorderSlides(),this._resize()},_setupEventListerners:function(){this.listenTo(t,"resize",this._resizeHandler),this.listenTo(t,"resize:complete",this._resizeHandler)},"goto":function(e){e>this._currentSlideId&&this.next(e-this._currentSlideId),e<this._currentSlideId&&this.previous(this._currentSlideId-e)},next:function(e){if(this._isAnimating)return;e=e||1,this._timeline.clear();for(var t=0;t<e;t++)this._slidesArray.push(this._slidesArray.shift()),this._addStepToTimeline(1,t),this._currentSlideId++,this._currentSlideId>=this._slidesArray.length&&(this._currentSlideId=0);this._animate()},previous:function(e){if(this._isAnimating)return;e=e||1,this._timeline.clear();for(var t=0;t<e;t++)this._slidesArray.unshift(this._slidesArray.pop()),this._addStepToTimeline(-1,t),this._currentSlideId--,this._currentSlideId<0&&(this._currentSlideId=this._slidesArray.length-1);this._animate()},_addStepToTimeline:function(e,t){var n=.75;for(var r=0,i=this._slidesArray.length;r<i;r++)this._timeline.fromTo(this._slidesArray[r],n,{x:(r+1*e)*this._widthSlide},{ease:Linear.easeNone,force3D:!0,x:r*this._widthSlide},n*t)},_animate:function(){this._isAnimating=!0,this.trigger("transition:start",{id:this._currentSlideId}),TweenMax.to(this._timeline,.75,{ease:Power2.easeInOut,progress:1,onComplete:this._animateOnCompleteHandler})},_reorderSlides:function(){for(var e=0,t=this.ui.slides.length;e<t;e++)this._slidesArray.push(this.ui.slides[e]);var n=2;for(var r=0;r<n;r++)this._slidesArray.unshift(this._slidesArray.pop())},_positionSlides:function(){for(var e=0,t=this._slidesArray.length;e<t;e++)TweenMax.set(this._slidesArray[e],{x:e*this._widthSlide})},_getWidthSlide:function(){this._widthSlide=this.ui.slides[0].offsetWidth+this.MARGIN_SLIDE||0},_setOffsetSlider:function(){this.el.style.left=-this._widthSlide*2+"px"},_resize:function(){this._getWidthSlide(),this._setOffsetSlider(),this._positionSlides()},_resizeHandler:function(){this._resize()},_animateOnCompleteHandler:function(e){this._isAnimating=!1,this.trigger("transition:complete")}})}),define("app/modules/GalleryModule",["superhero","app/utils/GestureManager","app/utils/ResizeManager","app/views/components/CaseLazyComponent","app/views/components/PaginatorComponent","app/views/components/GalleryComponent"],function(e,t,n,r,i,s){return r.extend({MARGIN_SLIDE:64,ui:{buttons:".button-gallery-navigation",slides:".list-item"},events:{"click .button-paginator":"_buttonClickHandler","click .button-gallery-navigation--next":"_clickNavigationNextHandler","click .button-gallery-navigation--previous":"_clickNavigationPreviousHandler"},components:{gallery:{selector:".section-image-gallery-slider-list",module:s},paginator:{selector:".section-image-gallery-slider-paginator",module:i}},onInitializedLazy:function(){this._gestureManager=new t({el:this.el}),this._resize(),this._setupEventListerners()},_setupEventListerners:function(){this.listenTo(n,"resize",this._resizeHandler),this.listenTo(this._gestureManager,"swipe:left",this._swipeLeftHandler),this.listenTo(this._gestureManager,"swipe:right",this._swipeRightHandler),this.listenTo(this.components.gallery,"transition:start",this._galleryTransitionStartHandler),this.listenTo(this.components.gallery,"transition:complete",this._galleryTransitionCompleteHandler)},_next:function(){this.components.gallery.next()},_previous:function(){this.components.gallery.previous()},_resize:function(){this._setWidthNavigationButtons()},_setWidthNavigationButtons:function(){var e=(n.viewportWidth()-this.ui.slides[0].offsetWidth)/2-this.MARGIN_SLIDE;for(var t=0,r=this.ui.buttons.length;t<r;t++)this.ui.buttons[t].style.width=e+"px"},_buttonClickHandler:function(e){var t=parseInt(e.currentTarget.dataset.index);this.components.paginator.select(t),this.components.gallery.goto(t)},_clickNavigationNextHandler:function(){this._next()},_clickNavigationPreviousHandler:function(){this._previous()},_swipeLeftHandler:function(){this._next()},_swipeRightHandler:function(){this._previous()},_resizeHandler:function(){this._resize()},_galleryTransitionStartHandler:function(e){this.components.paginator.select(e.id),this.components.paginator.lock()},_galleryTransitionCompleteHandler:function(){this.components.paginator.unlock()}})}),define("app/views/components/CaseSectionComponent",["superhero","app/utils/ScrollManager"],function(e,t){return e.Component.extend({ui:{animationElements:"[data-animation-offset]"},initialize:function(){_.bindAll(this,"_elementInViewportHandler","_timeoutHandler")},onInitialized:function(){this._timeout=setTimeout(this._timeoutHandler,100)},onClose:function(){this._timeline&&this._timeline.kill(),this._timeline=null,this._timeout&&clearTimeout(this._timeout)},_setupAnimations:function(){var e;this._timeline=new TimelineMax({paused:!0});if(this.ui.animationElements.length>1)for(var t=0,n=this.ui.animationElements.length;t<n;t++)e=this.ui.animationElements[t],this._addItemToTimeline(e);else this._addItemToTimeline(this.ui.animationElements)},_addItemToTimeline:function(e){var t=parseFloat(e.getAttribute("data-animation-offset"));e.style.opacity=0,this._timeline.fromTo(e,.5,{y:80},{y:0,clearProps:"y",force3D:!0,ease:Power2.easeOut},t),this._timeline.fromTo(e,.2,{alpha:0},{alpha:1,clearProps:"alpha",force3D:!0,ease:Power1.easeIn},t+.03)},_elementInViewportHandler:function(e){this._timeline&&this._timeline.play()},_timeoutHandler:function(){this.ui.animationElements&&Settings.isDesktop&&(this._setupAnimations(),t.registerElementScrollNotification(this.el,this._elementInViewportHandler,350))}})}),define("app/views/components/CaseFooterComponent",["superhero","app/models/CaseCollection","app/utils/ScrollManager","app/views/components/ArrowIconComponent"],function(e,t,n,r){return e.View.extend({ui:{titlePrevious:".case-footer-button-content-title--previous",titleNext:".case-footer-button-content-title--next",clientPrevious:".case-footer-button-content-client--previous",clientNext:".case-footer-button-content-client--next",buttonPrevious:".button-case-footer--previous",buttonNext:".button-case-footer--next",backgroundPrevious:".case-footer-button-background--previous",backgroundNext:".case-footer-button-background--next",overlays:".case-footer-button-overlay"},events:{"click .case-footer-button":"_buttonClickHandler","mouseenter .case-footer-button":"_buttonMouseEnterHandler","mouseleave .case-footer-button":"_buttonMouseLeaveHandler"},components:{arrows:{selector:".case-footer-sprite-animation-arrow",module:r}},onInitialized:function(){this._addData(),this._showArrows()},_addData:function(){var e=t.getPreviousModel();this.ui.titlePrevious.textContent=e.get("title"),this.ui.clientPrevious.textContent=e.get("client"),this.ui.buttonPrevious.href="/work/"+e.get("slug"),this.ui.backgroundPrevious.style.backgroundImage="url("+e.get("image")+")";var n=t.getNextModel();this.ui.titleNext.textContent=n.get("title"),this.ui.clientNext.textContent=n.get("client"),this.ui.buttonNext.href="/work/"+n.get("slug"),this.ui.backgroundNext.style.backgroundImage="url("+n.get("image")+")"},_showArrows:function(){this.components.arrows[0].show(),this.components.arrows[1].show()},_buttonClickHandler:function(e){n.scrollTo(0,0,0)},_buttonMouseEnterHandler:function(e){var t=e.currentTarget.dataset.index;TweenMax.to(this.ui.overlays[t],.2,{alpha:.4,ease:Power0.easeNone}),this.components.arrows[t].hover()},_buttonMouseLeaveHandler:function(e){var t=e.currentTarget.dataset.index;TweenMax.to(this.ui.overlays[t],.1,{alpha:1,ease:Power0.easeNone})}})}),define("app/views/pages/CaseDetailView",["superhero","app/utils/ScrollManager","app/modules/VideoModule","app/modules/GalleryModule","app/views/components/CaseSectionComponent","app/views/components/CaseFooterComponent","app/views/components/MenuIconComponent"],function(e,t,n,r,i,s,o){return e.View.extend({className:"page page-case-detail",ui:{sections:".section"},components:{section:{selector:".section",module:i},video:{selector:".section-video",module:n},gallery:{selector:".section-image-gallery",module:r},menuIcon:{selector:".button-main-menu",module:o},footer:{selector:".case-footer",module:s}}})}),define("app/utils/ScrollSnap",["underscore","superhero","app/utils/ScrollManager"],function(e,t,n){return t.Module.extend({INPUT_TOUCH:"touch",INPUT_SCROLL:"scroll",_activeSnapPoint:0,initialize:function(t){e.bindAll(this,"_calculateDraggableSnap","_onDragHandler","snapToCurrentPoint"),this.el=t.el,this._mousewheelContainer=t.mousewheelContainer||this.el,this._inputType=t.inputType||this.INPUT_SCROLL,this.updateSnapPoints(t.snapPoints||[]),this.updateFreeScrollRanges(t.freeScrollRanges||[]),this._inputType===this.INPUT_SCROLL?this._setupScroll():this._setupTouch()},_setupScroll:function(){Settings.isDesktop&&n.enableMousewheel(this._mousewheelContainer),this._setupScrollEventListeners()},_setupTouch:function(){var e={type:"y",edgeResistance:.5,throwProps:!0,bounds:this.el.parentNode,onDrag:this._onDragHandler,onThrowUpdate:this._onDragHandler,zIndexBoost:!1,minimumMovement:6};Settings.isMobile||(e.snap=this._calculateDraggableSnap),Draggable.create(this.el,e),this._draggable=Draggable.get(this.el)},_setupScrollEventListeners:function(){this.listenTo(n,"scroll",this._scrollManagerScrollHandler),this.listenTo(n,"scroll:end",this._scrollManagerScrollEndHandler),this.listenTo(n,"mousewheel",this._scrollManagerMousewheelHandler)},onClose:function(){this._draggable&&(this._draggable.kill(),this._draggable=null),Settings.isDesktop&&n.disableMousewheel()},updateSnapPoints:function(e){this._snapPoints=e,this._hasSnapPoints=this._snapPoints.length>0},updateFreeScrollRanges:function(e){this._freeScrollRanges=e,this._hasFreeScrollRanges=this._freeScrollRanges.length>0},snapToNextPoint:function(){var e=Math.min(this._activeSnapPoint+1,this._snapPoints.length-1);this.snapToPoint(e)},snapToPreviousPoint:function(){var e=Math.max(this._activeSnapPoint-1,0);this.snapToPoint(e)},snapToClosestPoint:function(e){var t=this._findClosestSnapPoint(e);this.snapToPoint(t)},snapToCurrentPoint:function(){this.snapToPoint(this._activeSnapPoint)},snapToPoint:function(e){this.moveToPosition(this._snapPoints[e])},moveToPosition:function(e,t){if(this._inputType===this.INPUT_SCROLL)n.scrollTo(0,e||0,t);else{t=t===undefined?1:t,TweenMax.killTweensOf(this.el);var r=this;TweenMax.to(this.el,t,{y:e,onUpdate:function(){r._draggable.update(),r._triggerUpdateEvent(-r._draggable.y)}})}this._activeSnapPoint=this._findClosestSnapPoint(-e)},getScrollHeight:function(){return this.el.scrollHeight},_scrollOrSnap:function(e,t){var r=n.getScrollTop()+t;this._isInScrollableSection(r)||!this._hasSnapPoints?n.scrollTop(r):Math.abs(t)>20&&(e===n.DIRECTION_DOWN?this.snapToNextPoint():this.snapToPreviousPoint())},_findClosestSnapPoint:function(e){var t,n,r,i=-1;for(var s=0,o=this._snapPoints.length;s<o;s++){t=this._snapPoints[s],n=Math.abs(-t-e);if(n<i||i===-1)i=n,r=s}return r},_calculateDraggableSnap:function(e){return this._isInScrollableSection(-this._draggable.y)&&this._isInScrollableSection(-e)?e:this._snapPoints[this._findClosestSnapPoint(-e)]},_isInScrollableSection:function(e){var t;for(var n=0,r=this._freeScrollRanges.length;n<r;n++){t=this._freeScrollRanges[n];if(-e<t.start&&-e>t.end)return!0}return!1},_applyScroll:function(e){TweenMax.set(this.el,{y:-e})},_triggerUpdateEvent:function(e){this._activeSnapPoint=this._findClosestSnapPoint(e),this.trigger("update",{y:e})},_scrollManagerScrollHandler:function(e){this._applyScroll(e.y),this._triggerUpdateEvent(e.y)},_scrollManagerScrollEndHandler:function(e){this._hasSnapPoints&&!this._isInScrollableSection(e.y)&&this.snapToClosestPoint(e.y)},_scrollManagerMousewheelHandler:function(e){e.animating||this._scrollOrSnap(e.direction,e.deltaY)},_onDragHandler:function(e){this._triggerUpdateEvent(-this._draggable.y)}})}),define("app/modules/AboutBackgroundModule",["underscore","superhero","three","projector","canvasrenderer","detector","copyshader","vignetteshader","shaderpass","renderpass","maskpass","filmpass","filmshader","glitchpass","effectcomposer","app/utils/ResizeManager","app/utils/ScrollManager"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){return t.Module.extend({canRender:!1,numFilesToLoad:0,filesLoaded:0,fogSettings:{near:14,far:15,color:0},objects:{background:{path:"/static/three/background.js",object:null,geom:null,geomBase:null,canMouseMoveTimer:null,canMouseMove:!0},bolt:{path:"/static/three/icon-bolt.js",object:null,geom:null,geomBase:null,canMouseMoveTimer:null,canMouseMove:!1},eye:{path:"/static/three/icon-eye.js",object:null,geom:null,geomBase:null,canMouseMoveTimer:null,canMouseMove:!1},hand:{path:"/static/three/icon-hand.js",object:null,geom:null,geomBase:null,canMouseMoveTimer:null,canMouseMove:!1}},mouse:{x:0,y:0},initialize:function(t){e.bindAll(this,"_update","_handleResize","_handleMouseMove","_load","_loadComplete","_loadCompleteAll","_tickHandler"),this.isWebGL=Detector.webgl?!0:!1,Settings.os=="AndroidOS"&&(this.isWebGL=!1),this.el=t.el,this.loader=new THREE.JSONLoader,this._build()},close:function(){this.canRender=!1,this._removeEventListeners()},animateBackgroundIn:function(){this._animateBackgroundIn(this.objects.background)},animateBackgroundOut:function(){this._animateBackgroundOut(this.objects.background)},animateIconBoltIn:function(){this._animateIconIn(this.objects.bolt)},animateIconBoltOut:function(){this._animateIconOut(this.objects.bolt)},animateIconEyeIn:function(){this._animateIconIn(this.objects.eye)},animateIconEyeOut:function(){this._animateIconOut(this.objects.eye)},animateIconHandIn:function(){this._animateIconIn(this.objects.hand)},animateIconHandOut:function(){this._animateIconOut(this.objects.hand)},_setViewport:function(){var e=window.innerWidth,t=window.innerHeight;this._vw={x:0,y:0,width:e,height:t}},_build:function(){this._setViewport(),this._createScene(),this._createCamera(),this._createRenderer(),this._createComposer(),this._load()},_load:function(){this.numFilesToLoad=4,this.loader.load(this.objects.background.path,function(e){this.objects.background.geomBase=e.clone(),this.objects.background.geom=e,this._loadComplete()}.bind(this)),this.loader.load(this.objects.bolt.path,function(e){this.objects.bolt.geomBase=e.clone(),this.objects.bolt.geom=e,this._loadComplete()}.bind(this)),this.loader.load(this.objects.eye.path,function(e){this.objects.eye.geomBase=e.clone(),this.objects.eye.geom=e,this._loadComplete()}.bind(this)),this.loader.load(this.objects.hand.path,function(e){this.objects.hand.geomBase=e.clone(),this.objects.hand.geom=e,this._loadComplete()}.bind(this))},_loadComplete:function(){this.filesLoaded++,this.filesLoaded==this.numFilesToLoad&&!this.loadIsDone&&(this.loadIsDone=!0,this._loadCompleteAll())},_loadCompleteAll:function(){this.objects.background.object=this.background=this._createBackground(this.objects.background.geom),this.scene.add(this.background),this.pattern=this._createPattern(),this.scene.add(this.pattern),this.objects.bolt.object=this._createObject(this.objects.bolt.geom),this.objects.eye.object=this._createObject(this.objects.eye.geom),this.objects.hand.object=this._createObject(this.objects.hand.geom),this.container=new THREE.Object3D,this.container.add(this.objects.bolt.object),this.container.add(this.objects.eye.object),this.container.add(this.objects.hand.object),this.scene.add(this.container),this.lightBackground=new THREE.PointLight(16777215,1,10),this.lightBackground.position.set(0,0,0),this.scene.add(this.lightBackground),this.light=new THREE.PointLight(16777215,1,6),this.light.position.set(0,0,6),this.scene.add(this.light),this._resize(),this._setupEventListeners()},_setupEventListeners:function(){this.listenTo(v,"resize",this._handleResize),this.listenTo(v,"resize:complete",this._handleResize),document.addEventListener("mousemove",this._handleMouseMove),TweenMax.ticker.addEventListener("tick",this._tickHandler)},_removeEventListeners:function(){document.removeEventListener("mousemove",this._handleMouseMove),TweenMax.ticker.removeEventListener("tick",this._tickHandler)},_tickHandler:function(){this.canRender&&this._update()},_handleResize:function(){this._resize()},_resize:function(){this._setViewport(),Settings.agent=="mobile"||this._vw.width<720?this.canRender=!1:(this.canRender===!1&&(this.canRender=!0),this.camera.aspect=this._vw.width/this._vw.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this._vw.width,this._vw.height),this.composer.setSize(this._vw.width,this._vw.height))},_handleMouseMove:function(e){var t=e.clientX||e.pageX,n=e.clientY||e.pageY;t-=this._vw.width/2,n-=this._vw.height/2,this.mouse.x=t,this.mouse.y=n},_createScene:function(){this.scene=new THREE.Scene,this.scene.fog=new THREE.Fog(this.fogSettings.color,this.fogSettings.near,this.fogSettings.far)},_createCamera:function(){this.camera=new THREE.PerspectiveCamera(75,this._vw.width/this._vw.height,.1,1e3),this.camera.position.set(0,0,10),this.camera.lookAt(new THREE.Vector3(0,0,0))},_createRenderer:function(){this.isWebGL?this.renderer=new THREE.WebGLRenderer({antialias:!1,devicePixelRatio:1}):this.renderer=new THREE.CanvasRenderer({antialias:!1,devicePixelRatio:1}),this.renderer.setClearColorHex(0,0),this.renderer.setSize(this._vw.width,this._vw.height),this.el.appendChild(this.renderer.domElement)},_createComposer:function(){this.composer=new THREE.EffectComposer(this.renderer),this.composer.addPass(new THREE.RenderPass(this.scene,this.camera)),filmPass=new THREE.ShaderPass(THREE.FilmShader),filmPass.uniforms.time.value=.05,filmPass.uniforms.sCount.value=0,filmPass.uniforms.sIntensity.value=.15,filmPass.uniforms.nIntensity.value=.15,filmPass.uniforms.grayscale.value=0,glitchPass=new THREE.GlitchPass,vignettePass=new THREE.ShaderPass(THREE.VignetteShader),vignettePass.uniforms.offset.value=.6,vignettePass.uniforms.darkness.value=1,vignettePass.renderToScreen=!0,this.composer.addPass(filmPass),this.composer.addPass(glitchPass),this.composer.addPass(vignettePass)},_createBackground:function(e){var t=new THREE.Object3D;this.isWebGL||(t.visible=!1);var n=new THREE.Mesh(e,new THREE.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:1,color:"white",transparent:!0,opacity:.05,depthTest:!1,depthWrite:!1}));n.position.z=2;var r=new THREE.Mesh(e,new THREE.MeshLambertMaterial({color:16777215,transparent:!0,opacity:.3,depthTest:!1,depthWrite:!1,shading:THREE.SmoothShading,side:THREE.BackSide}));return r.position.z=2,t.add(r),t.add(n),t},_createPattern:function(){var e=new THREE.Object3D,t=THREE.ImageUtils.loadTexture("/static/three/pattern.jpg");t.wrapS=t.wrapT=THREE.RepeatWrapping,t.repeat.set(12,12);var n=new THREE.PlaneGeometry(50,50),r=new THREE.MeshBasicMaterial({transparent:!0,opacity:.8,map:t,blending:THREE.AdditiveBlending,depthWrite:!1,depthTest:!1});return e.position.z=-2,e.add(new THREE.Mesh(n,r)),e},_createObject:function(e){var t=new THREE.Object3D;t.visible=!1,t.position.z=-8;var n=new THREE.Mesh(e,new THREE.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:2,color:"white",transparent:!0,opacity:.05,depthTest:!1,depthWrite:!1})),r=new THREE.Mesh(e,new THREE.MeshLambertMaterial({color:16777215,transparent:!0,opacity:.3,depthTest:!1,depthWrite:!1,shading:THREE.SmoothShading}));return t.add(r),t.add(n),t},_animateBackgroundIn:function(e){e.object&&(e.object.children[0].material.opacity=.3,e.object.children[1].material.opacity=.05)},_animateBackgroundOut:function(e){e.object&&(e.object.children[0].material.opacity=.2,e.object.children[1].material.opacity=.02)},_animateIconIn:function(e){e.object.visible=!0,e.canMouseMove=!1,e.canMouseMoveTimer=setTimeout(function(){e.canMouseMove=!0},700),TweenMax.to(e.object.position,.3,{z:2,ease:Expo.easeIn,overwrite:"all"});var t=0,n=0;for(j=0;j<e.geom.vertices.length;j++)t=e.geom.vertices[j],vBase=e.geomBase.vertices[j],n=.4,TweenMax.fromTo(t,n,{x:vBase.x+(Math.random()*20-10),y:vBase.y+(Math.random()*20-10),z:vBase.z-5},{delay:Math.random()*.3,x:vBase.x,y:vBase.y,z:vBase.z,ease:Expo.easeOut,overwrite:"all"})},_animateIconOut:function(e){e.canMouseMove=!1,e.canMouseMoveTimer&&clearTimeout(e.canMouseMoveTimer),TweenMax.to(e.object.position,.15,{z:-2,ease:Expo.easeIn,overwrite:"all",onComplete:function(){e.object.visible=!1}});var t=0,n=0;for(j=0;j<e.geom.vertices.length;j++)t=e.geom.vertices[j],vBase=e.geomBase.vertices[j],n=.15,TweenMax.to(t,n,{x:vBase.x+(Math.random()*20-10),y:vBase.y+(Math.random()*20-10),z:vBase.z-5,ease:Expo.easeOut,overwrite:"all"})},_update:function(){if(this.canRender===!1)return;this._mouseFollow(),this._updateCamera(),this._updateIcons(),this._updateLight(),this.isWebGL?this.composer.render():this.renderer.render(this.scene,this.camera)},_updateIcons:function(){for(var e in this.objects){var t=this.objects[e];t.geom.verticesNeedUpdate=!0}},_updateLight:function(){var e={x:this.mouse.x/80,y:-this.mouse.y/80},t=.1;this.light.position.x+=(e.x-this.light.position.x)*t,this.light.position.y+=(e.y-this.light.position.y)*t,this.lightBackground.position.x+=(e.x-this.lightBackground.position.x)*t,this.lightBackground.position.y+=(e.y-this.lightBackground.position.y)*t},_updateCamera:function(){var e={x:-this.mouse.y/2500,y:-this.mouse.x/5e3},t=.3;this.container.rotation.x+=(e.x-this.container.rotation.x)*t,this.container.rotation.y+=(e.y-this.container.rotation.y)*t,this.container.position.x=this.mouse.x/1e3,this.container.position.y=this.mouse.y/1e3},_mouseFollow:function(){var e=this.mouse.x/80,t=-this.mouse.y/80,n,r,i,s,o,u,a,f;for(var l in this.objects){n=this.objects[l];if(n.canMouseMove===!0){r=0;if(l=="background"){s=4,i=3;for(j=0;j<n.geom.vertices.length;j++)r=n.geom.vertices[j],vBase=n.geomBase.vertices[j],o=e-vBase.x,ys=t-vBase.y,a=Math.sqrt(o*o+ys*ys),Math.abs(a)<i?(f=Math.sin(Math.PI*Math.abs(a/i)),r.x=vBase.x-s*o*f/4,r.y=vBase.y-s*ys*f/4):(r.x=vBase.x,r.y=vBase.y)}else{s=4,i=1;for(j=0;j<n.geom.vertices.length;j++)r=n.geom.vertices[j],vBase=n.geomBase.vertices[j],o=e-vBase.x,ys=t-vBase.y,a=Math.sqrt(o*o+ys*ys),Math.abs(a)<i?(f=Math.sin(Math.PI*Math.abs(a/i)),r.x=vBase.x-s*o*f/4,r.y=vBase.y-s*ys*f/4):(r.x=vBase.x,r.y=vBase.y)}}}}})}),define("app/views/pages/ScrollSnapBaseView",["superhero","app/utils/ScrollManager","app/utils/ResizeManager","app/utils/ScrollSnap"],function(e,t,n,r){return e.View.extend({initialize:function(){this.ui.sections=".section",this.ui.scrollSnap=".scroll-snap",_.bindAll(this,"__resizeHandler","__build")},onInitialized:function(){var e=Settings.isDesktop?"scroll":"touch";this.__scrollSnap=new r({el:this.ui.scrollSnap,mousewheelContainer:document.body,inputType:e}),this.__enablePageScrollStyling(),this.__updateSnapArray(),this.__setupEventListeners(),TweenMax.delayedCall(.1,this.__build)},onClose:function(){this.__scrollSnap.close(),this.__scrollSnap=null,clearTimeout(this.__resizeTimeout),this.__disablePageScrollStyling()},__build:function(){this.__resize(),this._transitionIn&&this._transitionIn()},__setupEventListeners:function(){this.listenTo(n,"resize",this.__resizeHandler),this.listenTo(n,"resize:complete",this.__resizeHandler)},__enablePageScrollStyling:function(){this.__setDocumentHeight(),nl.kraftwerk.applicationView.el.style.position="fixed",nl.kraftwerk.applicationView.el.style.height=n.viewportHeight()+"px"},__disablePageScrollStyling:function(){document.body.style.removeProperty("height"),nl.kraftwerk.applicationView.el.style.removeProperty("position"),nl.kraftwerk.applicationView.el.style.removeProperty("height")},__updateSnapArray:function(){this.__scrollArray=[],this.__snapArray=[],this.__sections=this.el.querySelectorAll("[data-snap]");var e,r,i=Settings.isMobile?"snapMobile":"snap";for(var s=0,o=this.__sections.length;s<o;s++){e=this.__sections[s],r=-t._getElementGlobalOffsetTop(e),this.__snapArray.push(r);if(e.dataset[i]=="false"){var u=r,a=-(-r+e.offsetHeight);this.__sections[s+1]&&this.__sections[s+1].dataset[i]=="false"?this.__scrollArray.push({start:u,end:a}):this.__scrollArray.push({start:u,end:a+n.viewportHeight()})}}this.__snapArray=_.uniq(this.__snapArray),this.__snapArray=_.sortBy(this.__snapArray,function(e){return-e})},__setDocumentHeight:function(){document.body.style.height=this.__scrollSnap.getScrollHeight()+"px"},__resizeStage:function(){for(var e=0,t=this.ui.sections.length;e<t;e++)if(!Settings.isMobile||this.ui.sections[e].dataset.snapMobile!="false")this.ui.sections[e].style.height=n.viewportHeight()+"px"},__resize:function(){this.__resizeStage(),this.__setDocumentHeight(),this.__updateSnapArray(),this.__scrollSnap.updateSnapPoints(this.__snapArray),this.__scrollSnap.updateFreeScrollRanges(this.__scrollArray),clearTimeout(this.__resizeTimeout),this.__resizeTimeout=setTimeout(this.__scrollSnap.snapToCurrentPoint,400)},__resizeHandler:function(){this.__resize()}})}),define("app/views/pages/AboutView",["underscore","easeljs","superhero","app/utils/ScrollManager","app/utils/ResizeManager","app/utils/ScrollSnap","app/utils/EventBus","app/modules/AboutBackgroundModule","app/views/pages/ScrollSnapBaseView","app/views/components/SectionIndicatorComponent","app/views/components/ArrowIconComponent","app/views/components/MenuIconComponent"],function(e,t,n,r,i,s,o,u,a,f,l,c){return a.extend({className:"page page-about",template:"pages/about",ui:{sections:".section-about",firstSection:".js-section-first",sectionIndicator:".section-indicator",buttons:".section-indicator-button",pageTitle:".page-title--about",scrollIndicator:".button-scroll-down",visionSection:".about-section-vision",heritageSection:".about-section-heritage",kraftmanshipSection:".about-section-kraftmanship",sideTitle:".page-side-title",animationElements:"[data-animation-offset]"},components:{arrow:{selector:".sprite-animation-arrow",module:l},menuIcon:{selector:".button-main-menu",module:c}},events:{"click .button-scroll-down":"_buttonScrollDownClickHandler","click .button-totop":"_buttonToTopClickHandler"},initialize:function(){Settings.isMobile||a.prototype.initialize.apply(this)},onInitialized:function(){Settings.isMobile||a.prototype.onInitialized.apply(this),r.scrollTop(0),this.addComponent("sectionIndicator",f,".section-indicator",{sections:this.ui.sections});if(!this.backgroundModule&&!Settings.isMobile){var e=document.querySelector(".page-about-background");this.backgroundModule=new u({el:e}),this._showBackgroundStates()}this._setupEventListeners(),this._setupTransitionIn(),Settings.isMobile?(this._expandFirstSection(),this._transitionIn()):this._createSectionTimelines()},onClose:function(){this.backgroundModule&&this.backgroundModule.close(),Settings.isMobile||a.prototype.onClose.apply(this)},transitionOut:function(e){TweenMax.to(this.el,.3,{alpha:0,ease:Power0.easeNone,onComplete:e})},_transitionIn:function(){this._tl.play()},_expandFirstSection:function(){this.ui.firstSection.style.height=~~i.viewportHeight()+"px"},_setupEventListeners:function(){this.listenTo(this.components.sectionIndicator,"indicator:click",this._sectionIndicatorClickHandler),this.listenTo(this.__scrollSnap,"update",this._scrollHandler),this.listenTo(o,"menu:open",this._eventOpenHandler),this.listenTo(o,"menu:close",this._eventCloseHandler)},_setupTransitionIn:function(){this._tl=new TimelineMax({paused:!0}),this._tl.from(this.ui.pageTitle,.45,{y:50,ease:Power2.easeOut},.2),this._tl.from(this.ui.pageTitle,.4,{alpha:0,ease:Power0.easeNone},.23),this._tl.add(this.components.arrow.pulse,.45),this._tl.from(this.ui.sectionIndicator,.3,{alpha:0,ease:Power0.easeNone},.6)},_createSectionTimelines:function(){var e,t,n,r=.6;this._sectionTimelines=[];for(var i=0,s=this.ui.sections.length;i<s;i++){e=new TimelineMax({paused:!0}),t=this.ui.sections[i].querySelectorAll("[data-animation-offset]");for(var o=0,u=t.length;o<u;o++)n=r+parseFloat(t[o].getAttribute("data-animation-offset")),e.fromTo(t[o],.45,{y:30},{y:0,ease:Power2.easeOut},n),e.fromTo(t[o],.2,{alpha:0},{alpha:1,ease:Power0.easeNone},n+.03);this._sectionTimelines.push(e)}},_hideScrollIndicator:function(){if(this._scrollIndicatorHidden)return;this._scrollIndicatorHidden=!0,TweenMax.to(this.ui.scrollIndicator,.2,{autoAlpha:0,ease:Linear.easeNone,onComplete:this.components.sectionIndicator.stop})},_showBackgroundStates:function(e){var t=-i.viewportHeight()/2,n=0,r=this.ui.visionSection.offsetTop+t,s=this.ui.visionSection.offsetHeight-n,o=this.ui.heritageSection.offsetTop+t,u=this.ui.heritageSection.offsetHeight-n,a=this.ui.kraftmanshipSection.offsetTop+t,f=this.ui.kraftmanshipSection.offsetHeight-n;e>=0&&e<r?this.headerActive||(this.headerActive=!0,this.backgroundModule.animateBackgroundIn()):this.headerActive&&(this.headerActive=!1,this.backgroundModule.animateBackgroundOut()),e>o&&e<o+u?this.boltActive||(this.boltActive=!0,this.backgroundModule.animateIconBoltIn()):this.boltActive&&(this.boltActive=!1,this.backgroundModule.animateIconBoltOut()),e>r&&e<r+s?this.eyeActive||(this.eyeActive=!0,this.backgroundModule.animateIconEyeIn()):this.eyeActive&&(this.eyeActive=!1,this.backgroundModule.animateIconEyeOut()),e>a&&e<a+f?this.handActive||(this.handActive=!0,this.backgroundModule.animateIconHandIn()):this.handActive&&(this.handActive=!1,this.backgroundModule.animateIconHandOut())},_snapToPoint:function(e){this.__scrollSnap.snapToPoint(e)},_showSection:function(e){this._sectionTimelines&&this._sectionTimelines[e]&&this._sectionTimelines[e].play()},_scrollHandler:function(e){Settings.isMobile||this._showBackgroundStates(e.y),this.components.sectionIndicator.scrollUpdate(e),e.y>0&&!this._scrollIndicatorHidden&&this._hideScrollIndicator();if(!Settings.isMobile){var t=Math.ceil(e.y/i.viewportHeight());t!==this._activeSectionIndex&&(this._activeSectionIndex=t,this._showSection(this._activeSectionIndex))}},_sectionIndicatorClickHandler:function(e){this._snapToPoint(e)},_buttonScrollDownClickHandler:function(){this._snapToPoint(1)},_buttonToTopClickHandler:function(){this._snapToPoint(0)},_eventOpenHandler:function(e){this.ui.sideTitle&&TweenMax.to(this.ui.sideTitle,.2,{alpha:0,ease:Power0.easeNone})},_eventCloseHandler:function(e){this.ui.sideTitle&&TweenMax.to(this.ui.sideTitle,.2,{alpha:1,ease:Power0.easeNone})}})}),define("app/views/pages/ContactView",["superhero","app/utils/ScrollManager","app/utils/EventBus","app/modules/GlitchBackgroundModule","app/views/components/MenuIconComponent"],function(e,t,n,r,i){return e.View.extend({className:"page page-contact",template:"pages/contact",ui:{email:".contact-button",details:".page-contact-details",socialIcons:".list--social",backgroundCanvas:".page-contact-background",sideTitle:".page-side-title"},events:{"mouseenter .contact-button":"_contactButtonMouseEnterHandler","mouseleave .contact-button":"_contactButtonMouseLeaveHandler"},components:{menuIcon:{selector:".button-main-menu",module:i}},initialize:function(){_.bindAll(this,"_introPlay")},onInitialized:function(){t.scrollTop(0),this._setup(),this._setupEventListeners()},onClose:function(){this.backgroundModule&&this.backgroundModule.close(),this._introTimeline&&this._introTimeline.kill()},transitionOut:function(e){TweenMax.to(this.el,.3,{alpha:0,ease:Power0.easeNone,onComplete:e})},_setup:function(){Settings.isMobile||(this.backgroundModule=new r({el:this.ui.backgroundCanvas})),this._createIntroTimeline()},_setupEventListeners:function(){this.listenTo(n,"menu:open",this._eventOpenHandler),this.listenTo(n,"menu:close",this._eventCloseHandler)},transitionIn:function(e){var t=e.previousFragment==="intro"?0:.4;TweenMax.delayedCall(t,this._introPlay)},_introPlay:function(){this._introTimeline.play()},_createIntroTimeline:function(){this._introTimeline=new TimelineMax({paused:!0}),this._introTimeline.from(this.ui.email,.45,{y:30,ease:Power2.easeOut},0),this._introTimeline.from(this.ui.email,.2,{alpha:0,ease:Power0.easeNone},.03),this._introTimeline.from(this.ui.details,.45,{y:30,ease:Power2.easeOut},.07),this._introTimeline.from(this.ui.details,.2,{alpha:0,ease:Power0.easeNone},.1),this._introTimeline.from(this.ui.socialIcons,.45,{y:30,ease:Power2.easeOut},.14),this._introTimeline.from(this.ui.socialIcons,.2,{alpha:0,ease:Power0.easeNone},.17)},_contactButtonMouseEnterHandler:function(e){TweenMax.to(this.ui.email,.2,{alpha:.7,ease:Power2.easeOut})},_contactButtonMouseLeaveHandler:function(e){TweenMax.to(this.ui.email,.1,{alpha:1,ease:Power1.easeOut})},_eventOpenHandler:function(e){this.ui.sideTitle&&TweenMax.to(this.ui.sideTitle,.2,{alpha:0,ease:Power0.easeNone})},_eventCloseHandler:function(e){this.ui.sideTitle&&TweenMax.to(this.ui.sideTitle,.2,{alpha:1,ease:Power0.easeNone})}})}),define("app/routers/ApplicationRouter",["superhero","app/utils/ScrollManager","app/models/CaseCollection","app/views/pages/IntroView","app/views/pages/WorkView","app/views/pages/CaseView","app/views/pages/CaseDetailView","app/views/pages/AboutView","app/views/pages/ContactView"],function(e,t,n,r,i,s,o,u,a){return e.Router.extend({_routeCount:0,routes:{"":"home",intro:"intro",work:"work","work/:slug":"case",about:"about",contact:"contact","*404":"error404"},initialize:function(){this._setupEventListeners()},_setupEventListeners:function(){this.listenTo(this,"before:route",this._beforeRouteChangeHandler),this.listenTo(this,"route",this._routeChangeHandler),this.listenTo(e.TemplateCache,"template:retrieved",this._templateRetrievedHandler)},isFirstRoute:function(){return this._routeCount<1},intro:function(){e.RegionManager.get("main").show(r)},home:function(){if(this.isFirstRoute()){e.history.navigate("/intro",{trigger:!0});return}var t=n.first();this.case(t.get("slug"))},work:function(){e.RegionManager.get("main").show(i,null,this.getTransitionData()),this._setPageTitle("Work")},"case":function(t){var r=n.getModelBySlug(t);if(!r)return;var i=e.RegionManager.get("main").show(s,{model:r});i.updateHeader(r),e.RegionManager.get("case").clear(),this._templatesLoad([{region:"case",view:o,options:{template:"work/"+t,model:r}}]),(this._fragment!==""||!this.isFirstRoute())&&this._setPageTitle(r.get("title")+" | Work")},about:function(){e.RegionManager.get("main").show(u),this._setPageTitle("About")},contact:function(){e.RegionManager.get("main").show(a,null,this.getTransitionData()),this._setPageTitle("Contact")},_setPageTitle:function(e){var t="Studio Kraftwerk";document.title=e?e+" | "+t:t},_beforeRouteChangeHandler:function(){t.resetElementScrollNotifications()},_routeChangeHandler:function(e){this._routeCount++},_templatesLoad:function(t){this._t=t;for(var n=0,r=this._t.length;n<r;n++)e.TemplateCache.get(this._t[n].options.template)||e.TemplateCache.retrieveTemplate(this._t[n].options.template);this._templatesReady()},_templatesReady:function(){var t=!0;for(var n=0,r=this._t.length;n<r;n++)e.TemplateCache.get(this._t[n].options.template)||(t=!1);t&&this._templatesShow()},_templatesShow:function(){for(var t=0,n=this._t.length;t<n;t++)this._t[t].allowSameView&&e.RegionManager.get(this._t[t].region).allowSameView(),e.RegionManager.get(this._t[t].region).show(this._t[t].view,this._t[t].options)},_templateRetrievedHandler:function(){this._templatesReady()}})}),define("app/manifests/MenuBackgroundManifest",[],function(){return{dimensions:{width:950,height:450},images:["/static/img/sprites/sprite-menu-background-0.png","/static/img/sprites/sprite-menu-background-1.png","/static/img/sprites/sprite-menu-background-2.png","/static/img/sprites/sprite-menu-background-3.png","/static/img/sprites/sprite-menu-background-4.png","/static/img/sprites/sprite-menu-background-5.png"],frames:[[1,1,902,449,0,-24,0],[905,1,902,449,0,-24,0],[1,452,902,449,0,-24,0],[905,452,902,449,0,-24,0],[1,903,902,449,0,-24,0],[905,903,902,450,0,-24,0],[1,1355,902,450,0,-24,0],[905,1355,902,450,0,-24,0],[1,1,902,450,1,-24,0],[905,1,902,450,1,-24,0],[1,453,902,450,1,-24,0],[905,453,902,450,1,-24,0],[1,905,902,450,1,-24,0],[905,905,902,450,1,-24,0],[1,1357,902,450,1,-24,0],[905,1357,902,450,1,-24,0],[1,1,902,450,2,-24,0],[905,1,902,450,2,-24,0],[1,453,902,450,2,-24,0],[905,453,902,450,2,-24,0],[1,905,902,450,2,-24,0],[905,905,902,450,2,-24,0],[1,1357,902,450,2,-24,0],[905,1357,902,450,2,-24,0],[1,1,902,450,3,-24,0],[905,1,902,450,3,-24,0],[1,453,902,450,3,-24,0],[905,453,902,450,3,-24,0],[1,905,902,450,3,-24,0],[905,905,902,450,3,-24,0],[1,1357,902,450,3,-24,0],[905,1357,902,450,3,-24,0],[1,1,902,450,4,-24,0],[905,1,902,450,4,-24,0],[1,453,902,450,4,-24,0],[905,453,902,450,4,-24,0],[1,905,902,450,4,-24,0],[905,905,902,450,4,-24,0],[1,1357,902,450,4,-24,0],[905,1357,902,450,4,-24,0],[1,1,902,450,5,-24,0],[905,1,902,450,5,-24,0],[1,453,902,450,5,-24,0],[905,453,902,450,5,-24,0]],animation:{startFrame:0,endFrame:43}}}),define("app/modules/MenuBackgroundModule",["superhero","app/manifests/MenuBackgroundManifest","app/utils/ResizeManager","app/utils/FileLoader"],function(e,t,n,r){var i={FPS:25};return e.Module.extend({initialize:function(e){e=e||{},this._canvas=e.canvas||undefined,_.bindAll(this,"show","_tickHandler","_updateHandler"),this._fileLoader=new r,this._setup(),this._setupEventListeners()},onClose:function(){this._stage.close(),this._removeEventListeners()},_setup:function(){this._tweenObj={cur:0},this._setDimensions(),this._createStage(),this._createSprite()},_setupEventListeners:function(){TweenMax.ticker.addEventListener("tick",this._tickHandler)},_removeEventListeners:function(){TweenMax.ticker.removeEventListener("tick",this._tickHandler)},show:function(){this._showTween=TweenMax.fromTo(this._tweenObj,43/this.constructor.FPS,{cur:0},{cur:43,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler})},hideInstantly:function(){this._showTween.pause(),this._tweenObj.cur=0,this._updateSprite()},_setDimensions:function(){this._canvas.width=t.dimensions.width,this._canvas.height=t.dimensions.height},_createStage:function(){this._stage=new createjs.Stage(this._canvas),this._stage.enableDOMEvents(!1)},_createSprite:function(){t.images=[this._fileLoader.getFile("menu-background-0"),this._fileLoader.getFile("menu-background-1"),this._fileLoader.getFile("menu-background-2"),this._fileLoader.getFile("menu-background-3"),this._fileLoader.getFile("menu-background-4"),this._fileLoader.getFile("menu-background-5")];var e=new createjs.SpriteSheet(t);this._sprite=new createjs.Sprite(e),this._sprite.x=0,this._sprite.y=0,this._stage.addChild(this._sprite),this._stage.update()},_updateSprite:function(){if(this._tweenObj.cur===this._tweenObj.prev)return!1;this._sprite.gotoAndStop(this._tweenObj.cur),this._tweenObj.prev=this._tweenObj.cur,this._requestStageUpdate()},_updateHandler:function(){this._updateSprite()},_requestStageUpdate:function(){this._updateStage=!0},_tickHandler:function(e){this._stage&&this._updateStage&&(this._updateStage=!1,this._stage.update())}},i)}),define("app/views/components/MenuComponent",["superhero","app/utils/EventBus","app/modules/MenuBackgroundModule","app/views/components/MenuIconComponent"],function(e,t,n,r){return e.View.extend({ui:{backgroundColor:".menu-background-color",background:".menu-background",items:".list-item-menu",buttonFooter:".button-menu-footer",buttonFooterIcon:".button-menu-footer-icon-svg",lines:".button-menu-line",uiOverlay:".ui-overlay",buttonMenuFilter:".button-menu-filter",buttonMenuFilterTurbulence:".button-menu-filter-turbulence"},events:{"click .button-menu":"_clickButtonMenuHandler","mouseenter .button-menu":"_menuButtonMouseEnterHandler","mouseleave .button-menu":"_menuButtonMouseLeaveHandler","mouseenter .button-menu-footer":"_menuFooterButtonMouseEnterHandler","mouseleave .button-menu-footer":"_menuFooterButtonMouseLeaveHandler"},components:{menuIcon:{selector:".button-main-menu",module:r}},initialize:function(){_.bindAll(this,"_closeTweenCompleteHandler")},onInitialized:function(){this._setup(),this._setupEventListeners()},onClose:function(){this._openTimeline&&this._openTimeline.kill()},_setup:function(){this._buildTimelines()},_setupEventListeners:function(){this.listenTo(t,"menu:open",this._eventOpenHandler),this.listenTo(t,"menu:close",this._eventCloseHandler)},_buildTimelines:function(){var e=Settings.isMobile?1:-1;this._openTimeline=new TimelineMax({paused:!0}),this._openTimeline.fromTo(this.ui.backgroundColor,.3,{alpha:0},{alpha:1,ease:Power0.easeNone},0),this._openTimeline.staggerFromTo(this.ui.items,.15,{alpha:0},{alpha:1,ease:Power0.easeNone},.05*e,.25),this._openTimeline.fromTo(this.ui.buttonFooter,.15,{alpha:0},{alpha:1,ease:Power0.easeNone},.3)},_open:function(){Settings.isMobile||this._showUiOverlay(),this._disableScrolling(),this.el.style.visibility="visible",this.el.style.opacity=1,this._closeTimeline&&this._closeTimeline.pause(),this._openTimeline.play(0)},_close:function(){Settings.isMobile||this._hideUiOverlay(),this._enableScrolling(),this._openTimeline.pause(),this._closeTimeline=new TimelineMax({onComplete:this._closeTweenCompleteHandler}),this._closeTimeline.add(new TweenMax.to(this.ui.items,.3,{alpha:0}),0),this._closeTimeline.add(new TweenMax.to(this.ui.buttonFooter,.3,{alpha:0}),0),this._closeTimeline.add(new TweenMax.to(this.ui.backgroundColor,.3,{alpha:0}),.3)},_enableScrolling:function(){document.ontouchmove=function(e){return!0}},_disableScrolling:function(){document.ontouchmove=function(e){e.preventDefault()}},_showUiOverlay:function(){this.ui.uiOverlay.style.visibility="visible",this.ui.uiOverlay.style.opacity=1},_hideUiOverlay:function(){this.ui.uiOverlay.style.visibility="hidden",this.ui.uiOverlay.style.opacity=0},_eventOpenHandler:function(e){this._open()},_eventCloseHandler:function(){this._close()},_clickButtonMenuHandler:function(e){t.trigger("menu:close")},_closeTweenCompleteHandler:function(e){this.el.style.visibility="hidden",this.el.style.opacity=0},_menuButtonMouseEnterHandler:function(e){var t=e.currentTarget.dataset.index;TweenMax.fromTo(this.ui.buttonMenuFilterTurbulence[t],.2,{attr:{baseFrequency:"0.000001 0.000001"}},{attr:{baseFrequency:"0.000001 0.4"}}),TweenMax.fromTo(this.ui.buttonMenuFilterTurbulence[t],.1,{attr:{baseFrequency:"0.000001 0.000001"}},{attr:{baseFrequency:"0.000001 0.4"},delay:.2}),TweenMax.fromTo(this.ui.buttonMenuFilterTurbulence[t],.1,{attr:{baseFrequency:"0.000001 0.4"}},{attr:{baseFrequency:"0.000001 0.000001"},delay:.3});if(e.currentTarget.classList.contains("button-menu--active"))return},_menuButtonMouseLeaveHandler:function(e){if(e.currentTarget.classList.contains("button-menu--active"))return;TweenMax.to(this.ui.lines[e.currentTarget.dataset.index],.1,{scaleX:0,clearProps:"scaleX",ease:Power2.easeIn})},_menuFooterButtonMouseEnterHandler:function(e){TweenMax.to(this.ui.buttonFooterIcon,.2,{fill:"#f9d400",ease:Power0.easeNone})},_menuFooterButtonMouseLeaveHandler:function(e){TweenMax.to(this.ui.buttonFooterIcon,.15,{fill:"white",ease:Power0.easeNone})}})}),define("app/manifests/PrePreloadManifest",[],function(){return{eye:{normal:[{src:"/static/img/sprites/sprite-preloader-eye.png"}]},hand:{normal:[{src:"/static/img/sprites/sprite-preloader-hand.png"}]},lighting:{normal:[{src:"/static/img/sprites/sprite-preloader-lighting-0.png"},{src:"/static/img/sprites/sprite-preloader-lighting-1.png"}]}}}),define("app/manifests/ApplicationManifest",[],function(){var e={normal:[{id:"noise",src:"/static/img/sprites/noise_01.png"},{id:"arrow-white",src:"/static/img/sprites/sprite-arrow-white.png"},{id:"arrow-black",src:"/static/img/sprites/sprite-arrow-black.png"},{id:"menu-icon-white",src:"/static/img/sprites/sprite-menu-icon-white.png"},{id:"menu-icon-black",src:"/static/img/sprites/sprite-menu-icon-black.png"},{id:"menu-background-0",src:"/static/img/sprites/sprite-menu-background-0.png"},{id:"menu-background-1",src:"/static/img/sprites/sprite-menu-background-1.png"},{id:"menu-background-2",src:"/static/img/sprites/sprite-menu-background-2.png"},{id:"menu-background-3",src:"/static/img/sprites/sprite-menu-background-3.png"},{id:"menu-background-4",src:"/static/img/sprites/sprite-menu-background-4.png"},{id:"menu-background-5",src:"/static/img/sprites/sprite-menu-background-5.png"}],retina:[{id:"noise",src:"/static/img/sprites/noise_01.png"},{id:"arrow-white",src:"/static/img/sprites/sprite-arrow-white@2x.png"},{id:"arrow-black",src:"/static/img/sprites/sprite-arrow-black@2x.png"},{id:"menu-icon-white",src:"/static/img/sprites/sprite-menu-icon-white@2x.png"},{id:"menu-icon-black",src:"/static/img/sprites/sprite-menu-icon-black@2x.png"},{id:"menu-background-0",src:"/static/img/sprites/sprite-menu-background-0.png"},{id:"menu-background-1",src:"/static/img/sprites/sprite-menu-background-1.png"},{id:"menu-background-2",src:"/static/img/sprites/sprite-menu-background-2.png"},{id:"menu-background-3",src:"/static/img/sprites/sprite-menu-background-3.png"},{id:"menu-background-4",src:"/static/img/sprites/sprite-menu-background-4.png"},{id:"menu-background-5",src:"/static/img/sprites/sprite-menu-background-5.png"}]};return{get:function(){return this._getPPI()<2?e.normal:e.retina},_getPPI:function(){var e=1,t=window.devicePixelRatio||1;return t>2.5&&(e=3),t>1.5&&(e=2),e}}}),define("app/manifests/PreloaderEyeIconManifest",[],function(){return{dimensions:{width:200,height:200},images:["/static/img/sprites/sprite-preloader-eye.png"],frames:[[1,1,3,3,0,0,0],[6,1,175,37,0,-12,-82],[183,1,175,66,0,-12,-67],[360,1,175,86,0,-12,-57],[537,1,175,98,0,-12,-51],[714,1,175,101,0,-12,-50],[891,1,175,102,0,-12,-49],[1068,1,175,102,0,-12,-49],[1245,1,175,102,0,-12,-49],[1422,1,175,102,0,-12,-49],[1599,1,175,102,0,-12,-49],[1,105,175,102,0,-12,-49],[178,105,175,102,0,-12,-49],[355,105,175,102,0,-12,-49],[532,105,175,102,0,-12,-49],[709,105,175,102,0,-12,-49],[886,105,175,102,0,-12,-49],[1063,105,175,102,0,-12,-49],[1240,105,175,102,0,-12,-49],[1417,105,175,102,0,-12,-49],[1594,105,175,102,0,-12,-49],[1771,105,175,102,0,-12,-49],[1,209,175,102,0,-12,-49],[178,209,175,102,0,-12,-49],[355,209,175,102,0,-12,-49],[532,209,175,102,0,-12,-49],[709,209,175,102,0,-12,-49],[886,209,175,102,0,-12,-49],[1063,209,175,102,0,-12,-49],[1240,209,175,102,0,-12,-49],[1417,209,175,102,0,-12,-49],[1594,209,175,102,0,-12,-49],[1771,209,175,102,0,-12,-49],[1,313,175,102,0,-12,-49],[178,313,175,102,0,-12,-49],[355,313,175,102,0,-12,-49],[532,313,175,102,0,-12,-49],[709,313,175,102,0,-12,-49],[886,313,175,73,0,-12,-64],[1063,313,175,33,0,-12,-84],[1240,313,3,3,0,0,0],[1245,313,175,13,0,-12,-94],[1422,313,175,29,0,-12,-86],[1599,313,175,47,0,-12,-77],[1,417,175,61,0,-12,-70],[178,417,175,66,0,-12,-67],[355,417,175,66,0,-12,-67],[532,417,175,66,0,-12,-67],[709,417,175,66,0,-12,-67],[886,417,175,66,0,-12,-67],[1063,417,175,66,0,-12,-67],[1240,417,175,66,0,-12,-67],[1417,417,175,66,0,-12,-67],[1594,417,175,66,0,-12,-67],[1,485,176,66,0,-11,-67],[179,485,176,66,0,-11,-67],[357,485,176,66,0,-11,-67],[535,485,176,66,0,-11,-67],[713,485,176,66,0,-11,-67],[891,485,175,66,0,-12,-67],[1068,485,175,66,0,-12,-67],[1245,485,175,66,0,-12,-67],[1422,485,175,66,0,-12,-67],[1599,485,175,66,0,-12,-67],[1,553,175,66,0,-12,-67],[178,553,175,66,0,-12,-67],[355,553,175,66,0,-12,-67],[532,553,175,66,0,-12,-67],[709,553,175,66,0,-12,-67],[886,553,175,66,0,-12,-67],[1063,553,175,66,0,-12,-67],[1240,553,175,66,0,-12,-67],[1417,553,175,66,0,-12,-67],[1594,553,175,66,0,-12,-67],[1771,553,175,66,0,-12,-67],[1,621,175,66,0,-12,-67],[178,621,175,66,0,-12,-67],[355,621,175,66,0,-12,-67],[532,621,175,66,0,-12,-67],[709,621,175,67,0,-12,-67],[886,621,175,69,0,-12,-66],[1063,621,175,71,0,-12,-65],[1240,621,175,74,0,-12,-63],[1417,621,175,77,0,-12,-62],[1594,621,175,81,0,-12,-60],[1771,621,175,84,0,-12,-58],[1,707,175,87,0,-12,-57],[178,707,175,91,0,-12,-55],[355,707,175,94,0,-12,-53],[532,707,175,96,0,-12,-52],[709,707,175,98,0,-12,-51],[886,707,175,100,0,-12,-50],[1063,707,175,102,0,-12,-49],[1240,707,175,102,0,-12,-49],[1417,707,175,102,0,-12,-49],[1594,707,175,102,0,-12,-49],[1771,707,175,81,0,-12,-60],[1,811,175,42,0,-12,-79],[178,811,174,7,0,-12,-97],[354,811,3,3,0,0,0],[359,811,175,37,0,-12,-82],[536,811,175,48,0,-12,-76],[713,811,175,53,0,-12,-74],[890,811,175,55,0,-12,-73],[1067,811,175,55,0,-12,-73],[1244,811,175,55,0,-12,-73],[1421,811,175,55,0,-12,-73],[1598,811,175,55,0,-12,-73],[1,868,175,55,0,-12,-73],[178,868,175,55,0,-12,-73],[355,868,175,55,0,-12,-73],[532,868,175,55,0,-12,-73],[709,868,175,55,0,-12,-73],[886,868,175,55,0,-12,-73],[1063,868,175,55,0,-12,-73],[1240,868,175,55,0,-12,-73],[1417,868,175,55,0,-12,-73],[1594,868,175,55,0,-12,-73],[1771,868,175,55,0,-12,-73],[1,925,175,55,0,-12,-73],[178,925,175,55,0,-12,-73],[355,925,175,55,0,-12,-73],[532,925,175,55,0,-12,-73],[709,925,175,55,0,-12,-73],[886,925,175,55,0,-12,-73],[1063,925,175,55,0,-12,-73],[1240,925,175,55,0,-12,-73],[1417,925,175,55,0,-12,-73],[1594,925,175,55,0,-12,-73],[1771,925,175,49,0,-12,-76],[1,982,175,37,0,-12,-82],[178,982,175,17,0,-12,-92],[355,982,175,27,0,-12,-87],[532,982,175,42,0,-12,-79],[709,982,175,52,0,-12,-74],[886,982,175,55,0,-12,-73],[1063,982,175,55,0,-12,-73],[1240,982,175,55,0,-12,-73],[1417,982,175,55,0,-12,-73],[1594,982,175,55,0,-12,-73],[1771,982,175,55,0,-12,-73],[1,1039,175,55,0,-12,-73],[178,1039,175,55,0,-12,-73],[355,1039,175,55,0,-12,-73],[532,1039,175,55,0,-12,-73],[709,1039,175,55,0,-12,-73],[886,1039,175,55,0,-12,-73],[1063,1039,175,55,0,-12,-73],[1240,1039,175,61,0,-12,-70],[1417,1039,175,75,0,-12,-63],[1594,1039,175,91,0,-12,-55],[1771,1039,175,99,0,-12,-51],[1,1140,175,102,0,-12,-49],[178,1140,175,102,0,-12,-49],[355,1140,175,102,0,-12,-49],[532,1140,175,102,0,-12,-49],[709,1140,175,102,0,-12,-49],[886,1140,175,102,0,-12,-49],[1063,1140,175,102,0,-12,-49],[1240,1140,175,102,0,-12,-49],[1417,1140,175,102,0,-12,-49],[1594,1140,175,102,0,-12,-49],[1771,1140,175,102,0,-12,-49],[1,1244,175,102,0,-12,-49],[178,1244,175,102,0,-12,-49],[355,1244,175,102,0,-12,-49],[532,1244,175,102,0,-12,-49],[709,1244,175,102,0,-12,-49],[886,1244,175,81,0,-12,-60],[1063,1244,175,42,0,-12,-79],[1240,1244,3,3,0,0,0],[1245,1244,175,53,0,-12,-74],[1422,1244,175,89,0,-12,-56],[1599,1244,175,101,0,-12,-50],[1,1348,175,101,0,-12,-50],[178,1348,175,102,0,-12,-49],[355,1348,175,101,0,-12,-50],[532,1348,175,101,0,-12,-50],[709,1348,175,102,0,-12,-49],[886,1348,175,101,0,-12,-50],[1063,1348,175,101,0,-12,-50],[1240,1348,175,101,0,-12,-50],[1417,1348,175,101,0,-12,-50],[1594,1348,175,102,0,-12,-49],[1771,1348,175,102,0,-12,-49],[1,1452,175,101,0,-12,-50],[178,1452,175,101,0,-12,-50],[355,1452,175,102,0,-12,-49],[532,1452,175,101,0,-12,-50],[709,1452,175,102,0,-12,-49],[886,1452,175,101,0,-12,-50],[1063,1452,175,101,0,-12,-50],[1240,1452,175,101,0,-12,-50],[1417,1452,175,102,0,-12,-49],[1594,1452,175,102,0,-12,-49],[1771,1452,175,101,0,-12,-50],[1,1556,175,101,0,-12,-50],[178,1556,175,102,0,-12,-49],[355,1556,175,101,0,-12,-50],[532,1556,175,101,0,-12,-50],[709,1556,175,102,0,-12,-49],[886,1556,175,102,0,-12,-49],[1063,1556,175,101,0,-12,-50],[1240,1556,175,102,0,-12,-49],[1417,1556,175,101,0,-12,-50],[1594,1556,175,101,0,-12,-50],[1771,1556,175,101,0,-12,-50],[1,1660,175,101,0,-12,-50],[178,1660,175,101,0,-12,-50],[355,1660,175,101,0,-12,-50],[532,1660,175,102,0,-12,-49],[709,1660,175,102,0,-12,-49],[886,1660,175,101,0,-12,-50],[1063,1660,175,102,0,-12,-49],[1240,1660,175,102,0,-12,-49],[1417,1660,175,102,0,-12,-49],[1594,1660,175,101,0,-12,-50],[1771,1660,175,102,0,-12,-49],[1,1764,175,102,0,-12,-49],[178,1764,175,102,0,-12,-49],[355,1764,175,101,0,-12,-50],[532,1764,175,101,0,-12,-50],[709,1764,175,101,0,-12,-50],[886,1764,175,101,0,-12,-50],[1063,1764,175,101,0,-12,-50],[1240,1764,175,101,0,-12,-50],[1417,1764,175,101,0,-12,-50],[1594,1764,175,53,0,-12,-74],[1771,1764,3,3,0,0,0]],animation:{startFrame:0,endFrame:228}}}),define("app/manifests/PreloaderHandIconManifest",[],function(){return{dimensions:{width:400,height:400},images:["/static/img/sprites/sprite-preloader-hand.png"],frames:[[1,1,130,259,0,-127,-66],[133,1,130,259,0,-127,-66],[265,1,130,259,0,-127,-66],[397,1,130,259,0,-127,-66],[529,1,129,259,0,-128,-66],[660,1,128,259,0,-129,-66],[790,1,126,259,0,-131,-66],[918,1,122,259,0,-135,-66],[1042,1,118,259,0,-139,-66],[1162,1,117,259,0,-140,-66],[1281,1,117,259,0,-140,-66],[1400,1,117,259,0,-140,-66],[1519,1,117,259,0,-140,-66],[1638,1,117,259,0,-140,-66],[1,262,117,259,0,-140,-66],[120,262,117,259,0,-140,-66],[239,262,117,259,0,-140,-66],[358,262,117,259,0,-140,-66],[477,262,117,259,0,-140,-66],[596,262,117,259,0,-140,-66],[715,262,117,259,0,-140,-66],[834,262,117,259,0,-140,-66],[953,262,117,258,0,-140,-67],[1072,262,117,258,0,-140,-67],[1191,262,116,256,0,-141,-69],[1309,262,116,253,0,-141,-72],[1427,262,115,248,0,-142,-77],[1544,262,116,241,0,-141,-84],[1,523,118,238,0,-139,-87],[121,523,120,238,0,-137,-87],[243,523,122,238,0,-135,-87],[367,523,123,238,0,-134,-87],[492,523,125,238,0,-132,-87],[619,523,126,238,0,-131,-87],[747,523,126,238,0,-131,-87],[875,523,126,238,0,-131,-87],[1003,523,127,238,0,-130,-87],[1132,523,127,238,0,-130,-87],[1261,523,127,238,0,-130,-87],[1390,523,127,238,0,-130,-87],[1519,523,127,238,0,-130,-87],[1,763,127,238,0,-130,-87],[130,763,127,238,0,-130,-87],[259,763,127,238,0,-130,-87],[388,763,127,238,0,-130,-87],[517,763,126,234,0,-131,-91],[645,763,126,226,0,-131,-99],[773,763,123,214,0,-134,-111],[898,763,122,204,0,-135,-121],[1022,763,119,218,0,-138,-107],[1143,763,118,228,0,-139,-97],[1263,763,115,236,0,-142,-89],[1380,763,114,242,0,-143,-83],[1496,763,112,246,0,-145,-79],[1610,763,112,250,0,-145,-75],[1,1015,112,253,0,-145,-72],[115,1015,112,255,0,-145,-70],[229,1015,112,257,0,-145,-68],[343,1015,112,258,0,-145,-67],[457,1015,112,258,0,-145,-67],[571,1015,112,259,0,-145,-66],[685,1015,112,259,0,-145,-66],[799,1015,112,259,0,-145,-66],[913,1015,112,259,0,-145,-66],[1027,1015,112,259,0,-145,-66],[1141,1015,112,259,0,-145,-66],[1255,1015,112,259,0,-145,-66],[1369,1015,112,259,0,-145,-66],[1483,1015,113,259,0,-144,-66],[1598,1015,113,259,0,-144,-66],[1,1276,113,259,0,-144,-66],[116,1276,113,259,0,-144,-66],[231,1276,114,259,0,-143,-66],[347,1276,114,259,0,-143,-66],[463,1276,118,259,0,-139,-66],[583,1276,122,259,0,-135,-66],[707,1276,123,259,0,-134,-66],[832,1276,125,259,0,-132,-66],[959,1276,126,259,0,-131,-66],[1087,1276,126,259,0,-131,-66],[1215,1276,127,259,0,-130,-66],[1344,1276,128,259,0,-129,-66],[1474,1276,128,259,0,-129,-66],[1604,1276,128,259,0,-129,-66]],animation:{startFrame:0,endFrame:83}}}),define("app/manifests/PreloaderLightingIconManifest",[],function(){return{dimensions:{width:400,height:400},images:["/static/img/sprites/sprite-preloader-lighting-0.png","/static/img/sprites/sprite-preloader-lighting-1.png"],frames:[[1,1,53,139,0,-188,-125],[56,1,62,162,0,-183,-114],[120,1,69,182,0,-180,-103],[191,1,76,199,0,-177,-95],[269,1,80,214,0,-175,-87],[351,1,85,227,0,-172,-81],[438,1,90,238,0,-170,-75],[530,1,93,247,0,-168,-71],[625,1,96,255,0,-167,-67],[723,1,98,261,0,-166,-64],[823,1,102,265,0,-163,-62],[927,1,106,269,0,-159,-60],[1035,1,114,269,0,-154,-60],[1151,1,122,269,0,-150,-60],[1275,1,128,269,0,-147,-60],[1405,1,136,269,0,-143,-60],[1543,1,145,269,0,-139,-60],[1690,1,153,269,0,-135,-60],[1845,1,159,269,0,-131,-60],[1,272,164,269,0,-129,-60],[167,272,169,269,0,-127,-60],[338,272,173,269,0,-125,-60],[513,272,177,269,0,-123,-60],[692,272,180,269,0,-121,-60],[874,272,185,269,0,-119,-60],[1061,272,186,269,0,-119,-60],[1249,272,189,269,0,-117,-60],[1440,272,192,269,0,-116,-60],[1634,272,194,269,0,-115,-60],[1830,272,194,269,0,-115,-60],[1,543,196,269,0,-114,-60],[199,543,198,269,0,-113,-60],[399,543,199,269,0,-113,-60],[600,543,101,269,0,-164,-60],[703,543,101,269,0,-164,-60],[806,543,101,269,0,-164,-60],[909,543,101,269,0,-164,-60],[1012,543,101,269,0,-164,-60],[1115,543,101,269,0,-164,-60],[1218,543,101,269,0,-164,-60],[1321,543,7,6,0,-211,-347],[1330,543,6,6,0,-212,-347],[1338,543,6,6,0,-212,-347],[1346,543,7,6,0,-211,-347],[1355,543,7,6,0,-211,-347],[1364,543,5,6,0,-212,-347],[1371,543,8,12,0,-210,-339],[1381,543,17,42,0,-201,-309],[1400,543,32,98,0,-185,-254],[1434,543,53,165,0,-164,-186],[1489,543,63,198,0,-155,-153],[1554,543,81,198,0,-156,-153],[1637,543,105,198,0,-156,-153],[1744,543,117,199,0,-156,-153],[1863,543,116,199,0,-157,-153],[1,814,116,208,0,-157,-143],[119,814,116,240,0,-157,-111],[237,814,123,281,0,-150,-71],[362,814,138,314,0,-142,-38],[502,814,153,313,0,-135,-38],[657,814,163,313,0,-130,-38],[822,814,171,313,0,-126,-38],[995,814,177,313,0,-123,-38],[1174,814,183,314,0,-120,-38],[1359,814,187,313,0,-118,-38],[1548,814,192,313,0,-116,-38],[1742,814,194,312,0,-115,-38],[1,1130,196,313,0,-114,-38],[199,1130,117,314,0,-156,-38],[318,1130,118,314,0,-155,-38],[438,1130,118,314,0,-155,-38],[558,1130,118,313,0,-155,-38],[678,1130,118,313,0,-155,-38],[798,1130,119,314,0,-155,-38],[919,1130,116,313,0,-157,-38],[1037,1130,118,313,0,-155,-38],[1157,1130,118,314,0,-155,-38],[1277,1130,117,314,0,-157,-38],[1396,1130,118,313,0,-156,-38],[1516,1130,118,311,0,-156,-38],[1636,1130,117,312,0,-157,-38],[1755,1130,120,313,0,-156,-38],[1877,1130,120,313,0,-155,-38],[1,1446,118,313,0,-155,-38],[121,1446,112,308,0,-159,-41],[235,1446,101,302,0,-165,-43],[338,1446,57,296,0,-211,-46],[397,1446,54,293,0,-211,-48],[453,1446,6,287,0,-211,-51],[461,1446,6,281,0,-211,-54],[469,1446,3,3,0,-213,-348],[474,1446,3,3,0,-213,-348],[479,1446,4,4,0,-213,-348],[485,1446,3,4,0,-213,-348],[490,1446,4,4,0,-213,-348],[496,1446,4,4,0,-213,-349],[502,1446,6,13,0,-211,-340],[510,1446,15,42,0,-202,-311],[527,1446,31,97,0,-186,-256],[560,1446,52,167,0,-165,-186],[614,1446,62,200,0,-155,-153],[678,1446,83,200,0,-155,-153],[763,1446,107,202,0,-155,-152],[872,1446,120,202,0,-155,-152],[994,1446,120,202,0,-155,-152],[1116,1446,120,213,0,-155,-142],[1238,1446,120,247,0,-155,-108],[1360,1446,126,288,0,-149,-67],[1488,1446,138,322,0,-142,-34],[1628,1446,153,323,0,-135,-33],[1783,1446,163,323,0,-130,-33],[1,1,171,323,1,-126,-33],[174,1,177,324,1,-123,-33],[353,1,183,325,1,-120,-32],[538,1,187,325,1,-118,-32],[727,1,192,325,1,-116,-32],[921,1,194,326,1,-115,-31],[1117,1,196,326,1,-114,-31],[1315,1,122,327,1,-154,-31],[1439,1,123,327,1,-153,-31],[1564,1,124,327,1,-153,-31],[1690,1,124,327,1,-153,-31],[1816,1,124,329,1,-153,-30],[1,332,124,329,1,-153,-30],[127,332,124,329,1,-153,-30],[253,332,124,331,1,-153,-29],[379,332,124,331,1,-153,-29],[505,332,124,331,1,-153,-29],[631,332,125,333,1,-152,-28],[758,332,125,333,1,-152,-28],[885,332,125,333,1,-152,-28],[1012,332,125,333,1,-152,-28],[1139,332,125,334,1,-152,-27],[1266,332,125,334,1,-152,-27],[1393,332,125,334,1,-152,-27],[1520,332,125,335,1,-152,-27],[1647,332,125,335,1,-152,-27],[1774,332,126,335,1,-151,-27],[1902,332,126,336,1,-152,-26],[2030,332,3,3,1,0,0]],animation:{startFrame:0,endFrame:139}}}),define("app/modules/PreloaderIconsModule",["superhero","app/manifests/PreloaderEyeIconManifest","app/manifests/PreloaderHandIconManifest","app/manifests/PreloaderLightingIconManifest","app/utils/ResizeManager"],function(e,t,n,r,i){var s={FPS:25};return e.Module.extend({_triggerComplete:!0,initialize:function(e){e=e||{},this._canvas=e.canvas||undefined,this._manifest=this._getManifest(e.type),_.bindAll(this,"_tickHandler","_playCompleteHandler","_updateHandler"),this._setup(),this._setupEventListeners()},onClose:function(){this._stage.close(),this._tween&&this._tween.kill(),this._removeEventListeners()},_setup:function(){this._tweenObj={cur:0},this._setDimensions(),this._createStage(),this._createSprite()},_setupEventListeners:function(){TweenMax.ticker.addEventListener("tick",this._tickHandler)},_removeEventListeners:function(){TweenMax.ticker.removeEventListener("tick",this._tickHandler)},play:function(){var e=this._manifest.animation.endFrame;this._tween=TweenMax.fromTo(this._tweenObj,e/this.constructor.FPS,{cur:0},{cur:e,ease:Power0.easeNone,roundProps:"cur",onUpdate:this._updateHandler,onComplete:this._playCompleteHandler}),TweenMax.fromTo(this._canvas,.5,{alpha:0},{alpha:1,ease:Power0.easeNone})},hideInstantly:function(){this._tween.pause(),this._tweenObj.cur=0,this._updateSprite()},_getManifest:function(e){e=e||"eye";var i={eye:t,hand:n,lighting:r};return i[e]},_setDimensions:function(){var e=1;Settings.isTablet&&(e=.75),Settings.isMobile&&(e=.5),this._canvas.width=this._manifest.dimensions.width,this._canvas.height=this._manifest.dimensions.height,this._canvas.style.width=this._manifest.dimensions.width*e+"px",this._canvas.style.height=this._manifest.dimensions.height*e+"px"},_createStage:function(){this._stage=new createjs.Stage(this._canvas),this._stage.enableDOMEvents(!1)},_createSprite:function(){var e=new createjs.SpriteSheet(this._manifest);this._sprite=new createjs.Sprite(e),this._sprite.x=0,this._sprite.y=0,this._stage.addChild(this._sprite),this._stage.update()},_updateSprite:function(){if(this._tweenObj.cur===this._tweenObj.prev)return!1;this._sprite.gotoAndStop(this._tweenObj.cur),this._tweenObj.prev=this._tweenObj.cur,this._requestStageUpdate()},_playCompleteHandler:function(){this.trigger("animation:complete")},_updateHandler:function(){this._updateSprite()},_requestStageUpdate:function(){this._updateStage=!0},_tickHandler:function(e){this._stage&&this._updateStage&&(this._updateStage=!1,this._stage.update())}},s)}),define("app/views/components/PreloaderComponent",["superhero","app/utils/FileLoader","app/models/CaseCollection","app/manifests/PrePreloadManifest","app/manifests/ApplicationManifest","app/modules/PreloaderIconsModule"],function(e,t,n,r,i,s){return e.Component.extend({ui:{canvas:".preloader-canvas"},initialize:function(){_.bindAll(this,"_hideCompleteHandler","_triggerComplete")},onInitialized:function(){this._setup(),this._loadPreManifest(),this._setupEventListeners()},onClose:function(){this._icon&&this._icon.close()},_setup:function(){this._fileLoader=new t,this._preloadData=i.get(),this._isFirstTime=this._checkFirstTime()},_checkFirstTime:function(){try{if(window.localStorage&&window.localStorage.getItem("intro")=="short")return!1;window.localStorage.setItem("intro","short")}catch(e){0}return!0},_setupEventListeners:function(){this.listenToOnce(n,"sync",this._caseCollectionSyncHandler)},_loadPreManifest:function(){this.listenToOnce(this._fileLoader,"manifest:load:complete",this._preManifestCompleteHandler),this._fileLoader.loadManifest("pre-preloader",this._getPrePreloadManifest(),!0)},_getPrePreloadManifest:function(){var e=["eye","hand","lighting"];this._iconType=e[Math.random()*3>>0];var t=r[this._iconType];return t.normal},_getPPI:function(){var e=1,t=window.devicePixelRatio||1;return t>2.5&&(e=3),t>1.5&&(e=2),e},_hide:function(){this._isFirstTime?this._isManifestLoadComplete&&this._isIconAnimationComplete&&(this._triggerComplete(),TweenMax.to(this.ui.canvas,.2,{alpha:0,ease:Power0.easeNone}),TweenMax.to(this.el,.3,{autoAlpha:0,delay:.2,ease:Power0.easeNone,onComplete:this._hideCompleteHandler})):this._isManifestLoadComplete&&(this.stopListening(this._icon,"animation:complete",this._preloaderIconAnimationCompleteHandler),TweenMax.to(this.ui.canvas,.2,{alpha:0,delay:2.5,ease:Power0.easeNone}),TweenMax.delayedCall(2.8,this._triggerComplete),TweenMax.to(this.el,.3,{autoAlpha:0,delay:3,ease:Power0.easeNone,onComplete:this._hideCompleteHandler}))},_triggerComplete:function(){this.trigger("complete")},_addCaseHeaderImagesToManifest:function(){var e;for(var t=0,r=n.length;t<r;t++)e=n.at(t),e.get("header_image")&&this._preloadData.push({id:e.get("slug"),src:e.get("header_image")}),this._preloadData.push({id:e.get("slug")+"-background",src:e.get("header_background_image")})},_manifestLoadCompleteHandler:function(e){this._isManifestLoadComplete=!0,this._hide()},_caseCollectionSyncHandler:function(e){this._addCaseHeaderImagesToManifest(),this._fileLoader.loadManifest("preloader",this._preloadData,!0)},_preManifestCompleteHandler:function(e){this.listenToOnce(this._fileLoader,"manifest:load:complete",this._manifestLoadCompleteHandler),n.fetch(),this._icon=new s({canvas:this.ui.canvas,type:this._iconType}),this.listenTo(this._icon,"animation:complete",this._preloaderIconAnimationCompleteHandler),this._icon.play()},_preloaderIconAnimationCompleteHandler:function(e){this._isIconAnimationComplete=!0,this._hide(),this._isManifestLoadComplete||this._icon.play()},_hideCompleteHandler:function(e){this.close()}})}),define("app/views/ApplicationView",["superhero","app/utils/FileLoader","app/utils/ScrollManager","app/utils/EventBus","app/views/components/MenuComponent","app/views/components/MenuIconComponent","app/views/components/PreloaderComponent"],function(e,t,n,r,i,s,o){return e.LayoutView.extend({regions:{main:".main"},ui:{main:".main",menu:".list-menu",sideTitle:".case-title-side",mobileNavigation:".mobile-navigation",mobileNavigationBackground:".mobile-navigation-background"},events:{'click a[href^="/"]':"globalClickHandler","click .button-main-logo":"_buttonMainLogoClickHandler"},components:{preloader:{selector:".preloader",module:o}},onInitialized:function(){this._setupEventListeners()},_setupEventListeners:function(){this.listenTo(e.history,"route",this._routeChangehandler),this.listenTo(this.components.preloader,"complete",this._preloaderCompleteHandler),Settings.device.type==="mobile"&&this.listenTo(n,"scroll",this._scrollHandler)},_start:function(){e.history.start({pushState:!0});var t=document.location.pathname.replace(e.history.root,"")+document.location.search;Backbone.history.navigate(t,{trigger:!0})},_updateMenu:function(e){e.search("work")>=0&&(e="work"),this._activeMenuButton&&(this._activeMenuButton.classList.remove("button-menu--active"),TweenMax.set(this._activeMenuButton.querySelector(".button-menu-line"),{scaleX:0})),this._activeMenuButton=this.ui.menu.querySelector('a[href^="/'+e+'"]');if(!this._activeMenuButton)return;this._activeMenuButton.classList.add("button-menu--active"),TweenMax.set(this._activeMenuButton.querySelector(".button-menu-line"),{scaleX:1})},_updateMobileNavigation:function(e){e==="intro"?TweenMax.to(this.ui.mobileNavigation,.2,{alpha:0,ease:Power0.easeNone}):TweenMax.to(this.ui.mobileNavigation,.2,{alpha:1,ease:Power0.easeNone})},_showMobileNavigationBackground:function(){TweenMax.to(this.ui.mobileNavigationBackground,.3,{alpha:.6,ease:Power0.easeNone})},_hideMobileNavigationBackground:function(){TweenMax.to(this.ui.mobileNavigationBackground,.15,{alpha:0,ease:Power0.easeNone})},_routeChangehandler:function(t){var n=e.history.getFragment();this._updateMenu(n),Settings.isMobile&&this._updateMobileNavigation(n)},globalClickHandler:function(t){t.preventDefault(),e.history.navigate(t.currentTarget.pathname,{trigger:!0})},_preloaderCompleteHandler:function(e){this._start(),this.addComponent("menuMenu",i,".menu"),Settings.isMobile&&this.addComponent("menuIcon",s,".mobile-navigation .button-main-menu")},_scrollHandler:function(e){e.y>20?this._showMobileNavigationBackground():this._hideMobileNavigationBackground()},_buttonMainLogoClickHandler:function(e){r.trigger("menu:close")}})}),define("app/main",["superhero","app/routers/ApplicationRouter","app/views/ApplicationView"],function(e,t,n){var r=e.createNameSpace("nl.kraftwerk");r.applicationRouter=new t,r.applicationView=new n({el:document.getElementById("application")})}),require.config({paths:{jquery:"vendor/jquery.custom.min",underscore:"vendor/lodash.min",backbone:"vendor/backbone.min",tweenmax:"vendor/tweenmax.min",draggable:"vendor/draggable.min",throwpropsplugin:"vendor/throwpropsplugin.min",easeljs:"vendor/easeljs.min",preloadjs:"vendor/preloadjs.min",superhero:"vendor/superhero",easeldestroy:"app/utils/EaselDestroy",three:"vendor/three.min",canvasrenderer:"vendor/three/canvasrenderer",projector:"vendor/three/projector",detector:"vendor/three/detector",effectcomposer:"vendor/three/effectcomposer",copyshader:"vendor/three/copyshader",vignetteshader:"vendor/three/vignetteshader",shaderpass:"vendor/three/shaderpass",renderpass:"vendor/three/renderpass",maskpass:"vendor/three/maskpass",filmpass:"vendor/three/filmpass",filmshader:"vendor/three/filmshader",digitalglitch:"vendor/three/digitalglitch",glitchpass:"vendor/three/glitchpass"},shim:{canvasrenderer:{deps:["three"]},projector:{deps:["three"]},effectcomposer:{deps:["three"]},copyshader:{deps:["three"]},vignetteshader:{deps:["three"]},shaderpass:{deps:["three"]},renderpass:{deps:["three"]},maskpass:{deps:["three"]},filmpass:{deps:["three"]},filmshader:{deps:["three"]},digitalglitch:{deps:["three"]},glitchpass:{deps:["three","digitalglitch"]},throwpropsplugin:{deps:["tweenmax"]},draggable:{deps:["tweenmax"]}}}),require(["vendor/polyfills/classlist.min","vendor/polyfills/html5-dataset","vendor/polyfills/requestanimationframe","vendor/polyfills/typedarray","easeljs","easeldestroy","tweenmax","throwpropsplugin","draggable","app/main"],function(){}),define("boot",function(){});